NASA SP-222(08) 
VOLUME II 



NASTRAN® USER'S MANUAL 




JUNE 1986 / 



/¦J ( -'v 



,-.,,.. y 



<NASA-SP-2 22(08)-Vol-2) NASTRAN N93-7I542 

USER'S MANUAL (NASA) 405 p 



Unci as 



Z9/39 0150318 




NASA 



NASA SP-222(08) 
Volume II 




3 1176 01356 4688 



NASTRAN USER'S MANUAL 



June 1986 







For sale from Computer Software Management and Information Center (COSMIC), 
Computer Services Annex, University of Georgia, Athens, Georgia 30602 




COSMIC 

The University of Georgia 
Computer Services Annex 
Athens, GA 3 602 
(404) 542-3265 



NASTRAN USER MANUAL UPDATE NOTE 



The NASTRAN User Manual is scheduled for review 
each year to determine whether updates are 
required. To add your name to the database to 
receive notification when updates are available, 
you will need to complete this form and return to 
COSMIC. This will be the only mailing list for 
keeping users informed about the manual updates. 



Your Name:: 
Company : 



Mailing Address: 



City : 



State: Zip 



June, 1986 



Fold, staple, and 
return this form 
as a self -mailer. 



BUSINESS REPLY MAIL 

FIRST CLASS PERMIT NO. 559 ATHENS, GEORGIA 



POSTAGE WILL BE PAID BY ADDRESSEE 

COSMIC 

The University of Georgia 
Computer Services Annex 
Athens, GA 3 0602 



NO POSTAGE 

NECESSARY 

IF MAILED 

IN THE 

UNITED STATES 



INTRODUCTION 

The User's Manual is one of four manuals that constitute the documentation for NASTRAN, the 
other three being the Theoretical Manual, the Programmer's Manual and the Demonstration Problem 
Manual. Although the User's Manual contains all of the information that is directly associated 
with the solution of problems with NASTRAN, the user will find it desirable to refer to the other 
manuals for assistance in the solution of specific user problems. 

The Theoretical Manual gives an excellent introduction to NASTRAN and presents developments of 
the analytical and numerical procedures that underlie the program. The User's Manual is 
instructive and encyclopedic in nature, but is restricted to those items related to the use of 
NASTRAN that are generally independent of the computing system being used. Computer-dependent 
topics and information that is required for the maintenance and modification of the program are 
treated in the Programmer's Manual. The Programmer's Manual also provides a complete description 
of the program, including the mathematical equations implemented in the code. The Demonstration 
Problem Manual presents a discussion of the sample problems delivered with NASTRAN, thereby 
illustrating the formulation of the different types of problems that can be solved with NASTRAN. 

In addition to the four manuals described above, there is also a NASTRAN User's Guide that 
serves as a handbook for users. It describes all of the NASTRAN features and options and 
illustrates them by examples. Other excellent sources for NASTRAN-related topics are the 
proceedings of the NASTRAN Users' Colloquia (held normally eyery year) which provide a large body 
of information based on user experiences with NASTRAN. 

The User's Manual has recently been completely revised and updated. With a view to facilitate 
easier updating of the manual in the future to keep up with newer releases of NASTRAN, it has now 
been divided into two volumes. 

Volume I consists of seven sections and contains all of the material that was in the old 
single volume, except Section 3. This section has been re-arranged into four sections and forms 
Volume II. In order to avoid confusion, Section 3 of Volume I does not contain anything other than 
a reference to the new Volume II. Also, it should be noted here that, unless explicitly indicated 
otherwise, all references to sections in each volume refer only to sections in that volume . 

NASTRAN uses the finite element approach to structural modeling, wherein the distributed 
physical properties of a structure are represented by a finite number of structural elements which 
are interconnected at a finite number of grid points, to which loads are applied and for which 
displacements are" calculated. The procedures for defining and loading a structural model are 



i (05/30/86) 



described in Volume I, Section 1. This section contains a functional reference for every card that 
is used for structural modeling. 

The NASTRAN Data Deck, including the details for each of the data cards, is described in 
Volume I, Section 2. This section also discusses the NASTRAN control cards that are associated 
with the use of the program. 

As mentioned earlier, Volume I, Section 3 does not contain anything other than a reference to 
Volume II. 

The procedures for using the NASTRAN plotting capability are described in Volume I, Section 4, 
Both deformed and undeformed plots of the structural model are available. Response curves are also 
available for static, transient response, frequency response, modal flutter and modal aeroelastic 
response analyses. 

NASTRAN contains problem solution sequences, called rigid formats. Each of these rigid 
formats is associated with the solution of problems for a particular type of static or dynamic 
analysis. In addition to the rigid format procedures, the user may choose to write his own Direct Matrix 
Abstraction Program (DMAP). This procedure permits the user to execute a series of matrix 
operations of his choice along with any utility modules or executive operations that he may need. 
The rules governing the creation of DMAP programs are described in Volume I, Section 5. 

The NASTRAN diagnostic messages are documented and explained in Volume I, Section 6. The 
NASTRAN Dictionary, in Volume I, Section 7, contains descriptions of mnemonics, acronyms, phrases, 
and other commonly used NASTRAN terms. 

Volume II, Section 1 contains a general description of rigid format procedures. Specific 
instructions and information for the use of each rigid format are given in Volume II, Sections 2, 3 
and 4, which deal with the rigid formats associated with the DISPLACEMENT, HEAT and AER0 
approaches, respectively. 

There is a limited number of sample problems included in the User's Manual. However, a more 
comprehensive set of demonstration problems,, at least one for each of the rigid formats, is 
described in the NASTRAN Demonstration Problem Manual. The data decks are available on tape for 
each of the computer systems on which NASTRAN has been implemented. Samples of the printer output 
and of structure plots and response plots can be obtained by executing these demonstration 
problems. The printer output for these problems is also available on microfiche. 



ii (05/30/86) 



TABLE OF CONTENTS 



Section 



Page No. 



1. RIGID FORMATS 

1.1 GENERAL DESCRIPTION OF RIGID FORMATS 1.1-1 

1.1.1 Input File Processor 1.1-2 

1.1.2 Functional Modules and Supporting DMAP Operations 1.1-4 

1.1.3 Checkpoint/Restart Procedures 1.1-5 

1.1.4 Types of Restarts 1.1-7 

1.1.4.1 Unmodified Restart 1.1-8 

1.1.4.2 Modified Restart 1.1-8 

1.1.4.3 Modified Restart with Rigid Format Switch 1.1-10 

1.1.5 Use of DMAP ALTERs in Restarts 1.1-10 

1.1.6 Rigid Format Output 1.1-11 

1.1.7 Rigid Format Data Base 1.1-13 

1.7.1 Design of the Data Base 1.1-13 

.1.7.2 Implementation of the Data Base 1.1-17 

,1.7.3 Usage of the Data Base 1.1-17 

1.7.4 Development of User Rigid Formats 1.1-18 

,1.7.5 Usage of User-Developed Rigid Formats 1.1-20 



2. DISPLACEMENT RIGID FORMATS 

2.1 STATIC ANALYSIS 2.1-1 

2.1.1 DMAP Sequence for Static Analysis 2.1-1 

2.1.2 Description of Important DMAP Operations for Static Analysis 2.1-9 

2.1.3 Output for Static Analysis 2.1-16 

2.1.4 Case Control Deck for Static Analysis 2.1-16 

2.1.5 Parameters for Static Analysis 2.1-16 

2.1.6 Automatic ALTERs for Automated Multi-stage Substructuring 2.1-19 

2.1.7 Rigid Format Error Messages from Static Analysis 2.1-19 

2.2 STATIC ANALYSIS WITH INERTIA RELIEF 2.2-1 

2.2.1 DMAP Sequence for Static Analysis with Inertia Relief 2.2-1 

2.2.2 Description of Important DMAP Operations for Static Analysis 

with Inertia Relief 2.2-6 

2.2.3 Output for Static Analysis with Inertia Relief 2.2-11 

2.2.4 Case Control Deck for Static Analysis with Inertia Relief 2.2-11 

iii (05/30/86) 



TABLE OF CONTENTS (Continued) 

Section Page No. 

2.2.5 Parameters for Static Analysis with Inertia Relief 2.2-11 

2.2.6 Automatic ALTERs for Automated Multi-stage Substructuring 2.2-13 

2.2.7 Rigid Format Error Messages from Static Analysis 

with Inertia Relief 2.2-13 

2.3 NORMAL MODES ANALYSIS 2.3-1 

2.3.1 DMAP Sequence for Normal Modes Analysis 2.3-1 

2.3.2 Description of Important DMAP Operations for Normal Modes Analysis .. 2.3-6 

2.3.3 Output for Normal Modes Analysis 2.3-11 

2.3.4 Case Control Deck for Normal Modes Analysis 2.3-13 

2.3.5 Parameters for Normal Modes Analysis 2.3-14 

2.3.6 Optional Diagnostic Output for FEER 2.3-15 

2.3.7 The APPEND Feature 2.3-17 

2.3.8 Automatic ALTERs for Automated Multi-stage Substructuring 2.3-18 

2.3.9 Rigid Format Error Messages from Normal Modes Analysis 2.3-18 

2.4 STATIC ANALYSIS WITH DIFFERENTIAL STIFFNESS 2.4-1 

2.4.1 DMAP Sequence for Static Analysis with 

Differential Stiffness 2.4-1 

2.4.2 Description of Important DMAP Operations for Static Analysis 

with Differential Stiffness 2.4-9 

2.4.3 Output for Static Analysis with Differential Stiffness 2.4-17 

2.4.4 Case Control Deck for Static Analysis with Differential Stiffness 2.4-18 

2.4.5 Parameters for Static Analysis with Differential Stiffness 2.4-18 

2.4.6 Rigid Format Error Messages from Static Analysis with 

Differential Stiffness 2.4-19 

2.5 BUCKLING ANALYSIS 2.5-1 

2.5.1 DMAP Sequence for Buckling Analysis 2.5-1 

2.5.2 Description of Important DMAP Operations for Buckling Analysis 2.5-7 

2.5.3 Output for Buckling Analysis 2.5-13 

2.5.4 Case Control Deck for Buckling Analysis 2.5-13 

2.5.5 Parameters for Buckling Analysis 2.5-14 

2.5.6 Optional Diagnostic Output for FEER 2.5-14 

2.5.7 Rigid Format Error Messages from Buckling Analysis 2.5-15 

2.6 PIECEWISE LINEAR STATIC ANALYSIS 2.6-1 

2.6.1 DMAP Sequence for Piecewise Linear Static Analysis 2.6-1 

iv (05/30/86) 



TABLE OF CONTENTS (Continued) 

Section Pa 9 e No - 

2.6.2 Description of Important DMAP Operations for Piecewise Linear 

Static Analysis 2 - 6-7 

2.6.3 Output for Piecewise Linear Static Analysis 2.6-13 

2.6.4 Case Control Deck for Piecewise Linear Static Analysis 2.6-13 

2.6.5 Parameters for Piecewise Linear Static Analysis 2.6-13 

2.6.6 Rigid Format Error Messages from Piecewise Linear Static Analysis ... 2.6-14 

2.7 DIRECT COMPLEX EIGENVALUE ANALYSIS 2.7-1 

2.7.1 DMAP Sequence for Direct Complex Eigenvalue Analysis 2.7-1 

2.7.2 Description of Important DMAP Operations for Direct Complex 

Eigenvalue Analysis 2.7-7 

2.7.3 Output for Direct Complex Eigenvalue Analysis 2.7-13 

2.7.4 Case Control Deck for Direct Complex Eigenvalue Analysis 2.7-15 

2.7.5 Parameters for Direct Complex Eigenvalue Analysis 2.7-16 

2.7.6 Rigid Format Error Messages from Direct Complex Eigenvalue Analysis . 2.7-17 

2.8 DIRECT FREQUENCY AND RANDOM RESPONSE 2.8-1 

2.8.1 DMAP Sequence for Direct Frequency and Random Response 2.8-1 

2.8.2 Description of Important DMAP Operations for Direct Frequency and 

Random Response • • 2.8-9 

2.8.3 Output for Direct Frequency and Random Response 2.8-16 

2.8.4 Case Control Deck for Direct Frequency and Random Response 2.8-16 

2.8.5 Parameters for Direct Frequency and Random Response 2.8-17 

2.8.6 Automatic ALTERS for Automated Multi-stage Substructuring 2.8-18 

2.8.7 Rigid Format Error Messages from Direct Frequency 

and Random Response 2 .8-18 

2.9 DIRECT TRANSIENT RESPONSE • 2.9-1 

2.9.1 DMAP Sequence for Direct Transient Response 2.9-1 

2.9.2 Description of Important DMAP Operations for Direct 

Transient Response 2.9-8 

2.9.3 Output for Direct Transient Response 2.9-15 

2.9.4 Case Control Deck for Direct Transient Response 2.9-15 

2.9.5 Parameters for Direct Transient Response 2.9-16 

2.9.6 The CONTINUE Feature 2.9-17 

2.9.7 Automatic ALTERS for Automated Multi-stage Substructuring 2.9-18 

2.9.8 Rigid Format Error Messages from Direct Transient Response 2.9-18 

v (05/30/86) 



TABLE OF CONTENTS (Continued) 

Section Page No. 

2.10 MODAL COMPLEX EIGENVALUE ANALYSIS 2.10-1 

2.10.1 DMAP Sequence for Modal Complex Eigenvalue Analysis 2.10-1 

2.10.2 Description of Important DMAP Operations for Modal Complex 

Eigenvalue Analysis 2.10-7 

2.10.3 Output for Modal Complex Eigenvalue Analysis 2.10-13 

2.10.4 Case Control Deck for Modal Complex Eigenvalue Analysis 2.10-13 

2.10.5 Parameters for Modal Complex Eigenvalue Analysis 2.10-13 

2.10.6 Optional Diagnostic Output for FEER 2.10-14 

2.10.7 The APPEND Feature 2.10-15 

2.10.8 Rigid Format Error Messages from Modal Complex Eigenvalue Analysis .. 2.10-15 

2.11 MODAL FREQUENCY AND RANDOM RESPONSE 2.11-1 

2.11.1 DMAP Sequence for Modal Frequency and Random Response 2.11-1 

2.11.2 Description of Important DMAP Operations for Modal Frequency and 

Random Response 2.11-9 

2.11.3 Output for Modal Frequency and Random Response 2.11-17 

2.11.4 Case Control Deck for Modal Frequency and Random Response 2.11-17 

2.11.5 Parameters for Modal Frequency and Random Response 2.11-17 

2.11.6 Optional Diagnostic Output for FEER 2.11-18 

2.11.7 The APPEND Feature 2.11-19 

2.11.8 Rigid Format Error Messages from Modal Frequency 

and Random Response 2.11-19 

2.12 MODAL TRANSIENT RESPONSE 2.12-1 

2.12.1 DMAP Sequence for Modal Transient Response 2.12-1 

2.12.2 Description of Important DMAP Operations for Modal 

Transient Response 2.12-8 

2.12.3 Output for Modal Transient Response 2.12-15 

2.12.4 Case Control Deck for Modal Transient Response 2.12-15 

2.12.5 Parameters for Modal Transient Response 2.12-15 

2.12.6 Optional Diagnostic Output for FEER 2.12-17 

2.12.7 The APPEND Feature 2.12-17 

2.12.8 The CONTINUE Feature 2.12-17 

2.12.9 Rigid Format Error Messages from Modal Transient Response 2.12-17 

2.13 NORMAL MODES WITH DIFFERENTIAL STIFFNESS 2.13-1 

2.13.1 DMAP Sequence for Normal Modes with Differential Stiffness 2.13-1 

vi (05/30/86)) 



TABLE OF CONTENTS (Continued) 

c .. Page No. 
Section — a 

2.13.2 Description of Important DMAP Operations for Normal Modes with 
Differential Stiffness 2.13-a 

2.13.3 Output for Normal Modes with Differential Stiffness 2.13-16 

2.13.4 Case Control Deck for Normal Modes with Differential Stiffness 2.13-16 

2.13.5 Parameters for Normal Modes with Differential Stiffness 2.13-17 

2.13.6 Optional Diagnostic Output for FEER 2.13-18 

2.13.7 The APPEND Feature 2.13-18 

2.13.8 Rigid Format Error Messages from Normal Modes with 

Differential Stiffness iMJ-its 

2.14 STATIC ANALYSIS USING CYCLIC SYMMETRY 2- 14 " 1 

2.14.1 DMAP Sequence for Static Analysis Using Cyclic Symmetry 2.14-1 

2.14.2 Description of Important DMAP Operations for Static Analysis Using 

Cycl ic Symmetry c.n-i 

2.14.3 Output for Static Analysis Using Cyclic Symmetry 2.14-12 

2.14.4 Case Control Deck for Static Analysis Using Cycl i C Symmetry 2.14-12 

2.14.5 Parameters for Static Analysis Using Cyclic Symmetry •• 2.14-12 

2.14.6 Rigid Format Error Messages from Static Analysis Using 

Cyclic Symmetry <M4-i4 

2.15 NORMAL MODES ANALYSIS USING CYCLIC SYMMETRY 2.15-1 

2.15.1 DMAP Sequence for Normal Modes Analysis Using Cyclic Symmetry 2.15-1 

2.15.2 Description of Important DMAP Operations for Normal Modes Analysis 

Using Cyclic Symmetry *.it>-b 

2.15.3 Output for Normal Modes Analysis Using Cyclic Symmetry 2.15-10 

2.15.4 Case Control Deck for Normal Modes Analysis Using Cyclic Symmetry ... 2.15-10 

2.15.5 Parameters for Normal Modes Analysis Using Cyclic Symmetry 2.15-10 

2.15.6 Optional Diagnostic Output for FEER 2.15-12 

2.15.7 The APPEND Feature 2.15-12 

2.15.8 Rigid Format Error Messages from Normal Modes Analysis Using 

Cyclic Symmetry iAH-u 

2.16 .STATIC AEROTHERMOELASTIC DESIGN/ANALYSIS OF AXIAL-FLOW COMPRESSORS 2.16-1 

2.16.1 DMAP Sequence for Static Aerothermoelastic Design/Analysis of 

Axial -Flow Compressors «Mo- 

2.16.2 Description of Important DMAP Operations for Static 

Aerothermoelastic Design/Analysis of Axial-Flow Compressors ^.ib-iu 

2.16.3 Output for Static Aerothermoelastic Design/Analysis of Axial -Flow 
Compressors 

vii (05/30/86) 



TABLE OF CONTENTS (Continued) 

Section Pa 9 e No - 

2.16.4 Case Control Deck for Static Aerothem.oelastic Design/Analysis of 

Axial -Flow Compressors ¦ 2.16-20 

2.16.5 Parameters for Static Aerothermoelastic Design/Analysis of Axial- 

Fl ow Compressors 2 . 16-20 

2.16.6 Rigid Format Error Messages from Static Aerothermoelastic Design/ 

Analysis of Axial -Flow Compressors 2.16-22 

3. HEAT RIGID FORMATS 

3.1 STATIC HEAT TRANSFER ANALYSIS 3.1-1 

3.1.1 DMAP Sequence for Static Heat Transfer Analysis 3.1-1 

3.1.2 Description of Important DMAP Operations for Static Heat 

Transfer Analysis 3.1-6 

3.1.3 Output for Static Heat Transfer Analysis 3.1-11 

3.1.4 Case Control Deck for Static Heat Transfer Analysis 3.1-11 

3.1.5 Parameters for Static Heat Transfer Analysis 3.1-11 

3.1.6 Rigid Format Error Messages from Static Heat Transfer Analysis 3.1-12 

3.2 NONLINEAR STATIC HEAT TRANSFER ANALYSIS 3.2-1 

3.2.1 DMAP Sequence for Nonlinear Static Heat Transfer Analysis 3.2-1 

3.2.2 Description of Important DMAP Operations for Nonlinear Static Heat 
Transfer Analysis 3.2-5 

3.2.3 Output for Nonlinear Static Heat Transfer Analysis 3.2-8 

3.2.4 Case Control Deck for Nonlinear Static Heat Transfer Analysis 3.2-8 

3.2.5 Parameters for Nonlinear Static Heat Transfer Analysis 3.2-8 

3.2.6 Rigid Format Error Messages from Nonlinear Static Heat 

Transfer Analysis 3.2-9 

3.3 TRANSIENT HEAT TRANSFER ANALYSIS 3-3-1 

3.3.1 DMAP Sequence for Transient Heat Transfer Analysis 3.3-1 

3.3.2 Description of Important DMAP Operations for Transient Heat Transfer 
Analysis 3.3-7 

3.3.3 Output for Transient Heat Transfer Analysis 3.3-13 

3.3.4 Case Control Deck for Transient Heat Transfer Analysis 3.3-13 

3.3.5 Parameters for Transient Heat Transfer Analysis 3.3-14 

3.3.6 Rigid Format Error Messages from Transient Heat Transfer Analysis ... 3.3-14 
4. AERO RIGID FORMATS 

4.1 BLADE CYCLIC MODAL FLUTTER ANALYSIS 4 - 1 " 1 

4.1.1 DMAP Sequence for Blade Cyclic Modal Flutter Analysis 4.1-1 

viii (05/30/86) 



TABLE OF CONTENTS (Continued) 

Section Page No, 

4.1.2 Description of Important DMAP Operations for Blade Cyclic Modal * 
Flutter Analysis 4.1-9 

4.1.3 Output for Blade Cyclic Modal Flutter Analysis 4.1-17 

4.1.4 Case Control Deck for Blade Cyclic Modal Flutter Analysis 4.1-17 

4.1.5 Parameters for Blade Cyclic Modal Flutter Analysis 4.1-18 

4.1.6 Optional Diagnostic Output for FEER 4.1-20 

4.1.7 The APPEND Feature 4.1-20 

4.1.8 Riqid Format Error Messages from Blade Cyclic Modal Flutter 

Analysis 4.1-20 

4.2 MODAL FLUTTER ANALYSIS 4.2-1 

4.2.1 DMAP Sequence for Modal Flutter Analysis 4.2-1 

4.2.2 Description of Important DMAP Operations for Modal Flutter Analysis . 4.2-8 

4.2.3 Output for Modal Flutter Analysis 4.2-16 

4.2.4 Case Control Deck for Modal Flutter Analysis 4.2-17 

4.2.5 Parameters for Modal Flutter Analysis 4.2-17 

4.2.6 Optional Diagnostic Output for FEER 4.2-18 

4.2.7 The APPEND Feature 4.2-18 

4.2.8 Rigid Format Error Messages from Modal Flutter Analysis 4.2-18 

4.3 MODAL AEROELASTIC RESPONSE 4.3-1 

4.3.1 DMAP Sequence for Modal Aeroelastic Response 4.3-1 

4.3.2 Description of Important DMAP Operations for Modal Aeroelastic 

Response 4.3-8 

4.3.3 Output for Modal Aeroelastic Response 4.3-16 

4.3.4 Case Control Deck for Modal Aeroelastic Response 4.3-17 

4.3.5 Parameters for Modal Aeroelastic Response 4.3-17 

4.3.6 Optional Diagnostic Output for FEER 4.3-19 

4.3.7 The APPEND Feature 4.3-19 

4.3.8 Rigid Format Error Messages from Modal Aeroelastic Response 4.3-19 



ix (05/30/86) 



1. RIGID FORMATS 

1.1 GENERAL DESCRIPTION OF RIGID FORMATS 

The most general way of using NASTRAN is with a user-written Direct Matrix Abstraction 
Program (DMAP). This procedure permits the user to execute a series of matrix operations of his 
choice along with any utility modules or executive operations that he may need. The user may even 
choose to write a module of his own. The rules governing all of these operations are described in 
Volume I, Section 5. 

In order to relieve the user of the necessity of constructing a DMAP sequence for each of his 
problems, a number of such sequences, called rigid formats, have been included with NASTRAN. All 
of these rigid formats are resident on a data base called the Rigid Format Data Base, which is 
described in detail in Section 1.1.7. Each rigid format in this data base consists of a DMAP 
sequence and the associated restart tables. These restart tables are automatically used by the 
program to modify the series of DMAP operations to account for any changes that are made in any 
part of the Data Deck when making a restart, after having previously run all, or a part, of the 
problem. Without such tables, the user would have to carefully modify his DMAP sequence to account 
for the conditions surrounding each restart. The chances for error in making these modifications 
for restart are very great. The restart tables not only relieve the user of the burden of 
modifying his DMAP sequence, but also assure him of a correct and efficient program execution. 

In addition to the DMAP sequence provided with each rigid format, a number of options are 
available, which are subsets of each complete DMAP sequence. Subsets are selected by specifying 
the subset numbers (zero for the complete DMAP sequence) along with the rigid format number on the 
S0L card in the Executive Control Deck. See the description of the S0L card in Volume I, Section 

2.2 for the list of available subsets. 

If the user wishes to modify the DMAP sequence of a rigid format in some manner not provided 
for in the available subsets, he can use the ALTER feature described in Section 2.2. Typical uses 
are to schedule an EXIT prior to completion, in order to check intermediate output, schedule the 
printing of a table or a matrix for diagnostic purposes, and to delete or add a functional module 
to the DMAP sequence. (The manner in which DMAP ALTERS are handled in restarts is discussed in 
Section 1.1.5.) The user should be familiar with the rules for DMAP programming, as described in 
Volume I, Section 5, prior to making ALTERs to a rigid format. 

The following rigid formats for structural analysis are currently included in NASTRAN: 
1. Static Analysis 



1.1-1 (05/30/86) 



RIGID FORMATS 

2. Static Analysis with Inertia Relief 

3. Normal Modes Analysis 

4. Static Analysis with Differential Stiffness 

5. Buckling Analysis 

6. Piecewise Linear Static Analysis 

7. Direct Complex Eigenvalue Analysis 

8. Direct Frequency and Random Response 

9. Direct Transient Response 

10. Modal Complex Eigenvalue Analysis 

11. Modal Frequency and Random Response 

12. Modal Transient Response 

13. Normal Modes Analysis with Differential Stiffness 

14. Static Analysis with Cyclic Symmetry 

15. Normal Modes Analysis with' Cyclic Symmetry 

16. Static Aerothermoelastic Design/Analysis of Axial -Flow Compressors 
The following rigid formats for heat transfer analysis are included in NASTRAN: 

1. Linear Static Heat Transfer Analysis 

3. Nonlinear Static Heat Transfer Analysis 

9. Transient Heat Transfer Analysis 
The following rigid formats for aeroelastic analysis are included in NASTRAN: 

9. Blade Cyclic Modal Flutter Analysis 

10. Modal Flutter Analysis 

11. Modal Aeroelastic Response 

1.1.1 Input File Processor 

The Input File Processor operates in the Preface prior to the execution of the DMAP 
operations in the rigid format. A complete description of the operations in the Preface is given 
in the Programmer's Manual. The main interest here is to indicate the source of data blocks that 
are created in the Preface and hence appear only as inputs in the DMAP sequences of the rigid 
formats. None of the data blocks created by the Input File Processor are checkpointed, as they are 
always regenerated on restart. The Input File Processor is divided into five parts. The first 
part (IFP1) processes the Case Control Deck, the second part (IFP) processes the Bulk Data Deck, 

1.1-2 (05/30/86) 



GENERAL DESCRIPTION OF RIGID FORMATS 

the third part (IFP3) performs additional processing of the bulk data cards associated with the 
conical shell element, and the fourth part (IFP4) performs additional processing of the bulk. data 
cards associated with the fluid element. The fifth section (IFP5) processes data related to 
acoustic cavity analysis. 

IFP1 processes the Case Control Deck and creates the Case Control Data Block (CASECC), the 
Plot Control Data Block (PCDB), and the XY-Plot Control Data Block (XYCDB). IFP1 also examines all 
of the cards, except those associated with plotting, for errors in format or use. If errors are 
detected, they are classed as either fatal or warning, and suitable error messages are provided. 
Reference to Volume I, Section 2.3 will assist the user in correcting errors in the Case Control 
Deck. If the error is fatal, the Executive System will not allow the execution to continue beyond 
the completion of the Preface. 

The Bulk Data Deck is sorted in the Preface, if necessary, before the execution of the second 
part of the Input File Processor. IFP checks all of the bulk, data cards for errors according to 
the rules given for each card in Volume I, Section 2.4. If errors are detected, suitable messages 
are provided to the user. If the error is classed as fatal, the Executive System will not allow 
the execution to continue beyond the completion of the Preface. IFP creates the data blocks that 
are input to the various part of the Geometry Processor (GE0M1, GE0M2, GE0M3 and GE0M4), the 
Element Properties Table (EPT), the Material Properties Table (MPT), the Element Deformation Table 
(EDT), and the Direct Input Table (DIT). 

The third part of the Input File Processor (IFP3) converts the information on the special 
conical shell cards (CC0NEAX, CTRAPAX, CTRIAAX, F0RCEAX, M0MAX, MPCAX, 0MITAX, PC0NEAX, P0INTAX, 
PRESAX, PTRAPAX, PTRfAAX, RINGAX, SECTAX, SPCAX, SUPAX, and TEMPAX) to reflect the number of 
harmonics specified by the user on the AXIC card. This converted information is added to any 
existing information on data blocks GE0M1, GE0M2, GE0M3 and GE0M4. 

The fourth part of the input file processor (IFP4) converts the information on the fluid- 
related cards (AXIF, BDYLIST, CFLUID2, CFLUID3, CFLUID4, DMIAX, FLSYM, FREEPT, FSLIST, GRIDB, 
PRESPT, and RINGFL) to reflect the desired harmonics, boundaries, and matrix input. This converted 
information is added to GE0M1, GE0M2, GE0M4 and MATP00L. 

The fifth part of the input file processor (IFP5) converts the information on the acoustic 
cavity related cards (AXSL0T, CAXIF2, CAXIF3, CAXIF4, CSL0T3, CSL0T4, GRIDF, GRIDS, and SLBDY) to 
equivalent structural scalar points, elements, scalar springs and plotting elements. This 
converted information is added to the GE0M1 and GE0M2 data blocks. 

1.1-3 (05/30/86) 



RIGID FORMATS 

1.1.2 Functional Modules and Supporting DMAP Operations 

The DMAP listings of the rigid formats currently included with NASTRAN are presented in the 
following sections. Following each listing are subsections that deal with the following items for 
each rigid format: 

1. Brief description of important DMAP operations for the rigid format 

2. Output available from the rigid format 

3. Case Control Deck setup for the rigid format 

4. Parameters used in the rigid format 

5. Automatic ALTERs for Automated Multi -Stage Substructuring (if applicable to the rigid 
format) 

6. Rigid format error messages 

7. Any other features peculiar to the rigid format 

Descriptions of all major functional modules are given in the Programmer's Manual. 
Additional information is also given in the Theoretical Manual. Descriptions of all other NASTRAN 
modules are given in Volume I, Section 5. 

The modules in the following list appear repeatedly in the rigid formats. Since the purpose 
of these operations in a rigid format is obvious, they are generally omitted from the descriptions 
of the DMAP operations in the following sections. More complete descriptions of these modules are 
given in Volume I, Section 5. 

1. BEGIN indicates the beginning of the DMAP sequence constituting the rigid format. 

2. END indicates the end of the DMAP sequence constituting the rigid format and causes a 
normal termination when executed. 

3. FILE makes declarations relative to a particular file. 

ABC = TAPE states that file ABC will be assigned as a sequential file. 

DEF = APPEND states that file DEF may be extended as the result of an internal loop 
in the rigid format. 

GHI = SAVE states that file GHI should not be dropped after use as it may be needed 
for subsequent executions of an internal loop. 

4. LABEL specifies a labeled point in the sequence of DMAP instructions. Labels are 
referenced by REPT, JUMP and C0ND instructions. 

5. PARAM performs specified operations on integer DMAP parameters. 

6. PRECHK actuates the automatic generation of explicit CHKPNT instructions. (PRECHK ALL 
immediately and automatically CHKPNTs all output data blocks from each functional module, 
all data blocks mentioned in each PURGE instruction and all secondary data blocks in each 
EQUIV instruction.)* The CHKPNT instruction specifies a list of files to be written on 



* The only exceptions to this are the CASESS, CASEI and CASECC data blocks appearing as 
output in substructure analyses. 

1.1-4 (05/30/86) 



GENERAL DESCRIPTION OF RIGID FORMATS 

the new problem tape (NPTP), including files that may have been purged, either because 
they were not generated in this particular execution or were explicitly purged with a 
PURGE instruction. * 

7. PURGE specifies the names of files that are conditionally dropped based on the parameter 
named. 



1.1.3 Checkpoint/Restart Procedures 

The checkpoint/restart feature available in NASTRAN is a very sophisticated and useful 
capability. The purpose of this feature is to enable a user to checkpoint a NASTRAN run and then 
restart it (with or without changes in data) by executing only those modules that need to be 
executed for the restart. 

There are several situations in which the use of the checkpoint/restart feature may be 
desirable. Some of these are listed below: 

1. The user may wish to perform his analysis task in two or more stages by specifying 
scheduled exits in one or more runs. 

2. The user may want to ensure that unscheduled exits (resulting from such causes as data 
errors, insufficient time s insufficient core or hardware failures) will not require him 
to repeat his entire analysis. 

3. The user may wish to rerun his problem by making limited changes in his data. 
Scheduled exits can be requested at any point in a rigid format by means of the ALTER 

feature. (The manner in which ALTERS are handled in restarts is discussed in Section 1.1.5). An 
exit is scheduled by inserting the following cards in the Executive Control Deck: 

ALTER Kl $ 

EXIT K2 $ 

ENDALTER $ 

where Kl = DMAP statement number after which exit will take place 

and K2 = Number of times EXIT instruction will be skipped before being executed - default is 
zero. For use with loops, where the user wishes to execute the loop K2 times before 
scheduling the exit. 

If the user chooses to restart the problem without making any changes, the Executive System will 

execute an unmodified restart following the last completed checkpoint. 

Unscheduled exits are usually caused by errors on input cards or errors in the structural 

model resulting from missing or inconsistent input data. When such errors are detected, an 

unscheduled exit is performed accompanied with the output of the applicable user error messages. 

Following the correction of the input data errors, a modified restart can be performed. 



1.1-5 (05/30/86) 



RIGID FORMATS 

Unscheduled exits may also occur because of machine failure or insufficient time allowance. 
In these cases, an unmodified restart is usually made following the last completed checkpoint. In 
some cases, where a portion of the problem has been completed, including the output for the 
completed portion, a modified restart must be made following an unscheduled exit due to 
insufficient time allowance. These situations are discussed under Case Control Deck requirements 
in the sections dealing with the individual rigid formats. 

The initial execution of any problem must be made with a complete NASTRAN Data Deck, 
including all of the bulk data. However, all or part of the bulk data may be assembled from 
alternate input sources, such as the User's Master File or a module written by the user to generate 
input. The User's Master File is described in Volume I, Section 2.5 and user generated input is 
discussed in Volume I, Section 2.6. 

For restarts, the Bulk Data Deck consists only of delete cards (see Volume I, Section 2.4) 
and new cards which the user wishes to add. The previous Bulk Data Deck is read from the Old 
Problem Tape. All other parts of the NASTRAN Data Deck, including the Executive Control Deck, the 
Case Control Deck, the BEGIN BULK card and the ENDDATA card must be resubmitted even though no 
changes are made in the control decks and no new bulk data is added. In addition, the RESTART 
cards (or dictionary) punched during the previous execution must be included in the Executive 
Control Deck. When changing rigid formats, the solution number (S0L) must be changed to the number 
of the new rigid format. 

A New Problem Tape (NPTP) is constructed only when checkpointing is requested (CHKPNT YES) in 
the Executive Control Deck. The NPTP should be assigned to a physical tape or other storage device 
that can be dismounted and saved at the conclusion of the execution. At the completion of an 
initial execution, the NPTP contains the input deck, with the bulk data in sorted form, and all of 
the files that were checkpointed during the execution. 

For restarts, the Old Problem Tape (0PTP) is defined as the Problem Tape that was written 
during the previous execution. The NPTP is defined as the Problem Tape written during the current 
execution, beginning with the restart. At the completion of an unmodified restart, the NPTP 
contains the input deck, with the bulk data in sorted form, all files from the 0PTP that are 
necessary to complete the solution, and all of the files checkpointed during the current execution. 
At the completion of a modified restart, the NPTP is similar, except that the input deck is 
modified according to the information submitted for the restart. 



1.1-6 (05/30/86) 



GENERAL DESCRIPTION OF RIGID FORMATS 

1.1.4 Types of Restarts 

The type of a restart is determined automatically by the program by comparing the input data 
of the restart run with that of the checkpoint run. The user need not be concerned about the 
manner in which this is done, but may be interested in knowing the resulting type. 

The types of restarts presently recognized in NASTRAN are summarized in the following table. 

Types of Restarts in NASTRAN 



Restart data 
compared to 
checkpoint 
data 


Resulting type 
of restart 


Applicable environment 


Rigid format 


DMAP 


No effective 
changes 


Unmodified 
restart 


Yes 


Yes 


Effective 
changes only 
to the Case 
Control Deck 
and/or the 
Bulk Data 
Deck 


Modified 
restart 


Yes 


Yes 


Change in 
rigid format 


Modified restart 
with rigid 
format switch 


Yes 


No 



In earlier versions of NASTRAN, an additional type of restart, called the pseudo modified 
restart, was recognized for cases involving changes only in output requests. This is no longer 
done since it is now handled as a special case of the modified restart. 

The manner in which a restart is handled by the program depends on its type and on its 
environment (rigid format or DMAP environment). This is discussed in the following sections. 

An important term that is frequently encountered in the following discussion is the reentry 
point for a t restart. This is defined as the last reentry point specified in the restart 
dictionary. It is an integer equal to the instruction number of the DMAP instruction in the 
checkpoint run at which an unmodified restart will resume execution. (See Volume I, Section 2.2.) 



1.1-7 (05/30/86) 



RIGID FORMATS 

1.1.4.1 Unmodified Restart 

An unmodified restart involves no effective changes to the data. The execution in this type 
of restart resumes at the reentry point. Unmodified restarts in both rigid format and DMAP 
environments are handled in an identical manner. 

It is useful to distinguish between two types of unmodified restarts. These are described 
below. 

- Unmodified restart in which the reentry point is not within a DMAP loop 

This is the simplest type of restart possible. In this case, the execution flags for all DMAP 
instructions prior to the reentry point are turned off and the execution flags for all DMAP 
instructions from the reentry point onwards are turned on. All input files or data blocks required 
for the restart already exist on the 0PTP and will be retrieved. 

- Unmodified restart in which the reentry point is within a DMAP loop. 

In this case, initially , the execution flags for all DMAP instructions prior to the reentry point 
are turned off and the execution flags for all DMAP instructions from the reentry point onwards are 
turned on. This is so indicated in the DMAP source listing. However, subsequently , the DMAP 
instructions prior to the reentry point and within the DMAP loop are recognized and their execution 
flags are turned on. The user is informed about this in the output. Note, however, that the 
execution does resume at the reentry point, even though DMAP instructions prior to this point are 
turned on. DMAP instructions within the DMAP loop and prior to the reentry point are executed only 
if additional passes in the loop need to be executed. If the restart is within the last pass of 
the DMAP loop, obviously DMAP instructions within the loop and prior to the reentry point are not 
executed even though their execution flags are on. 

All input files or data blocks required by the restart already exist on the 0PTP and will be 
retrieved. 

1.1.4.2 Modified Restart 

This type of restart involves one or more effective changes to the data in the Case Control 
Deck and/or in the Bulk Data Deck. 

The heart of the restart logic for modified restarts in the rigid format environment is the 
Module Execution Decision Table (MEDT) associated with each rigid format. The MEDT for each rigid 
format actually comprises three distinct tables. These are the Card Name Restart Table, the Rigid 
Format Change Restart Table and the File Name Restart Table associated with that rigid format. 
(See discussion in Section 1.1.7. See also Sections 1.10 and 7 of the Programmer's Manual.) 

1.1-8 (05/30/86) 



GENERAL DESCRIPTION OF RIGID FORMATS 

In the case of modified restarts in the rigid format environment, all DMAP instructions from 
the reentry points onwards have their execution flags turned on. In addition, this type of restart 
generally requires that certain DMAP instructions prior to the reentry point also be turned on, 
depending on the specific data changes involved. The DMAP instructions that need to be so turned 
on are determined from the Card Name Restart Table. The DMAP source listing provided in the output 
indicates all the DMAP instructions whose execution flags are initially turned on by the above 
procedure. 

Once the DMAP instructions are initially turned on as described above, the program checks to 
see if all of the required input data blocks are either being generated by prior modules or are 
available on the 0PTP for retrieval. If so, no additional DMAP instructions need to be turned on. 
If, however, there are any input data blocks that are neither being generated by prior modules nor 
are available on the 0PTP, the program needs to turn on additional DMAP instructions in order to 
generate the required data blocks. The DMAP instructions that need to be so turned on are 
determined from the File Name Restart Table. 

After the additional DMAP instructions are turned on as described in the above paragraph, the 
process is repeated until it is ensured that all of the required input data blocks are either being 
generated by prior modules or can be retrieved from 0PTP. 

All the DMAP instructions that are turned on as per the above logic {by the use of the File 
Name Restart Table) are identified and listed in the restart output just after the DMAP source 
listing. 

It should be noted that the execution in a modified restart will start at the first module in 
the DMAP sequence whose execution flag is turned on . Generally, this is before the reentry point. 

In the case of modified restarts in the DMAP environment, the effect of changes in the Case 
Control Deck and/or in the Bulk Data Deck on particular modules cannot be determined since the DMAP 
itself is, by definitions not predefined. (An MEDT is meaningless for a DMAP.) Hence, it is 
assumed that the changes will affect the entire DMAP which, therefore, needs to be re-executed. 
This is accomplished in the program by re-setting the reentry point to zero and treating this case 
as an unmodified restart. This causes the entire DMAP to be re-executed. 

Those input files or data blocks that are needed for the restart and that are available on 
the 0PTP are retrieved, just as it is done in the case of modified restarts in the rigid format 
environment. 



1.1-9 (05/30/86) 



RIGID FORMATS . 

1.1.4.3 Modified Restart with Rigid Format Switch 

This type of restart involves a switch from one rigid format to another. It may or may not 
involve effective changes to the data in the Case Control Deck and/or in the Bulk Data Deck. 

The most important point to recognize in this type of restart is that the reentry point is 
quite meaningless since it was determined in relation to another rigid format. This is handled in 
the program by resetting the reentry point to an extremely high value which, for all practical 
purposes, can be considered to be infinite. As a result, all DMAP instructions in the restart are 
considered to be before the reentry point and no DMAP instructions are considered to exist after 
the reentry point. 

Once this important change is made, this type of restart is handled in the program in the 
same manner as a modified restart, with one important modification: the DMAP instructions that are 
initially turned on are determined not only from the Card Name Restart Table, but also from the 
Rigid Format Change Restart Table. 

1.1.5 Use of DMAP ALTERs in Restarts 

Because different types of restarts are handled differently by the program, the user should 
be careful in the use of DMAP ALTERs in restarts. 

In the case of an unmodified restart in which the reentry point is not within a DMAP loop, 
the only DMAP instructions that are flagged for execution are those that are beyond (and include) 
the reentry point. Hence, a DMAP ALTER will be flagged for execution only if it is beyond the 
reentry point and will be ignored if it is before the reentry point.* 

In the case of an unmodified restart in which the reentry point is within a DMAP loop, the 
only DMAP instructions flagged for execution are those that are beyond (and include) the reentry 
point and those that are before the reentry point but within the DMAP loop. Hence, a DMAP ALTER 
will be flagged for execution only if it is beyond the reentry point or before it but within the 
DMAP loop. Otherwise, it will be ignored.* 



* The user can ensure that a DMAP ALTER in an unmodified restart is flagged for execution by 
suitably deleting the latter part of the restart dictionary so that the reentry point is before 
the DMAP ALTER. This, of course, will cause more modules to be executed in the restart. 



1.1-10 (05/30/86) 



GENERAL DESCRIPTION OF RIGID FORMATS 

In the case of a modified restart and a modified restart with rigid format switch, a DMAP 
ALTER will be flagged for execution regardless of its position in the DMAP with respect to ,the 
reentry point. 

1.1.6 Rigid Format Output 

Although most of the rigid format output is optional, some of the printer output is 
automatic. The printer output is designed for 132 characters per line, with the lines per page 
controlled by the NLINES keyword on the NASTRAN card (see Volume I, Section 2.1) and the LINE card 
in the Case Control Deck (see Volume I, Section 2.3). The NLINES and LINE default is set to fit on 
11-inch paper. Optional titles are printed at the top of each page from information in the Case 
Control Deck. These titles may be defined at the subcase level. The pages are automatically dated 
and numbered. 

The output from the data recovery and plot modules is all optional, and its selection is 
controlled by cards in the Case Control Deck. The details of making selections in the Case Control 
Deck are described in Volume I, Section 2.3 for printer and punch output, and in Volume I, Section 
4 for plotter output. Since the outputs from the data recovery and plot modules vary considerably 
with the rigid format, a list of available output is included in the section on the Case Control 
Deck for each rigid format. Information on the force and stress output available for each element 
type is given in Volume I, Section 1.3. 

The first part of the output for a NASTRAN run is prepared during the execution of the 
Preface, prior to the beginning of the DMAP sequence of the rigid format. The following output is 
either automatically or optionally provided during the execution of the Preface: 

1. NASTRAN title page - Two full pages automatic, unless changed with the TITLE0PT keyword 
on the NASTRAN card (see Volume I, Section 2.1) before the Executive Control Deck. 

2. Executive Control Deck echo - Automatic. 

3. Case Control Deck echo - Automatic. 

4. Unsorted Bulk Data Deck echo - Optional, selected in Case Control Deck with the ECH0 
Card. (Automatic in restart runs and in runs employing the User's Master File, unless 
suppressed in the Case Control Deck with the ECH0 card.) 

5. Sorted Bulk Data Deck echo - Automatic, unless suppressed in the Case Control Deck with 
the ECH0 Card. 

6. DMAP listing - Selected with DIAG 14 (or the LIST option on an XDMAP card) in the 
Executive Control Deck. Provides the list of DMAP instructions, including those 
resulting from ALTERs, for the subset of the rigid format being executed. (Automatic in 
restart runs and in runs using the DMAP approach (APP DMAP) or the substructure 
capability (APP DISP, SUBS), unless suppressed by the N0LIST option on an XDMAP card in 
the Executive Control Deck.) 

1.1-11 (05/30/86) 



RIGID FORMATS 

7. Checkpoint Dictionary - Automatic, when operating in the checkpoint mode. A printed echo 
(unless suppressed with the DIA6 9 card in the Executive Control Deck) and punched output 
are prepared for additions to the checkpoint dictionary after the execution of each 
checkpoint. 

When making restarts, the following additional output is automatically prepared during the 

execution of the Preface: 

1. Asterisks {*) are placed beside the DMAP statement numbers of all instructions that are 
flagged for execution in the restart. (It should be emphasized that a DMAP instruction 
marked with the symbol * is only flagged for execution; whether it actually gets executed 
or not is decided by the logic in the DMAP.) 

2. Pluses (+) are placed beside the DMAP statement numbers of all instructions that are 
processed only at DMAP compilation time. (DMAP instructions BEGIN, C0MP0FF, C0MP0N, 
FILE, LABEL, PRECHK and XDMAP are the only instructions that belong to this category.) 

3. Message indicating the bit position activated by a rigid format change. 

4. Message indicating the type of restart (unmodified, modified or modified with rigid 
format switch) . 

5. Table indicating, among other things, the effective data changes (if any) and the 
associated "packed bit positions" that control the restart. The table distinguishes 
between effective changes made to the Case Control Deck and those made to the Bulk Data 
Deck. The reader is referred to the Programmer's Manual for the full interpretation of 
this table. 

6. List of files along with the DMAP instructions that were marked for execution (if any) by 
the File Name Restart Table. 

7. List of files from the Old Problem Tape, including purged files, used to initiate the 
restart. 

A number of fatal errors are detected by the DMAP statements in the various rigid formats. 
These messages indicate the presence of fatal user errors that either cannot be determined by the 
functional modules or can be more effectively detected by the DMAP statements in the rigid format. 
The detection of such an error causes a transfer to a LABEL instruction near the end of the rigid 
format. The text of the message is output and the execution is terminated. These messages will 
always appear at the end of the NASTRAN output. The messages applicable to each rigid format are 
described under the description of that rigid format, 

NASTRAN diagnostic messages are usually identified by numbers. These messages may be either 
program diagnostics or user diagnostics, and they may contain information, warnings, or an 
indication of a fatal error. There are also a few unnumbered, self-explanatory messages, for 
example, the time that the execution of each functional module begins and ends. 

The Grid Point Singularity Table (GPST) is automatically output following the execution of 
the Grid Point Singularity Processor (GPSP) if singularities remain in the stiffness matrix at the 
grid point level. This table contains all possible combinations of single-point constraints, in 
the global coordinate system, that can be used to remove the singularities. Entries in this table 

1.1-12 (05/30/86) 



GENERAL DESCRIPTION OF RIGID FORMATS 

should only be treated as warnings, because it cannot be determined at the grid point level whether 
or not the singularities are removed by other means, such as general elements or multipoint 
constraints. Further information on this matter is given in the Theoretical Manual. 

Several items of output are discussed in other sections. Output that is not associated with 
all of the rigid formats is discussed in the sections treating the individual rigid formats. Some 
output is under the control of PARAM cards. These items are discussed in Volume I, Section 2.4 
(PARAM card). The DIAG card is used to control the printing of some output. A list of the 
available output under D.IAG control is given in the description of the Executive Control Deck in 
Volume I, Section 2.2. 

Any of the matrices or tables that are prepared by the functional modules can be printed by 
using selected utility modules described in Volume I, Section 5.5. These utility modules can be 
scheduled at any point in a rigid format by using the ALTER feature. (See Section 1.1.5 for the 
manner in which ALTERs are handled in restarts.) In general, they should be scheduled immediately 
after the functional module that generates the table or matrix to be printed. Note that functional 
modules cannot be separated from a SAVE instruction. However, the user is cautioned to check the 
calling sequence for the utility module, in order to be certain that all required inputs have been 
generated prior to this point. 

1.1.7 Rigid Format Data Base 

As indicated earlier, the Rigid Format Data Base contains the DMAP sequences and other 
information for all of the rigid formats in NASTRAN. Its design allows for convenient maintenance 
of the existing rigid formats as well as the addition of new rigid formats. Editing of the data 
base may be done by using standard text editors provided on the host computer systems. 

1.1.7.1 Design of the Data Base 

The Rigid Format Data Base is a collection of all rigid formats available to the user in 
NASTRAN. Each Rigid Format is maintained as a separate card-image entry within the data base. The 
entry for each rigid format consists of three parts. The first part is the DMAP part. It contains 
the DMAP sequence for the rigid format, the DMAP sequence subset flags, the restart flags (card 
name, file name and rigid format switch restart flags) and the substructure DMAP ALTER control 
flags. The second part contains the card name table and the third part contains the file name 
table. The restart flags in the first part and the name tables comprising the second and third 

1.1-13 (05/30/86) 



RIGID FORMATS 

parts are not processed by NASTRAN in non-restart runs. Similarly, the substructure control flags 

in the first part are not processed in non-substructure runs. 

The format of the data base is free field. Each of the three parts in a rigid format entry 

is separated from the other parts by a "$*" card. The following fictitious example illustrates a 

rigid format entry in the data base. 

APR. 86 

$$$$ THIS IS A C0MMENT 

$$$$ ****************************************************** 

M0DULE1 IN1,IN2,/0UT1,0UT2//*PARM1* $ 

****5BST 1,3,9-12 

****RFMT 188]200-201 

****CARD 1-20,30,44 

****FILE 100-104,110 
****p]^$l ji 

****PHS2 DB5 

****PHS3 D7 

$$$$ ****************************************************** 

M0DULE2 IN3,IN4/0UT3/*PARM2* $ 
****CARD 1-40,45 
****FILE ioi s i02 

****PHS2 DE5 

****************************************************** 



$*CARD NAME TABLE 



1 AXIC AX IF CELAS1 C EL AS 2 

2 ADUM1 CDUM1 CR0D 



$*FILE NAME TABLE 



94 SLT GPTT 

95 KGGX GPST 



The very first card of an entry identifies the release of NASTRAN with which the rigid format 
is associated. In this example, the rigid format is associated with the April 1986 release. 

The "$*CARD" card separates the card name table from the DMAP part of the entry and the 
"$*FILE" card separates the file name table from the card name table. A "$*" card terminates the 
file name table and the rigid format entry. 

Comment cards are identified in the data base by the "$$$$" identification in the first four 
columns of the field and control cards are identified by the "****" identification in the first 
four columns of the field. 

1.1-14 (05/30/86) 



GENERAL DESCRIPTION OF RIGID FORMATS 

Comment cards may be placed anywhere in the card name or file name tables (the second and 
third parts of a rigid format entry). However, comment cards have a required usage and serve a 
specific purpose in the DMAP part of a rigid format entry. In this part, a comment card is used to 
distinguish and separate a DMAP entry (that is, a DMAP statement and its associated control cards) 
from another DMAP entry. Hence, there must be at least one comment card separating a DMAP entry 
from the next DMAP entry. In the data base supplied with NASTRAN, a comment card with a trailing 
string of "*" is used for this purpose to serve as a cosmetic delineation between successive DMAP 
entries. 

All DMAP statements must conform to the rules as specified in Volume I, Section 5.2. Any 
card in the DMAP part of a rigid format entry that does not begin with "$$$$" or "****" in the 
first four columns of the field is considered to be a DMAP statement or part of a DMAP statement. 

Comment and control cards in a rigid format entry can extend up to 80 columns. However, DMAP 
cards can only extend up to 72 columns. 

Control cards (that is, cards that begin with "****" in the first four columns of the field) 
are permitted only in the DMAP part of a rigid format entry. A control card must have any one of 
seven four-character names in columns five through eight. The permissible names are: SBST, RFMT, 
CARD, FILE, PHS1, PHS2 and PHS3. Control cards follow the corresponding DMAP statement in the 
entry and may be specified in any order. 

The "SBST M , "RFMT", "CARD" and "FILE" control cards contain sequences of numbers and/or 
ranges of numbers in ascending order represented by the use of a dash. A comma is required after 
each number in a sequence or after a range of numbers, if an additional number or range of numbers 
is to follow. There may be multiple cards for any one of these control cards for a specific DMAP 
statement. 

The "SBST" control card provides DMAP sequence subset controls. If a user requests a given 
subset on the S0L card of a NASTRAN run and that number is in the sequence of numbers given on the 
"SBST" card, then the associated DMAP statement is deleted. The range of subset numbers is from 1 
to 9 and each number is documented under the description of the S0L Executive Control card in 
Volume I, Section 2.2. 

The "RFMT" control card is processed in restart runs and is applicable to cases where a rigid 
format switch has occurred. Each rigid format has a unique number assigned to it. For APPROACH 
DISP, rigid formats 1 through 16 are assigned the numbers 187 through 202, respectively. For 
APPR0ACH HEAT, rigid formats 1, 3 and 9 are assigned the numbers 207, 208 and 209, respectively. 

1.1-15 (05/30/86) 



RIGID FORMATS 

For APPROACH AER0, rigid formats 9, 10 and 11 are assigned the numbers 216, 214 and 215, 
respectively. A DMAP statement is flagged for execution in a modified restart if the number * 
associated with the rigid format that was used in the checkpointed run is listed in the sequence of 
numbers given on the "RFMT" card provided with the DMAP statement. 

The "CARD" and "FILE" control cards provide restart information for changes that involve 
input data or files within the DMAP. For a given rigid format, every type of effective change in 
the Case Control and Bulk Data Decks and each output file (or data block) in the DMAP is assigned a 
number as defined in the card name and file name tables in the second and third parts of a rigid 
format entry. In a modified restart, if the number associated with an input data change or an 
affected file appears in the sequence of numbers given on the "CARD" or "FILE" cards, then the 
corresponding DMAP statement is flagged for execution in the restart run. 

The information provided by all of the "CARD" control cards in a rigid format entry is 
collectively referred to as the Card Name Restart Table. Similarly, the information provided by 
all of the "FILE" and "RFMT" control cards in a rigid format entry is collectively referred to as 
the File Name Restart Table and the Rigid Format Change Restart Table, respectively. For a given 
rigid format, these three restart tables compose the Module Execution Decision Table (MEDT) of that 
rigid format. 

The "PHS1", "PHS2" and "PHS3" control cards are used to indicate where substructure DMAP 
ALTERs are to be generated. The number following the "PHS" refers to the substructure phase 
number. These cards must have one of the following flags: "In", "Dn", "DBn" or "DEn". The "n" in 
these flags is an integer that refers to the subroutine governing the substructure run (subroutine 
ASCM01, ASCM05, ASCM07 or ASCM08) and must have the value "1" for Phase 1 cards, either the value 
"5" or "8" for Phase 2 cards, and either the value "1" or "7" for Phase 3 cards. The "I" in the 
"In" flag indicates that a DMAP ALTER is to be inserted after this DMAP statement. The "D" in the 
"Dn" flag indicates that this DMAP statement is to be deleted and possibly replaced by a DMAP 
ALTER. The "DB" in the "DBn" flag and the "DE" in the "DEn" flag indicate the beginning and the 
end of a group of contiguous DMAP statements that are to be deleted and possibly replaced by a DMAP 
ALTER. Users are cautioned to be very careful in making any changes to these substructure control 
cards because of their impact on the DMAP ALTERs automatically generated in substructure analyses. 
(The automated substructure capability is currently implemented only in rigid formats 1, 2, 3, 8 
and 9, APPR0ACH DISP.) 



1.1-16 (05/30/86) 



GENERAL DESCRIPTION OF RIGID FORMATS 

The card name and file name tables assign numbers to every type of effective change in the 
Case Control and Bulk Data Decks and to every output file (or data block) in the DMAP. Numbers 1 
through 93 are allocated to card names and numbers 94 through 186 are allocated to file (or data 
block) names. This information is used subsequently to determine the DMAP statements to be flagged 
for execution in modified restarts. The format of these tables is free field. Each entry in these 
tables must have an integer number in the first field and a list of names in the remaining fields 
of the entry. All names are to be alphanumeric and may contain up to a maximum of eight 
characters. No name should appear twice in these tables. Comment cards may be freely used in 
these tables to facilitate readability. 

1.1.7.2 Implementation of the Data Base 

The Rigid Format Data Base is implemented differently on the CDC, DEC VAX, IBM and UNIVAC 
versions. On the CDC and DEC VAX versions, each rigid format entry is stored as a separate file. 
The local names of these files during a NASTRAN execution are: DISP1 through DISP16 for APPR0ACH 
DISP; HEAT1, HEAT3 and HEAT9 for APPROACH HEAT; AER09, AER01O and AER011 for APPR0ACH AER0. These 
same files are stored as members of a partitioned data set (PDS) on the IBM version and as elements 
of the *NASTRAN file on the UNIVAC version. The member and element names are exactly the same as 
the local file names on the CDC and DEC VAX versions. On the IBM version, the PDS containing the 
Rigid Format Data Base must be referred to by a Data Definition card, "DD", with the DDname of 
RFDATA. On the UNIVAC version, the *NASTRAN file is the file containing the NASTRAN program 
absolutes. (See References 1 and 2 for the formats of file names for the CDC and DEC VAX versions, 
respectively. See Reference 3 for the formats of DDnames and member names for the IBM version. 
See Reference 4 for the format of UNIVAC file names.) 

1.1.7.3 Usage of the Data Base 

The following examples illustrate the manner in which the Rigid Format Data Base is accessed 
and used on all of the four versions of NASTRAN. 

CDC VERSION 
/J0B. 

GET,DISP1,DISP2,DISP3,DISP4,DISP5. 

GET,DISP6,DISP7,DISP8,DISP9,DISP10. 

GET,DISP11,DISP12,DISP13,DISP14,DISP15,DISP16. 

1.1-17 (05/30/86) 



RIGID FORMATS 



GET ,HEAT1 ,HEAT3 .HEAT9 ,AER09 , AER01O , AER011 . 

RFL, 220000. 

REDUCE,-. 

L INK1 , INPUT ,0UTPUT , PUNCH ,UT1 . 

/E0R 

ID .... 



ENDDATA 
/E0F 



DEC VAX VERSION 

ASSIGN DDB1:[NASDIR]DISP1.DT DISP1. 
ASSIGN DDB1:[NASDIR]DISP2.DT DISP2. 

ASSIGN DDB1:[NASDIR]HEAT1.DT HEAT1. 

ASSIGN DDB1:[NASDIR]AER011.DT AER011. 
(9DDB 1 : [NASD I R]NASTRAN DEM0 . DT 

IBM VERSION 

// EXEC NASTRAN 

//NS.RFDATA DD DSN=RIGID.F0RMAT.DATA,DISP=SHR 

//NS.SYSIN DD * 

ID .... 

ENDDATA 
// 

UNIVAC VERSION 

@ASG,A *NASTRAN. 
@XQT *NASTRAN.LINK1 

1.1.7.4 Development of User Rigid Formats 

In addition to using COSMIC-supplied rigid formats, users may develop their own rigid 
formats, with restart capabilities included. Rigid formats developed by users must conform to the 
rules explained earlier and must be similar in content and structure to the COSMIC-supplied rigid 
formats. Each user-developed rigid format must reside as a separate file on the CDC and DEC VAX 
versions, as a member of a PDS on the IBM version and as a file or file. element on the UNIVAC 

version. 

Before developing their own rigid formats, users are strongly advised to carefully study and 
examine the COSMIC-supplied rigid formats, particularly with regard to their use of control cards. 
The following important guidelines should help users in developing their own rigid formats. 



1.1-18 (05/30/86) 



GENERAL DESCRIPTION OF RIGID FORMATS 

1. The DMAP sequence of the user rigid format must be tested for its correctness and logic. 
This testing may be done either in a DMAP environment or in the environment of an s 
existing rigid format by use of ALTERs. 

2. The card name table (the second part of a rigid format entry) must be constructed by 
assigning numbers 1 through 93 for all types of Case Control and Bulk Data Deck changes 
that will affect the logic of the rigid format. Normally, those input data changes that 
have the same effect on the logic of the rigid format are assigned the same number. 

3. The file name table (the third part of a rigid format entry) must be constructed by 
assigning numbers 94 through 186 for all files (or data blocks) that are output by the 
functional modules in the rigid format. Normally, all files (or data blocks) output from 
a given functional module are assigned the same number. 

4. The DMAP part (the first part of a rigid format entry) must be constructed by following 
each statement in the DMAP sequence by the appropriate control cards and by ensuring that 
each DMAP entry (that is, a DMAP statement and its associated control cards) is separated 
from the next DMAP entry by at least one comment card. 

5. A given DMAP statement must be followed by a "SBST" control card if that DMAP statement 
belongs to one or more of the DMAP subsets. These subset numbers must be specified on 
the "SBST" card. The acceptable subset numbers and their meanings are documented under 
the description of the S0L Executive Control card in Volume I, Section 2.2. 

6. A "RFMT" control card must follow a DMAP statement if that DMAP instruction is to be 
flagged for execution on restart from a checkpoint of one of the COSMIC-supplied rigid 
formats. (It is not possible to have a restart in a COSMIC-supplied rigid format from a 
checkpoint of an user-developed rigid format.) This will be so if this DMAP instruction 
is not part of the DMAP sequence of the rigid format that was used in the checkpoint run. 
The "RFMT" control card must list the numbers of the appropriate COSMIC-supplied rigid 
formats (187 through 202 for rigid formats 1 through 16, respectively, for APPROACH DISP; 
207, 208 and 209 for rigid formats 1, 3 and 9, respectively, for APPR0ACH HEAT; and 216, 
214 and 215 for rigid formats 9, 10 and 11, respectively, for APPROACH AER0). 

7. A DMAP statement must be followed by one or more "CARD" control cards indicating the 
effective input data changes that require that DMAP instruction to be flagged for 
execution on restart. Any effective input data change will affect one or more files (or 
data blocks) or parameters in the DMAP sequence. Therefore, for a given data change, all 

1.1-19 (05/30/86) 



RIGID FORMATS 

DMAP instructions that use the affected files (or data blocks) or parameters as input are 
potential candidates to be flagged for execution on restart. However, the logic of these 
individual DMAP instructions must be checked further (see the Programmer's Manual) to see 
if they are really impacted by the given data change. This procedure must be applied in 
turn to those DMAP instructions that use the output of the affected DMAP instructions as 
input. This procedure must be repeated until the entire DMAP sequence has been 
considered. 

8. A DMAP statement must be followed by one or more "FILE" control cards indicating the DMAP 
files (or data blocks) whose generation requires the execution flag for that DMAP 
statement to be turned on during restart. Normally, for a given DMAP file (or data 
block) that is required on restart but is not available from the checkpoint run, the DMAP 
instruction that generated it must be flagged for execution. However, in practice, 
additional DMAP instructions like PURGE and EQUIV that manipulate the given file (or data 
block) must also be flagged. for execution. 

9. The restart flags for a C0ND DMAP instruction (and its companion LABEL DMAP instruction) 
must include the restart flags for those DMAP instructions whose execution it controls. 

10. "PHS1", "PHS2" and "PHS3" control cards must not be used as the substructure capability 
is not applicable to user rigid formats. 

1.1.7.5 Usage of User-Developed Rigid Formats 

An user-developed rigid format is referenced through the use of the S0L card in the Executive 
Control Deck. However, instead of specifying the solution number or the name of the 
COSMIC-supplied rigid format on this card, the name of the user-developed rigid format is 
specified. This name is a file name on the CDC and DEC VAX versions, a member name of a PDS on the 
IBM version and a file or file. element name on the UNIVAC version. The member name given on the 
IBM version must be in the file referenced on the RFDATA DD statement. The manner in which an 
user-developed rigid format is accessed and used is similar to that of a COSMIC-supplied rigid 
format, as explained in the examples given Section 1.1.7.3. Thus, for instance, an user-developed 
rigid format can be accessed and used on the CDC version in the following manner. 

/J0B. 

GET,NEWRF. 
RFL, 220000. 

1.1-20 (05/30/86) 



GENERAL DESCRIPTION OF RIGID FORMATS 



REDUCE,-. 

LINK1, INPUT, 0UTPUT, PUNCH, UT1, 

/E0R 

ID .... 

S0L NEWRF 



/E0F 



1.1-21 (05/30/86) 



RIGID FORMATS 
REFERENCES 

1. Control Data Corporation NOS 1.0 Reference Manual ;, Document No. 60435400. 

2. VAX/VMS Command Language User's Guide , Digital Equipment Corporation, Order No. AA-D023C-TE. 

3. IBM 0S/VS2 MVS JCL , Document No. GC28-0692-4. 

4. Sperry UNIVAC 1100 Series Executive System EXEC Programmer Reference , Volume 2, Document No. 
UP -4 144. 2. 



1.1-22 (05/30/86) 



2. DISPLACEMENT RIGID FORMATS 

2.1 STATIC ANALYSIS 

2.1.1 DMAP Sequence for Static Analysis 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 1 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



OPTIONS IN EFFECT GO 



ERR=2 LIST 



NODECK NOREF NOOSCAR 



1 BEGIN DiSP 01 - STATIC ANALYSIS - APR. 86 $ 

2 FILE 0PTP2=SAVE/EST1«=SAVE $ 

3 FILE QG=APPEND/PGG=APPEND/UGV=APPEND/GM=SAVE/KNN=SAVE $ 
h SETVAL //V,Y,INTERACT/0/V,Y,SYS21/0 $ 

5 PARAM //*MPY*/CARDN0/O/0 $ 

6 COMPOFF 1, INTERACT $ 

7 PRECHK ALL $ 

8 COMPON 1, INTERACT $ 

10 COMPOFF LBLINT02.SYS21 $ 

11 GP1 GE0M1,GE0M2,/GPL,EQEXIN,GPDT,CSTM,BGPDT,SIL/S,N,LUSET/ 

N0GPDT/ALWAYS=-1 $ 

12 PLTTRAN BGPDT.SI L/BGPDP.SIP/LUSET/S.N, LUSEP $ 

13 GP2 GE0M2.EQEXIN/ECT $ 

U PARAML PCDB//*PRES*////JUMPPLOT $ 

15 PURGE PLTSETX,PLTPAR, GPSETS, ELSETS/JUMPPLOT $ 

16 COND Pl t JUMPPLOT $ 

1 7 PLTSET PCDB , EQEX I N , ECT/PLTSETX , PLTPAR , GPSETS , ELSETS/S , N ,NS 1 L/ 

S,N,JUMPPLOT $ 

18 PRTMSG PLTSETX// $ 

19 PARAM //*MPY*/PLTFLG/1/1 $ 

20 PARAM //*MPY*/PF I LE/O/O $ 

21 COND Pl.JIMPPLOT $ 

22 PLOT PLTPAR, GPSETS, ELSETS,CASECC,BGPDT,EQEXI N, SI L, ,ECT, ,/PLOTXl/ 

NS!L/LUSET/S,N,JUMPPLOT/S,N,PLTFLG/S,N,PFUE $ 



2.1-1 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 1 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

23 PRTMSG PL0TX1// $ 

2k LABEL PI $ 

25 GP3 GE0M3,EQEX!N,GE0M2/SLT,GPTT/S,N,N0GRAV/NEVER=1 $ 

26 PARAM //*AND*/N0MGG/N0GRAV/V,Y,GRDPNT=-1 $ 

27 TA1 ECT,EPT,BGPDT,SIL,GPTT,CSTM/EST,GEI .GPECT,,/ 

LUSET/S,N,N0SIMP/1/S,N,N0GENL/S,N,GENEL $ 

28 PARAM //ftAND*/NOELMT/NOGENL/NOSIMP $ 

29 COND ERRORS, NOELMT $ 

30 PURGE KGGX,GPST/N0SIMP/OGPST/GENEL $ 

31 0PTPR1 MPT,EPT,ECT,DIT,EST/0PTP1/S,N,PRINT/S,N,TSTART/S,N,C0UNT $ 

32 LABEL LOOPTOP $ 

33 COND LBL1.N0SIMP $ 

34 PARAM //*ADD*/NOKGGX/1/0 $ 

35 EQUIV 0PTP1.0PTP2/NEVER/EST.EST1/NEVER $ 

36 EMG EST,CSTM,MPT,DIT,GE0M2,/KELM,KDICT,MELM,MDICT,, ,/S,N,NOKGGX/ 

S,N,NOMGG////C,Y,COUPMASS/C,Y,CPBAR/ 

C,Y,CPR0D/C,Y,CPQUAD1/C,Y,CPQUAD2/C,Y,CPTRIA1/C,Y,CPTRIA2/ 
C, Y , CPTUBE/C , Y, CPQDPLT/C , Y , CPTRPLT/C , Y , CPTRBSC/ 
V,Y,VOLUME/V,Y, SURFACE $ 

37 COND JMPKGG.NOKGGX $ 

38 EMA GPECT, KDICT.KELM/KGGX.GPST $ 

39 LABEL JMPKGG $ 

kO PURGE MGG/NOMGG $ 

41 COND JMPMGG,NOMGG $ 

kl EMA GPECT, MDICT, MELM/MGG, /-1/C, Y, WTMAS$=1 . $ 

Ul LABEL JMPMGG $ 

kk COND LBL1.GRDPNT $ 

1*5 COND ERR0R2.N0MGG $ 

1*6 GPWG BGPDP,CSTM,EQEXIN,MGG/OGPWG/V,Y,GRDPNT/C,Y,WTMASS $ 



2.1-2 (05/30/86) 



STATIC ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 1 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



1»7 OFP OGPWG //S,N,CARDNO $ 

48 LABEL LBL1 $ 

kS EQUIV KGGX.KGG/NOGENL $ 

50 COND LBL11A.N0GENL $ 

51 SMA3 GEI,KGGX/KGG/LUSET/NOGENL/NOSIMP $ 

52 LABEL LBL11A $ 

53 PARAM //*MPY*/NSKIP/O/0 $ 

54 LABEL LBL11 $ 

55 GP4 CASECC,GE0M4,EQEXIN,GPDT,BGPDT,CSTM,GPST/RG,YS,USET,ASET/ 

LUSET/S,N,MPCF1/S,N,MPCF2/S,N,SINGLE/S,N,0MIT/S,N,REACT/ 
S,N,NSKIP/S,N,REPEAT/S,N,NOSET/S,N,NOL/S,N,NOA/C,Y,ASETOUT/ 
S,Y,AUTOSPC $ 

56 COND ERR0R3.N0L $ 

57 PARAM //*AND*/N0SR/S INGLE/REACT $ 

58 PURGE KRR,KLR,QR,DM/REACT/GM/MPCF1/GO,KOO,LOO,PO,UOOV,RUOV/OMIT/PS, 

KFS,KSS/SINGLE/QG/NOSR $ 

59 COND LBL4.GENEL $ 

60 PARAM //AEQVGPSPFLG/AUTOSPC/0 $ 

61 COND LBL4.GPSPFLG $ 

62 GPSP GPL,GPST,USET,SIL/OGPST/S,N,NOGPST $ 

63 OFP OGPST,,,,,//S,N,CARDNO $ 

64 LABEL LBL4 $ 

65 EQUIV KGG.KNN/MPCF1 $ 

66 COND LBL2,MPCF2 $ 

67 MCE1 USET.RG/GM $ 

68 MCE2 USET,GM,KGG,,,/KNN,,, $ 

69 LABEL LBL2 $ 

70 EQUIV KNN,KFF/SINGLE $ 

71 COND LBL3, SINGLE $ 

2.1-3 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 1 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

72 SCE1 USET,KNN,,,/KFF,KFS,KSS, ,, $ 

73 LABEL LBL3 $ 

JU EQUIV KFF,KAA/OMIT $ 

75 COND LBL5.0MIT $ 

76 SMP1 USET,KFF,,,/G0,KAA,KO0,.LOO,,,,» $ 

77 LABEL LBL5 $ 

78 EQUIV KAA.KLL/REACT $ 

79 COND LB L6, RE ACT $ 

80 RBMG1 USET.KAA./KLL.KLR.KRR,,, $ 

81 LABEL LBL6 $ 

82 RBMG2 KLL/LLL $ 

83 COND LBL7,REACT $ 

Bk RBMG3 LLL.KLR.KRR/DM $ 

85 LABEL LBL7 $ 

86 SSG1 SLT,BGPDT,CSTM,SIL,EST,MPT,GPTT,EDT,MGG,CASECC,DIT,/PG,,,,/ 

LUSET/NSKIP $ 

.8.7 EQUIV PG.PL/NOSET $ 

88 COND LBLIO.NOSET $ 

89 SSG2 USET,GM,YS,KFS,GO,DM,PG/QR,PO,PS,PL $ 

90 LABEL LBL10 $ 

91 SSG3 LLL,KLL,PL,LOO,KOO,PO/ULV,UOOV,RULV,RUOV/OMIT/V,Y,IRES=-1/ 

NSKIP/S.N.EPSI $ 

92 COND LBL9JRES $ 

93 MATGPR GPL,USET,SIL,RULV//*L* $ 
$1* MATGPR GPL,USET,SIL,RUOV//*OA $ 

95 LABEL LBL9 $ 

96 SDR1 USET,PG,ULV,UOOV,YS,GO,GM,PS,KFS,KSS,QR/UGV,PGG,QG/NSKIP/ 

*STATICS* $ 



2.1-4 (05/30/86) 



STATIC ANALYSIS 



RIGID FORMAT OMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 1 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



97 COND LBL8, REPEAT $ 

98 REPT LBL 11,360 $ 

99 JUMP ERROR 1 $ 

100 PARAM //*NOT*/TEST/REPEAT $ 

101 COND ERR0R5.TEST $ 

102 LABEL LBL8 $ 

103 GPFDR CASECC, UGV, KELM,KDICT,ECT,EQEXIN,GPECT,PGG,QG/0NRGY1,0GPFB1/ 

*STATIC$* $ 

104 OFP 0NRGY1,0GPFB1,,,,//S,N,CARDN0 $ 

105 COND NOMPCF.GRDEQ $ 

106 EQMCK CASECC , EQEX i N , GPL , BGPDT, S I L , USET, KGG , GM, UGV, PGG , QG , CSTM/ 

0QM1/V,Y,0PT=0/V,Y,GRDEQ/NSKIP $ 

107 OFP 0QM1,,,,,//S,N,CARDN0 $ 

108 LABEL NOMPCF $ 

109 SDR2 CASECC,CSTM,MPT,DIT,EQEXIN,SIL,GPTT,EDT,BGPDP,,QG,UGV,EST, 

XYCDB.PGG/0PG1 , OQG 1 ,0UGV1 .0ES1.0EF1 ,PUGV1/*STATI CS*/S,N, 
N0S0RT2/-1/S,N,STRNFLG $ 

110 COND LBLSTRS, STRESS $ 

111 CURV 0ES1, MPT, CSTM, EST, SI L,GPL/0ES1M,0ES1G/V, Y, STRESS/ 

V.Y.NINTPTS $ 

112 LABEL LBLSTRS $ 

113 PURGE 0ES1M/STRESS $ 
^^k COND LBLSTRN,STRNFLG $ 

1 15 SDR2 ( CASECC , CSTM, MPT, D I T , EQEX I N , S I L, GPTT, EDT , BGPDT, , , UGV, EST , , / 

',,,0ES1A,,/*STATICS*//1 $ 

116 COND LBLSTRN, STRAIN $ 

117 CURV 0ES1A, MPT, CSTM, EST.S 1 L,GPL/0ES1AM,0ES1 AG/V.Y, STRAIN/ 

V,Y,NINTPTS $ 

118 LABEL LBLSTRN $ 

119 PURGE 0ES1A/STRNFLG $ 



2.1-5 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 1 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

120 COND LBL17.NOSORT2 $ 

121 SDR3 OUGV1,OPG1,OQG1,OEF1,OES1,/OUGV2,OPG2,OQG2,OEF2,OE$2, $ 

122 PARAM //*SUB*/PRTS0RT2/N0S0RT2/1 $ 

123 COND LBLS0RT1.PRTS0RT2 $ 

124 OFP 0UGV2,0PG2,0QG2,0EF2,0ES2,//S,N, CARDNO $ 

125 SCAN CASECC,0ES2,0EF2/0ESF2/*RF* $ 

126 OFP 0ESF2,,,,,//S,N, CARDNO $ 

127 JUMP LBLXYPLT $ 

128 LABEL LBLS0RT1 $ 

129 OFP 0UGV1,0PG1,0QG1,0EF1,0ES1,//S,N, CARDNO $ 

130 SCAN CASECC,0ES1,0EF1/0ESF1/*RF* $ 

131 OFP 0ESF1,.,,,//S,N,CARDN0 $ 

132 LABEL LBLXYPLT $ 

133 OFP 0ES1M,0ES1G,0ES1A,0ES1AM,0ES1AG,//S,N, CARDNO $ 

1 34 XYTRAN XYCDB , 0PG2 , 0QG2 , 0UGV2 , 0ES2 , OE F2/XYPLTT/*TRAN */*PSET*/S , N , 

PFILE/S,N, CARDNO $ 

135 XYPLOT XYPLTT// $ 

136 JUMP DPLOT $ 

137 LABEL LBL17 $ 

138 PURGE 0UGV2/N0S0RT2 $ 

139 COND LBLOFP, COUNT $ 

1 40 0PTPR2 OPTP 1 , OES 1 , EST/0PTP2 , EST 1 /S , N , PR I NT/TSTART/S , N , COUNT/S , N , 

CARDNO $ 

11*1 EQUIV EST1,EST/ALWAYS/0PTP2,0PTP1/ALWAYS $ 

142 COND LOOPEND, PRINT $ 

143 LABEL LBLOFP $ 

144 OFP 0UGV1, OPG1,OQG1,OEF1,OES1,//S,N, CARDNO $ 



2.1-6 (05/30/86) 



STATIC ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 1 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

11*5 SCAN CASECC,OES1,OEF1/OESF1X/*RF* $ 

146 OFP 0ESF1X,,,,,//S,N,CARDN0 $ 

147 OFP OES1M,OES1G,OES1A,OES1AM,OES1AG,//S,N,CARDNO $ 

148 LABEL DPLOT $ 

149 COND P2.JUMPPL0T $ 

150 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIP,PUGV1,,GPECT,0ES1/ 

PL0TX2/NSIL/LUSEP/JUMPPL0T/PLTFLG/S,N,PFILE $ 

151 PRTMSG PL0TX2// $ 

152 LABEL P2 $ 

153 LABEL LOOPEND $ 

154 COND FINIS.COUNT $ 

155 REPT L00PT0P.360 $ 

156 JUMP FINIS $ 

157 LABEL ERR0R1 $ 

158 PRTPARM //-1/*STATICS* $ 

159 LABEL ERR0R2 $ 

160 PRTPARM //-2/*STATICS* $ 

161 LABEL ERR0R3 $ 

162 PRTPARM //-3/*STATICS* $ 

163 LABEL ERR0R4 $ 

164 PRTPARM //-4/*STATICS* $ 

165 LABEL ERR0R5 $ 

166 PRTPARM //-5/*STATICS* $ 

167 LABEL FINIS $ 

168 PURGE DUMMY/ALWAYS $ 

169 LABEL LBLINT02 $ 

170 COMPON LBLINT01.SYS21 $ 



2.1-7 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 1 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

12k LABEL LBLINT1 $ 
225 EWD $ 



2.1-8 (05/30/86) 



STATIC ANALYSIS 

2.1.2 Description of Important DMAP Operations for Static Analysis 

Note- The DMAP sequence for static analysis involves the use of parameters INTERACT and 
SYST1 (see Section 2.1.5). These parameters are of relevance only when the primary purpose 
of the user is to make interactive restart runs. (The two parameters are then specified via 
the PARAM card in the Bulk Data Deck.) However, these two parameters are not required for 
normal non-interactive batch runs. Consequently, the rigid format DMAP listing shown in 
Section 2.1.1 was generated by not specifying these parameters (via the PARAM bulk data 
card). As a result, the C0MP0FF and C0MP0N instructions using these parameters assume a 
value of for these parameters (see Volume I, Section 5.7). 

6. C0MP0FF causes the DMAP compiler to compile the next instruction (DMAP No. 7) as the 
parameter INTERACT is (see Note above). 

8 C0MP0N causes the DMAP compiler to skip the compilation of the next instruction (DMAP No. 9, 
not shown) as the parameter INTERACT is (see Note above). 

10 C0MP0FF causes the DMAP compiler to compile all of the following instructions through LABEL 
LBLINT02 (DMAP Nos. 11 through 169) as the parameter SYS21 is (see Note above). 

11. GP1 generates coordinate system transformation matrices, tables of grid point locations, and 
tables relating the internal and external grid point numbers. 

12. PLTTRAN modifies special scalar grid points in the BGPDT and SIL tables. 

13. GP2 generates Element Connection Table with internal indices. 

16. Go to DMAP No. 24 if there are no structure plot requests. 

17. PLTSET transforms user input into a form used to drive the structure plotter. 

18. PRTMSG prints error messages associated with the structure plotter. 

21. Go to DMAP No. 24 if no undeformed structure plots are requested. 

22. PL0T generates all requested undeformed structure plots. 

23. PRTMSG prints plotter data and engineering data for each undeformed plot generated. 
25. GP3 generates Static Loads Table and Grid Point Temperature Table. 

27. TA1 generates element tables for use in matrix assembly and stress recovery. 

29. Go to DMAP No. 163 and print Error Message No. 4 if no elements have been defined. 

31. 0PTPR1 performs phase one property optimization and initialization check. 

32. Beginning of loop for property optimization. 

33. Go to DMAP No. 48 if there are no structural elements. 

36. EMG generates structural element stiffness and mass matrix tables and dictionaries for later 
assembly .by the EMA module. 

37. Go to DMAP No. 39 if no stiffness matrix is to be assembled. 

38. EMA assembles stiffness matrix [K* ] and Grid Point Singularity Table. 

41. Go to DMAP No. 43 if no mass matrix is to be assembled. 

42. EMA assembles mass matrix [M ]. 

44. Go to DMAP No. 48 if no weight and balance information is requested. 

45. Go to DMAP No. 159 and print Error Message No. 2 if no mass matrix exists. 

2.1-9 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



46. 
47. 

49. 
50. 
51. 
54. 
55. 

56. 

59. 
61. 
62. 
63. 

65. 
66. 

67. 



GPWG generates weight and balance information. 

0FP formats the weight and balance information prepared by GPWG and places it on the system' 
output file for printing. 

Equivalence [K* ] to [K ] if no general elements exist. 

Go to DMAP No. 52 if no general elements exist. 

SMA3 adds general elements to [K* ] to obtain stiffness matrix [K ]. 

y y yy 

Beginning of loop for multiple constraint sets. 

GP4 generates flags defining members of various displacement sets (USET), forms multipoint 

constraint equations [R ] {u } = and forms enforced displacement vector {Y }. 

y y ¦> 

Go to DMAP No. 161 and print Error Message No. 3 if no independent degrees of freedom are 
defined. 

Go to DMAP No. 64 if general elements are present. 

Go to DMAP No. 64 if no potential grid point singularities exist. 

GPSP generates a table of potential grid point singularities. 

0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output ile for printing. 

Equivalence [K ] to [K ] if no multipoint constraints exist. 

Go to DMAP No. 69 if the MPC set for the current pass is unchanged from that of the previous 
pass. 



MCE1 partitions multipoint constraint equations [R ] = [R IR ] and 



i-l, 



solves for multipoint constraint transformation matrix [G ] = -[R„J~ [R 1 
r m u m n 



68. MCE2 partitions stiffness matrix 



[K 99 ] " 



K I K 

nn , nm 

K I K 

mn ' mm 



and performs matrix reduction 



70. 
71. 
72. 



Equivalence [K ] to [K ff ] if no single-point constraints exist. 
Go to DMAP No. 73 if no single-point constraints exist. 
SCE1 partitions out single-point constraints 



[K ] = 
L nn J 



ftf^f. 



74. Equivalence [K ff ] to [K ] if no omitted coordinates exist, 

75. Go to DMAP No. 77 if no omitted coordinates exist. 



2.1-10 {05/30/86) 



STATIC ANALYSIS 



76. SMP1 partitions constrained stiffness matrix 



[K ff ] = 



K I K 
__aa . ao 

K I K 
oa ' oo 



solves for transformation matrix [G„] = -[K 1~ [K 1 

UU Ud 



and performs matrix reduction [K ] = [K ] + [K ][G ] . 

aa aa oa o 



78. Equivalence [K ] to [K ] if no free-body supports exist. 

79. Go to DMAP No. 81 if no free-body supports exist. 

80. RBMG1 partitions out free-body supports 



»..i • 



K u' K tr 
K rl I K rr 



82. RBMG2 decomposes constrained stiffness matrix [K ] = [L ][U ], 

83. Go to DMAP No. 85 if no free-body supports exist. 

84. RBMG3 forms rigid body transformation matrix 



[D] = -[K u rtV • 



calculates rigid body check matrix 



[X] = [K rr ] + [K; r ][D] 



and calculates rigid body error ratio 



IKrH 



86. SSG1 generates static load vectors {?)• 

87. Equivalence {P } to {P } if no constraints are applied, 

9 ^ 

88. Go to DMAP No. 90 if no constraints are applied. 

89. SSG2 applies constraints to static load vectors 



{P } = 
9 



(P n > - (P n > + [G> m > , 



2.1-11 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



( P f ) 
{f V " ]~[ ' {P f } = {P f } " CK fs^ {Y s } • 



P 
s 



(P f> ¦ 7- j • < P a> " lP a> + ^V • 



{P„> = 
a 



p 

r 



T 

and calculates determinate forces of reaction {q } = ~{ p r } ~ [D l^o** 
91. SSG3 solves for displacements of independent coordinates 

solves for displacements of omitted coordinates 

<u°> - [K^CP,,} ', 

calculates residual vector (RULV) and residual vector error ratio for independent 
coordinates 

<«y - <v - awe,} . 

h ' : 



< P I Itl V 



and calculates residual vector (RU0V) and residual vector error ratio for omitted 
coordinates 

«P„> - {P > - [K 00 ](u°} . 
<uJ>t*P > 

< P I>< U 0> 

92. Go to DMAP'No. 95 if residual vectors are not to be printed. 

93. MATGPR prints the residual vector for independent coordinates (RULV). 

94. MATGPR prints the residual vector for omitted coordinates (RU0V). 
96. SDR1 recovers dependent displacements 

/ u. 



* t-<y • <V = [ V {u a> + tu o» • 



u. 



*-j-v. )-£-(¦ < v , 



2.1-12 (05/30/86) 



STATIC ANALYSIS 

' m ' 
and recovers single-point forces of constraint 

97. Go to DMAP No. 102 if all constraint sets have been processed. 

98. Go to DMAP No. 54 if additional sets of constraints need to be processed. 

99. Go to DMAP No. 157 and print Error Message No. 1 as the number of constraint sets exceeds 
360. 

101. Go to DMAP No. 165 and print Error Message No. 5 if multiple boundary conditions are 
attempted with an improper subset. 

103. GPFDR calculates the grid point force balance (0GPFB1) and element strain energy (0NRGY1) 
for requested sets. 

104. 0FP formats the tables prepared by GPFDR and places them on the system output file for 
printing. 

105. Go to DMAP No. 108 if no multipoint constraint force balance is requested. 

106. EQMCK calculates the force and moment equilibrium check and prepares the multipoint 
constraint force balance (0QM1) for output. 

107. 0FP formats the table prepared by EQMCK and places it on the system output file for 
printing. 

109. SDR2 calculates the element forces (0EF1) and stresses (0ES1) and prepares load vectors 
'10PG1), displacement vectors (0UGV1) and single-point forces of constraint (0QG1) for output 

and translation components of the displacement vectors (PUGV1). 

110. Go to DMAP No. 112 if element stresses in material coordinate system and stresses at the 
connected grid points are not to be calculated. 

111. CURV calculates element stresses in material coordinate system (0ES1M) and stresses at the 
connected grid points {0ES1G). 

114. Go to DMAP No. 118 if element strains/curvatures are not to be calculated. 

115. SDR2 calculates element strains/curvatures (0ES1A). 

116. Go to DMAP No. 118 if element strains/curvatures in material coordinate system and 
strains/curvatures at the connected grid points are not to be calculated. 

117. CURV calculates element strains/curvatures in material coordinate system (0ES1AM) and 
strains/curvatures at the connected grid points (0ES1AG). 

120. Go to DMAP No. 137 if there are no requests for output sorted by grid point number or 
element number. 

121. SDR3 prepares requested output sorted by grid point number of element number. 

123. Go to DMAP No. 128 if printed output sorted by grid point number or element number is not 
required. 

124. 0hP formats the tables prepared by SDR3 for output sorted by grid point number or element 
number and places them on the system output file for printing. 

2.1-13 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

125. SCAN examines the element stresses and forces calculated by SDR3 and generates scanned 
output that meets the specifications set by the user. 

126. 0FP formats the scanned output table prepared by SCAN and places it on the system output 
file for printing. 

127. Go to DMAP No. 132. 

129. 0FP formats the tables prepared by SDR2 for output sorted by subcase number and places them 
on the system output file for printing. 

130. SCAN examines the element stresses and forces calculated by SDR2 and generates scanned 
output that meets the specifications set by the user. 

131. 0FP formats the scanned output table prepared by SCAN and places it on the system output 
file for printing. 

133. 0FP formats the tables prepared by CURV and SDR2 for output sorted by subcase number and 
places them on the system output file for printing. 

134. XYTRAN prepares the input for requested X-Y plots. 

135. XYPL0T prepares the requested X-Y plots of displacements, forces, stresses, loads and 
single-point forces of constraint vs. subcase. 

136. Go to DMAP No. 148. 

139. Go to DMAP No. 143 if there is no phase two property optimization. 

140. 0PTPR2 performs phase two property optimization. 

141. Equivalence EST1 to EST and 0PTP2 to 0PTP1. 

142. Go to DMAP No. 153 if no additional output is to be printed for this loop. 

144. 0FP formats the tables prepared by SDR2 for output sorted by subcase number and places them 
on the system output file for printing. 

145. SCAN examines the element stresses and forces calculated by SDR2 and generates scanned 
output that meets the specifications set by the user. 

146. 0FP formats the scanned output table prepared by SCAN and places it on the system output 
file for printing. 

147. 0FP formats the tables prepared by CURV and SDR2 for output sorted by subcase number and 
places them on the system output file for printing. 

149. Go to DMAP No. 152 if no deformed structure plots are requested. 

150. PL0T generates all requested deformed structure and contour plots. 

151. PRTMSG prints plotter data, engineering data, and contour data for each deformed plot 
generated. 

154. Go to DMAP No. 167 and make normal exit if property optimization is complete. 

155. Go to DMAP No. 32 if additional loops for property optimization are needed. 

156. Go to DMAP No. 167 and make normal exit. 

158. Print Error Message No. 1 and terminate execution. 
160. Print Error Message No. 2 and terminate execution. 
162. Print Error Message No. 3 and terminate execution. 

2.1-14 (05/30/86) 



STATIC ANALYSIS 

164. Print Error Message No. 4 and terminate execution. 

166. Print Error Message No. 5 and terminate execution. * 

170. C0MP0N causes the DMAP compiler to skip the compilation of all of the following instructions 
through LABEL LBLINT01 (DMAP Nos. 171 through 223, not shown) as the parameter SYS21 is 
(see Note at the beginning of this section). 



2.1-15 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.1.3 Output for Static Analysis 

The following printed output, sorted by loads (S0RT1) or by grid point number or element 
number (S0RT2), may be requested for Static Analysis solutions: 

1. Displacements and components of static loads and single-point forces of constraint at 
selected grid points or scalar points. 

2. Forces and stresses in selected elements. 

3. Strains/curvatures in selected elements (only for TRIA1, IRIA2, QUAD1 and QUAD2 
elements). 

The following plotter output may be requested: 

1. Undeformed and deformed plots of the structural model. 

2. Contour plots of stresses and displacements. 

3. X-Y plot of any component of displacement, static load, or single-point force of 
constraint for a grid point or scalar point versus subcase. 

4. X-Y plot of any stress or force component for an element versus subcase. 

2.1.4 Case Control Deck for Static Analysis 

The following items relate to subcase definition and data selection for Static Analysis: 

1. A separate subcase must be defined for each unique combination of constraints and static 
loads. 

2. A static loading condition must be defined for (not necessarily within) each subcase 
with a L0AD, TEMPERATURE(L0AD) , or DEF0RM selection unless all loading is specified with 
grid point displacements on SPC cards. 

3. An SPC set must be selected for (not necessarily within) each subcase, unless the model 
is a properly supported free body, or all constraints are specified on GRID cards, 
Scalar Connection cards, or with General Elements. 

4. Loading conditions associated with the same sets of constraints should be in contiguous 
subcases in order to avoid unnecessary looping. 

5. REPCASE may be used to repeat subcases in order to allow multiple sets of the same 
output item. 

2.1.5 Parameters for Static Analysis 

The following parameters are used in Static Analysis: 



2.1-16 (05/30/86) 



STATIC ANALYSIS 

1- ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2. AUT0SPC - reserved for future optional use. The default value is -1. 

3. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTRIA2, CPTUBE, CPQDPLT, CPTRPLT, 
CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

4. GRDEQ - optional. A positive integer value of this parameter selects the grid point 
about which equilibrium will be checked for the Case Control output request, MPCF0RCE. 
If the integer value is zero, the basic origin is used. The default value is -1. 

5. GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. 

6. INTERACT - optional. This parameter, like the SYS21 parameter, is of relevance only 
when the primary purpose of the user is to make interactive restart runs. In such a 
case, the integer value of this parameter must be set to -1 (via a PARAM bulk data card) 
in both the batch checkpoint run (that precedes the interactive restart run) as well as 
in the interactive restart run. If not so specified via a PARAM bulk data card, the 
C0MP0FF and C0MP0N instructions in the DMAP sequence that use this parameter assume a 
value of for this parameter (see Volume I, Section 5.7). 

7. IRES - optional. A positive integer value of this parameter causes the printing of the 
residual vectors following each execution of the SSG3 module. 

8. NINTPTS - optional. A positive integer value of this parameter specifies the number of 
closest independent points to be used in the interpolation for computing stresses or 
strains/curvatures at grid points (only for TRIA1, TRIA2, QUAD1 and QUAD2 elements). A 
negative integer value or specifies that all independent points are to be used in the 
interpolation. The default value is 0. 

9. 0PT - optional. A positive integer value of this parameter causes both equilibrium and 
multipoint constraint forces to be calculated for the Case Control output request, 
MPCF0RCE. A negative integer value of this parameter causes only the equilibrium force 
balance to be calculated for the output request. The default value is which causes 
only the multipoint constraint forces to be calculated for the output request. 

2.1-17 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

10. STRAIN - optional. This parameter controls the transformation of element 
strains/curvatures to the material coordinate system (only for TRIA1, TRIA2, QUAD1 and t 
QUAD2 elements). If it is a positive integer, the strains/curvatures for these elements 
are transformed to the material coordinate system. If it is zero, strains/curvatures at 
the connected grid points are also computed in addition to the element 
strains/curvatures in the material coordinate system. A negative integer value results 
in no transformation of the strains/curvatures. The default value is -1. 

11. STRESS - optional. This parameter controls the transformation of element stresses to 
the material coordinate system (only for TRIA1, TRIA2, QUAD1 and QUAD2 elements). If it 
is a positive integer, the stresses for these elements are transformed to the material 
coordinate system. If it is zero, stresses at the connected grid points are also 
computed in addition to the element stresses in the material coordinate system. A 
negative integer value results in no transformation of the stresses. The default value 
is -1. 

12. SURFACE - optional. The computations of the external surface areas for the 
two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

13. SYS21 - optional. This parameter, like the INTERACT parameter, is of relevance only 
when the primary purpose of the user is to make interactive restart runs. In such a 
case, the integer value of this parameter must be set to -1 (via a PARAM bulk data card) 
in the interactive restart run (that follows a batch checkpoint run). If not so 
specified via a PARAM bulk data card, the C0MP0FF and C0MP0N instructions in the DMAP 
sequence that use this parameter assume a value of for this parameter (see Volume I, 
Section 5.7). 

14. V0LUME - optional. The volume computations for the two-dimensional and 
three-dimensional elements are activated by this parameter when they are generated in 
the EMG module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details. 

15. WTMASS - optional. The terms of the mass matrix are multiplied by the real value of 
this parameter when they are generated in the EMA module. 



2.1-18 (05/30/86) 



STATIC ANALYSIS 

2.1.6 Automatic ALTERs for Automated Multi-stage Substructuring 

The following lines of the Static Analysis, Rigid Format 1, are ALTERed for automated 
substructure analyses. 

Phase 1: 5, 56, 78-85, 87-153 

Phase 2: 5, 11-11, 14-24, 28-29, 35-35, 49-52, 59-64, 103-153 
Phase 3: 78-85, 88-95, 96 
If APP DISP, SUBS is used, the user may also specify ALTERs. However, these must not 
interfere with the automatically generated DMAP statement ALTERs listed above. See Volume I, 
Section 5.9 for a description and listing of the ALTERs which are automatically generated for 
substructuring. 

2.1.7 Rigid Format Error Messages from Static Analysis 

The following fatal errors are detected by the DMAP statements in the Static Analysis rigid 
format. The text for each error message is given below in capital letters and is followed by 
additional explanatory material, including suggestions for remedial action. 

STATIC ANALYSIS ERR0R MESSAGE N0. 1 - ATTEMPT T0 EXECUTE M0RE THAN 360 L00PS. 

An attempt has been made to use more than 360 different sets of boundary conditions or more than 
360 passes in the optimization loop have been attempted. This number may be increased by ALTERing 
the REPT instruction following SDR1 in the former case and the REPT instruction following the last 
PRTMSG instruction in the latter case. 

STATIC ANALYSIS ERR0R MESSAGE N0. 2 - MASS MATRIX REQUIRED F0R WEIGHT AND BALANCE CALCULATI0NS. 

The mass matrix is null because either no elements were defined with Connection cards, 
nonstructural mass was not defined on a Property card, or the density was not defined on a Material 
card. 

STATIC ANALYSIS ERR0R MESSAGE N0. 3 - N0 INDEPENDENT DEGREES 0F FREED0M HAVE BEEN DEFINED. 

Either no degrees of freedom have been defined on GRID, SP0INT or Scalar Connection cards, or all 
defined degrees of freedom have been constrained by SPC, MPC, SUP0RT, 0MIT or GRDSET cards, or 
grounded on Scalar Connection cards. 

STATIC ANALYSIS ERR0R MESSAGE N0. 4 - N0 ELEMENTS HAVE BEEN DEFINED. 

No elements have been defined with either Connection cards or GENEL cards. 

STATIC ANALYSIS ERR0R MESSAGE N0. 5 - A L00PING PR0BLEM RUN 0N A N0N-L00PING SUBSET. 

A problem requiring boundary condition changes was run on subset 1 or 3. The problem should be 
restarted on subset 0. 

2.1-19 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



2.1-20 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.2 STATIC ANALYSIS WITH INERTIA RELIEF 

2.2.1 DMAP Sequence for Static Analysis With Inertia Relief 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 2 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

OPTIONS IN EFFECT GO ERR-2 LIST NODECK NOREF NOOSCAR 



1 BEGIN DISP 02 - STATIC ANALYSIS WITH INERTIA RELIEF - APR. 1 986 $ 

2 PRECHK ALL $ 

3 FILE QG<=APPEND/PGG=APPEND/UGV»APPEND/GM=SAVE/KNN=SAVE/MNN«SAVE $ 

k PARAM //*MPY*/CARDN0/O/O $ 

5 GP1 GE0M1,GE0M2,/GPL,EQEXIN,GPDT,CSTM,BGPDT,SIL/S,N,LUSET/ 

NOGPDT/ALWAYS—1 $ 

6 PLTTRAN BGPDT,SIL/BGPDP,SIP/LUSET/S,N,LUSEP $ 

7 GP2 GE0M2,EQEXIN/ECT $ 

8 PARAML PCDB//*PRES*////JUMPPLOT $ 

9 PURGE PLTSETX,PLTPAR,GPSETS,ELSETS/JUMPPLOT $ 

10 COND Pl.JUMPPLOT $ 

11 PLTSET PCDB,EQEXIN,ECT/PLTSETX,PLTPAR,GPSETS,ELSETS/S,N,NSIL/ 

S.N.JUMPPLOT $ 

12 PRTMSG PLTSETX// $ 

13 PARAM //*MPY*/PLTFLG/1/1 $ 
lit PARAM //*MPY*/PFILE/0/0 $ 

15 COND Pl.JUMPPLOT $ 

16 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIL,,ECT,,/PL0TX1/ 

NSIL/LUSET/S t N,JUMPPLOT/S,N,PLTFLG/S,N,PFlLE $ 

17 PRTMSG PL0TX1// $ 

18 LABEL PI $ 

19 GP3 GEOM3,EQEXIN,GEOM2/SLT,GPTT/N0GRAV $ 

20 TA1 ECT,EPT,BGPDT,SIL,GPTT,CSTM/EST,GEl,GPECT,,/ 

LUSET/S,N,NOSIMP/l/S,N,N0GENL/S,N,GENEL $ 

21 COND ERR0R6.N0SIMP $ 

2.2-1 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 2 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

22 PURGE OGPST/GENEL $ 

23 PARAM //*ADD*/NOKGGX/1/0 $ 
2k PARAM //*ADD*/NOMGG/VO $ 

25 EMG EST,CSTM,MPT,DIT,GE0M2,/KELM,KDICT,MELM,MDICT, , ,/S ,N,NOKGGX/ 

S ,.N , NOMGG////C , Y , COUPMASS/C , Y , CPBAR/ 

C,Y,CPR0D/C,Y,CPQUADl/C t Y,CPQUAD2/C,Y,CPTRIAl/e,Y,CPTRIA2/ 
C,Y,CPTUBE/C,Y,CPQDPLT/C,Y,CPTRPLT/C,Y,CPTRBSC/ 
V,Y,VOLUME/V,Y, SURF ACE $ 

26 PURGE KGGX.GPST/NOKGGX $ 

27 COND JMPKGG,N0KG6X $ 

28 EMA GPECT,KDICT,KELM/KGGX,GPST $ 

29 LABEL JMPKGG $ 

30 COND ERROR UNOMGG $ 

3-1 EMA GPECT,MDICT,MELM/MGG^/-1/C,Y,WTMASS=1.0 $ 

32 COND LGPWG.GRDPNT $ 

33 GPWG BGPDP,CSTM,EQEXIN,MGG/OGPWG/V,Y,GRDPNT=- i/C,Y,WTMASS $ 
yk OFP 0GPWG t ,,,,//S,N,CARDNO $ 

35 LABEL LGPWG $ 

36 EQUIV KGGX.KGG/NOGENL $ 

37 COND LBLHA,NOGENL $ 

38 SMA3 GEI,KGGX/KGG/LUSET/NOGENL/NOSIMP $ 

39 LABEL LBLHA $ 

kO PARAM //*MPY*/NSK IP/0/0 $ 

itl LABEL LBLH $ 

J+2 GP4 CASECC,GEOMi+,EQEXIN,GPDT,BGPDT,CSTM,GPST/RG,YS,USET,ASET/ 

LUSET/S , N , MPCF 1 /S , N , MPCF 2/S , N , S I NGLE/S , N , 0M1 T/S , N , REACT/ 
S,N,NSKIP/S,N,REPEAT/S,N,N0SET/S,N,NOL/S,N,N0A/C,Y,ASET0UT/ 
S,Y,AUTOSPC $ 

1*3 COND ERR0R3.N0L $ 

kk COND ERRORS, REACT $ 



2.2-2 (05/30/86) 



STATIC ANALYSIS WITH INERTIA RELIEF 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 2 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

45 PURGE GM/MPCF1/G0,K00,L00,M00,M0A,P0,U00V,RU0V/0MIT/KSS,KFS,PS/ 
SINGLE $ 

1*6 COND LBU,GENEL $ ' 

1*7 PARAM //*EQ*/GPSPFLG/AUTOSPC/0 $ 

i»8 COND LBLt.GPSPFLG $ 

k$ GPSP GPL,GPST,USET,SiL/OGPST/S,N,NOGPST $ 

50 OFP OGPST //S.N.CARDNO $ 

51 LABEL LBL4 $ 

52 EQUIV KGG,KNN/MPCF1/MGG,MNN/MPCF1 $ 

53 COND LBL2,MPCF2 $ 
$k MCE1 USET.RG/GM $ 

55 MCE2 USET,GM,KGG t MGG,,/KNN,MNN,, $ 

56 LABEL LBL2 $ 

57 EQUIV KNN.KFF/SINGLE/MNN.MFF/SINGLE $ 

58 COND LBL3, SINGLE $ 

59 SCE1 USET,KNN,MNN,,/KFF,KFS,KSS,MFF, f $ 

60 LABEL LBL3 $ 

61 EQUIV KFF.KAA/OMIT/ MFF.MAA/OMIT $ 

62 COND LBL5.0MIT $ 

63 SMP1 USET,KFF,MFF,,/G0,KAA,K00,L00,MAA,M00,M0A,, $ 
61+ LABEL LBL5 $ 

65 RBMG1 USET,KAA,MAA/KLL,KLR,KRR,MLL,MLR,MRR $ 

66 RBMG2 KLL/LLL $ 

67 RBMG3 LLL,KLR,KRR/DM $ 

68 RBMG4 DM,MLL,MLR,MRR/MR $ 

69 SSG1 SLT,BGPDT,CSTM,SIL,EST,MPT,GPTT,EDT,MGG,CASECC,DIT,/PG,, , ,/ 

LUSET/NSKIP $ 



2.2-3 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 2 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

70 SSG2 USET,GM,YS,KFS,GO,DM,PG/QR,PO,PS,PL $ 

71 SSGi* PL,QR,P0,MR,MLR,DM,MLL,MO0,M0A,GO,USET/PL!,POI/OMIT $ 

72 SSG3 LLL,KLL,PLI,LO0,K0O,P0l/ULV,UOOV,RULV,RU0V/OMIT/V,Y, 

IRES«*-1/NSKIP/S,N,EPSI $ 

73 COND LBL9JRES $ 

fk MATGPR GPL,USET,SIL,RULV//*L* $ 

75 MATGPR GPL,USET,SIL,RUOV//*0* $ 

76 LABEL LBL9 $ 

77 SDR1 USET,PG,ULV,U00V,YS,GO,GM,PS,KFS,KSS,QR/UGV,PGG,QG/NSKIP/ 

ftSTATICS* ,$ 

78 COND LBL8, REPEAT $ 

79 REPT LBL1 1,360 $ 

80 JUMP ERR0R2 $ 

81 PARAM //*NOT*/TEST/REPEAT $ 

82 COND ERRORS, TEST $ 

83 LABEL LBL8 $ 

8k COND N0MPCF,GRDEQ $ 

85 EQMCK CASECC , EQEX IN.GPL, BGPDT , S I L , USET, KGG , GM, UGV, PGG , Q_G , CSTM/ 

0QM1/V,Y,0PT=0/V,Y,GRDEQ/NSKIP $ 

86 OFP 0QM1,, ,,,//$, N.CARDNO $ 

87 LABEL NOMPCF $ 

88 SDR2 CASECC,CSTM,MPT,DIT,EQEXIN,SIL,GPTT,EDT,BGPDP,,QG,UGV,EST,,PGG/ 

0PG1 ,0QG1 ,0UGV1 ,0ES1 ,OEF 1 ,PUGV1/*STATI CS* $ 

89 OFP OUGV1,OPG1,OQG1,OEF1,OES1,//S,N,CARDNG $ 

90 SCAN CASECC, 0ES1 ,0EF1/0ESF1/*RF* $ 

91 OFP 0ESF1,,,,,//S,N,CARDN0 $ 

92 COND P2.JUMPPL0T $ 

93 PLOT PLTPAR.GPSETS.ELSETS, CASECC, BGPDT, EQEX I N.S I P, PUGV1 , ,GPECT,OES 1/ 

PL0TX2/NSIL/LUSEP/JUMPPLOT/PLTFLG/S,N,PFILE $ 



2.2-4 (05/30/86) 



STATIC ANALYSIS WITH INERTIA RELIEF 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 2 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



9lt PRTMSG 

95 LABEL 

96 JUMP 

97 LABEL 

98 PRTPARM 

99 LABEL 

100 PRTPARM 

101 LABEL 

102 PRTPARM 

103 LABEL 

104 PRTPARM 

105 LABEL 

106 PRTPARM 

107 LABEL 

108 PRTPARM 

109 LABEL 

110 PURGE 

111 END 



PL0TX2// $ 

P2 $ 

FINIS $ 

ERROR 1 $ 

//-l/* INERTIA* $ 

ERR0R2 $ 

//-2/AINERTIA* $ 

ERR0R3 $ 

//-3/* INERT I A* $ 

ERROR!. $ 

//-U/* INERT I A* $ 

ERR0R5 $ 

//-5/* INERT I A* $ 

ERR0R6 $ 

//-6/* INERT I A* $ 

FINIS $ 

DUMMY/ALWAYS $ 

$ 



2.2-5 {05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.2.2 Description of Important DMAP Operations for Static Analysis with Inertia Relief 

5. GP1 generates coordinate system transformation matrices, tables of grid point locations, and « 
tables relating the internal and external grid point numbers. 

6. PLTTRAN modifies special scalar grid points in the BGPDT and SIL tables. 

7. GP2 generates Element Connection Table with internal indices. 

10. Go to DMAP No. 18 if there are no structure plot requests. 

11. PLTSET transforms user input into a form used to drive the structure plotter. 

12. PRTMSG prints error messages associated with the structure plotter. 

15. Go to DMAP No. 18 if no undeformed structure plots are requested. 

16. PL0T generates all requested undeformed structure plots. 

17. PRTMSG prints plotter data and engineering data for each undeformed plot generated. 

19. GP3 generates Static Loads Table and Grid Point Temperature Table. 

20. TA1 generates element tables for use in matrix assembly and stress recovery. 

21. Go to DMAP No, 107 and print Error Message No. 6 if there are no structural elements. 

25. EMG generates structural element stiffness and mass matrix tables and dictionaries for later 
assembly by the EMA module. 

27. Go to DMAP No. 29 if no stiffness matrix is to be assembled. 

28. EMA assembles stiffness matrix [K* ] and Grid Point Singularity Table. 

30. Go to DMAP No. 97 and print Error Message No. 1 if no mass matrix is to be assembled. 

31. EMA assembles mass matrix [M ]. 

32. Go to DMAP No. 35 if no weight and balance information is requested. 

33. GPWG generates weight and balance information. 

34. 0FP formats the weight and balance information prepared by GPWG and places it on the system 
output file for printing. 

36. Equivalence [K* ] to [K ] if no general elements exist. 

y y y y 

37. Go to DMAP No. 39 if no general elements exist. 

38. SMA3 adds general elements to [K* ] to obtain stiffness matrix [ K gg ]- 

41. Beginning of loop for multiple constraint sets. 

42. GP4 generates flags defining members of various displacement sets (USET), forms multipoint 
constraint equations [R ]{u } = and forms enforced displacement vector {Y $ }. 

43. Go to DMAP No. 101 and print Error Message No. 3 if no independent degrees of freedom are 
defined. 

44. Go to DMAP No. 103 and print Error Message No. 4 if no free-body supports exist. 
46. Go to DMAP No. 51 if general elements are present. 



2.2-6 (05/30/86) 



STATIC ANALYSIS WITH INERTIA RELIEF 

48. Go to DMAP No. 51 if no potential grid point singularities exist. 

49. GPSP generates a table of potential grid point singularities. * 

50. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 

52. Equivalence [K ] to [K ] and [M ] to [M nn ] if no multipoint constraints exist. 

53. Go to DMAP No. 56 if the MPC set for the current pass is unchanged from that of the previous 
pass. 

54. MCE1 partitions multipoint constraint equations [R ] = [R m j R R ] and solves for 
multipoint constraint transformation matrix [6 ] = -[R m ] L"R n L 

55. MCE2 partitions stiffness and mass matrices 



[I W ¦ 



K I K 
nn , nm 



and 



[ >V ¦ 



mn ' mm 



K mn I K m 
and performs matrix reductions 

[K„ n ] - [K nn ] ? [«J][^,] + [< n ][Gj ? [G^EK.JCGJ and 

[M„„] = K „] + [Gl][M mn ] + [ML][GJ + [G^ICM ][GJ. 



nn J "¦ nn J *- m-"-' mn J " mn J1 - nr 

57. Equivalence [K ] to [K ff ] and [M ] to [M ff ] if no single-point constraints exist. 

58. Go to DMAP No. 60 if no single-point constraints exist. 

59. SCE1 partitions out single-point constraints 

and 



IXJ 



nn- 



^ff_|_ K fs 



K , I K 
sf i ss 



»W ¦ 



M sf I M ss 



61. Equivalence [K^l to [K, J and [M--3 to [Ml if no omitted coordinates exist. 

TT 33 TT aa 

62. Go to DMAP No. 64 if no omitted coordinates exist. 

63. SMP1 partitions constrained stiffness and mass matrices 



[K ff ] ¦ 



k i k 

aa , ao 



and 



[M ff ] - 



M I M 
a a ao 

oa ( oo 



solves for transformation matrix [G Q ] = -[ K 00 ]~ [ K oa l 
and performs matrix reductions [K ] = E K aa 3 + C K oa ][ G ] 



2.2-7 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



and [M„] . [M M ] + [Mj a ][G o ] + [G> oa ] + [gJ][M 00 ][G q ] 
65. RBMG1 partitions out free-body supports 

and 



[^ - 



&J6 | M 



K rii ! K rr 



Wa.3 = 



M I M 

11 IT 



M 1 M 



66. RBMG2 decomposes constrained stiffness matrix [K £ ^] = [L £ ^][U ££ ], 

67. RBMG3 forms rigid body transformation matrix 

[D] - -I^]- 1 ^] , 
calculates rigid body check matrix 



IX] = CCl + t K Ir ][D] 



rr- 



and calculates rigid body error ratio 

p = NX 



K 



rr 



68. RBMG4 forms rigid body mass matrix 

[m r ] = [M rr ] + [M^ r ][D] + [D T ][M £r ] + [D T ][M ££ ][D] 

69. SSG1 generates static load Vectors {P }. 

70. SSG2 applies constraints to static load vectors 



<V 



<V = 'V * tV 1P »> • 



<V 



-- . <p f > ¦ tp r j - [K fs Ky . 



(p f > = 



. <p a > - (p a > + [g;]{p ) 



<p a } = 



and calculates determinate forces of reaction {q f } = -{P r > - E D D'tP Jt > ¦ 



2.2-8 (05/30/86) 



STATIC ANALYSIS WITH INERTIA RELIEF 
71. SSG4 calculates inertia loads and combines them with static loads 
{PJ} = {P A > + f[M M ][D3 + [M tr 3 ] [m r ] _1 {q r } and 



< P o> - <V + facW + [M L ] ) ['] 



[ny]" 1 ^}" . 



72. SSG3 solves for displacements of independent coordinates 

tu i> • [ |t u]" 1 «'l } . 
solves for displacements of omitted coordinates 

<u°> - [K 00 rX> ¦ 

calculates residual vector (RULV) and residual vector error ratio for independent 
coordinates 

UP\}- (P*> - [K U ]{ V 

H 



< p i> T( v 



and calculates residual vector (RU0V) and residual vector error ratio for omitted 
coordinates 

{<} ¦ <} - [K 00 ] {u°> , 

{uj>«pj} 

e o = • 

t pj>V > 

73. Go to DMAP No. 76 if residual vectors are not to be printed. 

74. MATGPR prints the residual vector for independent coordinates (RULV). 

75. MATGPR prints the residual vector for omitted coordinates (RU0V). 
77. SDR1 recovers dependent displacements 

I u, 



*'={u a > ; (u } = [G ]{u a } + {u°} , 



u r 



&¦«*¦ |-;;j-.,. 



{u } = [G ]{u } 5 )--( = {u } 
1 m L nr n ) ( g 



2.2-9 (05/30/86) 



DISPLACEMENT RIGID FORMATS 
and recovers single-point forces of constraint 

(q s > ¦ -{%} * <] <u f } + [K ss ] {Y s } . 

78. Go to DMAP No. 83 if all constraint sets have been processed. 

79. Go to DMAP No. 41 if additional sets of constraints need to be processed. 

80. Go to DMAP No. 99 and print Error Message No. 2 as the number of constraint sets exceeds 
360. 

82. Go to DMAP No. 105 and print Error Message No. 5 if multiple boundary conditions are 
attempted with an improper subset. 

84. Go to DMAP No. 87 if no multipoint constraint force balance is requested. 

85. EQMCK calculates the force and moment equilibrium check and prepares the multipoint 
constraint force balance (0QM1) for output. 

86. 0FP formats the table prepared by EQMCK and places it on the system output file for 
printing. 

88. SDR2 calculates element forces (0EF1) and stresses (0ES1) and prepares load vectors (0PG1), 
displacement vectors (0UGV1)» and single-point forces of constraint (0QG1) for output and 
translation components of the displacement vector (PUGV1). 

89. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

90. SCAN examines the element stresses and forces calculated by SDR2 and generates scanned 
output that meets the specifications set by the user. 

91. 0FP formats the scanned output table prepared by SCAN and places it on the system output 
file for printing. 

92. Go to DMAP No. 95 if no deformed structure plots are requested. 

93. PL0T generates all requested deformed structure and contour plots. 

94. PRTMSG prints plotter data, engineering data, and contour data for each deformed plot 
generated. 

96. Go to DMAP No. 109 and make normal exit. 

98. Print Error Message No. 1 and terminate execution. 

100. Print Error Message No. 2 and terminate execution. 

102. Print Error Message No. 3 and terminate execution. 

104. Print Error Message No. 4 and terminate execution. 

106. Print Error Message No. 5 and terminate execution. 

108. Print Error Message No. 6 and terminate execution. 



2.2-10 (05/30/86) 



STATIC ANALYSIS WITH INERTIA RELIEF 

2.2.3 Output for Static Analysis with Inertia Relief 

The following output may be requested for Static Analysis with Inertia Relief: * 

1. Displacements at selected grid points due to the sum of the applied loads and the 
inertia loads. 

2. Nonzero components of the applied static loads at selected grid points. 

3. Reactions on free-body supports due to applied loads (single-point forces of 
constraint). 

4. Forces and stresses in selected elements due to the sum of the applied loads and inertia 
loads. 

5. Scanned output of forces and elements in selected elements. 
The following plotter output may be requested: 

1. Undeformed and deformed plots of the structural model. 

2. Contour plots of stresses and displacements. 

2.2.4 Case Control Deck for Static Analysis with Inertia Relief 

The following items relate to subcase definition and data selection for Static Analysis with 
Inertia Relief: 

1. A separate subcase must be defined for each unique combination of constraints and static 
loads. 

2. A static loading condition must be defined for (not necessarily within) each subcase 
with a L0AD selection. 

3. An SPC set may be selected only if used to remove grid point singularities or some, but 
not all, of the free body motions. At least one free body support must be provided with 
a SUP0RT card in the Bulk Data Deck. 

4. Loading conditions associated with the same sets of constraints should be in contiguous 
subcases in order to avoid unnecessary looping. 

5. REPCASE may be used to repeat subcases in order to allow multiple sets for the same 
output item. 

2.2.5 Parameters for Static Analysis with Inertia Relief 

The following parameters are used in Static Analysis with Inertia Relief: 



2.2-11 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

!• ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2. AUT0SPC - reserved for future optional use. The default value is -1. 

3. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTRIA2, CPTUBE, CPQDPLT, CPTRPLT, 
CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

4. GRDEQ - optional. A positive integer value of this parameter selects the grid point 
about which equilibrium will be checked for the Case Control output request, MPCF0RCE. 
If the integer value is zero, the basic origin is used. The default value is -1. 

5. GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. 

6. IRES - optional. A positive integer value of this parameter causes the printing of the 
residual vectors following the execution of the SSG3 module. 

7. 0PT - optional. A positive integer value of this parameter causes both equilibrium and 
multipoint constraint forces to be calculated for the Case Control output request, 
MPCF0RCE. A negative integer value of this parameter causes only the equilibrium force 
balance to be calculated for the output request. The default value is which causes 
only the multipoint constraint forces to be calculated for the output request. 

8. SURFACE - optional. The computations of the external surface areas for the 
two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

9. V0LUME - optional. The volume computations for the two-dimensional and 
three-dimensional elements are activated by this parameter when they are generated in 
the EMG module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details. 

10. WTMASS - optional. The terms of the mass matrix are multiplied by the real value of 
this parameter when they are generated in the EMA module. 



2.2-12 (05/30/86) 



STATIC ANALYSIS WITH INERTIA RELIEF 

2.2.6 Automatic ALTERs for Automated Multi-stage Substructuring 

The following lines of the Static Analysis with Inertia Relief, Rigid Format 2, are AbTERed in 
automated substructure analyses. 

Phase 1: 4, 44-44, 65-68, 70-96 

Phase 2: 4, 5-5, 8-18, 21-21, 30-30, 36-39, 46-51, 84-98 
Phase 3: 65-68, 70-76, 77 
If APP DISP, SUBS is used, the user may also specify ALTERs. However, these must not 
interfere with the automatically generated DMAP statement ALTERs listed above. See Volume I, 
Section 5.9 for a description and listing of the ALTERs which are automatically generated for 
substructuring. 

2.2.7 Rigid Format Error Messages from Static Analysis with Inertia Relief 

The following fatal errors are detected by the DMAP statements in the Static Analysis with 
Inertia Relief rigid format. The text for each error message is given below in capital letters and 
is followed by additional explanatory material, including suggestions for remedial action. 



STATIC ANALYSIS WITH INERTIA RELIEF ERR0R MESSAGE N0. 1 - MASS MATRIX REQUIRED F0R CALCULATION 0F 
INERTIA L0ADS. 

The mass matrix is null because either no elements were defined with Connection cards, 
nonstructural mass was not defined on a Property card, or the density was not defined on a Material 
card. 

STATIC ANALYSIS WITH INERTIA RELIEF ERR0R MESSAGE N0. 2 - ATTEMPT T0 EXECUTE M0RE THAN 360 L00PS. 

An attempt has been made to use more. than 360 different sets of boundary conditions. This number 
may be increased by ALTERing the REPT instruction following SDR1. 

STATIC ANALYSIS WITH INERTIA RELIEF ERR0R MESSAGE N0. 3 - N0 INDEPENDENT DEGREES 0F FREED0M HAVE 
BEEN DEFINED. 

Either no degrees of freedom have been defined on GRID, SP0INT or Scalar Connection cards, or all 
defined degrees of freedom have been constrained by SPC, MPC, SUP0RT, 0MIT or GRDSET cards, or 
grounded on Scalar Connection cards. 

STATIC ANALYSIS WITH INERTIA RELIEF ERR0R MESSAGE N0. 4 - FREE-B0DY SUPP0RTS ARE REQUIRED. 

A statically determinate set of supports must be specified on a SUP0RT card in order to determine 
the rigid body characteristics of the structural model. 



2.2-13 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

STATIC ANALYSIS WITH INERTIA RELIEF ERR0R MESSAGE N0. 5 - A L00PING PR0BLEM RUN 0N A N0N-L00PING 
SUBSET . 

A problem requiring boundary condition changes was run on subset 1 or 3. The problem should be 
restarted on subset 0. 

STATIC ANALYSIS WITH INERTIA RELIEF ERR0R MESSAGE N0. 6 - N0 STRUCTURAL ELEMENTS HAVE BEEN DEFINED. 
No structural elements have been defined with Connection cards. 



2.2-14 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.3 NORMAL MODES ANALYSIS 

2.3.1 DMAP Sequence for Normal Modes Analysis 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 3 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



OPTIONS IN EFFECT GO 



ERR=2 L I ST 



NODECK NOREF NOOSCAR 



1 BEGIN D ISP 03 - NORMAL MODES ANALYSIS - APR. 1986 $ 

2 PRECHK ALL $ 

3 FILE LAMA«APPEND/PHIA«APPEND $ 
h PARAM //*MPY*/CARDNO/0/0 $ 

5 GP1 GE0M1,GE0M2,/GPL,EQEXIN,GPDT,CSTM,BGPDT,SIL/S,N,LUSET/ 
N0GPDT/ALWAYS=-1 $ 

i PLTTRAN BGPDT,SIL/BGPDP,SIP/LUSET/S,N,LUSEP $ 

7 GP2 GE0M2.EQEXIN/ECT $ 

8 PARAML PCDB//*PRES*////JlMPPLOT $ 

9 PURGE PLTSETX,PLTPAR,GPSETS,ELSETS/JUMPPLOT $ 

10 COND Pl.JUMPPLOT $ 

11 PLTSET PCDB,EQEXIN,ECT/PLTSETX,PLTPAR,GPSETS,ELSETS/S,N,NSIL/ 

S.N.JUMPPLOT $ 

12 PRTMSG PLTSETX// $ 

13 PARAM //*MPY*/PLTFLG/1/1 $ 
H PARAM //ftMPY*/PF1LE/0/0 $ 

15 COND Pl.JUMPPLOT $ 

16 PLOT P[_TPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIL, ,ECT, ,/PLOTXI/ 

NSIL/LUSET/S,N,JUMPPLOT/S,N,PLTFLG/S,N,PFILE $ 

17 PRTMSG PLOTXl//$ 

18 LABEL PI $ 

19 GP3 GEOM3,EQEXIN,GEOM2/,GPTT/NOGRAV $ 

20 TA1 ECT.EPT.BGPDT.SIL.GPTT.CSTM/EST.GEl.GPECT,,/ 

LUSET/S,N,N0SIMP/1/S,N,N0GENL/S,N,GENEL $ 

21 COND ERR0R4.N0SIMP $ 



2.3-1 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 3 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

22 PURGE OGPST/GENEL $ 

23 PARAM //ftADD*/NOKGGX/l/0 $ 
2k PARAM //*ADD*/N0MGG/1/0 $ 

25 EMG EST,CSTM,MPT,DIT,GE0M2,/KELM,KDICT,MELM,MDICT,,,/S,N,N0KGGX/ 

S,N,NOMGG////C,Y,COUPMASS/C,Y,CPBAR/ 

C , Y , CPROD/C , Y , CPQUAD 1 /C , Y , CPQUAD2/C , Y , CPTR I A 1 /C , Y , CPTR I A2/ 
C , Y , CPTUBE/C , Y , CPQDPLT/C, Y , CPTRPLT/C , Y , CPTRBSC/ 
V,Y,VOLUME/V,Y, SURF ACE $ 

26 PURGE KGGX,GPST/NOKGGX $ 

27 COND JMPKGG.NOKGGX S 

28 EMA GPECT.KDICT.KELM/KGGX.GPST $ 

29 LABEL JMPKGG $ 

30 COND ERROR l.NOMGG $ 

31 EMA GPECT,MD!CT,MELM/MGG,/-1/C,Y,WTMASS=1.0 $ 

32 COND LGPWG.GRDPNT $ 

33 GPWG BGPDP,CSTM,EQEXIN,MGG/0GPWG/V,Y,GRDPNT=-1/C,Y ) WTMASS $ 

34 OFP OGPWG, f ,,,//S,N;CARDNO $ 

35 LABEL LGPWG $ 

3.6 EQUIV KGGX,KGG/NOGENL $ 

37 COND LBL11.N0GENL $ 

38 SMA3 GEI.KGGX/KGG/LUSET/NOGENL/NOSIMP $ 

39 LABEL LBL1T $ 

kO PARAM //*MPY*/NSKIP/0/0 $ 

41 GP4 CASECC,GE0M4,EQEXIN,GPDT,BGPDT,C$TM,GPST/RG,YS,USET,ASET/ 

LUSET/S, N, MPCF 1/S,N, MPCF 2/S.N.S I NGLE/S,N,OMiT/S,N, REACT/ 
S , N , NSK I P/S , N , REPE AT/S , N , NOSET/S , N , NOL/S , N , NOA/C , Y , ASETOUT/ 
S,Y,AUTOSPC $ 

42 COND ERROR3.M0L $ 

1+3 PURGE KRR,KLR,DM,MLR,MR/REACT/GM/MPCFl/GO/OMiT/KFS/SINGLE/QG/NOSET $ 
kk COND LBL4.GENEL $ 



2.3-2 (05/30/86) 



NORMAL MODES ANALYSIS 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 3 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

kS PARAM //*EQ*/GPSPFLG/AUTOSPC/0 $ 

hi COND LBU.GPSPFLG $ 

i»7 GPSP GPL,GPST,USET,SIL/OGPST/S,N,NOGPST $ 

48 OFP OGPST,,,,,//S,N,CARDNO $ 

J»9 LABEL LBL4 $ 

50 EQUIV KGG,KNN/MPCF1/MGG,MNN/MPCF1 $ 

51 COND LBL2.MPCF1 $ 

52 MCE1 USET.RG/GM $ 

53 MCE2 USET,GM,KGG,MGG,,/KNN,MNN,, $ 
$U LABEL LBL2 $ 

55 EQUIV KNN,KFF/SINGLE/MNN,MFF/S1NGLE $ 

56 COND LBL3, SINGLE $ 

57 SCE1 USET,KNN,MNN,,/KFF,KFS,,MFF )1 $ 

58 LABEL LBL3 5 

59 EQUIV KFF.KAA/OMIT $ 

60 EQUIV MFF.MAA/OMIT $ 

61 COND LBL5.0MIT $ 

62 SMP1 USET,KFF,,,/GO,KAA,KOO,LOO,,,,, $ 

63 SMP2 USET.GO.MFF/MAA $ 

64 LABEL LBL5 $ 

65 COND LBL6, REACT $ 

66 RBMG1 USET,KAA,MAA/KLL,KLR,KRR,MLL,MLR,MRR $ 

67 RBMG2 KLL/LLL $ 

68 RBMG3 LLL,KLR,KRR/DM $ 

69 RBMGA DM,MLL,MLR,MRR/MR $ 

70 LABEL LBL6 $ 



2.3-3 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 3 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



71 DPD DYNAMICS, GPL.S I L,USET/GPLD,S I LD.USETD, , , , , , , EED,EQDYN/ 

LUSET/LUSETD/NOTFL/NODLT/NOPSDL/NOFRL/ 
N0NLFT/N0TRL/S,N,N0EED//N0UE $ 

72 COND ERR0R2,N0EED $ 

73 PARAM //*MPY*/NEIGV/1/-1 $ 

Ik READ KAA,MAA,MR,DM,EED,USET,CASECC/LAMA,PHIA,MI ,0E I GS/*M0DES*/ 
S,N,NEIGV $ 

75 OFP 0EIGS,,,,,//S,N,CARDN0 $ 

76 COND FINiS.NEIGV $ 

77 OFP LAMA,,,,, //S,N, CARDNO $ ¦ 

78 SDR1 USET,,PHIA,,,GO,GM, ,KFS, ,/PHIG, ,QG/1/*RE IG* $ 

79 COND NOMPCF,GRDEQ $ 

80 EQMCK CASECC , EQEX I N , GPL , BGPDT , S I L , USET, KGG , GM, PH I G , LAMA , QG , CSTM/ 

0QMl/V,Y,0PT«O/V,Y,GRDEQ/-l $ 

81 OFP 0QM1,, ,, ,//S,N, CARDNO $ 

82 LABEL NOMPCF $ 

83 SDR2 CASECC,CSTM,MPT,DIT,EQEXIN,S!L,,,BGPDP,LAMA,QG,PHIG,EST,,/ 

,0QG1,0PHIG,0ES1,0EF1 , PPHIG/*RE IG* $ 

8^ OFP 0PHIG,0QG1,0EF1 ,0ES1, ,//S,N, CARDNO $ 

85 SCAN CASECC, 0ES1 ,OEF 1/OESF 1/*RF* $ 

86 OFP 0ESF1, ,,,,//S,N, CARDNO $ 

87 COND P2, JUMP-PLOT $ 

88 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIP,,PPHIG,GPECT,0ES1/ 

PL0TX2/NSIL/LUSEP/JUMPPL0T/PLTFLG/S,N,PFILE $ 

89 PRTMSG PL0TX2// $ 

90 LABEL P2 $ 

91 JUMP FINIS $ 

92 LABEL ERR0R1 $ 

93 PRTPARM //-1/*M0DES* $ 



2.3-4 (05/30/86) 



NORMAL MODES ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 3 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

Sk LABEL ERR0R2 $ 

95 PRTPARM //-2/*M0DES* $ 

96 LABEL ERR0R3 $ 

97 PRTPARM //-3/*M0DES* $ 

98 LABEL ERR0R4 $ 

99 PRTPARM //-4/*M0DES* S 

100 LABEL FINIS $ 

101 PURGE DUMMY/ALWAYS $ 

102 END $ 



2.3-5 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.3.2 Description of Important DMAP Operations for Normal Modes Analysis 

5. GP1 generates coordinate system transformation matrices, tables of grid point locations, and 
tables relating the internal and external grid point numbers. 

6. PLTTRAN modifies special scalar grid points in the BGPDT and SIL tables. 

7. GP2 generates Element Connection Table with internal indices. 

10. Go to DMAP No. 18 if there are no structure plot requests. 

11. PLTSET transforms user input into a form used to drive the structure plotter. 

12. PRTMSG prints error messages associated with the structure plotter. 

15. Go to DMAP No. 18 if no undeformed structure plots are requested. 

16. PL0T generates all requested undeformed structure plots. 

17. PRTMSG prints plotter data and engineering data for each undeformed plot generated. 

19. GP3 generates Grid Point Temperature Table. 

20. TA1 generates element tables for use in matrix assembly and stress recovery. 

21. Go to DMAP No. 98 and print Error Message No. 4 if there are ho structural elements. 

25. EMG generates structural element stiffness and mass matrix tables and dictionaries for later 
assembly by the EMA module. 

27. Go to DMAP No. 29 if no stiffness matrix is to be assembled. 

28. EMA assembles stiffness matrix [K* 1 and Grid Point Singularity Table. 

30. Go to DMAP No. 92 and print Error Message No. 1 if no mass matrix is to be assembled. 

31. EMA assembles mass matrix [M ]. 

32. Go to DMAP No. 35 if no weight and balance information is requested. 

33. GPWG generates weight and balance information. 

34. 0FP formats the weight and balance information prepared by GPWG and places it on the system 
output file for printing. 

36. Equivalence [K* ] to [K__] if no general elements exist. 

yy yy 

37. Go to DMAP No. 39 if no general elements exist. 

38. SMA3 adds general elements to [K*] to obtain stiffness matrix [K ]. 

41. GP4 generates flags defining members of various displacement sets (USET) and forms 
multipoint constraint equations [R ] {u } = 0. 

42. Go to DMAP No. 96 and print Error Message No. 3 if no independent degrees of freedom are 
defined. 

44. Go to DMAP No. 49 if general elements are present, 

46. Go to DMAP No. 49 if no potential grid point singularities exist. 

47. GPSP generates a table of potential grid point singularities. 



2.3-6 (05/30/86) 



NORMAL MODES ANALYSIS 



48. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 

50. Equivalence [K ] to [K nf) ] and [M ] to [M nn ] if no multipoint constraints exist. 

51. Go to DMAP No. 54 if no multipoint constraints exist. 

52. MCE1 partitions multipoint constraint equations [R ] = [R m j R n ] and solves for 
multipoint constraint transformation matrix [G m ] = -[R,,,] [R n L 

53. MCE2 partitions stiffness and mass matrices 



[I W = 



K I K 

nn i nm 

1 

K mn ' K mm 



and 



[ V ¦ 






and performs matrix reductions 

[K nn ] - [K n „] ? [g'][K„] ? [K^ n ][G m ] ? [SIILS,,]^] and 
[Ml - [M„J ? [Gl][M mn ] ? [ML][GJ ? [Gi;][M mm ][G m ] . 



nn- 



m-"- mn- 



55. Equivalence [K^] to [K ff ] and [M nn ] to [M ff ] if no single-point constraints exist. 

56. Go to DMAP No. 58 if no single-point constraints exist. 



57. SCE1 partitions out single-point constraints 



t K J " 



hf ' K fs_ 

K sf ' K ss 



and 



[M ] = 



nn 






59. Equivalence [K„] to [K ] if no omitted coordinates exist. 

60. Equivalence [M ff ] to [M ] if no omitted coordinates exist. 

61. Go to DMAP No. 64 if no omitted coordinates exist. 

62. SMP1 partitions constrained stiffness matrix 



aa i ao 



K oa I K oo 



[K ff ]= 

solves for transformation matrix [G Q ] = -[K Q0 ] [K Qa ] 
and performs matrix reduction [K ] = [K a& ] + [K oa ][G Q ] . 
63. SMP2 partitions constrained mass matrix 



2.3-7 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



[M ff ] = 



M | M 
aa ao 

M 1 M 
oa ' oo 



and performs matrix reduction 

[M aa ] - tS M ] ? [Mj a ][G ] + [G> M ] ? [Gj][M 00 ][G ] . 

65. Go to DMAP No. 70 if no free-body supports exist. 

66. RBMG1 partitions out free-body supports 



^ - 



K r£ I K rr 



and 



£"..] 



M | M 

M i M 
ri ' rr 



67. RBMG2 decomposes constrained stiffness matrix [K ] = [L M ][U U ], 

68. RBMG3 forms rigid body transformation matrix 



[D] - -[K M ]-'[V], 



calculates rigid body check matrix 



[X] « [K pr ] + [K; r ][D] 



and calculates rigid body error ratio 



rr 



69. RBMG4 forms rigid body mass matrix 



[m r ] = [M rr ] + [ M { r ][D] + [D T ][M Ar ] + [D T ][M M ][D]. 

71. DPD extracts Eigenvalue Extraction Data from Dynamics data block. 

72. Go to DMAP No. 94 and print Error Message No. 2 if there is no Eigenvalue Extraction Data. 
74. READ extracts real eigenvalues and eigenvectors from the equation 

calculates rigid body modes by finding a square matrix [+ ro ] such that 

[m ] = [?J ][m r ][* ro ] 
is diagonal and normalized, computes rigid body eigenvectors 



U 3 = 
LT ao J 



_ T ro 
ro 



2.3-8 (05/30/86) 



NORMAL MODES ANALYSIS 

calculates modal mass matrix 

[m] = [*J][M aa ][* a ] 
and normalizes eigenvectors according to one of the following user requests: 

1) Unit value of a selected component 

2) Unit value of the largest component 

3) Unit value of the generalized mass. 

75. 0FP formats the summary of eigenvalue extraction information (0EIGS) prepared by READ and 
places it on the system output file for printing. 

76. Go to DMAP No. 100 and make normal exit if no eigenvalues were found. 

77. 0FP formats the eigenvalues (LAMA) prepared by READ and places them on the system output 
file for printing. 

78. SDR1 recovers dependent components of the eigenvectors 

u > - [s ] {+ a } , j_M = { *f } 



!-- !-<?„> • l v-£y<»n> ¦ 



-7-- l V 



an 



d recovers single-point forces of constraint {q } = [Kf $ ] {<fy}, 



79. Go to DMAP No. 82 if no multipoint constraint force balance is requested. 

80. EQMCK calculates the force and moment equilibrium check and prepares the multipoint 
constraint force balance (0QM1) for output. 

81. 0FP formats the table prepared by EQMCK and places it on the system output file for 
printing. 

83. SDR2 calculates element forces (0EF1) and stresses (0ES1) and prepares eigenvectors (0PHIG) 
and single-point forces of constraint (0QG1) for output and translation components of the 
eigenvectors (PPHIG). 

84. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

85. SCAN examines the element stresses and forces calculated by SDR2 and generates scanned 
output that meets the specifications set by the user. 

86. 0FP formats the scanned output table prepared by SCAN and places it on the system output 
file for printing. 

87. Go to DMAP No. 90 if no deformed structure plots are requested. 

2.3-9 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

88 PL0T generates all requested deformed structure and contour plots. 

89. PRTMSG prints plotter data, engineering data, and contour data for each deformed plot 

generated. 

91. Go to DMAP No. 100 and make normal exit. 

93. Print Error Message No. 1 and terminate execution. 

95. Print Error Message No. 2 and terminate execution. 

97. Print Error Message No. 3 and terminate execution. 
99. Print Error Message No. 4 and terminate execution. 



2.3-10 (05/30/86) 



NORMAL MODES ANALYSIS 

2.3.3 Output for Normal Modes Analysis 

Each eigenvalue is identified with a mode number determined by sorting the eigenvalues by 
their algebraic magnitude. The following summary of the eigenvalues extracted is automatically 
printed: 

1. Mode Number 

2. Extraction Order 

3. Eigenvalue 

4. Radian Frequency 

5. Cyclic Frequency 

6. Generalized Mass 

7. Generalized Stiffness 

The following summary of the eigenvalue analysis performed, using the Inverse Power method, 
is automatically printed: 

1. Number of eigenvalues extracted. 

2. Number of starting points used. 

3. Number of starting point moves. 

4. Number of triangular decompositions. 

5. Number of vector iterations. 

6. Reason for termination. 

(1) Two consecutive singularities encountered while performing triangular 
decomposition. 

(2) Four shift points while tracking a single root. 

(3) All eigenvalues found in the frequency range specified. 

(4) Three times the number of roots estimated in the frequency range have been 
extracted. 

(5) All eigenvalues that exist in the problem have been found. 

(6) The number of roots desired have been found. 

(7) One or more eigenvalues have been found outside the frequency range specified. 

(8) Insufficient time to find another root. 

(9) Unable to converge 

7. Largest off -diagonal modal mass term and the number failing the criterion. 



2.3-11 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

The following summary of the eigenvalue analysis performed, using the Determinant method, is 
automatically printed: 

1. Number of eigenvalues extracted. 

2. Number of passes through starting points. 

3. Number of criteria changes. 

4. Number of starting point moves. 

5. Number of triangular decompositions. 

6. Number of failures to iterate to a root. 

7. Reason for termination. 

(1) The number of roots desired have been found. 

(2) All predictions for eigenvalues are outside the frequency range specified. 

(3) Insufficient time to find another root. 

(4) Matrix is singular at first three starting points. 

8. Largest off -diagonal modal mass term and the number failing the criterion. 

9. Swept determinant function for each starting point. 

The following summary of the eigenvalue analysis performed, using the Givens method, is 
automatically printed: 

1. Number of eigenvalues extracted. 

2. Number of eigenvectors computed. 

3. Number of eigenvalue convergence failures. 

4. Number of eigenvector convergence failures. 

5. Reason for termination. 

(1) Normal termination. 

(2) Insufficient time to calculate eigenvalues and number of eigenvectors requested. 

(3) Insufficient time to find additional eigenvectors. 

6. Largest off-diagonal modal mass term and the number failing the criterion. 

The following summary of the eigenvalue analysis performed, using the Tridiagonal Reduction 
(FEER - Fast Eigenvalue Extraction Routine) method, is automatically printed. 

1. Number of eigenvalues extracted. 

2. Number of starting points used. 

This corresponds to the total number of random starting and restart vectors used by the 
FEER process. 

2.3-12 (09/30/83) 



NORMAL MODES ANALYSIS 

3. Number of starting point moves. 

Not used in PEER (set equal to zero). * 

4. Number of triangular decompositions. 

Always equal to one, except for unshifted vibration problems (roots starting from the 
lowest requested). In this case, a maximum of three shifts and three decompositions are » 
employed to remove possible stiffness matrix singularities. 

5. Total number of vector iterations. 

The total number of reorthogonalizations of all the trial vectors employed. 

6. Reason for termination. 

(0) Normal termination. 

(1) Fewer than the requested number of eigenvalues and eigenvectors have been 
extracted. 

(3) The problem size has been reduced. However, the desired number of accurate 
eigensolutions specified on the EIG'B or EIGR card may have been obtained. A 
detailed list of the computed error bounds can be obtained by requesting DIAG 16 in 
the Executive Control Deck. 

7. Largest off -diagonal modal mass term and the number failing the mass orthogonality 
criterion. 

The following output may be requested: 

1. Eigenvectors along with the associated eigenvalue for each mode. 

2. Nonzero components of the single-point forces of constraint for selected modes at 
selected grid points. 

3. Forces and stresses in selected elements for selected modes. 

4. Scanned output of forces and elements in selected elements. 
The following plotter output may be requested: 

1. Undeformed plot of the structural model and mode shapes for selected modes. 

2. Contour plots of stresses and displacements for selected modes. 

2.3.4 Case Control Deck for Normal Modes Analysis 

The following items relate to subcase definition and data selection for Normal Modes 
Analysis: 

1. METH0D must be used to select an EIGR card that exists in the Bulk Data Deck. 

2.3-13 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2. On restart, the current EIGR card controls the eigenvalue extraction, regardless of what 
calculations were made in the previous execution. Consequently, when making restarts 
with either the Determinant method, the Inverse Power method or the Tridiagonal 
Reduction (PEER) method, METH0D should be changed to select an EIGR card that avoids the 
extraction of previously found eigenvalues. This is particularly important following 
unscheduled exits due to insufficient time to find all eigenvalues in the range of 
interest. 

3. An SPC set must be selected unless the model is a free body or all constraints are 
specified on GRID cards, Scalar Connection cards or with General Elements. 

4. Multiple subcases are used only to control output requests. A single subcase is 
sufficient if the same output is desired for all modes. If multiple subcases are 
present, the output requests will be honored in succession for increasing mode numbers. 
M0DES may be used to repeat subcases in order to make the same output request for 
several consecutive modes. 

2.3.5 Parameters for Normal Modes Analysis 

The following parameters are used in Normal Modes Analysis: 

1. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2. AUT0SPC - reserved for future optional use. The default value is -1. 

3. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTR1A2, CPTUBE, CPQDPLT, CPTRPLT, 
CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

4. GRDEQ - optional. A positive integer value of this parameter selects the grid point 
about which equilibrium will be checked for the Case Control output request, MPCF0RCE. 
If the integer value is zero, the basic origin is used. The default value is -1. 

5. GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. All fluid related masses are ignored. 



2.3-14 (05/30/86) 



NORMAL MODES ANALYSIS 

6. 0PT - optional. A positive integer value of this parameter causes both equilibrium and 
multipoint constraint forces to be calculated for the Case Control output request, 
MPCF0RCE. A negative integer value of this parameter causes only the equilibrium force 
balance to be calculated for the output request. The default value is which causes 
only the multipoint constraint forces to be calculated for the output request. 

7. SURFACE - optional. The computations of the external surface areas for the 
two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

8. V0LUME - optional. The volume computations for the two-dimensional and 
three-dimensional elements are activated by this parameter when they are generated in 
the EMG module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details. 

9. WTMASS - optional. The terms of the structural mass matrix are multiplied by the real 
value of this parameter when they are generated in the EMA module. Not recommended for 
use in hydroelastic problems. 

2.3.6 Optional Diagnostic Output for FEER 

Special detailed information related to the generation of the reduced problem size, the 
elements of the reduced tridiagonal matrix, computed error bounds and other numerical tests can be 
obtained by requesting DIAG 16 in the NASTRAN Executive Control Deck. 

The meaning of this information is explained below in the order in which it appears in the 
DIAG 16 output. 

- The order of the unreduced problem (size of the [K ] matrix) 

aa 

- The maximum number of existing finite eigensolutions as initially detected by 
FEER 

- The order of the reduced eigenproblem which will be solved to obtain the number 
of accurate solutions requested by the user 

- The number of previously computed accurate eigenvectors on the eigenvector file 
which were generated prior to a restart or by the NASTRAN rigid body mode 
generator 

- The user specified shift after conversion from cycles to radians - squared (used 
only in frequency problems). 

INTERNAL SHIFT - A small positive value automatically computed to remove singularities if the 
user has specified a zero shift. Otherwise, the negative of the user shift 
(used only in frequency problems). 

2.3-15 (05/30/86) 



0RDER 


MAX RANK 


RED 0RDER 


0RTH VCT 


USER SHIFT 



DISPLACEMENT RIGID FORMATS 

SINGULARITY CHECK - PASS: the shifted stiffness matrix is non-singular 

_ ****. £ ne nuni b er f internal shifts needed to remove stiffness matrix 
singularities 

TRIDIAGONAL ELEMENTS ROW j, **, ***, **** - The computed tridiagonal elements of the reduced 

eigenmatrix: 
j - Matrix row 
** - Diagonal element 
*** - Off-diagonal element 
**** _ First estimate of off -diagonal element in the next row 

0RTH ITER - The number of times a reorthogonalization of a trial vector has been performed, 

MAX PR0J - The maximum projection of the above trial vector on the previously computed 
accurate trial vectors {prior to the current reorthogonalization) 

N0RMAL FACT - The normalization factor for the reorthogonalized trial vector 

0PEN C0RE N0T USED *** FEER3 - Open core not used by Subroutine FEER3, in single-precision words 

FEER QRW ELEMENT *, ITER **, ***, RATI0 ****, PR0J *****: 

* - The internal eigenvalue number in the order of its extraction by FEER 

** - The number of inverse power iterations performed to extract the associated 

eigenvector of the reduced system (this is not a physical eigenvector) 

*** - If a multiple root has been detected, the number of times that the previous 

multiple-root, reduced-system eigenvectors have been projected out of the 
current multiple-root eigenvector before repeating the inverse power iterations 

.**** - The absolute ratio of maximum, reduced-system eigenvector elements for 
successive inverse power iterations 

***** - The maximum projection of a current multiple-root eigenvector on previously 
computed eigenvectors for the same root 

PHYSICAL EIGENVALUE *, **, THE0R ERR0R *** PERCENT, PASS 0R FAIL: 

* - The internal eigenvalue number in the order of its extraction by FEER 

** - The associated physical eigenvalue (A for buckling problems, w 2 for frequency 

problems) 

*** - Theoretical upper bound on the relative eigenvalue error 

PASS - The computed error is less than or equal to the allowable specified on the EIGB 
or EIGR bulk data card (default is .001/n where n is the order of the stiffness 
matrix) 

FAIL - The computed error is. greater than the allowable and this mode is not accepted 
for further processing 

0PEN C0RE N0T USED *** FEER4 - Open core not used by Subroutine FEER4, in single-precision words 

FEER C0MPLETE *, **, ***, **** 

* - The remaining CPU time available following decomposition of the shifted 

stiffness matrix, in seconds (the total time is specified on the TIME card in 
the Executive Control Deck) 

** - The remaining CPU time, in seconds after completing Subroutine FEER3 

*** - The remaining CPU time, in seconds after completing Subroutine FEER4 

2.3-16 (05/30/86) 



NORMAL MODES ANALYSIS 

**** - The total operation count for FEER after decomposition of the shifted stiffness 
matrix. One operation is considered to be a multiplication or division followed 
by an addition » 

2.3.7 The APPEND Feature 

In real eigenvalue analysis, it is frequently necessary to add new eigenvalues and 
eigenvectors to those already computed in a previous run. The APPEND feature (see Section 9.2.2 of 
the Theoretical Manual for details) makes it possible to do this without re-executing the entire 
problem. It is available when using the Inverse Power, Determinant and iridiagonal Reduction 
(FEER) methods of eigenvalue extraction. 

In order to use the APPEND feature, the user should employ the following steps: 

1. Request a checkpoint of an eigenvalue problem by employing either the Inverse Power, 
Determinant or Tridiagonal Reduction (FEER) method. 

2. Check to ensure that at least one eigenvalue and one eigenvector are computed in this 
run and that the LAMA (eigenvalue) and PHIA (eigenvector) files are successfully 
checkpointed. 

3. Restart the problem by changing either the METH0D card in the Case Control Deck and/or 
the EIGR card in the Bulk Data Deck and ensuring that the following conditions are 
satisfied: 

a. The structural model and the constraint data for the restart must be the same as 
that used in the checkpoint run. 

b. The method of eigenvalue extraction employed in the restart need not be the same as 
that used in the checkpoint run, but the range of eigenvalues specified on the EIGR 
Bulk Data card should not include the eigenvalues already checkpointed in Step 1. 

c. If the user wishes to retrieve only a subset of the checkpointed eigenvalues and 
eigenvectors, a DMAP alter should be employed in the Executive Control Deck to reset 
the parameter NEIGV to the desired value by means of a PARAM statement just before 
the READ module in the DMAP sequence. (See Section 9.2.2 of the Theoretical Manual 
for details.) 



2.3-17 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

4. Note that the eigenvalues and eigenvectors output by the restart include those retrieved 
from the checkpointed run of Step 1. Also, the resulting eigenvectors are normalized 
according to the method of normalization specified in the restart. 

2.3.8 Automatic ALTERs for Automated Multi-stage Substructuring 

The following lines of the Normal Modes Analysis, Rigid Format 3, are ALTERed in automated 
substructure analyses. 

Phase 1: 4, 42, 65-70, 71-91 

Phase 2: 4, 5-5, 8-18, 21-21, 30-30, 36-39, 44-49, 79-93 

Phase 3: 65-70, 71-77, 78 

If APP DISP, SUBS is used, the user may also specify ALTERs. However, these must not 
interfere with the automatically generated DMAP statement ALTERs listed above. See Volume I, 
Section 5.9 for a description and listing of the ALTERs which are automatically generated for 
substructuring. 

2.3.9 Rigid Format Error Messages from Normal Modes Analysis 

The following fatal errors are detected by the DMAP statements in the Normal Modes Analysis 
rigid format. The text for each error message is given below in capital letters and is followed by 
additional explanatory material, including suggestions for remedial action. 

N0RMAL M0DE ANALYSIS ERR0R MESSAGE N0. 1 - MASS MATRIX REQUIRED F0R REAL EIGENVALUE ANALYSIS. 

The mass matrix is null because either no structural elements were defined with Connection cards, 
nonstructural mass was not defined on a Property card, or the density was not defined on a Material 
card. 

N0RMAL M0DE ANALYSIS ERR0R MESSAGE N0. 2 - EIGENVALUE EXTRACTI0N DATA REQUIRED F0R REAL EIGENVALUE 
ANALYSIS. 

Eigenvalue extraction data must be supplied on an EIGR card in the Bulk Data Deck and METH0D in the 
Case Control Deck must select an EIGR set. 

N0RMAL M0DE ANALYSIS ERR0R MESSAGE N0. 3 - N0 INDEPENDENT DEGREES 0F FREED0M HAVE BEEN DEFINED. 

Either no degrees of freedom have been defined on GRID, SP0INT or Scalar Connection cards, or all 
defined degrees of freedom have been constrained by SPC, MPC, SUP0RT, 0MIT or GRDSET cards, or 
grounded on Scalar Connection cards. 

N0RMAL M0DE ANALYSIS ERR0R MESSAGE N0. 4 - N0 STRUCTURAL ELEMENTS HAVE BEEN DEFINED. 
No structural elements have been defined with Connection cards. 

2.3-18 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.4 STATIC ANALYSIS WITH DIFFERENTIAL STIFFNESS 

2.4.1 DMAP Sequence for Static Analysis With Differential Stiffness 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT It 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



OPTIONS IN EFFECT GO 



ERR*2 L 1 ST 



NODECK NOREF NOOSCAR 



1 BEGIN D ISP Oil - DIFFERENTIAL STIFFNESS ANALYSIS - APR. 1 986 $ 

2 PRECHK ALL $ 

3 PARAM //*MPY*/CARDN0/O/O $ 

4 GP1 GE0M1,GE0M2,/GPL,EQEXIN,GPDT,CSTM,BGPDT,SIL/S,N,LUSET/ 

S,N,N0GPDT/MINUS1<=-1 $ 

5 COND ERR0R3.N0GPDT $ 

6 PLTTRAN BGPDT,SiL/BGPDP,SIP/LUSET/S,N,LUSEP $ 

7 GP2 GE0M2.EQEXIN/ECT $ 

8 PARAML PCDB//*PRES*////JUMPPLOT $ 

9 PURGE PLTSETX,PLTPAR,GPSETS,ELSETS/JUMPPLOT $ 

10 COND Pl.JUMPPLpT $ 

11 PLTSET PCDB,EQEXIN,ECT/PLTSETX,PLTPAR,GPSETS,ELSETS/S,N,NSIL/ 

S,N,JUMPPLOT $ 

12 PRTMSG PLTSETX/V $ 

13 PARAM //*MPY*/PLTFLG/1/1 $ 
Mi PARAM //*MPY*/PFILE/0/0 $ 

15 COND Pl.JUMPPLOT $ 

16 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEX!N,SIL,,ECT,,/PL0TX1/ 

NSIL/LUSET/S,N,JUMPPLOT/S,N,PLTFLG/S,N,PFILE $ 

17 PRTMSG PL0TX1// $ 

18 LABEL PI $ 

19 GP3 GEOM3,EQEXIN,GE0M2/SLT,GPTT/S,N,N0GRAV $ 

20 PARAM //ftAND*/NOMGG/NOGRAV/V,Y,GRDPNT=-i $ 

21 TA1 ECT,EPT,BGPDT,SIL,GPTT,CSTM/EST t GEI,GPECT,,/ 

LUSET/S,N,NOSIMP/1/$,N,NOGENL/S,N,GENEL $ 



2.4-1 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT it 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

22 COND ERROR1.N0SIMP $ 

23 PURGE OGPST/GENEL $ 

24 PARAM //*ADD*/NOKGGX/l/0 $ 

25 EMG EST,CSTM,MPT,DIT,GE0M2,/KELM,KDTCT,MELM,MDICT,, , /S , N , NOKGGX/ 

S , N , NOMGG////C , V, COUPMASS/C , Y , CPBAR/ 

C,Y,CPR0D/C,Y,CPQUAD1/C,Y,CPQUAD2/C,Y,CPTRIA1/C,Y,CPTRIA2/ 
C,Y,CPTUBE/C,Y,CPQDPLT/C,Y,CPTRPLT/C,Y,CPTRBSC/ 
V,Y,VOLUME/V,Y,SURFACE $ 

26 PURGE KGGX,GPST/NOKGGX/MGG/NOMGG $ 

27 COND JMPKGG.NOKGGX $ 

28 EMA GPECT,KDICT,KELM/KGGX,GPST $ 

29 LABEL JMPKGG $ 

30 COND JMPMGG.NOMGG $ 

31 EMA GPECT,MDLCT,MELM/MGG,/-1/C,Y,WTMASS=1.0 $ 

32 LABEL JMPMGG $ 

33 COND LBL1.GRDPNT $ 

34 COND ERR0R4,N0MGG $ 

35 GPWG BGPDP,CSTM,EQEXIN,MGG/OGPWG/V,Y,GRDPNT/C,Y,WTMASS $ 

36 OFP OGPWG, , ,,,//S,N,CARDNO $ 

37 LABEL LBL1 $ 

38 EQU.IV KGGX,KGG/NOGENL S 

39 COND LBLll.NOGENL $ 

40 SMA3 GEI.KGGX/KGG/LUSET/NOGENL/NOSIMP $ 

41 LABEL LBL11 $ 

42 PARAM //*MPY*/NSK IP/0/0 $ 

43 CASE CASECC,/CASEXX/*TRANRESP*/0/N0LO0P $ 

44 GP4 CASEXX,GE0M4,EQEXIN,GPDT,BGPDT,CSTM,GPST/RG,YS,USET,ASET/ 

LUSET/S,N,MPCFl/$,N,MPCF2/S,N,SINGLE/S,N,0MIT/S,N,REACT/S f N, 
NSKIP/S,N,REPEAT/S,N,NOSET/S,N t NOL/S,N,NOA/C,Y,ASETOUT/ 
S.Y.AUTOSPC $ 



2.4-2 (05/30/86) 



STATIC ANALYSIS WITH DIFFERENTIAL STIFFNESS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT it 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

1*5 COND ERROR5.N0L $ 

46 PURGE GM/MPCFl/GO,K00,LO0,PO,U00V,RUOV/OMIT/PS,KFS t KSS,QG, 

YBS, PBS, KBFS,KBSS,KDFS,KDSS/S INGLE $ 

47 COND LBL4D, REACT $ 

48 JUMP ERR0R2 $ 

49 LABEL LBL4D $ 

50 COND LBL4.GENEL$ 

51 PARAM //*EQ*/GPSPFLG/AUTOSPC/0 $ 

52 COND LBL4.GPSPFLG $ 

53 GPSP GPL,GPST,USET,SIL/OGPST/S,N,NOGPST $ 

54 OFP OGPST,,,,,//S,N,CARDNO $ 

55 LABEL LBL4 $ 

56 EQUIV KGG.KNN/MPCF1 $ 

57 COND LBL2.MPCF1 $ 

58 MCE1 USET,RG/GM $ 

59 MCE2 USET,GM,KGG,,,/KNN,,, $ 

60 LABEL LBL2 $ 

61 EQUIV KNN.KFF/SINGLE $ 

62 COND LBL3, SINGLE $ 

63 SCE1 USET,KNN,,,/KFF,KFS,KSS,,, $ 

64 LABEL LBL3 S 

65 EQUIV KFF.KAA/OMIT $ 

66 COND LBL5,0MIT $ 

67 SMP1 USET,KFF,,,/G0,KAA,KO0,L00,,,,, $ 

68 LABEL LBL5 $ 

69 RBMG2 KAA/LLL $ 



2.4-3 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT k 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



70 SSG1 SLT,BGPDT,CSTM,SIL,EST,MPT,GPTT,EDT,MGG,CASEXX,DIT,/ 

PG,,,,/LUSET/1 $ 

71 EQUiV PG.PL/NOSET $ 

72 COND LBL10.N0SET $ 

73 SSG2 USET,GM,YS,KFS,GO,,PG/,P0,PS,PL $ 
Jk LABEL LBL10 $ 

75 SSG3 LLL,KAA,PL,L00,K00,P0/ULV,UOOV,RULV,RU0V/OMIT/V,Y,IRES=-1/ 

1/S,N,EPS1 $ 

76 COND LBL9.IRES $ 

77 MATGPR GPL,USET,SIL,RULV//*L* $ 

78 MATGPR GPL,USET,SIL,RUOV//*0* $ 

79 LABEL LBL9 $ 

80* SDR1 USET,,ULV,UOOV,YS,GO t GM,PS,KFS,KSS,/UGV,PGl,QG/l/*DSO* $ 

81 SDR2 CASECC,CSTM,MPT,DIT,EQEXIN,SIL,GPTT,EDT,BGPDP,,QG,UGV,EST,,PG/ 

OPG 1 , OQG 1 , 0UGV1 , OES 1 , OEF 1 , PUGV 1 /*DSO* $ 

82 OFP 0UGV1,0PG1,0QG1,0EF1,0ES1,//S,N,CARDN0 $ 

83 SCAN CASECC,0E$1,0EF1/0ESF1/*RF* $ 
8U OFP 0ESF1 //S.N.CARDNO $ 

85 COND P2.JUMPPL0T $ 

86 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIP.PUGVl, f GPECT,OESl/ 

PL0TX2/NSIL/LUSEP/JUMPPL0T/PLTFLG/S > N,PFILE $ 

87 PRTMSG PL0TX2// $ 

88 LABEL P2 $ 

89 TAT ECT,EPT,BGPDT,SIL,GPTT,CSTM/Xl t X2,X3,ECPT,GPCT/LUSET/ 

NOSiMP/O/NOGENL/GENEL $ 

90 DSMG1 CASECC,GPTT,SIL,EDT,UGV,CSTM,MPT,ECPT,GPCT,DIT/KDGG/ 

DSCOSET $ 

91 PARAM //*ADD*/SHlFT/-l/0 $ 

92 PARAM //*ADD*/C0UNT/ALWAYS=-1/NEVER= 1 $ 



2.4-4 (05/30/86) 



STATIC ANALYSIS WITH DIFFERENTIAL STIFFNESS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT k 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

93 PARAMR //*ADD*/DSEPS 1/0.0/0.0 $ 

Sk PARAML YS//*NULL*////NOYS $ 

95 LABEL OUTLPTOP $ 

96 EQUIV PG.PG1/N0YS $ 

97 PARAM //*KLOCK*/T0 $ 

98 EQUIV KDGG.KDNN/MPCF1 $ 

99 COND LBL2D.MPCF1 $ 

100 MCE2 USET,GM,KDGG,,,/KDNN,,, $ 

101 LABEL LBL2D $ 

102 EQUIV KDNN.KDFF/SINGLE $ 

103 COND LBL3D, SINGLE $ 

10lt SCE1 USET,KDNN, t ,/KDFF,KDFS,KDSS,,, $ 

105 LABEL LBL3D $ 

106 EQUIV KDFF.KDAA/OMIT $ 

107 COND LBL5D.0MIT $ 

108 SMP2 USET,GO,KDFF/KDAA $ 

109 LABEL LBL5D $ 

110 ADD KAA,KDAA/KBLL $ 

111 ADD KFS.KDFS/KBFS $ 

112 ADD KSS,KDSS/KBSS $ 

113 COND PGOK,NOYS $ 

111* MPYAD KBS$,YS,/PSS/0/l/l/l $ 

115 MPYAD KBFS.YS./PFS/O/l/l/l $ 

116 UMERGE USET,PF$,PSS/PN/*N*/*F*/*S* $ 

117 EQUIV PN.PGX/MPCF1 $ 

118 COND LBL6D.MPCF1 $ 



2.4-5 (05/30/86) 



DISPLACEMENT RIGID. FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT it 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



119 


UMERGE 


120 


LABEL 


121 


ADD 


122 


EQUIV 


123 


LABEL 


124 


ADD 


125 


RBMG2 


126 


PRTPARM 


127 


PRTPARM 


128 


LABEL 


129 


PARAM 


130 


SSG2 


131 


SSG3 


132 


COND 


133 


MATGPR 


13^ 


LABEL 


135 


SDR1 


136 


ADD 


137 


DSMG1 


138 


MPYAD 


139 


DSCHK 


li»0 


COND 


141 


COND 


142 


EQUIV 


143 


REPT 



USET,PN,/PGX/*G*/*N*/*M* $ 

LBL6D $ 

PGX,PG/PGG/(-1.0,0.0) $ 

PGG.PG1 /ALWAYS $ 

PGOK $ 

PG1./PG0/ $ 

KBLL/LBLL/S,N,POWER/S,N,DET $ 

//0/*DET* $ 

//0/*P0WER* $ 

INLPTOP $ 

//*KL0CK*/TI $ 

US£T,GM,YS,KDFS,G0,,PG1/,PB0,PBS,PBL $ 

LBLL,KBLL,PBL,,,/UBLV,,RUBLV,/-1/V,Y,!RES/NDSKIP/S,N, 
EPS I $ 

LBL9D, IRES $ 

GPL,USET,SIL,RUBLV//*L* $ 

LBL9D $ 
USET,,UBLV,,YS,G0,GM,PBS,KBFS,KBSS,/UBGV,,QBG/1/ADS1* $ 

UBGV,UGV/DUGV/(-1.0,0.0) $ 

CASECC,GPTT,SIL,EDT,DUGV,C$TM,MPT,ECPT,GPCT,D1T/DKDGG/ 
DSCOSET $ 

DKDGG,UBGV,PGO/PGI 1/0/1/1/0 $ 

PG1.PGI 1,UBGV//C,Y,EPSI0-1 . E-5/S,N,DSEPS I /C, Y,NT=10/T0/ 
TI/S,N,D0NE/S,N,SHIFT/S,N,C0UNT/C,Y,BETAD=4 $ 

DONE, DONE $ 

SHIFT, SHIFT $ 

PG.PG1/NEVER/PGI 1 , PG1/ALWAYS/PG1 , PG I 1/NEVER $ 

INLPTOP, 1000 $ 



2.4-6 (05/30/86) 



STATIC ANALYSIS WITH DIFFERENTIAL STIFFNESS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT k 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



lMt TABPT 

lit 5 LABEL 

146 ADD 

ll»7 EQUIV 

11*8 EQUIV 

149 REPT 

150 TABPT 

151 LABEL 

152 SDR2 

153 OFP 
15 1 * COND 

155 PLOT 

156 PRTMSG 

157 LABEL 

158 JUMP 

159 LABEL 

160 PRTPARM 

161 LABEL 

162 PRTPARM 

163 LABEL 
161* PRTPARM 

165 LABEL 

166 PRTPARM 

167 LABEL 

168 PRTPARM 



PGIl.PGl.PG,,// $ 
SHIFT $ 

DKDGG,KDGG/KDGGl/(-1.0,0,0) $ 
UBGV.UGV/ALWAYS/KDGG1.KDGG/ALWAYS $ 
KDGG , KDGG1 /NEVER/UGV, UBGV/NEVER $ 
OUTLPTOP.IOOO $ 
KDGG1.KDGG.UGV,,// $ 

DONE $ 

CASECC,CSTM,MPT,DlT,EQEXIN,SIL t GPTT,EDT,BGPDP,,QBG,UBGV,EST,,/ 
.0QBG1 ,0UBGV1 ,0ESB1 ,0EFB1 ,PUBGV1/*DS1* $ 



0UBGV1 .0QBG1 t 0EFBl .0ESB1 , ,//S,N,CARDNO $ 
P3.JUMPPL0T $ 

PLTPAR,GPSETS,ELSETS,CASECC,BGPDT.EQEXIN,SIP,PUBGV1,,GPECT, 

OESB1/PL0TX3/NS1L/LUSEP/JUMPPLOT/PLTFLG/S.N, 

PFILE $ 

PL0TX3// $ 

P3 $ 
FINIS $ 
ERR0R1 $ 

//-1/ftDIFFSTIF* $ 
ERR0R2 $ 
//-2/ADIFFSTIF* $ 

ERR0R3 $ 

//-3/ADIFFSTIFA $ 
ERRORS $ 

//-l*/*DIFFSTIFft $ 
ERRORS $ 
//-5/*DIFFST!F* $ 



2.4-7 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT k 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



169 LABEL FINIS $ 

170 PURGE DUMMY/MINUS1 $ 

171 END $ 



2.4-8 (05/30/86) 



STATIC ANALYSIS WITH DIFFERENTIAL STIFFNESS 

2.4.2 Description of Important DMAP Operations for Static Analysis with Differential Stiffness 

4. GP1 generates coordinate system transformation matrices, tables of grid point locations, *and 
tables relating the internal and external grid point numbers. 

5. Go to DMAP No. 163 and print Error Message No. 3 if there is no Grid Point Definition Table. 

6. PLTTRAN modifies special scalar grid points in the BGPDT and SIL tables. 

7. GP2 generates Element Connection Table with internal indices. 

10. Go to DMAP No. 18 if there are no structure plot requests. 

11. PLTSET transforms user input into a form used to drive the structure plotter. 

12. PRTMSG prints error messages associated with the structure plotter. 

15. Go to DMAP No. 18 if no undeformed structure plots are requested. 

16. PL0T generates all requested undeformed structure plots. 

17. PRTMSG prints plotter data and engineering data for each undeformed plot generated. 
19. GP3 generates Static Loads Table and Grid Point Temperature Table. 

21. TA1 generates element tables for use in matrix assembly and stress recovery. 

22. Go to DMAP No. 159 and print Error Message No. 1 if there are no structural elements. 

25. EMG generates structural element stiffness and mass matrix tables and dictionaries for later 
assembly by the EMA module. 

27, Go to DMAP No. 29 if no stiffness matrix is to be assembled. 

28. EMA assembles stiffness matrix [K* ] and Grid Point Singularity Table. 

30. Go to DMAP No. 32 if no mass matrix is to be assembled. 

31. EMA assembles mass matrix [M ]. 

33. Go to DMAP No. 37 if no weight and balance information is requested. 

34. Go to DMAP No. 165 and print Error Message No. 4 if no mass matrix exists. 

35. GPWG generates weight and balance information. 

36. 0FP formats the weight and balance information prepared by GPWG and places it on the system 
output file for printing. 

38. Equivalence [K* ] to [K ] if no general elements exist. 

yy yy 

39. Go to DMAP No. 41 if no general elements exist. 

40. SMA3 adds general elements to [K* ] to obtain stiffness matrix [K ]. 

yy yy 

43. CASE copies the first record of CASECC to CASEXX. 

44. GP4 generates flags defining members of various displacement sets (USET), forms multipoint 
constraint equations [R ] {u } = and forms enforced displacement vector { Y s >- 

45. Go to DMAP No. 167 and print Error Message No. 5 if no independent degrees of freedom are 
defined. 



2.4-9 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

47. Go to DMAP No. 49 if no free-body supports are supplied. 

48. Go to DMAP No. 161 and print Error Message No. 2. 
50. Go to DMAP No. 55 if general elements are present. 

52. Go to DMAP No. 55 if no potential grid point singularities exist. 

53. GPSP generates a table of potential grid point singularities. 

54. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 

56. Equivalence [K ] to [K ] if no multipoint constraints exist. 

y y 

57. Go to DMAP No. 60 if no multipoint constraints exist. 

58. MCE1 partitions multipoint constraint equations [R ] = [R m | R n ] and solves for 
multipoint constraint transformation matrix [G m ] = -[R m ] [R n L 



nr 



m- 



n- 



59. MCE2 partitions stiffness matrix 



[K gg ] " 



K I K 
nn nm 

K mn I K mm 



and performs matrix reduction 

[k J = [i< J + [g!][k ] + [kIjcgJ + [G T J[U[y. 



nn- 



nn- 



nr^ mn- 



mn-"- nr 



61, 
62. 
63, 



65. 
66. 
67, 



Equivalence [K ] to [K ff ] if no single-point constraints exist. 
Go to DMAP No. 64 if no single-point constraints exist. 
SCE1 partitions out single-point constraints 



&W - 



%^ K fs_ 

K , | K 
sf ' ss 



Equivalence [K„] to [K 1 if no omitted coordinates exist. 
~ TT aa 

Go to DMAP No. 68 if no omitted coordinates exist. 
SMP1 partitions constrained stiffness matrix 



[K ff ] - 



K I K 

_a a ao 

K I K 
oa oo 



i-li 



solves for transformation matrix [G Q ] = -[K Q0 ] C K oa ] 

and performs matrix reduction [K ] = C K aa ] + C K a^ G o-' * 
69. RMBG2 decomposes constrained stiffness matrix [K &a ] = [L U ][U U ]. 



2.4-10 (05/30/86) 



e-a, 



STATIC ANALYSIS WITH DIFFERENTIAL STIFFNESS 

70. SSG1 generates static load vectors {P }. 

71. Equivalence {P } to {P } if no constraints are applied. 

72. Go to DMAP No. 74 if no constraints are applied. 

73. SSG2 applies constraints to static load vectors 

{ v = j-H • (P n } = i v + [G I ]{p ™ } ¦ 

' m / 

{ V= 7-! • (P f > = (P f ) - [K fs ](Y sl , 

' s ' 

1P f } = 7"! and lP t ) ¦ IP.) + [6j]{P„) . 

' ' 

75. SSG3 solves for displacements of independent coordinates 

<VCW 1{P i } • 

solves for displacements of omitted coordinates 

Cu°> - [K^P,, 1 ¦ 

calculates residual vector (RULV) and residual vector error ratio for independent 
coordinates 

» P i> ¦ <V - [K aa3 { V ' 

< U I H6 V 

H " 



< P I"V 



and calculates residual vector (RU0V) and residual vector error ratio for omitted 
coordinates 

«p > - <p > - [k 00 :K> . 

e o = • 



< p >"0> 



76. Go to DMAP No. 79 if residual vectors are not to be printed. 

77. MATGPR prints the residual vector for independent coordinates (RULV) 

78. MATGPR prints the residual vector for omitted coordinates (RU0V). 

2.4-11 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



80. SDR1 recovers dependent displacements 
(u ) - [G ]{V ? <u°) . 




= {u n > 



"V " WJ ' 



¦ <y 



and recovers single-point forces of constraint 

{q s } = -<P S } +[Kj; s ]<u f } + CK SS ]{Y S }. 

81 SDR2 calculates element forces (0EF1) and stresses '(0ES1) and prepares load vectors (0PG1), 
displacement vectors (0UGV1) and single-point forces of constraint (0QG1) for output and 
translation components of the displacement vector (PUGV1) for the static solution. 

82. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

83. SCAN examines the element stresses and forces calculated by SDR2 and generates scanned 
output that meets the specifications set by the user. 

84. 0FP formats the scanned output table prepared by SCAN and places it on the system output 
file for printing. 

85. Go to DMAP No. 88 if no deformed static solution structure plots are requested. 

86. PL0T generates all requested static solution deformed structure and contour plots. 

87. PRTMSG prints plotter data, engineering data, and contour data for each deformed static 
solution plot generated. 

89. TA1 generates element tables for use in differential stiffness matrix assembly. 

90. DSMG1 generates differential stiffness matrix [K ]. 

95. Beginning of outer (stiffness adjustment) loop for differential stiffness iteration. 

96. Equivalence (P } to (P ,} if no enforced displacements are specified. 

98. Equivalence [K ] to [K d ] if no multipoint constraints exist. 

99. Go to DMAP No. 101 if no multipoint constraints exist. 

100. MCE2 partitions differential stiffness matrix 



[K d ] = 



and performs matrix reduction 



K d I K d 

nn | nm 

j,d I |,d 
mn mm 



2.4-12 (05/30/86) 



STATIC ANALYSIS WITH DIFFERENTIAL STIFFNESS 



[<!.] ¦ i'O + w^O + i«LkV + ^O^J- 



nn- 



102. 

103. 
104. 



Equivalence [K ] to [K^ f ] if no single-point constraints exist. 
Go to DMAP No. 105 if no single-point constraints exist. 
SCE1 partitions out single-point constraints 



[K d J = 
u nn J 



K f f ! K f s 



K sf K ss 



106. 
107. 

108 , 



Equivalence [K„] to [K 1 if no omitted coordinates exist. 
TT aa 

Go to DMAP No. 109 if no omitted coordinates exist. 

SMP2 partitions constrained differential stiffness matrix 



[K? f ] = 



K d i K d 

aa | ao 

K d ' K d 

oa oo 



and performs matrix reduction 



[Kj,] - I'O + <^V * UcMj * fcoft'&.HV- 



110. 

111. 

112. 
113. 
114. 
115. 
116. 
117. 
118. 
119. 
121. 
122. 
124. 
125. 

126. 



ADD [K afl ] and [K d J to form [K^]. 

ADD [K fs ] and [K d $ ] to form [K^]. 

ADD [K ss ] and [K d £ ] to form [K^]. 

Go to DMAP No. 123 if no enforced displacements are specified. 

MPYAD multiplies [K^] and {Y s > to form {P ss L 

MYPAD multiplies [<J ] and {Y g } to form (P fs >. 

UMERGE combines {P fs > and {P ss > to form {P n ). 

Equivalence {P } to {P*} if no multipoint constraints exist. 

Go to DMAP No. 120 if no multipoint constraints exist. 

UMERGE expands {P p } to form {P*}. 

ADD -{P*} and {P } to form {P }. 
g y yy 

Equivalence (P Q J to {P q i}« 

ADD {P ,} and nothing to create {P qo >- 

RBMG2 decomposes the combined differential stiffness matrix and elastic stiffness matrix 

<] - [L b u ][U b „]. 

PRTPARM prints the scaled value of the determinant of the combined differential stiffness 
matrix and elastic stiffness matrix. 



2.4-13 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

127. PRTPARM prints the scale factor (power of ten) of the determinant of the combined 
differential stiffness matrix and elastic stiffness matrix. 

128. Beginning of inner (load correction) loop for differential stiffness iteration. 
130. SSG2 applies constraints to static load vectors 



p b 



<V -" ' < P n> = < P n> + [G >ro> > 



f L, f L fs-" s 



P b 

m 

P b 

{P n } = ]"' ' {Pf} = {P ' } " [K ^ ]{Y c } ' 

P b 
s 

{p d } = j_a_j and {P ^ } = {P " } + [g;]{^} 

131. SSG3 solves for displacements of independent coordinates for current differential stiffness 
load vector 

( u b ) . ifa-hfy , 

and calculates residual vector (RBULV) and residual vector error ratio for current 
differential stiffness load vector 

<<> ¦ <> - [<X> • 



<P b ) T <u b > 



132. Go to DMAP No. 134 if the residual vector for current differential stiffness solution is not 
to be printed. 

133. MATGPR prints the residual vector for current differential stiffness solution. 

135. SDR1 recovers dependent displacements for the current differential stiffness solution 

b 
{u o } = [G o ] {u * } + {u o b} ' I" "> = {U f } 



2.4-14 (05/30/86) 



STATIC ANALYSIS WITH DIFFERENTIAL STIFFNESS 



b 
'f 

Y y 



Uf J ¦ < u n> > < u m> - £V < u n> 



u b 



n ' = {u b } 
g 

u m 

and recovers single-point forces of constraint for the current differential stiffness 
solution 

{q b } = -{P b > +[K b f ]{u b > + [K b f ]{Y b } . 

136. ADD -{U*J} and {U } to form {u|j}. 

y y y 

137. DSMG1 generates differential stiffness matrix C 6K q q]- 

138. MYPAD forms the load vector for inner loop iteration 

139. DSCHK performs differential stiffness convergence checks. 

140. Go to DMAP No. 151 if differential stiffness iteration is complete. 

141. Go to DMAP No. 145 if additional differential stiffness matrix changes are necessary for 
further iteration. 

142. Break the previous equivalence of {P } to {P .} and {P .} to {P g } 



'II 



and establish equivalence of {V } to (P n1 >. 

g Il gi 



143. Go to DMAP No. 128 for an additional inner loop differential stiffness iteration. 

144. TABPT table prints vectors {P n } , {P n1 h and {P }. 

146. ADD -[6K^ g ] and [K gg ] to form [K^]. 

147. Equivalence {U g } to {U } and [K ggl ] to [K gg ]. 

148. Break the previous equivalence of [K ] to [ K ggl ] and { u g > to {U g } - 

149. Go to DMAP No. 95 for an additional outer loop differential stiffness iteratic.i. 

150. TABPT table prints [K ggl L [K gg ], and {U g }. 

152. SDR2 calculates element forces (0EFB1) and stresses (0ESB1) and prepares displacement 
vectors (0UBGV1) and single-point forces of constraint (0QBG1) for output and translation 
components of the displacement vector (PUBGV1) for the differential stiffness solution. 



2.4-15 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

153. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

154. Go to DMAP No. 157 if no differential stiffness solution deformed plots are requested. 

155. PL0T generates all requested differential stiffness solution deformed structure and contour 
plots. 

156. PRTMSG prints plotter data, engineering data, and contour data for each differential 
stiffness solution deformed plot generated. 

158. Go to DMAP No. 169 and make normal exit. 

160. Print Error Message No. 1 and terminate execution. 

162. Print Error Message No. 2 and terminate execution. 

164. Print Error Message No. 3 and terminate execution. 

166. Print Error Message No. 4 and terminate execution. 

168. Print Error Message No. 5 and terminate execution. 



2.4-16 (05/30/86) 



STATIC ANALYSIS WITH DIFFERENTIAL STIFFNESS 

2.4.3 Output for Static Analysis with Differential Stiffness 

The value of the determinant of the sum of the elastic stiffness and the differential 
stiffness is automatically printed for each differential stiffness loading condition. 

Iterative differential stiffness computations are terminated for one of five reasons. 
Iteration termination reasons are automatically printed in an information message. These reasons 
have the following meanings: 

1. REASON means the iteration procedure was incomplete at the time of exit. This is 
caused by either an unexpected interruption of the iteration procedure (i.e., system 
abort) or termination is not scheduled (for the other four reasons) at the completion of 
the current iteration. 

2. REASON 1 means the iteration procedure converged to the EPSI0 value supplied by the user 
on a PARAM bulk data card. (The default value of EPSI0 is 1.0E-5.) 

3. REASON 2 means the iteration procedure is diverging from the EPSI0 value supplied by the 
user on a PARAM bulk data card. (The default value of EPSI0 is 1.0E-5.) 

4. REASON 3 means insufficient time remaining to achieve convergence to the EPSI0 value 
supplied by the user on a PARAM bulk data card. (The default value of EPSI0 is 1.0E-5.) 

5. REASON 4 means the number of iterations supplied by the user on a PARAM bulk data card 
has been met. (The default number of iterations is 10.) 

Parameter values at the time of exit are automatically output as follows: 

1. Parameter D0NE: -1 is normal; + N is the estimate of the number of iterations required 
to achieve convergence. 

2. Parameter SHIFT: +1 indicates a return to the top of the inner loop was scheduled; -1 
indicates a return to top of the outer loop was scheduled following the current 
iteration. 

3. Parameter DSEPSI: the value of the ratio of energy error to total energy at the time of 
exit. 

The following output may be requested: 

1. Nonzero Components of the applied static load for the linear solution at selected grid 
points. 

2. Displacements and nonzero components of the single-point forces of constraint, with and 
without differential stiffness, at selected grid points. 

3. Forces and stresses in selected elements, with and without differential stiffness. 

2.4-17 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

4. Scanned output of forces and elements in selected elements. 

The following plotter output may be requested: 

1. Undeformed and deformed plots of the structural model. 

2. Contour plots of stresses and displacements. 

2.4.4 Case Control Deck for Static Analysis with Differential Stiffness 

The following items relate to subcase definition and data selection for Static Analysis with 
Differential Stiffness: 

1. The Case Control Deck must contain two subcases. 

2. A static loading condition must be defined above the subcase level with a L0AD, 
TEMPERATURE (L0AD), or DEF0RM selection, unless all loading is specified by grid point 
displacements on SPC cards. 

3. An SPC set must be selected above the subcase level unless all constraints are specified 
on GRID cards. 

4. Output requests that apply only to the linear solution must appear in the first subcase. 

5. Output requests that apply only to the solution with differential stiffness must be 
placed in the second subcase. 

6. Output requests that apply to both solutions, with and without differential stiffness, 
may be placed above the subcase level. 

2.4.5 Parameters for Static Analysis with Differential Stiffness 

The following parameters are used in Static Analysis with Differential Stiffness: 

1. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2. AUT0SPC - reserved for future optional use. The default value is -1. 

3. BET AD - optional. The integer value of this parameter is the number of iterations 
allowed for computing the load correction in the inner (load) loop before shifting to 
the outer (stiffness) loop, which adjusts the differential stiffness. The default value 
is 4 iterations. 

4. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTRIA2, CPTUBE, CPQDPLT, CPTRPLT, 



2.4-18 (05/30/86) 



STATIC ANALYSIS WITH DIFFERENTIAL STIFFNESS 

CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

5. EPSI0 - optional. The real value of this parameter is used to test the convergence of 

-5 
the iterated differential stiffness. The default value is 10 . 

6. GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. 

7. IRES - optional. A positive integer value of this parameter causes the printing of the 
residual vectors following the execution of the SSG3 module. 

8. NT - optional. The integer value of this parameter limits the cumulative number of 
iterations in both loops. The default value is 10 iterations. 

9. SURFACE - optional. The computations of the external surface areas for the 
two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

10. V0LUME - optional. The volume computations for the two-dimensional and 

three-dimensional elements are activated by this parameter when they are generated in 
the EMG module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details. 
11. WTMASS - optional. The terms of the mass matrix are multiplied by the real value of 
this parameter when they are generated in the EMA module. 

2.4.6 Rigid hormat Error Messages from Static Analysis with Differential Stiffness 

The following fatal errors are detected by the DMAP statements in the Static Analysis with 
Differential Stiffness rigid format. The text for each error message is given below in capital 
letters and is followed by additional explanatory material, including suggestions for remedial 
action. 

STATIC ANALYSIS WITH DIFFERENTIAL STIFFNESS ERR0R MESSAGE N0. 1 - N0 STRUCTURAL ELEMENTS HAVE BEEN 
DEFINED. 

No structural elements have been defined with Connection cards. 

STATIC ANALYSIS WITH DIFFERENTIAL STIFFNESS ERR0R MESSAGE N0. 2 - FREE B0DY SUPP0RTS N0T ALL0WED. 

Free bodies are not allowed in Static Analysis with Differential Stiffness. The SUP0RT cards must 
be removed from the Bulk Data Deck and other constraints applied if required for stability. 

2.4-19 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

STATIC ANALYSIS WITH DIFFERENTIAL STIFFNESS ERR0R MESSAGE N0. 3 - N0 GRID P0INT DATA IS SPECIFIED. 
No points have been defined with GRID or SP0INT cards. 

STATIC ANALYSIS WITH DIFFERENTIAL STIFFNESS ERR0R MESSAGE N0. 4 - MASS MATRIX REQUIRED F0R WEIGHT 
AND BALANCE CALCULATI0NS. 

The mass matrix is null because either no elements were defined with Connection cards, 
nonstructural mass was not defined on a Property card, or the density was not defined on a Material 
card. 

STATIC ANALYSIS WITH DIFFERENTIAL STIFFNESS ERR0R MESSAGE N0. 5 - N0 INDEPENDENT DEGREES 0F FREED0M 
HAVE BEEN DEFINED. 

Either no degrees of freedom have been defined on GRID, SP0INT or Scalar Connection cards, or all 
defined degrees of freedom have been constrained by SPC, MPC, 0MIT or GRDSET cards, or grounded on 
Scalar Connection cards. 



2.4-20 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.5 BUCKLING ANALYSIS 

2.5.1 DMAP Sequence for Buckling Analysis 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 5 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



OPTIONS IN EFFECT GO 



ERR=2 LIST 



NODECK NOREF NOOSCAR 



1 BEGIN D ISP 05 - BUCKLING ANALYSIS - APR. I986 $ 

2 PRECHK ALL $ 

3 FILE LAMA=APPEND/PHIA=APPEND $ 
it PARAM //*MPY*/CARDNO/0/0 $ 

5 GP1 GE0M1,GE0M2,/GPL,EQEXIN,GPDT,CSTM,BGPDT,SIL/S,N,LUSET/ 

N0GPDT/MINUS1=-1 $ 

6 PLTTRAN BGPDT,SIL/BGPDP,SIP/LUSET/S t N,LUSEP $ 

7 GP2 GE0M2.EQEXIN/ECT $ 

8 PARAML PCDB//*PRES*////JUMPPLOT $ 

9 PURGE PLTSETX.PLTPAR.GPSETS.ELSETS/JUMPPLOT $ 

10 COND P1,JUMPPL0T $ 

1 1 PLTSET PCDB,EQEXIN,ECT/PLTSETX,PLTPAR,GPSETS,ELSETS/S,N,NS1L/ 

S,N,JUMPPLOT $ 

12 PRTMSG PLTSETX/7 $ 

13 PARAM //*MPY*/PLTFLG/1/1 $ 

14 PARAM //*MPY*/PFILE/0/0 $ 

15 COND Pl.JUMPPLOT $ 

16 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIL,,ECT,,/PL0TX1/ 

NSIL/LUSET/S,N,JUMPPLOT/S,N,PLTFLG/S,N,PFILE $ 

17 PRTMSG • PL0TX1// $ 

18 LABEL PI $ 

19 GP3 GE0M3,EQEXiN,GE0M2/SLT,GPTT/S,N,N0GRAV $ 

20 PARAM //*AND*/NOMGG/NOGRAV/V.Y,GRDPNT— 1 $ 

21 TA1 ECT t EPT,BGPDT,SIL,GPTT,CSTM/EST,GEI,GPECT,,/ 

LUS ET/S , N , NOS I MP/ 1 /S , N , NOGENL/S , N , GEN E L $ 



2.5-1 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 5 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

22 COND ERR0R1.N0SIMP $ 

23 PURGE OGPST/GENEL $ 

21* PARAM //*ADD*/NOKGGX/1/0 $ 

25 EMG EST,CSTM,MPT,DIT,GE0M2,/KELM,KDICT,MELM,MDICT, , ,/S,N,NOKGGX/ 

S , N , NOMGG////C , Y , COUPMASS/C , Y , CPBAR/ 

C,Y,CPR0D/C,Y,CPQUAD1/C,Y,CPQUAD2/C,Y,CPTRIA1/C,Y,CPTRIA2/ 
C , Y , CPTUBE/C , Y , CPQDPLT/C , Y , CPTRPLT/C , Y , CPTRBSC/ 
V,Y,VOLUME/V,Y, SURFACE $ 

26 PURGE KGGX.GPST/NOKGGX/MGG/NOMGG $ 

27 COND JMPKGG.NOKGGX $ 

28 EMA GPECT,KDICT,KELM/KGGX,GPST $ 

29 LABEL JMPKGG $ 

30 COND JMPMGG.NOMGG $ 

31 EMA GPECT,MDICT,MELM/MGG,/-l/C,Y y WTMASS=1.0 $ 

32 LABEL JMPMGG $ 

33 COND LBLWGRDPNT $ 
3i+ COND ERRORS, NOMGG $ 

35 GPWG BGPDP,CSTM,EQEXIN,MGG/OGPWG/V,Y,GRDPNT/C,Y,WTMASS $ 

36 OFP 0GPWG,,,,,//S,N,CARDN0 $ 

37 LABEL LBL1 $ 

38 EQUIV KGGX,KGG/NOGENL $ 

39 COND LBL11.N0GENL $ 

ifO SMA3 GEI ,KGGX/KGG/LUSET/NOGENL/N0SIMP $ 

itl LABEL LBL11 $ 

i+2 PARAM //*MPY*/NSK IP/0/0 $ 

i+3 GPk CASECC,GEOMit,EQEXIN,GPDT,BGPDT,CSTM,GPST/RG,YS,USET,ASET/ 

LUSET/S , N , MPCF 1 /S , N , MPCF2/S , N , S I NGLE/S , N , OM I T/S , N , REACT/ 
S,N,NSKIP/S,N,REPEAT/S,N,N0SET/S,N,N0L/S,N,N0A/C,Y,ASETOUT/ 
S,Y,AUTOSPC $ 

kk COND ERROR6,N0L $ 



2.5-2 (05/30/86) 



BUCKLING ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 5 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

J»5 PARAM //*AND*/NOSR/S INGLE/REACT $ 

it6 PURGE GM/MPCF1/G0.K00, LOO, PO,UO0V,RUOV/0MIT/PS,KFS,KSS,KDFS/S INGLE/ 
QG/NOSR $ • 

1*7 COND LBL4D, REACT $ 

kB JUMP ERR0R2 $ 

k$ LABEL L8L4D $ 

50 COND LBL4.GENEL $ 

51 PARAM //*EQft/GPSPFLG/AUT0SPC/O $ 

52 COND LBLit.GPSPFLG $ 

53 GPSP GPL,GPST,USET,SlL/OGPST/S,N,NOGPST $ 
5^ OFP OGPST,,,,,//S t N,CARDNO $ 

55 LABEL LBLlt $ 

56 EQUIV KGG.KNN/MPCF1 $ 

57 COND LBL2.MPCF1 $ 

58 MCE1 USET,RG/GM $ 

59 MCE2 USET,GM,KGG,,,/KNN,,, $ 

60 LABEL LBL2 $ 

61 EQUIV KNN,KFF/SINGLE $ 

62 COND LBL3, SINGLE $ 

63 SCE1 USET,KNN,,,/KFF,KFS,KSS,,, $ 

64 LABEL LBL3 $ 

65 EQUIV KFF,KAA/OMIT $ 

66 COND LBL5.0MIT $ 

67 SMP1 USET,KFF,,,/GO,KAA,KOO,LOO,,,,, $ 

68 LABEL LBL5 $ 

69 RBMG2 KAA/LLL $ 

70 SSG1 SLT,BGPDT,CSTM,SIL,EST,MPT,GPTT,EDT,MGG,CASECC,DIT,/ 

PG,,,,/LUSET/1 $ 



2.5-3 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 5 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

71 EQUIV PG.PL/NOSET $ 

72 COND LBLIO.NOSET $ 

73 SSG2 USET,GM,YS,KFS,GO,,PG/,PO,PS,PL $ 
7h LABEL LBL10 $ 

75 SSG3 ILL, KAA,fL, LOO, KO0,P0/ULV,U00V,RULV,RU0V/0MIT/V,Y, IRES— 1/ 

1/S,N,EPSI $ 

76 COND LBL9,1RES $ 

77 MATGPR GPL,USET,S1L,RULV//*L* $ 

78 MATGPR GPL,USET,SIL,RUOV//*0* $ 

79 LABEL LBL9 $ 

80 SDR! USET,PG t ULV,UOOV,YS f G0,GM,PS,KFS,KSS,/UGV,PGG,QG/l/ 

*BKLO* $ 

81 SDR2 CASECC,CSTM,MPT,DIT,EQEXIN,SIL,GPTT,EDT,BGPDP, .QG.UGV, EST, , PGG/ 

0PG1.0QG1 ,0UGV1,0ES1 ,OEF1,PUGV1/*BKLO* $ 

82 OFP OUGV1,OPG1,OQG1,OEF1,OES1,//S,N,CARDNO $ 

83 SCAN CASECC,0ES1,0EF1/0ESF1/*RF* $ 
81+ OFP 0ESF1, ,,,,//S,N,CARDNO $ 

85 COND P2.JUMPPL0T $ 

86 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIP,PUGVT, ,GPECT,0ES1/ 

PL0TX2/NSIL/LUSEP/JUMPPL0T/PLTFLG/S,N,PFILE $ 

87 PRTMSG PL0TX2// $ 

88 LABEL P2 $ 

89 TA1 ECT,EPT,BGPDT,SIL,GPTT,CSTM/X1,X2,X3,ECPT,GPCT/LUSET/ 

NOSIMP/0/NOGENL/GENEL $ 

90 D.SMG1 ; CASECC,GPTT,SIL,EDT,UGV,CSTM,MPT,ECPT,GPCT,DIT/KDGG/ 

DSCOSET $ 

91 EQUIV KDGG.KDNN/MPCF1 $ 

92 COND LBL2D,MPCF1 $ 

93 HCE2 USET,GM,KDGG,,,/KDNN,,, $ 
9I4 LABEL LBL2D $ 



2.5-4 (05/30/86) 



BUCKLING ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 5 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



95 EQUIV 

96 COND 

97 SCE1 

98 LABEL 

99 EQUIV 

101 SMP2 

102 LABEL 

103 ADD 
10it DPD 

105 COND 

106 PARAM 

107 READ 

108 OFP 

109 COND 

110 SDR1 

111 SDR2 

112 OFP 

113 COND 
1U PLOT 

115 .PRTMSG 

116 LABEL 

117 JUMP 

118 LABEL 

119 PRTPARM 



KDNN,KDFF/SINGLE $ 

LBL3D, SINGLE $ 

USET,KDNN,,,/KDFF,KDFS,,,. $ 

LBL3D $ 

KDFF.KDAA/OMIT $ 

USET,GO,KDFF/KDAA $ 

LBL5D $ 

KDAA,/KDAAM/(-1.0,0.0)/(0.0,0.0) $ 

DYNAMICS, GPL, S I L, USET/GPLD.S i LD.USETD, , , , , , ,EED,EQDYN/ 
LUSET/LUSETD/NOTFL/NODLT/NOPSDL/NOFRL/ 
N0NLFT/N0TRL/S,N,N0EED//NOUE $ 

ERROR3.N0EED $ 

//*MPY*/NEIGV/1/-1 $ 

KAA,KDAAM,,,EED,USET,CASECC/LAMA,PHIA,,OEIG$/ftBUCKLING*/ 
S,N,NEIGV/2 $ 

OEIGS,LAMA,,,,//S,N,CARDNO $ 

ERRORS, NEIGV $ 

USET,,PHIA,,,G0,GM,,KFS,,/PH1G,,BQG/1/*BKL1* $ 

CASE CC , CSTM, MPT, D I T , EQEX I N , S I L , , , BGPDP , LAMA , BQG , PH I G , EST , , / 
, OBQG 1 , OPH I G , OBES 1 , OBE F 1 , PPH I G/*BKL 1 * $ 

OPHiG,OB0_Gl,OBEFl,OBESl,,//S,N,CARDN0 $ 
P3.JUMPPL0T $ 

PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIP,,PPHIG,GPECT, 

0BES1/PLOTX3/NSIL/LUSEP/JUMPPLOT/PLTFLG/ 

S,N,PFILE $ 

PL0TX3// $ 

P3 $ 

FINIS $ 

ERROR 1 $ 

//-1/*BUCKLING* $ 



2.5-5 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 5 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

120 LABEL ERR0R2 $ 

121 PRTPARM //-2/*BUCKLING* $ 

122 LABEL ERR0R3 $ 

123 PRTPARM //-3/*BUCKLING* $ 
1214 LABEL ERR0R4 $ 

125 PRTPARM //-V*BUCKLING* $ 

126 LABEL ERRORS $ 

127 PRTPARM //-5/*BUCKLING* $ 

128 LABEL ERR0R6 $ 

129 PRTPARM //-6/*BUCKLING* $ 

130 LABEL FINIS $ 

131 PURGE DUMMY/MINUS1 $ 

132 END $ 



2.5-6 (05/30/86) 



BUCKLING ANALYSIS 

2.5.2 Description of Important DMA P_ O perations for Buckling Analysis 

5. GP1 generates coordinate system transformation matrices, tables of grid point locations* and 
tables relating the internal and external grid point numbers. 

6. PLTTRAN modifies special scalar grid points in the BGPDT and SIL tables. 

7. GP2 generates Element Connection Table with internal indices. 

10. Go to DMAP No. 18 if there are no structure plot requests. 

11. PLTSET transforms user input into a form used to drive the structure plotter. 

12. PRTMSG prints error messages associated with the structure plotter. 

15. Go to DMAP No. 18 if no undeformed structure plots are requested. 

16. PL0T generates all requested undeformed structure plots. 

17. PRTMSG prints plotter data and engineering data for each undeformed plot generated. 
19. GP3 generates Static Loads Table and Grid Point Temperature Table. 

21. TA1 generates element tables for use in matrix assembly and stress recovery. 

22. Go to DMAP No. 118 and print Error Message No. 1 if no structural elements have been 
defined. 

25. EMG generates structural element stiffness and mass matrix tables and dictionaries for later 
assembly by the EMA module. 

27. Go to DMAP No. 29 if no stiffness matrix is to be assembled. 

28. EMA assembles stiffness matrix [K* ] and Grid Point Singularity Table. 

30. Go to DMAP No. 32 if no mass matrix is to be assembled. 

31. EMA assembles mass matrix [M 1. 

33. Go to DMAP No. 37 if no weight and balance information is requested. 

34. Go to DMAP No. 126 and print Error Message No. 5 if no mass matrix exists. 

35. GPWG generates weight and balance information. 

36. 0FP formats the weight and balance information prepared by GPWG and places it on the system 
output file for printing. 

38. Equivalence [K x ] to [K ] if there are no general elements. 

39. Go to DMAP No. 41 if there are no general elements. 

40. SMA3 adds general elements to [K* ] to obtain stiffness matrix [K ]. 

43. GP4 generates flags defining members of various displacement sets (USET), forms multipoint 

constraint equations [R ] {u } = and forms enforced displacement vector {Y }. 

g J g r s 

44. Go to DMAP No. 128 and print Error Message No. 6 if no independent degrees of freedom are 
defined. 

47. Go to DMAP No. 49 if there are no free-body supports. 

48. Go to DMAP No. 120 and print Error Message No. 2. 



2.5-7 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



50. Go to DMAP No. 55 if general elements are present. 

52. Go to DMAP No. 55 if no potential grid point singularities exist. 

53. GPSP generates a table of potential grid point singularities. 

54. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 

56. Equivalence [K 1 to [K ] if there are no multipoint constraints. 

^ L gg J nn r 

57. Go to DMAP No. 60 if there are no multipoint constraints. 

58. MCE1 partitions multipoint constraint equations [R ] = [R [R ] and solves for 
multipoint constraint transformation matrix [G ] = -[R m ] t R n ]- 



59. MCE2 partitions stiffness matrix 



[K gg ] - 



and performs matrix reduction 



K I K 
nn , nm 

1 

K K 
mn mm 



[K„ n ] - [K n „] ? [(frCKj ? [K^GJ ? [^[KjtGj. 



61. Equivalence [K ] to [K f J if no single-point constraints exist. 

62. Go to DMAP No. 64 if no single-point constraints exist. 

63. SCE1 partitions out single-point constraints 



[K ] = 
L nn J 



ff , fs 
K sf ' K ss 



65. Equivalence [K XJ: ] to [K 1 if no omitted coordinates exist. 

M ff aa 

66. Go to DMAP No. 68 if no omitted coordinates exist. 

67. SMP1 partitions constrained stiffness matrix 



[K ff ] = 



K I K 

aa | ao 

K I K 

oa oo 



i-lr 



solves for transformation matrix [G 1 = -[K ]" [K ] 

UU Ud 

and performs matrix reduction [K ] = [K ga ] + [K ][G ] . 

69. RMBG2 decomposes constrained stiffness matrix [K ] = [L ][U M ], 

70. SSG1 generates static load vectors {P Q }. 

71. Equivalence {P } to {P } if no constraints are applied. 

9 * 



2.5-8 (05/30/86) 



BUCKLING ANALYSIS 

72. Go to DMAP No. 74 if no constraints are applied. 

73. SSG2 applies constraints to static load vectors 



(PJ = -M , <P„> = <P n > + tfl^J > 



9 P m 

\ m 



n J n J L nr m 



{P n } ¦ \~-\ ¦ (P f } = l? f } - [K fs ]fY s } 



P s 



and {P f } = )— a - and {P^} = {P a > + [gJ]{P„} ¦ 



\ I 

9 

75. SSG3 solves for displacements of independent coordinates 

solves for displacements of omitted coordinates 

<# " [*oo3" 1{P o } ' 
calculates residual vector (RULV) and residual vector error ratio for independent 
coordinates 

<«V <V - KuNV • 

<uJh«P>> 



< P I"V 



and calculates residual vector (RU0V) and residual vector error ratio for omitted 
coordinates 

(6P > - fP ) - [K 00 ]{u°> , 

< u o>«V 
6 o = • 



< P o>K> 



76. Go to DMAP No. 79 if residual vectors are not to be printed. 

77. MATGPR prints the residual vector for independent coordinates (RULV) 

78. MATGPR prints the residual vector for omitted coordinates (RU0V). 



2.5-9 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



80. SDR1 recovers dependent displacements 
{u } - [G ]{u A > + <u°} , 





iuj = [Gj{u n > , }1"_\ = iuA 



m L m J n J \— — j g' 

and recovers single-point forces of constraint 

Cq s } - -<P S } + [K T fs ]{u f } + [K ss ]{Y s }. 

81. SDR2 calculates element forces(0EFl) and stresses (0ES1) and prepares load vectors (0PG1) 
displacement vectors (0UGV1) and single-point forces of constraint (0QG1) for output and 
translation components of the displacement vector (PUGV1) for the static solution. 

82. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

83. SCAN examines the element stresses and forces calculated by SDR2 and generates scanned 
output that meets the specifications set by the user. 

84. 0FP formats the scanned output table prepared by SCAN and places it on the system output 
file for printing. 

85. Go to DMAP No. 88 if no static solution deformed structure plots are requested. 

86. PL0T generates all requested static solution deformed structure and contour plots. 

87. PRTMSG prints plotter data, engineering data, and contour data for each static solution 
deformed plot generated. 

89. TA1 generates element tables for use in differential stiffness matrix assembly. 

90. DSMG1 generates differential stiffness matrix [K 1. 

91. Equivalence [K d ] to [K d n ] if no multipoint constraints exist. 

92. Go to DMAP No. 94 if no multipoint constraints exist. 

93. MCE2 partitions differential stiffness matrix 



*>& • 



K d I K d 

nn , nm 



j/d I „d 
mn mm 



and performs matrix reduction 

[<„] - ["<„] * Vfyvfo * <][G m ] + [G>1][GJ. 

95. Equivalence [K ] to [C f ] if no single-point constraints exist. 

96. Go to DMAP No. 98 if no single-point constraints exist. 

2.5-10 (05/30/86) 



BUCKLING ANALYSIS 



97. SCE1 partitions out single-point constraints 



KJ = 



^ff_j_ K fs_ 
K d f ' K d 

ST SS 



99. 
100. 
101. 



Equivalence [K«] to [K ] if no omitted coordinates exist. 

Go to DMAP No. 102 if no omitted coordinates exist. 

SMP2 partitions constrained differential stiffness matrix 



<] - 


K d i K d 
aa | ao 




K oa K oo 



and performs matrix reduction 

<] - C«S,] + ^oa^ + ^^ + [^WjW- 

103. ADD -[K?,] and nothing to create [K*]. 

aa aa 

104. DPD extracts Eigenvalue Extraction Data from Dynamics data block. 

105. Go to DMAP No. 122 and print Error Message No. 3 if there is no Eigenvalue Extraction Data. 

107. READ extracts real eigenvalues and eigenvectors from the equation 

C K aa + Oa> " ° 
and normalizes eigenvectors according to one of the following user requests: 

1) Unit value of a selected component 

2) Unit value of the largest component. 

108. 0FP formats the eigenvalues (LAMA) and summary of eigenvalue extraction information (0EIGS) 
prepared by READ and places them on the system output file for printing. 

109. Go to DMAP No. 124 and print Error Message No. 4 if no eigenvalues were found. 

110. SDR1 recovers dependent components of the eigenvectors 



<V = <V { *a } 



= U f > 



T n 



U } = [G 1 {* } , 
l *nr L m J lv rr 




2.5- 11 '(05/30/86) 



DISPLACEMENT RIGID FORMATS 



and recovers single-point forces of constraint {q } = [K^ ] {<J>^}, 



111. SDR2 calculates element forces (0BEF1) and. stresses (0BES1) and prepares eigenvectors 
(0PHIG) and single-point forces of constraint (0BQG1) for output and translation components 
of the eigenvectors (PPHIG) for the buckling solution. 

112. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

113. Go to DMAP No. 116 if no buckling solution deformed structure plots are requested. 

114. PL0T generates all requested buckling solution deformed structure and contour plots. 

115. PRTMSG prints plotter data, engineering data, and contour data for each buckling solution 
deformed plot generated. 

117. Go to DMAP No. 130 and make normal exit. 

119. Print Error Message No. 1 and terminate execution. 

121. Print Error Message No. 2 and terminate execution. 

123. Print Error Message No. 3 and terminate execution. 

125. Print Error Message No. 4 and terminate execution. 

127. Print Error Message No. 5 and terminate execution. 

129. Print Error Message No. 6 and terminate execution. 



2.5-12 (05/30/86) 



BUCKLING ANALYSIS 

2.5.3 Output for Buckling Analysis 

The summary of the eigenvalues associated with the buckling modes and the summary of the 
eigenvalue analysis performed, as described in the Normal Mode Analysis rigid format (see Section 
2.3.3), are automatically printed. 

The following output may be requested: 

1. Displacements and nonzero components of the static loads and single-point forces of 
constraint at selected grid points for the static analysis. 

2. Forces and stresses in selected elements for the static loading condition. 

3. Mode shapes and nonzero components of the single-point forces of constraint at selected 
grid points for selected modes. 

4. Scanned output of forces and elements in selected elements. 
The following plotter output may be requested: 

1. Undeformed plot of the structural model and mode shapes for selected buckling modes. 

2. Contour plots of stresses and displacements for selected buckling modes. 

2.5.4 Case Control Deck for Buckling Analysis 

The following items relate to subcase definition and data selection for Buckling Analysis: 

1. The Case Control Deck must contain at least two subcases. Subcases beyond the second 
are used only for output selection. 

2. METH0D must appear in the second subcase to select an EIGB card from the Bulk Data Deck. 

3. A static loading condition must be defined in the first subcase with a L0AD, TEMPERATURE 
(L0AD), or DEF0RM selection, unless all loading is specified by grid point displacements 
on SPC cards. 

4. An SPC set must be selected above the subcase level, unless all constraints are 
specified on GRID cards. 

5. Output requests that apply only to the solution under static load must be placed in the 
first subcase. 

6. Output requests that apply to the buckling solution only must be placed in the second 
and succeeding subcases. If only two subcases exist, the output requests in the second 
subcase will be honored for all buckling modes. 

7. Output requests that apply to both the static solution and the buckling modes may be 
placed above the subcase level. 

2.5-13 (05/30/86) 



DISPLACEMENT RIGID FORMAlS 

2.5.5 Parameters for Buckling Analysis 

The following parameters are used in Buckling Analysis: t 

1. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2. AUT0SPC - reserved for future optional use. The default value is -1. 

3. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTRIA2, CPTUBE, CPQDPLT, CPTRPLT, 
CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

4. GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. 

5. IRES - optional. A positive integer value of this parameter causes the printing of the 
residual vectors following the execution of the SSG3 module. 

6. SURFACE - optional. The computations of the external surface areas for the 
two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

7. V0LUME - optional. The volume computations for the two-dimensional and 
three-dimensional elements are activated by this parameter when they are generated in 
the EMG module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details. 

8. WTMASS - optional. The terms of the mass matrix are multiplied by the real value of 
this parameter when they are generated in the EMA module. 

2.5.6 Optional Diagnostic Output for FEER 

Special detailed information obtained by requesting DIAG 16 in the Executive Control Deck is 
the same as that described under Normal Modes Analysis (see Section 2.3.6). 



2.5-14 (05/30/86) 



BUCKLING ANALYSIS 

2.5.7 Rigid Format Error Messages from Buckling Analysis 

The following fatal errors are detected by the DMAP statements in the Buckling Analysis 
rigid format. The text for each error message is given below in capital letters and is followed by 
additional explanatory material, including suggestions for remedial action. 

BUCKLING ANALYSIS ERR0R MESSAGE N0. 1 - N0 STRUCTURAL ELEMENTS HAVE BEEN DEFINED. 
No structural elements have been defined with Connection cards. 

BUCKLING ANALYSIS ERR0R MESSAGE N0. 2 - FREE B0DY SUPP0RTS N0T ALL0WED. 

Free bodies are not allowed in Buckling Analysis. The SUP0RT cards must be removed from the Bulk 
Data Deck and other constraints applied if required for stability. 

BUCKLING ANALYSIS ERR0R MESSAGE N0. 3 - EIGENVALUE EXTRACTI0N DATA REQUIRED F0R REAL EIGENVALUE 
ANALYSIS. 

Eigenvalue extraction data must be supplied on an EIGB card in the Bulk Data Deck and METH0D in the 
Case Control Deck must select an EIGB set. 

BUCKLING ANALYSIS ERR0R MESSAGE N0. 4 - N0 EIGENVALUES F0UND. 
No buckling modes exist in the range specified by the user. 

BUCKLING ANALYSIS ERR0R MESSAGE N0 5 - MASS MATRIX REQUIRED F0R WEIGHT AND BALANCE CALCULATI0NS. 

The mass matrix is null because either no elements were defined with Connection cards, 
nonstructural mass was not defined on a Property card or the density was not defined on a Material 
card. 

BUCKLING ANALYSIS ERR0R MESSAGE N0. 6 - N0 INDEPENDENT DEGREES 0F FREED0M HAVE BEEN DEFINED. 

Either no degrees of freedom have been defined on GRID, SP0INT or Scalar Connection cards, or all 
defined degrees of freedom have been constrained by SPC, MPC, 0MIT or GRDSET cards, or grounded on 
Scalar Connection cards. 



2.5-15 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



2.5-16 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.6 PIECEWISE LINEAR STATIC ANALYSIS 

2.6.1 DMAP Sequence for Piecewise Linear Static Analysis 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 6 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



OPTIONS IN EFFECT GO 



ERR=2 LIST NODECK NOREF NOOSCAR 



1 BEGIN DISP 06 - PIECEWISE LINEAR STATIC ANALYSIS - APR. 1986 $ 

2 PRECHK ALL $ 

3 FILE QG1=APPEND/UGV1=APPEND/KGGSUM=SAVE/PGV1=APPEND $ 

It PARAM //AMPY*/CARDNO/0/0 $ 

5 GP1 GE0M1,GE0M2,/GPL,EQEXIN,GPDT,CSTM,BGPDT,SIL/S,N,LUSET/ 

N0GPDT/MINUS1=-1 $ 

6 PLTTRAN BGPDT,SIL/BGPDP,SIP/LUSET/S,N,LUSEP $ 

7 GP2 GE0M2,EQEXIN/ECT $ 

8 PARAML PCDB//*PRES*////JUMPPLOT $ 

9 PURGE PLTSETX,PLTPAR,GPSETS,ELSETS/JUMPPLOT $ • 

10 COND Pl.JUMPPLOT $ 

11 PLTSET PCDB,EQEXIN,ECT/PLT$ETX,PLTPAR,GPSETS,ELSETS/S,N,NSIL/ 

S.N.JUMPPLOT $ 

12 PRTMSG PLTSETX// $ 

13 PARAM //WYVPLTFLG/1/1 $ 

14 PARAM //*MPY*/PF I LE/O/0 $ 

15 COND Pl.JUMPPLOT $ 

16 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIL,,ECT,,/PL0TX1/ 

NSIL/LUSET/S,N,JUMPPLOT/S,N,PLTFLG/S,N,PFILE $ 

17 PRTMSG PL0TX1// $ 

18 LABEL PI $ 

19 GP3 GEOM3,EQEXlN,GEOM2/SLT f GPTT/S,N,N0GRAV $ 

20 PARAM //*AND*/SKPMGG/NOGRAV/V,Y,GRDPNT $ 

21 TA1 ECT,EPT,BGPDT,SIL,GPTT,CSTM/EST,GEI,GPECT,ECPT,GPCT/ 

LUSET/S,N,N0SIMP/2/S,N,N0GENL/S,N,GENEL $ 



2.6-1 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 6 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

22 PARAM //*AND*/NOELMT/NOGEML/MOSIMP $ 

23 COND ERRORS, NOELMT $ 

2k PURGE KGGX,GPST/NOSIMP/OGPST/GENEL $ 

25 COND LBL1.N0SIMP $ 

26 PARAM //*ADD*/N0KGGX/l/O-$ 

27 PARAM //*ADD*/N0MGG/l/0 $ 

28 EMG EST,CSTM,MPT,DIT,GE0M2,/KELM,KDICT,MELM,MDICT,,,/S,N,N0KGGX/ 

S,N,NOMGG////C,Y,C0UPMASS/C,Y,CPBAR/C,Y,CPROD/ 
C,Y,CPQUAD1/C,Y,CPQUAD2/C,Y,CPTRIA1/C,Y,CPTRIA2/C,Y,CPTUBE/ 
C , Y , CPQDPLT/C , Y , CTRPLT/C , Y , CPTRBSC/ 
V,Y,VOLUME/V,Y, SURFACE $ 

29 PURGE KGGX.GPST/NOKGGX/MGG/NOMGG $ 

30 COND JMPKGG.NOKGGX $ 

31 EMA GPECT,KDICT,KELM/KGGX,GPST $ 

32 LABEL JMPKGG $ 

33 COND JMPMGG,NOMGG $ 

3k EMA GPECT,MDICT,MELM/MGG,/-1/C,Y,WTMASS=1.0 $ 

35 LABEL JMPMGG $ 

36 COND LBL1 .GRDPNT $ 

37 COND ERR0R3.N0MGG $ 

38 GPWG BGPDP,CSTM,EQEXIN,MGG/0GPWG/V,Y,GRDPNT=-1/V,Y,WTMA$$ $ 

39 OFP OGPWG,,, ,,//S,N,CARDNO $ 

kO LABEL LBL1 $ 

k] PLA1 CSTM,MPT,ECPT,GPCT,DIT,CASECC,EST/KGGXL T ECPTNL,ESTL,ESTNL/S,N. 
KGGLPG/S.N,NPLALIM/S,N,ECPTNLPG/S,N,PLSETNO/S f N,NONLSTR/S,N, 
PLFACT $ 

42 COND ERROR!, ECPTNLPG $ 

1+3 PURGE 0NLES,ESTNL1/N0NLSTR $ 

kk PARAM //*ADD*/ALWAY$/-l/0 $ 



2.6-2 (05/30/86) 



PIECEWISE LINEAR STATIC ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 6 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

kS PARAM //*ADD*/NEVER/l/0 $ 

46 EQUIV KGGX.KGG/NOGENL/KGGXL.KGGL/NOGENL $. 

1+7 COND LBL11,N0GENL $ 

i»8 SMA3 GEI,KGGX/KGG/LUSET/NOGENL/NOStMP $ 

49 SMA3 GEI.KGGXL/KGGL/LUSET/NOGENL/KGGLPG $ 

50 LABEL LBL11 $ 

51 PARAM //*MPY*/NSK I P/O/0 $ 

52 GP4 CASECC , GE0M4 , EQEX I N , GPDT, BGPDT , CSTM,GPST/RG , YS , USET , ASET/ 

LUSET/S,N,MPCF1/S,N,MPCF2/S,N,$INGLE/S,N,0MIT/S,N,REACT/ 
S , N , NSK I P/S , N , REPE AT/S , N , NOSET/S , N , NOL/S , N , NOA/C , Y , ASETOUT/ 
S,Y,AUTOSPC $ 

53 PARAM //AANDVc/NOSR/S INGLE/REACT $ 

54 PURGE KRR,KLR,QR,DM/REACT/GM/MPCF1/GO,KOO,LOO,PO,UOOV,RUOV/OMIT/P$, 

KFS.KSS/SINGLE/QG/NOSR $ 

55 SSG1 SLT,BGPDT,CSTM,SIL,EST,MPT,,,MGG,CASECC,DIT,/PG1,,,,/ 

LUSET/1 $ 

56 EQUIV PGl.PL/NOSET $ 

57 COND LBL4.GENEL $ 

58 PARAM //*EQ*/GPSPFLG/AUTOSPC/0 $ 

59 COND LBL4.GPSPFLG $ 

60 GPSP GPL,GPST,USET,SIL/OGPST/S,N,NOGPST $ 

61 OFP OGPST,,,,,//S,N,CARDNO $ 

62 LABEL LBL4 $ 

63 PARAM //*ADD*/PLACOUNT/l/0 $ 

64 EQUIV KGG,KNN/MPCF1 $ 

65 COND LBL2,MPCF1 $ 

66 MCE1 USET.RG/GM $ 

67 LABEL LOOPBGN $ 

68 EQUIV KGG.KNN/MPCF1 $ 



2.6-3 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 6 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



69 COND 

70 MCE2 

71 LABEL 

72 EQUIV 

73 COND 
Jk SCE1 

75 LABEL 

76 EQU 1 V 

77 COND 

78 SMP1 

79 LABEL 

80 EQUIV 

81 COND 

82 RBMG1 

83 LABEL 
8*» DECOMP 

85 COND 

86 COND 

87 RBMG3 

88 LABEL 

89 ADD 

90 COND 

91 SSG2 

92 LABEL 

93 SSG3 



LBL2,MPCF1 $ 
USET,GM,KGG,,,/KNN,,, $ 
LBL2 $ 

KNN.KFF/S INGLE $ 
LBL3, SINGLE $ 
USET,KNN,,,/KFF,KFS,KSS,,, $ 

LBL3 $ 

KFF.KA A/OMIT $ 

LBL5,0MIT $ 

USET,KFF,,,/G0,KAA,KO0,LOO,,,,, $ 

LBL5 $ 

KAA.KLL/REACT $ 
LBL6, REACT $ 
USET,KAA,/KLL,KLR,KRR,,, $ 

LBL6 $ 

KLL/LLL./1/O/MlNDIAGK/DETKLLXX/IDETKLLX/ 
S.N.SINGKLLX $ 

PLALBLi*,SINGKLLX $ 

LBL7, REACT $ 

LLL,KLR,KRR/DM $ 

LBL7 $ 

PG1./PG/PLFACT $ 
LBL10.N0SET $ 
USET,GM,YS,KFS,GO,DM,PG/QR,PO,PS,PL $ 

LBL10 $ 

|_LL,KLL,PL,LOO,KOO,PO/ULV,UOOV,RULV,RUOV/OMIT/V,Y,IRES=-1/ 
PLACOUNT/S,N,EPSI $ 



2.6-4 (05/30/86) 



PIECEWISE LINEAR STATIC ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 6 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

9^ COND LBL9.IRES $ 

95 MATGPR GPL,USET,SIL,RULV//*L* $ 

96 MATGPR GPL,U$ET,SIL t RU0V//*O* $ 

97 LABEL LBL9 $ 

98 SDR1 USET, PG , ULV, UOOV, YS , GO, GM, PS , KFS, KSS , QR/DELTAUGV, DELTAPG , 

DELTAQG/1/*STATICS* $ 

99 PLA2 DELTAUGV, DELTAPG, DELTAQG/UGV1 ,PGV1 ,QG1/S,N,PLAC0UNT $ 

100 EQUIV ESTNL,ESTNL1/NEVER/ECPTNL,ECPTNL1/NEVER $ 

101 COND PLALBL2A.N0NLSTR $ 

102 PLA3 CSTM, MPT, D IT, DELTAUGV, ESTNL,CASECC/ONLES, ESTNL1/PLAC0UNT/ 

PLSETNO $ 

103 OFP 0NLES,,,,,//S,N,CARDN0 $ 
10*t LABEL PLALBL2A $ 

105 PARAM //*SUB*/D1FF/NPLALIM/PLAC0UNT $ 

106 COND PLALBL5,DIFF $ 

107 PLA4 CSTM,MPT,ECPTNL,GPCT,DIT,DELTAUGV/KGGNL,ECPTNL1/S,N,PLAC0UNT/S, 

N.PLSETNO/S.N.PLFACT $ 

108 EQUIV KGGNL,KGGSUM/KGGLPG $ 

109 COND PLALBL3.KGGLPG $ 

110 ADD KGGNL.KGGL/KGGSUM $ 

111 LABEL PLALBL3 $ 

112 EQUIV ESTNL1,ESTNL/ALWAYS/ECPTNL1,ECPTNL/ALWAYS/KGGSUM,KGG/ALWAYS $ 

113 REPT L00PBGN.360 $ 

114 JUMP ERR0R2 $ 

115 LABEL PLALBL^ $ 

116 PRTPARM //-5/*PLA* $ 

117 LABEL PLALBL5 $ 



2.6-5 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 6 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

118 SDR2 CASECC,CSTM,MPT,DIT,EQEXIN,SIL,GPTT,EDT,BGPDP,,QG1,UGV1,ESTL,, 

PGV1/0PG1 ,0QG1 .0UGV1 ,0ES1 ,OEF 1 ,PUGVl/*PLAft $ 

119 OFP OUGV1,OPG1,OQG1,OEF1,OES1,//S,N,CARDNO $ 

120 SCAN CASECC,0ES1,0EF1/0ESF1/*RF* $ 

121 OFP 0ESF1,,,,,//S,N,CARDN0 $ 

122 COND P2.JUMPPL0T $ 

123 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIP,PUGV1 ,,ECPT,0ES1/ 

PL0TX2/NSIL/LUSEP/JUMPPLOT/PLTFLG/S,N,PF ILE $ 

124 PRTMSG PL0TX2// $ 

125 LABEL P2 $ 

126 JUMP FINIS $ 

127 LABEL ERR0R1 $ 

128 PRTPARM //-l/*PI_Aft $ 

129 LABEL ERR0R2 $ 

130 PRTPARM //-2/*PLAft $ 

131 LABEL ERR0R3 $ 

132 PRTPARM //-3/*PLA* $ 

133 LABEL ERRORS $ 

Mk PRTPARM //-4/APLA* $ 

135 LABEL FINIS $ 

136 PURGE DUMMY/MINUS 1 $ 

137 END $ 



2.6-6 (05/30/86) 



PIECEWISE LINEAR STATIC ANALYSIS 

2.6.2 Description of Important DMAP Operations for Piecewise Linear Static Analysis 

5. GP1 generates coordinate system transformation matrices, tables of grid point locations, and 
tables relating the internal and external grid point numbers. * 

6. PLTTRAN modifies special scalar grid points in the BGPDT and SIL tables. 

7. GP2 generates Element Connection Table with internal indices. 

10. Go to DMAP No. 18 if there are no structure plot requests. 

11. PLTSET transforms user intput into a form used to drive the structure plotter. 

12. PRTMSG prints error messages associated with the structure plotter. 

15. Go to DMAP No. 18 if no undeformed structure plots are requested. 

16. PL0T generates all requested undeformed structure plots. 

17. PRTMSG prints plotter data and engineering data for each undeformed plot generated. 
19. GP3 generates Static Loads Table and Grid Point Temperature Table. 

21. TA1 generates element tables for use in matrix assembly and stress recovery. 

23. Go to DMAP No. 133 and print Error Message No. 4 if no elements have been defined. 

25. Go to DMAP No. 40 if there are no structural elements. 

28. EMG generates structural element stiffness and mass matrix tables and dictionaries for later 
assembly by the EMA module. 

30. Go to DMAP No. 32 if no stiffness matrix is to be assembled. 

31. EMA assembles stiffness matrix [K* ] and Grid Point Singularity Table. 

33. Go to DMAP No. 35 if no mass matrix is to be assembled. 

34. EMA assembles mass matrix [Ml. 

99 

36. Go to DMAP No. 40 if no weight and balance information is requested. 

37. Go to DMAP No. 131 and print Error Message No. 3 if no mass matrix exists. 

. 38. GPWG generates weight and balance information. 

39. 0FP formats the weight and balance information prepared by GPWG and places it on the system 
output file for printing. 

41. PLA1 extracts the linear terms from [K x 1 to give [K x 1, extracts the nonlinear entries 

gg 3 gg 

from the Element Connection and Properties Table to give ECPTNL, and separates the linear 
and nonlinear entries in the Element Summary Table to give ESTL and ESTNL. 

42. Go to DMAP No. 127 and print Error Message No. 1 if no elements have a stress-dependent 
modulus of elasticity. 

46. Equivalence [K x ] to [K 1 and [K x Jh to [K* ] if there are no general elements. 

gg gg gg gg 

47. Go to DMAP No. 50 if there are no general elements. 

48. SMA3 adds general elements to [K x ] to obtain stiffness matrix [K ]• 

y y yy 



2.6-7 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



SMA3 adds general elements to [K**] to obtain stiffness matrix of linear elements [K ]. 



99 



49. 

52. GP4 generates flags defining members of various displacement sets (USET) and forms 
multipoint constraint equations [R ] {u } = 0. 

55. SSG1 generates total static load vector {P }. 

56. Equivalence {pj} to {P.} if no constraints are applied. 

g x, 

57. Go to DMAP No. 62 ig general elements are present. 

59. Go to DMAP No. 62 if no potential grid point singularities exist. 

60. GPSP generates a table of potential grid point singularities. 

61. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 

64. Equivalence [K ] to [K ] if no multipoint constraints exist. 

65. Go to DMAP No. 71 if no multipoint constraints exist. 

66. MCE1 partitions multipoint constraint equations [R ] = [R m | R n ] and solves for 
multipoint constraint transformation matrix [G m ] = -[R^] [R p ]. 

67. Beginning of loop for additional load increments. 

68. Equivalence [K ] to [K ] if no multipoint constraints exist. 

69. Go to DMAP No. 71 if no multipoint constraints exist. 

70. MCE2 partitions stiffness matrix 





K [ K 


L" K nJ = 


nn | nm 


99 


K i K 




mn ' mm 



and performs matrix reduction 



72. 
73. 
74. 



[K nn ] - [K nn ] ? [G^][K m ] ? [^][GJ ? [G^KJCGJ 

Equivalence [K ] to [K ff ] if no single-point constraints exist. 
Go to DMAP No. 75 if no single-point constraints exist. 
SCE1 partitions out single-point constraints 



[K ] = 

L inn- 1 



nn 



K ff !_ K fs 
K sf ! K ss 



76. 
77. 
78. 



Equivalence [K--] to [K ] if no omitted coordinates exist. 
^ tt aa 

Go to DMAP No. 79 if no omitted coordinates exist. 
SMP1 partitions constrained stiffness matrix 



2.6-8 (05/30/86) 



PIECEWISE LINEAR STATIC ANALYSIS 



[K ff ] - 



K I K 

aa ¦ ao 

K I K 

oa oo 



solves for transformation matrix [G 1 = -[K ] [K ] 

(J UU Ua 

and performs matrix reduction [K ] = [K ] + [ K oa ][ G Q ] • 

80. Equivalence [K J to [K..] if no free-body supports exist. 

act w 

81. Go to DMAP No. 83 if no free-body supports exist. 

82. RBMG1 partitions out free-body supports 



^ = 



K r£ ' K rr 



84. DEC0MP decomposes constrained stiffness matrix [K^] = [L u ][U £Jl ]. 

85. Go to DMAP No. 115 and print Error Message No. 5 if stiffness matrix [K^] is singular 
(i.e., local plasticity). 

86. Go to DMAP No. 88 if no free-body supports exist. 

87. RBMG3 forms rigid body transformation matrix 

[D] - -[K^- 1 ^,.], 
calculates rigid body check matrix 

[X] = [K rr ] T + L\ r ][D3 
and calculates rigid body error ratio 

IX I 



K rr 

89. ADD multiplies total load vector {P 1 } by factor, PLFACT, and adds it to nothing to obtain 

y 

applied load vector {P } for current loop. 

90. Go to DMAP No. 92 if no constraints are applied. 

91. SSG2 applies constraints to static load vectors for current loop 



9 ( P m ) 



(P n > = (P n > + [G^]{P m } . 



{P n } = l- 1 
n I p 



{P f } = {P f > - [K fs KY s } , 



2.6-9 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



fP f > - U a -J , (P a > - (P a ) ? [G> } , 

<v ¦ It-! 

and calculates incremental determinate forces of reaction for current loop 

{q r > = -{P r > - [D T 3{P 4 }. 
93. SSG3 solves for displacements of independent coordinates 

<V- [K u ] " ltl V • 



solves for displacements of omitted coordinates 

tu°> - CK 00 3 _1 CP > . 

calculates residual vector (RULV) and residual vector error ratio for independent 
coordinates 

«V ¦ <V - KmIV • 

tu I Jtap * > 

h = 



fp I» u t } 



and calculates residual vector (RU0V) and residual vector error ratio for omitted 
coordinates 

RP > - {P } - [K 00 ]{u°l , 

< u o» 8P o> 

and e = 



{P T }{u } 
1 oo 



94. Go to DMAP No. 97 if residual vectors are not to be printed. 

95. MATGPR prints the residual vector for independent coordinates (RULV). 

96. MATGPR prints the residual vector for omitted coordinates (RU0V). 



2 .£-10 (05/30/86) 



PIECEWISE LINEAR STATIC ANALYSIS 
98. SDR1 recovers dependent displacements for current loop 

{u > - [G ]<u a } + (u°) . 





v ¦ cy <«n> ' j~! = (u g } 

and recovers single-point forces of constraint for current loop 

{6q s } = -{P s > + [^ s ]{u f }. 

99. PLA2 adds the incremental displacement vector (DELTAUGV) and the incremental single-point 
forces of constraint vector (DELTAQG) for the current loop to the accumulated sum of these 
vectors (DELTAPG). 

{u n } = (6u n } + {u n } and 
9i+l 9 i 9 i 

{q } = {«q}+ (q } . 

y i+l y i y i 

100. Allocate separate files for ESTNL and ESTNL1 and for ECPTNL and ECPTNL1. 

101. Go to DMAP No. 104 if no stress output is requested for nonlinear elements. 

102. PLA3 calculates incremental stresses in nonlinear elements (0NLES) for which an output 
request has been made and updates the accumulated stresses (ESTNL1) in these elements. 

103. 0FP formats the accumulated stresses in nonlinear elements prepared by PLA3 and places them 
on the system output file for printing. 



106. Go to DMAP No. 117 if all loading increments have been completed. 

,n£- 

"gg- 



107. PLA4 generates stiffness matrix for nonlinear elements [k" ] and updates stress 



information. 



,n£- 



108. Equivalence [K"*] to [K ] if all elements are nonlinear. 

yy y y 

109. Go to DMAP No. Ill if all elements are nonlinear. 

110. Add stiffness matrix for nonlinear elements (KGGNL) to stiffness matrix for linear elements 
(KGGL) 



[Q ? [K* g ] ? [K=-] 



sum- 



112. Equivalence existing element tables to updated tables and equivalence [K gg ] to [K gg ] 
for next pass through loop. 

113. Go to DMAP No. 67 if additional load increments need to be processed. 



2.6-11(05/30/86) 



DISPLACEMENT RIGID FORMATS 

114. Go to DMAP No. 129 and print Error Message No. 2 as the number of load increments exceeds 
360. 

116. Print Error Message No. 5 and terminate execution. 

118. SDR2 calculates element forces (0EF1) and stresses for linear elements (0ES1) and prepares 
load vectors (0PG1), displacement vectors {0UGV1) and single-point forces of constraint 
(0QG1) for output and translation components of the displacement vector (PUGV1). 

119. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

120. SCAN examines the element stresses and forces calculated by SDR2 and generates scanned 
output that meets the specifications set by the user. 

121. 0FP formats the scanned output table prepared by SCAN and places it on the system output 
file for printing. 

122. Go to DMAP No. 125 if no deformed structure plots are requested. 

123. PL0T generates all requested deformed structure and contour plots. 

124. PRTMSG prints plotter data, engineering data, and contour data for each deformed plot 
generated. 

126. Go to DMAP No. 135 and make normal exit. 

128. Print Error Message No. 1 and terminate execution. 

130. Print Error Message No. 2 and terminate execution. 

132, Print Error Message No. 3 and terminate execution. 

134. Print Error Message No. 4 and terminate execution. 



2.6-12 (05/30/86) 



PIECEWISE LINEAR STATIC ANALYSIS 

2.6.3 Output for Piecewise Linear Static Analysis 

The following output may be requested for Piecewise Linear Static Analysis: * 

1. Accumulated sums of displacements and nonzero components of the static loads and 
single-point forces of constraint at selected grid points for each load increment. 

2. Stresses in selected elements. If an element is composed of a nonlinear material, the 
accumulated stress will be output for each load increment. Stresses in linear elements 
are only calculated for the total load. 

3. Scanned output of forces and elements in selected elements. 
I he following plotter output may be requested: 

1. Undeformed plot of the structural model and deformed plots for each load increment. 

2. Contour plots of stresses and displacements for each load increment. 

2.6.4 Case Control Deck for Piecewise Linear Sta tic Analysis 

The following items relate to subcase definition and data selection for Piecewise Linear 
Static Analysis: 

1. The Case Control Deck must contain one and only one subcase. 

2. A static loading condition must be defined with a L0AD selection. 

3. An SPC set must be selected unless all constraints are specified on GRID cards. 

4. PLC0EFFICIENT must appear either to select a PLFACT set from the Bulk Data Deck or to 
explicitly select the default value of unity. 

2.6.5 Parameters for Piecewise Linear Static Analysis 

The following parameters are used in Piecewise Linear Static Analysis: 

1. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2 « AUT0SPC - reserved for future optional use. The default value is -1. 

3. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTRIA2, CPTUBE, CPQDPLT, CPTRPLT, 
CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 



2.6-13 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

4. GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. 

5. IRES - optional. A positive integer value of this parameter causes the printing of the 
residual vectors following the execution of the SSG3 module. 

6. SURFACE - optional. The computations of the external surface areas for the 
two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

7. V0LUME - optional. The volume computations for the two-dimensional and 
three-dimensional elements are activated by this parameter when they are generated in 
the EMG module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details. 

8. WTMASS - optional. The terms of the mass matrix are multiplied by the real value of 
this parameter when they are generated in the EMA module. 

2.6.6 Rigid Format Error Messages from Piecewise Linear Static Analysis 

The following fatal errors are detected by the DMAP statements in the Piecewise Linear 
Static Analysis rigid format. The text for each error message is given below in capital letters 
and is followed by additional explanatory material, including suggestions for remedial action. 

PIECEWISE LINEAR STATIC ANALYSIS ERR0R MESSAGE N0. 1 - N0 N0NLINEAR ELEMENTS HAVE BEEN DEFINED. 

A piecewise linear problem has not been formulated because none of the elements has a stress 
dependent modulus of elasticity defined on a Material card. 

PIECEWISE LINEAR STATIC ANALYSIS ERR0R MESSAGE N0. 2 - ATTEMPT T0 EXECUTE M0RE THAN 360 L00PS. 

An attempt has been made to use more than 360 load increments. This number may be increased by 
ALTERing the REPT instruction preceding SDR2. 

PIECEWISE LINEAR STATIC ANALYSIS ERR0R MESSAGE N0. 3 - MASS MATRIX REQUIRED F0R WEIGHT AND BALANCE 
CALCULATIONS. 

The mass matrix is null because either no elements were defined with Connection cards, 
nonstructural mass was not defined on a Property card, or the density was not defined on a Material 
card. 



2.6-14 (05/30/86) 



PIECEWISE LINEAR STATIC ANALYSIS 

PIECEWISE LINEAR STATIC ANALYSIS ERR0R MESSAGE N0. 4 - N0 ELEMENTS HAVE BEEN DEFINED. 

No elements have been defined with either Connection cards or 6ENEL cards. * 

PIECEWISE LINEAR STATIC ANALYSIS ERR0R MESSAGE N0. 5 - STIFFNESS MATRIX SINGULAR DUE T0 MATERIAL 
PLASTICITY. 

The stiffness matrix is singular due either to one or more grid point singularities or element 
material plasticity. 



2.6-15 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



2.6-16 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.7 DIRECT COMPLEX EIGENVALUE ANALYSIS 

2.7.1 DMAP Sequence for Direct Complex Eigenvalue Analysis 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 7 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

OPTIONS IN EFFECT GO ERR=2 LIST NODECK NOREF NOOSCAR 



1 BEGIN D ISP 07 - DIRECT COMPLEX EIGENVALUE ANALYSIS - APR. I986 $ 

2 PRECHK ALL $ 

3 FILE GOD=SAVE/GMD=SAVE $ 
k PARAM //*MPY*/CARDN0/0/O $ 

5 GP1 GEOMl,GE0M2,/GPL,EQEXIN,GPDT,CSTM,BGPDT,SIL/S,N,LUSET/ 

S,N,N0GPDT/MINUS1=-1 $ 

6 PLTTRAN BGPDT,SIL/BGPDP,SIP/LUSET/S,N,LUSEP $ 

7 PURGE USET,GM,GO,KAA,BAA,MAA,KitAA,KFS,EST,ECT,PLTSETX,PLTPAR,GPSETS, 

ELSETS/NOGPDT $ 

8 COND LBL5.N0GPDT $ 

9 GP2 GE0M2.EQEXIN/ECT $ 

10 PARAML PCDB//*PRES*////JUMPPLOT $ 

11 PURGE PLTSETX,PLTPAR,GPSETS,ELSETS/JUMPPLOT $ 

12 COND P1,JUMPPL0T $ 

1 3 PLTSET PCDB , EQEX I N , ECT/PLTSETX , PLTPAR, GPSETS , E LSETS/S , N, NS I L/ 

S.N.JUMPPLOT $ 

14 PRTMSG PLTSETX// $ 

15 PARAM //*MPY*/PLTFLG/1/1 $ 

16 PARAM //*MPY*/PF I LE/O/0 $ 

17 COND Pl.JUMPPLOT $ 

18 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIL,,ECT,,/PL0TX1/ 

NSIL/LUSET/JUMPPLOT/PLTFLG/S,N,PFILE $ 

19 PRTMSG PL0TX1// $ 

20 LABEL PI $ 

21 GP3 GE0M3,EQEXIN,GE0M2/,GPTT/N0GRAV $ 

2.7-1 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL I986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 7 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

22 TA1 ECT,EPT,BGPDT,SIL,GPTT,CSTM/EST,GEI,GPECT,,/ 

LUSET/S,N,N0SIMP=-1/1/S,N,N0GENL=-1/S,N,GEN£L $ 

23 PURGE K^GG,GP$T,OGPST,MGG,BGG,KifNN,KitFF,KitAA,MNN,MFF,MAA,BNN,BFF,BAA, 

KGGX/NOSIMP / OGPST/GENEL $ 

2k COND LBL1.N0SIMP $ 

25 PARAM //*ADD*/NOKGGX/1/0 $ 

26 PARAM //*ADD*/NOMGG/l/0 $ 

27 PARAM //*ADD*/NOBGG=-1/1/0 $ 

28 PARAM //*ADD*/NOKitGG/l/0 $ 

29 EMG EST,CSTM,MPT,DIT,GE0M2,/KELM,KDICT,MELM,MDICT,BELM,BDICT,/S,N, 

NOKGGX/S , N , NOMGG/S , N , NOBGG/S , N , NOKltGG//C, Y , COUPMASS/ 
C,Y,CPBAR/C,Y,CPR0D/C,Y,CPQUAD1/C,Y,CPQUAD2/C ( Y,CPTRIA1/ 
C , Y , CPTR I A2/C , Y f CPTUBE/C , Y , CPQDPLT/C , Y , CPTRPLT/C , Y , CPTRBSC/ 
V,Y,VOLUME/V,Y, SURFACE $ 

30 PURGE KGGX.GPST/NOKGGX/MGG/NOMGG $ 

31 COND LBLKGGX.NOKGGX $ 

32 EMA GPECT,KDICT,KELM/KGGX,GPST $ 

33 LABEL LBLKGGX $ 

3lt COND LBLMGG.NOMGG $ 

35 EMA GPECT,MDICT,MELM/MGG,/-1/C,Y,WTMASS=1.0 $ 

36 LABEL LBLMGG $ 

37 COND LBLBGG.NOBGG $ 

38 EMA GPECT.BDICT.BELM/BGG, $ 

39 LABEL LBLBGG $ 

kO COND LBLK4GG.N0KAGG $ 

41 EMA GPECT,KDICT,KELM/KitGG,/N0K4GG $ 

hi LABEL LBLK4GG $ 

43 PURGE MNN,MFF,MAA/NOMGG $ 

kk PURGE BNN,BFF,BAA/NOBGG $ 



2.7-2 (05/30/86) 



DIRECT COMPLEX EIGENVALUE ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 7 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

1*5 COND LBL1,GRDPNT $ 

46 COND ERR0R3.N0MGG $ 

47 GPWG BGPDP,CSTM,EQEXIN,MGG/OGPWG/V,Y,GRDPNT/C,Y,WTMASS $ 

48 OFP 0GPWG,,,,,//S,N,CARDN0 $ 

49 LABEL LBL1 $ 

50 EQUIV KGGX,KGG/NOGENL $ 

51 COND LBL11.N0GENL $ 

52 SMA3 GEI.KGGX/KGG/LUSET/NOGENL/NOSIMP $ 

53 LABEL LBL11 $ 

54 PARAM //*MPY*/NSKIP/0/0 $ 

55 GP4 CASECC,GE0M4,EQEXIN,GPDT,BGPDT,CSTM,GPST/RG,,USET,ASET/ 

LUSET/S,N,MPCF1/S,N,MPCF2/S,N,SINGLE/S,N,0MIT/S,N,REACT/ 
S , N , NSK I P/S , N , REPEAT/S , N , NOSET/S , N , NOL/S , N, NOA/ 
C,Y,ASETOUT/S,Y,AUTOSPC $ 

56 PURGE GM,GMD/MPCF1/G0,G0D/0MIT/KFS,QPC/SINGLE $ 

57 COND LBL4.GENEL $ 

58 COND LBL4.N0SIMP $ 

59 PARAM //*EQ*/GPSPFLG/AUTOSPC/0 $ 

60 COND LBL4.GPSPFLG $ 

61 GPSP GPL,GPST,USET,SIL/OGPST/S,N,NOGPST $ 

62 OFP OGPST,,,,,//S,N,CARDNO $ 

63 LABEL LBL4 $ 

64 EQUIV KGG,KNN/MPCF1/MGG,MNN/MPCF1/ BGG,BNN/MPCF 1/K4GG.K4NN/MPCF 1 $ 

65 COND LBL2.MPCF1 $ 

66 MCE1 USET.RG/GM $ 

67 MCE2 USET,GM,KGG,MGG,BGG,K4GG/KNN,MNN,BNN,K4NN $ 

68 LABEL LBL2 $ 

69 EQUIV KNN,KFF/SINGLE/MNN,MFF/SINGLE/BNN,BFF/SINGLE/K4NN,K4FF/SINGLE $ 



2.7-3 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 7 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

70 COND LBL3, SINGLE $ 

71 SCE1 USET,KNN,MNN,BNN,K4NN/KFF,KFS,,MFF,BFF,KltFF $ 

72 LABEL LBL3 $ 

73 EQUIV KFF.KAA/OMIT/ MFF .MAA/OMIT/BFF , BAA/OMIT/MFF .MfAA/OMIT $ 

71* COND LBL5.0MIT $ 

75 SMP1 USET,KFF,,,/GO,KAA,KO0 ; L0O,,,,, $ 

76 COND LBLM.NOMGG $ 

77 SMP2 USET.GO.MFF/MAA $ 

78 LABEL LBLM $ 

79 COND LBLB.NOBGG $ 

80 SMP2 USET,GO,BFF/BAA $ 

81 LABEL LBLB $ 

82 COND LBL5,N0KitGG $ 

83 SMP2 USET,GO,KitFF/K^AA $ 

Bk LABEL LBL5 $ 

85 DPD DYNAMICS,GPL,SIL,USET/GPLD,SILD,USETD,TFP00L,,,,,,EED,EQDYN/ 

LUSET/S,N,LUSETD/NOTFL/NODLT/NOPSDL/NOFRL/ 
NONLFT/NOTRL/S,N,NOEED/123/S,N,NOUE $ 

86 COND ERROR!, NOEED $ 

87 EQUIV GO,G0D/N0UE/GM,GMD/NOUE $ 

88 PARAM //*ADD*/NEVER/l/0 $ 

89 PARAM //*MPY*/REPEATE/1/-1 $ 

90 BMG MATP0OL,BGPDT,EQEX!N,CSTM/BDPO0L/S,N,NOKBFL/S,N,N0ABFL/ 

S,N,MFACT $ 

91 PARAM //*AND*/N0FL/N0ABFL/N0KBFL $ 

92 PURGE KBFL/NOKBFL/ ABFL/NOABFL $ 

93 COND LBL13.N0FL $ 

94 MTRXIN, ,BDP0OL,EQDYN,,/ABFL,KBFL,/LUSETD/S,N,NOABFL/S,N,NOKBFL/ 

$ 



2.7-4 (05/30/86) 



DIRECT COMPLEX EIGENVALUE ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 7 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



95 LABEL LBL13 $ 

96 PURGE PHID,CLAMA,0PHID,0QPC1,0CPHIP,0ESC1,0EFC1,CPHIP,QPC, 

K2PP,M2PP,B2PP,K2DD,M2DD,B2DD/NEVER $ 

97 CASE CASECC,/CASEXX/*CEIGN*/S,N,REPEATE/S,N,NOLOOP $ 

98 MTRXIN CASEXX,MATP00L,EQDYN,,TFP00L/K2DPP,M2DPP t B2PP/LUSETD/S,N, 

NOK2DPP/S,N,N0M2DPP/S,N,N0B2PP $ 

99 PARAM //*AND*/N0M2PP/N0ABFL/N0M2DPP $ 

100 PARAM //*AND*/N0K2PP/N0FL /N0K2DPP $ 

101 EQUIV K2DPP,K2PP/N0FL/M2DPP,M2PP/N0ABFL $ 

102 COND LBLFL2.N0FL $ 

103 ADD5 ABFL,KBFL,K2DPP,,/K2PP/(-l. 0,0.0) $ 

104 COND LBLFL2.N0ABFL $ 

105 TRNSP ABFL/ABFLT $ 

106 ADD ABFLT,M2DPP/M2PP/MFACT $ 

107 LABEL LBLFL2 $ 

108 PARAM //*AND*/BDEBA/N0UE/N0B2PP $ 

109 PARAM //AAND*/MDEMA/NOUE/N0M2PP $ 

110 PARAM //*AND*/KDEK2/N0GENL/N0SIMP $ 

111 PURGE K2DD/N0K2PP/M2DD/NOM2PP/B2DD/N0B2PP $ 

112 EQUIV M2PP,M2DD/N0A/B2PP,B2DD/N0A/K2PP,K2DD/N0A/ 

MAA,MDD/MDEMA/BAA,BDD/BDEBA $ 

113 COND LBLl8,N0GPDT $ 

lll» GKAD USETD,GM,G0,KAA,BAA,MAA,K4AA,K2PP,M2PP,B2PP/KDD,BDD,MDD,GMD, 
GOD , K2DD , M2DD f B2DD/*CMPLE V*/*D I SP*/*D I RECTVC , Y , G=0 .0/ 
0.O/O.O/NOK2PP/N0M2PP/N0B2PP/ 
MPCFl/SINGLE/OMIT/NOUE/NOKi+GG/NOBGG/ 
KDEK2/-1 $ 

115 LABEL LBL18 $ 

116 EQUIV B2DD.BDD/N0BGG/ M2DD.MDD/N0SIMP/ K2DD.KDD/KDEK2 $ 

117 CEAD KDD,BDD,MDD,EED,CASEXX/PHID,CLAMA,OCEIGS,/S,N,E!GVS $ 



2.7-5 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 7 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

118 OFP OCEIGS,CLAMA,,,,//S,N,CARDNO $ 

119 COND LBLl6,EIGVS $ 

1 20 VDR CASEXX , EQDYN , USETD , PH 1 D , CLAMA , , /OPH I D , /*CE IGN*/*D 1 RECT*/ 

0/S,N,N0D/S,N, NOP/0 $ 

121 COND LBL15.N0D $ 

122 OFP OPHID //S,N,CARDN0 $ 

123 LABEL LBL15 $ 

124 COND LBL16.N0P $ 

125 EQUI V PHID.CPHIP/NOA $ 

126 COND LBL17.N0A $ 

127 SDR1 USETD,, PHID,,,GOD,GMD, ,KFS, ,/CPH I P, ,QPC/1/*DYNAMI CS* $ 

128 LABEL LBL17 $ 

129 SDR2 CASEXX, CSTM, MPT, D IT, EQDYN, S I LD,,,, CLAMA, QPC.CPH IP, EST,, /.0QPC1, 

0CPH!P,0ESC1,0EFC1,/*CEIG* $ 

130 OFP OCPHIP,OQPC1,OEFC1,OE$C1,,//S,N,CARDNO $ 

131 LABEL LBL16 $ 

132 COND FINIS, REPEATE $ 

133 REPT LBL13.100 $ 

134 PRTPARM //-2/*DIRCEAD* $ 

135 JUMP FINIS $ 

136 LABEL ERR0R1 $ 

137 PRTPARM //-1/*DIRCEAD* $ 

138 LABEL ERR0R3 $ 

139 PRTPARM //-3/*DIRCEAD* $ 
UO LABEL FINIS $ 

HI PURGE DUMMY/MINUS1 $ 
H2 END $ 



2.7-6 (05/30/86) 



DIRECT COMPLEX EIGENVALUE ANALYSIS 

2.7.2 Description of Important DMAP Operations for Direct Complex Eigenvalue Analysis 

5. GP1 generates coordinate system transformation matrices, tables of grid point locations,* and 
tables relating the internal and external grid point numbers. 

6. PLTTRAN modifies special scalar grid points in the BGPDT and SIL tables. 

8. Go to DMAP No. 84 if there is only Direct Matrix Input. 

9. GP2 generates Element Connection Table with internal indices. 

12. Go to DMAP No. 20 if there are no structure plot requests. 

13. PLTSET transforms user input into a form used to drive the structure plotter. 

14. PRTMSG prints error messages associated with the structure plotter. 

17. Go to DMAP No. 20 if no undeformed structure plots are requested. 

18. PL0T generates all requested undeformed structure plots. 

19. PRTMSG prints plotter data and engineering data for each undeformed plot generated. 

21. GP3 generates Grid Point Temperature Table. 

22. TA1 generates element tables for use in matrix assembly and stress recovery. 
24. Go to DMAP No. 49 if there are no structural elements. 

29. EMG generates structural element stiffness, mass and damping matrix tables and dictionaries 
for later assembly by the EMA module. 

31. Go to DMAP No. 33 if no stiffness matrix, is to be assembled. 

32. EMA assembles stiffness matrix [K* ] and Grid Point Singularity Table. 

34. Go to DMAP No. 36 if no mass matrix is to be assembled. 

35. EMA assembles mass matrix [M ]. 

37. Go to DMAP No. 39 if no viscous damping matrix is to be assembled. 

38. EMA assembles viscous damping matrix [ B g J- 

40. Go to DMAP No. 42 if no structural damping matrix is to be assembled. 

4 

41. EMA assembles structural damping matrix LK J. 

45. Go to DMAP No. 49 if no weight and balance information is requested. 

46. Go to DMAP No. 138 and print Error Message No. 3 if no mass matrix exists. 

47. GPWG generates weight and balance information. 

48. 0FP formats the weight and balance information prepared by GPWG and places it on the system 
output file for printing. 

50. Equivalence [K* ] to [K ] if there are no general elements. 

y y y y 

51. Go to DMAP No. 53 if there are no general elements. 

52. SMA3 adds general elements to [K* ] to obtain stiffness matrix [ K gg ]- 



2.7-7 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



55. GP4 generates flags defining members of various displacement sets (USET) and forms 
multipoint constraint equations [R ] {u } = 0. 

9 9 * 

57. Go to DMAP No. 63 if general elements are present. 

58. Go to DMAP No. 63 if there are no structural elements, 

60. Go to DMAP No. 63 if no potential grid point singularities exist. 

61. GPSP generates a table of potential grid point singularities. 

62. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 

64. Equivalence [K gg ] to [KJ, [M gg ] to [Mj, [B gg ] to [Bj and [K^] to 

[K 1 if no multipoint constraints exist, 
nn 

65. Go to DMAP No. 68 if no multipoint constraints exist. 

66. MCE1 partitions multipoint constraint equations [R ] = [R j R ] and solves for 
multipoint constraint transformation matrix [G ] = -[R m ] t R n ]- 

67. MCE2 partitions stiffness, mass and damping matrices 



[ V - 



V - 



K I K 
nn | nm 

K i K 
mn mm 



B I B 

nn ' 



nm 



mn mm 



and 



[ V 



[K 4 ] 

gg J 



M ! M 
n n nm 

M i M 
mn ' mm 



"4 4 

\c I r 

nn ' nm 

— i— 

k 4 Ik 4 

mn mm 



and performs matrix reductions 

[K nn J - [K nn ] + [GT][K mn ] + [< n ][G m ] + [G^][K mm ][G m ] . 



[M ] = [M ] + [G T ][M ] + [M T ][G ] + [G T ][M ][G ] , 
L nn J L nn J L m JL mn J L mn JL m J L m JL mm JL m J 

[B ] = [B ] + [G T ][B ] + [B T ][G ] + [G T ][B m J[G ] , 



nn- 



nn- 



m JU mn- 



mn-"- nr 



m Jl - mm m- 



[Kj n ] - [ _ < n ] + [GT][K 4 n ] + [K 4 n ] T [G m ] + [G^EK^JCGJ 



69. Equivalence [K pn ] to [K ff ], [M pn ] to [M ff ], [B nn ] to [B ff ] and [K^] to 
[K ff ] if no single-point constraints exist. 

70. Go to DMAP No. 72 if no single-point constraints exist. 



2.7-8 (05/30/86) 



DIRECT COMPLEX EIGENVALUE ANALYSIS 



71. SCE1 partitions out single-point constraints 



[W - 


. K sf ' K ss. 


»m> ' 


"ff^fs 
. M sf 1 M ss. 


[ B J * 


B ff 1 B f s 

--I — 

B sf ' B ss 


and [K« n ] - 


V , K 4 
K ff | K f s 



73. Equivalence [K ff ] to [K afl ], [M ff J to [M fla ] s [B ff ] to [B aa 3 and [K ff ] to 

[K 1 if no omitted coordinates exist, 
aa 

74. Go to DMAP No. 84 if no omitted coordinates exist. 

75. SMP1 partitions constrained stiffness matrix 



[K ff ] - 



K I K 
aa ao 

K oa ' K oo 



i-lr 



solves for transformation matrix [G ] = -[K Q0 ] [ K oa l 
and performs matrix reduction [K ] = [K ] + [K ][G ] . 



aa- 



76. Go to DMAP No. 78 if no mass matrix exists. 

77. SMP2 partitions constrained mass matrix 



[M ff ] ¦ 



M I M 
aa | ao 

M i M 
oa oo 



and performs matrix reduction 

[« aa ] = [M aa ] + [M aQ ][G ] ? [M ao G fl ] T * [Gj][M 00 ][G ] 

79. Go to DMAP No. 84 if no viscous damping matrix exists. 

80. SMP2 partitions constrained viscous damping matrix 



[B ff ] ¦ 
and performs matrix reduction 



B I B 
aa ao 

B I B 
oa oo 



2.7-9 (05/30/86) 



82. 
83. 



DISPLACEMENT RIGID FORMATS 

&..J " ^ aa ] + [B ao ][6 ] ? D», G ] T + [fiJlCB^tS,,] 
Go to DMAP No. 84 if no structural damping matrix exists. 
SMP2 partitions constrained structural damping matrix 



[K< ff ] - 



^a_ 

.4 
oa 



ao 

4 
'oo 



and performs matrix reduction 



85. 

86. 
87. 

90. 

93. 
94. 

95. 
97. 

98. 
101. 

102. 
103. 
104. 

105. 

106, 



[<.] - [K aa ] + ^J + [<o G o] T + \-*lKp& l 

DPD generates flags defining members of various displacement sets used in dynamic analysis 
(USETD), tables relating the internal and external grid point numbers (GPLD), including 
extra points introduced for dynamic analysis (SILD), and prepares Transfer Function Pool 
(TFP00L), and Eigenvalue Extraction Data (EED). 

Go to DMAP No. 136 and print Error Message No. 1 if there is no Eigenvalue Extraction Data. 

Equivalence [G ] to [g|J] and [Gj to [Gj[] if there are no extra points introduced 

for dynamic analysis. 

BMG generates DMIG card images describing the interconnection of the fluid and the 
structure. 

Go to DMAP No. 95 if no fluid-structure interface is defined. 

MTRXIN generates fluid boundary matrices [A b f£ ] and [K b fA ]. The matrix [K bjfa ] is 

generated only for a nonzero gravity in the fluid. 

Beginning of loop for additional sets of direct input matrices. 

CASE extracts the appropriate record from CASECC corresponding to the current loop and 
copies it into CASEXX. 

MTRXIN selects the direct input matrices [K pp ], [M pp ] and [B pp ] for the current loop. 
Equivalence [K 2 ] to [K 2d ] if no fluid-structure interface is defined and equivalence 

[M 2 p ] to [M^] if there is no [A b>f£ ]. 

Go to DMAP No. 107 if no fluid-structure interface is defined. 

ADD5 adds [K b|f£ ] and [K 2 ^] and subtracts [A b ^ fA ] from them to form [K pp ]. 

Go to DMAP No. 107 if there is no [A b f£ ]. 

Transpose [A b fi l to obtain [A b f£ ] . 

ADD assembles input matrix [M 2 p ] = MFACT [A bjfJL ] T + [M pp ]. 



2.7-10 (05/30/86) 



DIRECT COMPLEX EIGENVALUE ANALYSIS 

112. Equivalence [Mp p ] to [M^], [Bj; ] to [BJj d ] and [Kj; J to [K^] if no constraints 
are applied, [M fla ] to [M^] if there are no direct input mass matrices and no extra 
points, and [B ] to [B^] if there are no direct input damping matrices and no extra 
points. 

113. Go to DMAP No. 115 if only extra points are defined. 

114. GKAD assembles stiffness, mass and damping matrices for use in Direct Complex Eigenvalue 
Analysis 

[K dd ] - (1 ? ig)[Kl d ] + [it*,] ? 1[K*,] , 
[H dd ] = [H dd ] + [M dd ] and 
[B dd ] - [B dd ] + [B dd ] . 

Direct input matrices may be complex. 

2 2 

116. Equivalence [K HH ] to [K, H ] if all stiffness is Direct Matrix Input, [M^ H ] to [M HH ] 



d^J w L'^dd- 1 3UIIMC " ,s "iic^t nan ia inyui,, L'-'^jjJ w L "dd- 

«] t0 [i W 



if all mass is Direct Matrix Input and [B. .] to [B..] is all damping is Direct Matrix 



Input. 

117. CEAD extracts complex eigenvalues and eigenvectors from the equation 

&d/ + B ddP + »W {u d> = ° 
and normalizes eigenvectors according to one of the following user requests: 

1) Unit magnitude of a selected component 

2) Unit magnitude of the largest component. 

118. 0FP formats the summary of complex eigenvalues (CLAMA) and summary of eigenvalue extraction 
information (0CEIGS) prepared by CEAD and places them on the system output file for 
printing. 

119. Go to DMAP No. 131 if no eigenvalues were found. 

120. VDR prepares eigenvectors for output, using only the independent degrees of freedom. 

121. Go to DMAP No. 123 if there is no output request for independent degrees of freedom. 

122. 0FP formats the eigenvectors for independent degrees of freedom prepared by VDR and places 
them on the system output file for printing. 

124. Go to DMAP No. 131 if there is no output request involving dependent degrees of freedom or 
forces and stresses. 

125. Equivalence {<(>,} to {<b } if no constraints are applied. 

126. Go to DMAP No. 128 if no constraints are applied. 



2.7-11 (05/30/86) 



DISPLACEMENT RIGID FORMATS 
127. SDR1 recovers dependent components of eigenvectors 

(?„} = [G d ] (* d ) , T d _| . {+ ? ? } 



^f + V P / A 



= { *n + V > t*J = tO <?„ + *J . 



n y e 



¦(?) 



r m 



and recovers single-point forces of constraint {q } = [kI ] {$ f }. 

129. SDR2 calculates element forces (0EFC1) and stresses (0ESC1) and prepares eigenvectors 
(0CPHIP) and single-point forces of constraint (0QPC1) for output. 

130. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

132. Go to DMAP No. 140 if no additional sets of direct input matrices need to be processed. 

133. Go to DMAP No. 95 if additional sets of direct input matrices need to be processed. 

134. Print Error Message No. 2 and terminate execution. 

135. Go to DMAP No. 140 and make normal exit. 

137, Print Error Message No. 1 and terminate execution. 
139. Print Error Message No. 3 and terminate execution. 



2.7-12 (05/30/86) 



DIRECT COMPLEX EIGENVALUE ANALYSIS 

2.7.3 Output for Direct Complex Eigenvalue Analysis 

Each complex eigenvalue is identified with a root number determined by sorting the complex 
eigenvalues according to the magnitude of the imaginary part, with positive values considered as a 
group ahead of all negative values. The following summary of the complex eigenvalues extracted is 
automatically printed for each set of direct input matrices: 

1. Root Number 

2. Extraction Order 

3. Real and Imaginary Parts of the Eigenvalue 

4. The coefficients f . (frequency) and g, (damping coefficient) in the following 

J J 

representation of the eigenvalue 

Pj - 2.f j<1 - \ 9j ) 

The following summary of the eigenvalue analysis performed, using the Determinant method, is 
automatically printed for each set of direct input matrices: 

1. Number of eigenvalues extracted 

2. Number of passes through starting points. 

3. Number of criteria changes. 

4. Number of starting point moves. 

5. Number of triangular decompositions. 

6. Number of failures to iterate to a root. 

7. Number of predictions outside region. 

8. Reason for termination: 

(1) The number of roots desired have been found. 

(2) All predictions for eigenvalues are outside the regions specified. 

(3) Insufficient time to find another root. 

(4) Matrix is singular at first three starting points. 

9. Swept determinant functions for each starting point. 

The following summary of the eigenvalue analysis performed, using the Inverse Power method, 
is automatically printed for each region specified: 

1. Number of eigenvalues extracted. 

2. Number of starting points used. 

3. Number of starting point moves. 

4. Number of triangular decompositions. 

2.7-13 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



(2) 


(3) 


(4) 


(5) 


(6) 


(7) 


(8) 


(9) 


The fol 



5. Number of vector iterations. 

6. Reason for termination. t 
(1) Two consecutive singularities encountered while performing triangular 

decomposition. 

Four starting point moves while tracking a single root. 
All eigenvalues found in the region specified. 

Three times the number of roots estimated in the region have been extracted. 
All eigenvalues that exist in the problem have been found. 
The number of roots desired have been found. 

One or more eigenvalues have been found outside the region specified. 
Insufficient time to find another root. 
Unable to converge, 
lowing summary of the eigenvalue analysis performed, using the complex Tridiagonal 
Reduction (FEER) method, is automatically printed: 

1. Number of eigenvalues extracted. 

2. Number of starting points used. 

This corresponds to the total number of random starting and restart vectors used by the 
complex FEER process for all neighborhoods. 

3. Number of starting point moves. 

Not used in FEER (set equal to zero). 

4. Number of triangular decompositions. 

Always equal to the number of points of interest (neighborhoods) in the complex plane 
processed by FEER, since ordinarily only one triangular decomposition is required by 
FEER for each point of interest, unless the dynamic matrix is singular at a given point 
of interest, in which case an additional decomposition is required (obtained by moving 
the point of interest slightly). 

5. Total number of vector iterations. 

The total number of reorthogonalizations of all the trial vectors employed. 

6. Reason for termination. 

(0) All, or more solutions than the number requested by the user, have been determined 
(normal termination). 



2.7-14 (05/30/86) 



DIRECT COMPLEX EIGENVALUE ANALYSIS 

(1) All neighborhoods have been processed, but FEER has not obtained the desired number 
of roots in each neighborhood, possibly because they have already been found „in 
other neighborhoods. 

(2) Abnormal termination - either no roots found or none passes the FEER error test. 
The following printed output, sorted by complex eigenvalue root number (S0RT1), may be 

requested for any complex eigenvalue extracted, as either real and imaginary parts or magnitude and 
phase angle (0° - 360° lead): 

1. The eigenvector for a list of PHYSICAL points {grid points and extra scalar points 
introduced for dynamic analysis) or S0LUTI0N points (points used in the formulation of 
the dynamic equation). 

2. Nonzero components of the single-point forces of constraint for a list of PHYSICAL 
points. 

3. Stresses and forces in selected elements. 

In addition, an undeformed plot of the structural model may be requested. 

2.7.4 Case Control Deck for Direct Complex Eigenvalue Analysis 

The following items relate to subcase definition and data selection for Direct Complex 
Eigenvalue Analysis: 

1. At least one subcase must be defined for each unique set of direct input matrices (K2PP, 
M2PP, B2PP). 

2. Multiple subcases for each set of direct input matrices are used only to control output 
requests. A single subcase for each set of direct input matrices is sufficient if the 
same output is desired for all modes. If consecutive multiple subcases are present for 
a single set of direct input matrices, the output requests will be honored in succession 
for increasing mode numbers. M0DES may be used to repeat subcases in order to make the 
same output request for several consecutive modes. 

3. CMETH0D must be used to select an EIGC card from the Bulk Data Deck for each set of 
direct input matrices. 

4. On restart following an unscheduled exit due to insufficient time, the subcase structure 
must be changed to reflect the sets of direct input matrices that were completed, and 
either CMETH0D must be changed to select an EIGC card that reflects any complex 
eigenvalues found in the previous execution or EIGP cards must be used to insert poles 

2.7-15 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

for previously found eigenvalues. Otherwise, the previously found eigenvalues will be 

extracted again. 
5. Constraints must be defined above the subcase level. 
2.7.5 Parameters for Direct Complex Eigenvalue Analysis 

The following parameters are used in Direct Complex Eigenvalue Analysis: 

1. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the 6P4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2. AUT0SPC - reserved for future optional use. The default value is -1. 

3. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CP1RIA2, CPTUBE, CPQDPLT, CPTRPLT, 
CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

4. G^ - optional. The real value of this parameter is used as a uniform structural damping 
coefficient in the direct formulation of dynamics problems {see Section 9.3.3 of the 
Theoretical Manual). Not recommended for use in hydroelastic problems. 

5. GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. All fluid related masses are ignored. 

6. SURFACE - optional. The computations of the external surface areas for the 
two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

7 - V0LUME - optional. The volume computations for the two-dimensional and 

three-dimensional elements are activated by this parameter when they are generated in 
the EMG module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details. 

8. WTMASS - optional. The terms of the structural mass matrix are multiplied by the real 
value of this parameter when they are generated in the EMA module. Not recommended for 
use in hydroelastic problems. 



2.7-16 (05/30/86) 



DIRECT COMPLEX EIGENVALUE ANALYSIS 

2.7.6 Rigid Format Error Messages from Direct Complex Eigenvalue Analysis 

The following fatal errors are detected by the DMAP statements in the Direct Complex, 
Eigenvalue Analysis rigid format. The text for each error message is given below in capital 
letters and is followed by additional explanatory material, including suggestions for remedial 
action. 



DIRECT COMPLEX EIGENVALUE ANALYSIS ERR0R MESSAGE N0. 1 - EIGENVALUE EXTRACTION DATA REQUIRED F0R 
C0MPLEX EIGENVALUE ANALYSIS. 

Eigenvalue extraction data must be supplied on an EIGC card in the Bulk Data Deck and CMETH0D in 
the Case Control Deck must select an EIGC set. 

DIRECT C0MPLEX EIGENVALUE ANALYSIS ERR0R MESSAGE N0. 2 - ATTEMPT T0 EXECUTE M0RE THAN 100 L00PS. 

An attempt has been made to use more than 100 sets of direct input matrices. This number may be 
increased by ALTERing the REPT instruction following SDR2. 

DIRECT C0MPLEX EIGENVALUE ANALYSIS ERR0R MESSAGE N0. 3 - MASS MATRIX REQUIRED F0R WEIGHT AND 
BALANCE CALCULATIONS. 

I he mass matrix is null because either no elements were defined on Connection cards, nonstructural 
mass was not defined on a Property card, or the density was not defined on a Material card. 



2.7-17 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



2.7-18 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.8 DIRECT FREQUENCY AND RANDOM RESPONSE 

2.8.1 DMAP Sequence for Direct Frequency and Random Response 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 8 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

OPTIONS IN EFFECT GO ERR=2 LIST NODECK NOREF NOOSCAR 



1 BEGIN DISP 08 - DIRECT FREQUENCY/RANDOM RESPONSE ANALYSIS-APR. 1986 $ 

2 PRECHK ALL $ 

3 FILE KGGX=TAPE/KGG=TAPE/GOD=SAVE/GMD=SAVE/MDD=SAVE/BDD=SAVE $ 

It PARAM //ftMPYVCARDNO/O/0 $ 

5 GP1 GE0M1,GE0M2,/GPL,EQEXIN,GPDT,CSTM,BGPDT,SIL/S,N,LUSET/ 

S,N,N0GPDT/ALWAYS=-1 $ 

6 PLTTRAN BGPDT,SIL/BGPDP,SIP/LUSET/S,N,LUSEP $ 

7 PURGE USET,GM,GO,KAA,BAA,MAA,KltAA,KFS,PSF,QPC,EST,ECT,PLTSETX,PLTPAR, 

GPSETS,ELSETS/NOGPDT $ 

8 COND LBL5.N0GPDT $ 

9 GP2 GE0M2.EQEXIN/ECT $ 

10 PARAML PCDB//*PRES*////JUMPPLOT $ 

11 PURGE PLTSETX,PLTPAR,GPSETS,ELSETS/JUMPPLOT $ 

12 COND Pl.JUMPPLOT $ 

13 PLTSET PCDB,EQEXIN,ECT/PLTSETX,PLTPAR,GPSETS,ELSETS/S,N,NSIL/ 

S,N,JUMPPLOT $ 

lit PRTMSG PLTSETX// $ 

15 PARAM //*MPY*/PLTFLG/l/.l $ 

16 PARAM //ftMPYVPFILE/O/0 $ 

17 COND Pl.JUMPPLOT $ 

1 8 PLOT PLTPAR , GPSETS , ELSETS , CASECC, BGPDT, EQEX I N ,S I L , , ECT , , /PL0TX1 / 

NSIL/LUSET/S,N,JUMPPLOT/S,N,PLTFLG/S,N,PFILE $ 

19 PRTMSG PL0TX1//$ 

20 LABEL PI $ 

21 GP3 GE0M3,EQEXIN,GE0M2/,GPTT/N0GRAV $ 

2.8-1 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 8 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

22 TA1 ECT,EPT,BGPDT,SIL,GPTT,CSTM/EST,GEI , GPECT,,/ 

LUSET/S,N,NOSIMP/1/S,N,NOGENL/S,N,GENEL $ 

23 PURGE KltGG,GPST,OGPST,MGG,BGG,KliNN,K*tFF,Ki*AA,MNN,MFF,MAA,BNN,BFF,BAA, 

KGGX/NOSIMP/OGPST/GENEL $ 

2k COND LBL1.N0SIMP $ 

25 PARAM //*ADD*/NOKGGX/1/0 $ 

26 PARAM //*ADD*/NOMGG/l/0 $ 

27 PARAM //*ADD*/N0BGG=- 1/1/0 $ 

28 PARAM //*ADD*/NOMGG/1/0 $ 

29 EMG EST,CSTM,MPT,DIT,GE0M2,/KELM,KDICT,MELM,MDICT,BELM,BDICT,/ 

S,N,NOKGGX/S,N,NOMGG/S,N,NOBGG/S,N,NOK*tGG//C,Y,COUPMASS/ 
C,Y,CPBAR/C,Y,CPR0D/C,Y,CPQUAD1/C,Y,CPQUAD2/C,Y,CPTRIA1/ 
C,Y,CPTRIA2/C,Y,CPTUBE/C,Y,CPQDPLT/C,Y,CPTRPLT/C,Y,CPTRBSC/ 
V,Y,VOLUME/V,Y, SURFACE $ 

30 PURGE GPST/NOKGGX/MGG/NOMGG $ 

31 COND LBLKGGX.NOKGGX $ 

32 EMA GPECT, KDICT,KELM/KGGX,GPST $ 

33 LABEL LBLKGGX $ 

3U COND LBLMGG,NOMGG $ 

35 EMA GPECT, MDiCT,MELM/MGG,/-l/C,Y,WTMASS=1.0 $ 

36 LABEL LBLMGG $ 

37 COND LBLBGG.NOBGG $ 

38 EMA GPECT, BDICT.BELM/BGG, $ 

39 LABEL LBLBGG $ 

40 COND LBLK4GG,N0K4GG $ 

itl EMA GPECT, KDICT,KELM/KitGG,/N0K4GG $ 

42 LABEL LBLK^GG $ 

1*3 PURGE MNN.MFF.MAA/NOMGG $ 

kk PURGE BNN,BFF,BAA/NOBGG $ 



2.8-2 (05/30/86) 



DIRECT FREQUENCY AND RANDOM RESPONSE 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 8 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

45 COND LBL1.GRDPNT $ 

46 COND ERR0R4.N0MGG $ 

47 GPWG BGPDP,CSTM,EQEXIN,MGG/0GPWG/V,Y,GRDPNT=-1/C,Y,WTMASS $ 

48 OFP OGPWG,,,, f //S,N,CARDNO $ 

49 LABEL LBL1 $ 

50 EQUIV KGGX.KGG/NOGENL $ 

51 COND LBL11.N0GENL $ 

52 SMA3 GEI.KGGX/KGG/LUSET/N0GENL/NOS1MP $ 

53 LABEL LBL11 $ 

54 PARAM //*MPY*/NSKIP/0/0 $ 

55 GP4 CASECC,GE0M4,EQEXIN f GPDT,BGPDT,CSTM,GPST/RG,,U$ET,ASET/ 

LUSET/S,N,MPCF1/S,N,MPCF2/S,N,SINGLE/S,N,0MIT/S,N,REACT/ 
S , N , NSK I P/S , N , RE PEAT/S , N , NOSET/S , N , NOL/S , N , NOA/C , Y , ASETOUT/ 
S.Y.AUTOSPC $ 

56 PURGE GM,GMD/MPCFl/GO,GOD/OM!T/KFS,PSF f QPC/SINGLE $ 

57 COND LBL4.GENEL $ 

58 COND LBL4.N0SIMP $ 

59 PARAM //*EQ*/GPSPFLG/AUTOSPC/0 $ 

60 COND LBL4.GPSPFLG $ 

61 GPSP GPL,GPST,USET,SIL/OGPST/S,N,NOGPST $ 

62 OFP OGPST,,,,,//S,N,CARDNO $ 

63 LABEL LBL4 $ 

64 EQUIV KGG.KNN/MPCF1/MGG.MNN/MPCF1/ BGG, BNN/MPCF 1/K4GG.K4NN/MPCF 1 $ 

65 ,COND LBL2.MPCF1 $ 

66 MCE1 USET.RG/GM $ 

67 MCE2 USET.GM.KGG.MGG.BGG.I^GG/KNN.MNN.BNN.iaNN $ 

68 LABEL LBL2 $ 

69 EQUIV KNN,KFF/SINGLE/MNN,MFF/SINGLE/BNN,BFF/SINGLE/K4NN,K4FF/SINGLE $ 



2.8-3 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 8 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



70 COND 

71 SCE1 

72 LABEL 

73 EQUIV 
Ik EQUIV 

75 EQUIV 

76 EQUIV 

77 COND 

78 SMP1 

79 COND 

80 SMP2 

81 LABEL 

82 COND 

83 SMP2 

84 LABEL 

85 COND 

86 SMP2 

87 LABEL 

88 DPD 

89 EQUIV 

90 PARAM 

91 PARAM 

92 BMG 

93 PARAM 

94 PURGE 



LBL3, SINGLE $ 

USET , KNN , MNN , BNN , K^NN/KF F , KF S , , MF F , BF F , KJtF F $ 

LBL3 $ 

KFF.KAA/OMIT $ 

MFF.MAA/OMIT $ 

BFF, BAA/OMIT $ 

KltFF,KAAA/OMIT $ 

LBL5.0MIT $ 

USET,KFF,,,/GO,KAA,KOO,LOO $ 

LBLM.NOMGG $ 

USET.GO.MFF/MAA $ 

LBLM $ 

LBLB.NOBGG $ 

USET,GO,BFF/BAA $ 

LBLB $ 

LBL5.N0K4GG $ 

USET,G0,KitFF/K4AA $ 

LBL5 $ 

DYNAMICS, GPL, S I L, USET/GPLD, S I LD.USETD.TFPOOL, DLT.PSDL, FRL, , , , 
EQDYN/LUSET/S , N , LUSETD/NOTF L/S , N , NODLT/S , N , NOPSDL/S , N , 
N0FRL/NONLFT/NOTRL/NOEED//S,N,NOUE $ 

GO,GOD/NOUE/GM,GMD/NOUE $ 

//*ADD*/NEVER/l/0 $ 

//*MPY*/REPEATF/-1/1 $ 

MATP00L,BGPDT,EQEXIN,CSTM/BDPOOL/S,N,NOKBFL/S,N,N0ABFL/ 
S,N,MFACT $ 

//AANDVNOFL/NOABFL/NOKBFL $ 
KBFL/NOKBFL/ ABFL/NOABFL $ 



2.8-4 (05/30/86) 



DIRECT FREQUENCY AND RANDOM RESPONSE 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 8 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



95 COND LBL13.N0FL $ 

96 MTRXIN, ,BDPOOL,EQDYN.,/ABFL,KBFL f /LUSETD/S,N,NOABFL/S,N,NOKBFL/ 

$ 

97 LABEL LBL13 $ 

98 PURGE 0UDVC1 ,0UDVC2,XYPLTFA,0PPC1 ,0QPC1 ,0UPVC1 .0ESC1 .0EFC1 .0PPC2, 

0QPC2,0UPVC2,0ESC2,0EFC2,XYPLTF,PSDF,AUT0,XYPLTR, 
K2PP,M2PP,B2PP,K2DD,M2DD,B2DD/NEVER $ 

99 CASE CASECC,PSDL/CASEXX/*FREQ*/S,N,REPEATF/S,N,NOLOOP $ 

100 MTRXIN CASEXX,MATP00L,EQDYN,,TFP00L/K2DPP,M2DPP,B2PP/LUSETD/S,N, 

N0K2DPP/S,N,N0M2DPP/S,N,N0B2PP $ 

101 PARAM //*AND*/N0M2PP/N0ABFL/N0M2DPP $ 

102 PARAM //*ANDVN0K2PP/N0FL /N0K2DPP $ 

103 EQUIV K2DPP.K2PP/N0FL/M2DPP.M2PP/N0ABFL $ 
10A COND LBLFL2.N0FL $ 

105 ADDS ABFL,KBFL,K2DPP,,/K2PP/(-l. 0,0.0) $ 

106 COND LBLFL2,N0ABFL $ 

107 TRNSP ABFL/ABFLT $ 

108 ADD ABFLT.M2DPP/M2PP/MFACT $ 

109 LABEL LBLFL2 $ 

110 PARAM //AANDVBDEBA/NOUE/N0B2PP $ 

111 PARAM //*AND*/KDEK2/N0GENL/N0SIMP $ 

112 PARAM //*AND*/M0EMA/N0UE/NOM2PP $ 

113 PURGE K2DD/N0K2PP/M2DD/N0M2PP/B2DD/N0B2PP $ 

]}k EQUIV M2PP,M2DD/N0A/B2PP,B2DD/N0A/K2PP,K2DD/N0A/ 
MAA,MDD/MDEMA/BAA,BDD/BDEBA $ 

115 COND LBLl8,N0GPDT $ 

116 GKAD USETD,GM,G0,KAA,BAA,MAA,K4AA,K2PP,M2PP,B2PP/KDD,BDD,MDD,GMD, 

G0D,K2DD,M2DD,B2DD/*FREQRESP*/*DISP*/*DIRECT>VC,Y,G=0.0/ 
0.0/0. 0/N0K2PP/N0M2PP/N0B2PP/ 
MPCF1/SINGLE/0M1T/N0UE/N0KAGG/N0BGG/ 
KDEK2/-1 $ 



2.8-5 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMA? LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT B 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

117 LABEL LBL18 $ 

118 EQU1V B2DD.BDD/N0BGG/ M2DD.MDD/N0S IMP/ K2DD.KDD/KDEK2 $ 

119 COND ERR0R1, NOFRL $ 

120 COND ERR0R2.N0DLT $ 

121 FRRD CASEXX,USETD,DLT,FRL,GMD,GOD,KDD,BDD,MDD,,DIT/UDVF,PSF,PDF,PPF/ 

*D I SP*/*D I RECT&/LUSETD/MPCF1/S INGLE/OMIT/ 
NONCUP/FRQSET $ 

122 EQUIV PPF.PDF/NOSET $ 

123 VDR CASEXX,EQDYN,USETD,UDVF,PPF,XYCDB,/0UDVC1,/*FREQRESPA/ 

AD I RECTVS . N . N0S0RT2/S , N , NOD/S , N , NOP/O $ 

12A COND LBL15.N0D $ 

125 COND LBL15A.N0S0RT2 $ 

126 SDR3 0UDVC1,,,,,/0UDVC2,,,,, $ 

127 OFP OUDVC2,,,,,//S,N,CARDN0 $ 

1 28 XYTRAN XYCDB , 0UDVC2 , , , , /XYPLTF A/*FREQ*/*DSET*/S , N , PF I LE/ 

S,N t CARDN0 $ 

129 XYPLOT XYPLTF A// $ 

130 JUMP LBL15 $ 

131 LABEL LBL15A $ 

132 OFP 0UDVC1,,,,,//S,N,CARDN0 $ 

133 LABEL LBL15 $ 

13^ COND LBL20,N0P $ 

135 EQUIV UDVF.UPVC/NOA $ 

136 COND LBL19.N0A $ 

137 SDR1 USETD,,UDVF,,, GOD, GMD,PSF,KFS,,/UPVC,,QPC/1 /ADYNAMICS* $ 

138 LABEL LBL19 $ 

139 SDR2 CASEXX,CSTM,MPT,DIT,EQDYN,SILD,,,BGPDP,PPF,QPC,UPVC,EST,XYCDB, 

PPF/0PPC1 .0QPC1 ,0UPVC1 .0ESC1 ,0EFC1 ,PUPVC1/*FREQRESP*/ 
S,N,N0SORT2 $ 



2.8-6 (05/30/86) 



DIRECT FREQUENCY AND RANDOM RESPONSE 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 8 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



140 COND LBL17.NOSORT2 $ 

141 SDR3 0PPC1 .0QPC1 ,0UPVC1 ,0ESC1 .0EFC1 ,/0PPC2,0QPC2,0UPVC2,0ESC2, 

0EFC2, $ 

142 OFP OPPC2,0QPC2,OUPVC2,0EFC2,OESC2,//S,N,CARDNO $ 

143 XYTRAN XYCDB,0PPC2,0QPC2.0UPVC2,OESC2,0EFC2/XYPLTF/*FREQ*/*PSET*/ 

$,N,PFILE/S,N,CARDNO $ 

144 XYPLOT XYPLTF// $ 

lif5 COND LBL16.N0PSDL $ 

146 RANDOM XYCDB,DIT,PSDL,0UPVC2,OPPC2,OQPC2,0ESC2,OEFC2,CASEXX/PSDF,AUT0/ 

S.N.NORD $ 

147 COND LBL16.N0RD $ 

1 48 XYTRAN XYCDB , PSDF , AUTO , , , /XYPLTR/*RAND*/*PSET*/S >N , PF I LE/ 

S,N,CARDNO $ 

149 XYPLOT XYPLTR// $ 

150 JUMP LBL16 $ 

151 LABEL LBL17 $ 

152 PURGE PSDF/N0SORT2 $ 

153 OFP 0UPVC1,0PPC1,0QPC1,0EFC1,0ESC1,//S,N,CARDN0 $ 

154 LABEL LBL16 $ 

155 PURGE PSDF/NOPSDL $ 

156 COND LBL2O.JUMPPL0T $ 

157 PLOT PLTPAR,GPSETS,ELSETS,CASEXX,BGPDT,EQEXIN,SIP,,PUPVC1, 

GPECT.0ESC1/PL0TX2/NSIL/LUSEP/JUMPPL0T/PLTFLG/ 
S,N,PF I LE $ 

158 PRTMSG PL0TX2// $ 

159 LABEL LBL20 $ 

160 COND FINIS, REPEATF $ 

161 REPT LBL13J00 $ 

162 PRTPARM //-3/*DIRFRRD* $ 



2.8-7 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 8 

LEVEL 2.0 NASTRAN DMA? COMPILER - SOURCE LISTING 

163 JUMP FINIS $ 

164 LABEL ERR0R2 $ 

165 PRTPARM //-2/ADIRFRRD* $ 

166 LABEL ERROR 1 $ 

167 PRTPARM //-1/*DIRFRRD* $ 

168 LABEL ERRORS $ 

169 PRTPARM //-*t/*DIRFRRD* $ 

170 LABEL FINIS $ 

171 PURGE DUMMY/ALWAYS $ 

172 END $ 



2.8-8 (05/30/86) 



DIRECT FREQUENCY AND RANDOM RESPONSE 

2.8.2 Description of Important DMAP Operations for Direct Frequency and Random Response 

5. GP1 generates coordinate system transformation matrices, tables of grid point locations,, and 
tables relating the internal and external grid point numbers. 

6. PLTTRAN modifies special scalar grid points in the BGPDT and SIL tables. 

8. Go to DMAP No. 87 if there is only Direct Matrix Input. 

9. GP2 generates Element Connection Table with internal indices. 

12. Go to DMAP No. 20 if there are no structure plot requests. 

13. PLTSET transforms user input into a form used to drive the structure plotter. 

14. PRTMSG prints error messages associated with the structure plotter. 

17. Go to DMAP No. 20 if no undeformed structure plots are requested. 

18. PL0T generates all requested undeformed structure plots. 

19. PRTMSG prints plotter data and engineering data for each undeformed plot generated. 

21. GP3 generates Grid Point Temperature Table. 

22. TA1 generates element tables for use in matrix assembly and stress recovery. 

24. Go to DMAP No. 49 if there are no structural elements. 

29. EMG generates structural element stiffness, mass and damping matrix tables and dictionaries 
for later assembly by the EMA module. 

31. Go to DMAP No. 33 if no stiffness matrix is to be assembled. 

32. EMA assembles stiffness matrix [K* ] and Grid Point Singularity Table. 

34. Go to DMAP No. 36 if no mass matrix is to be assembled. 

35. EMA assembles mass matrix [M ]• 

37. Go to DMAP No. 39 if no viscous damping matrix is to be assembled. 

38. EMA assembles viscous damping matrix [B ]. 

40. Go to DMAP No. 42 if no structural damping matrix is to be assembled. 

41. EMA assembles structural damping matrix [K ]. 

45. Go to DMAP No. 49 if no weight and balance information is requested. 

46. Go to DMAP No. 168 and print Error Message No. 4 if no mass matrix exists. 

47. GPWG generates weight and balance information. 

48. 0FP formats the weight and balance information prepared by GPWG and places it on the system 
output file for printing. 

50. Equivalence [K x 1 to [K ] if there are no general elements. 

gg gg 

51. Go to DMAP No. 53 if there are no general elements. 

52. SMA3 adds general elements to [K* ] t0 obtain stiffness matrix [K ]• 



2.8-9 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



55. GP4 generates flags defining members of various displacement sets (USET) and forms 
multipoint constraint equations [R ] {u } = 0. 

57. Go to DMAP No. 63 if general elements are present. 

58. Go to DMAP No. 63 if there are no structural elements. 

60. Go to DMAP No. 63 if no potential grid point singularities exist. 

61. GPSP generates a table of potential grid point singularities. 

62. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 

64. Equivalence [K ] to [K^], [M ] to [M nn J, [B ] to [Bj and [kJ q ] to 



[K 1 if no multipoint constraints exist. 
L nn J r 



65. Go to DMAP No. 68 if no multipoint constraints exist. 

66. MCE1 partitions multipoint constraint equations [R ] = [R m j R p ] and solves for 
multipoint constraint transformation matrix [G m ] = -[ R m ] [ R n L 

67. MCE2 partitions stiffness, mass and damping matrices 



[ V ¦ 



[ V ¦ 



K IK 

nn | nm 

K | K 

mn ' mm 



B 1 B 
nn • nm 

- + - 

B 1 B 
mn mm 



and 





M j M 


L" M <J = 


nn nm 


gg 


¦M 1 M 




mn ' mm 




— 




¦? ,K 4 


^ ¦ 


nn l nm 

— H- — 




K 4 1 K 4 




mn mm 



and performs matrix reductions 

[K„J - [K nn ] + [G^CK ] + [KL][G m ] * [G^t^lCG J . 



nn- 



nn- 



m-"- mn- 



[M nn ] - [M nn ] ? [ G T] [Mmn ] + [M^GJ + [G^[M m J[G m ] , 
[B n „] - [B nn ] + [G^][B m ] ? [B^tGj ? [G^BJCGJ , 
[id.] ¦ [k!„J + CgI][IC* ] ? [K* ] T BL] ? [Gl][K! m ][Gj . 



m JU mn- 



mn- 1 "- nr 



69. Equivalence [K^] to [K ff ], [M nR ] to [M ff ], [B nn ] to [B ff ] and [K^] to 
[Kf f ] if no single-point constraints exist. 

70. Go to DMAP No. 72 if no single-point constraints exist. 



2.8-10 (05/30/86) 



DIRECT FREQUENCY AND RANDOM RESPONSE 



71. SCE1 partitions out single-point constraints 



CKJ ' 


. K sf > K ss. 


9 


[M ] = 
L nn J 


" M ffj_ M fs." 
. M sf ' M ss. 


t B nn] - 


B ff 1 B f s 

— + — 

B - 1 B 
sf ss 


and 


[K 4 ] = 
L nn J 


4 4 
K f f 1 K f s 
— -h — 
K 4 1 K 4 

K sf K ss 



73. Equivalence [K„] to [K 1 if no omitted coordinates exist. 

tt aa 

74. Equivalence [NL-] to [Ml if no omitted coordinates exist. 

tt aa 

75. Equivalence [B ff ] to [B ] if no omitted coordinates exist. 

76. Equivalence [Kf f ] to [K ] if no omitted coordinates exist. 

77. Go to DMAP No. 87 if no omitted coordinates exist. 

78. SMP1 partitions constrained stiffness matrix 



[K ff ] - 



K | K 
aa ao 

K 1 K 
oa oo 



solves for transformation matrix [G 1 = -[K ] [K ] 
and performs matrix reduction [K ] = [K ga ] + [K ao ][G Q ] . 



79. Go to DMAP No. 81 if no mass matrix exists. 

80. SMP2 partitions constrained mass matrix 



[M ff ] = 



M I M 
aa ao 

M I M 
oa oo 



and performs matrix reduction 

[Ml - [M„] + [H 10 ][G ] * [M d0 G ] T * [Gj][M 00 ][G ] 



82. Go to DMAP No. 84 if no viscous damping matrix exists. 

83. SMP2 partitions constrained viscous damping matrix 



[B ff ] = 



B I B 
aa ao 

B i B „ 
oa oo 



2.8-11 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



85. 
86. 



and performs matrix reduction 

[B ] = [B ] + [B ][G ] + [B a G ] T + [g]"][B l[Gj 
L aa aa ao o ao o o oo o 

Go to DMAP No. 87 if no structural damping matrix exists. 
SMP2 partitions constrained structural damping matrix 



[Kj t ] - 



aa ao 

K 4 'k 4 
oa oo 



and performs matrix reduction 



88. 



DPD generates flags defining members of various displacement sets used in dynamic analysis 
(USETD), tables relating the internal and external grid point numbers, including extra 
points introduced for dynamic analysis, and prepares Transfer Function Pool, Dynamics Load 
Table, Power Spectral Density List and Frequency Response List. 



89. Equivalence [G ] to [Gj|] and [G ] to [Gjjj if there are no extra points introduced 



92. 

95. 
96. 

97. 
99. 

100. 
103. 



o J - o 
for dynamic analysis. 

BMG generates DMIG card images describing the interconnection of the fluid and the 
structure. 

Go to DMAP No. 97 if no fluid-structure interface is defined. 

MTRXIN generates fluid boundary matrices [A b f£ ] and [K b fA L The matrix [K b>fA ] is 

generated only for a nonzero gravity in the fluid. 

Beginning of loop for additional sets of direct input matrices. 

CASE extracts the appropriate record from CASECC corresponding to the current loop and 
copies it into CASEXX. 

MTRXIN selects the direct input matrices [K 2 p ], [M 2 p ] and [B 2 p ] for the current loop. 

Equivalence [K 2 ] to [K 2d ] if no fluid-structure interface is defined and equivalence 

rr rr 

.2d 



L<J t0 L"0 if there is no L"A b , f£ ]. 



104. 
105. 
106. 

107. 

108. 



Go to DMAP No. 109 if no fluid-structure interface is defined. 

?t\ 2 

ADD5 adds [K b f£ ] and [K pp ] and subtracts l\ tf9 } from them to form [K pp ], 

Go to DMAP No. 109 if there is no [A b f£ ]. 

Transpose [A b f& ] to obtain [A b f£ ] . 

ADD assembles input matrix [M 2 p ] = MFACT [A b>fJl ] + [M 2 ^]. 



2.8-12 (05/30/86) 



DIRECT FREQUENCY AND RANDOM RESPONSE 

114. Equivalence [M* ] to [M^], [Bj; ] to [B^] and [Kj; p ] to [K{j d 3 if no constraints 

* 
are applied, [M ] to [M,,] if there are no direct input mass matrices and no extra 
aa go 

points, and [B ] to [B . .] if there are no direct input damping matrices and no extra 
aa uu 

points. 

115. Go to DMAP No. 117 if only extra points are defined. 

116. GKAD assembles stiffness, mass and damping matrices for use in Direct Frequency Response: 

[K dd ] - (1 ? ig)[K dd ] ? [&] ? ipt*,] , 

[M dd ] ¦ [Mj d ] * » 2 M i and 

[B dd ] - [B dd ] ? [B dd ] . 
Direct input matrices may be complex. 

118. Equivalence [Kjj d ] to [K rfd ] if all stiffness is Direct Matrix Input, [M dd ] to [M d(J ] 

^ t0 ^ B dd 



if all mass is Direct Matrix Input and [bJL] to [B. .] is all damping is Direct Matrix 



Input. 

119. Go to DMAP No. 166 and print Error Message No. 1 if there is no Frequency Response List. 

120. Go to DMAP No. 164 and print Error Message No. 2 if there is no Dynamics Load Table. 

121. FRRD forms the dynamic load vectors {P d } and solves for the displacements using the 
following equation 

E- M dd" 2+ iB dd" + W {u d } = {P d } • 

122. Equivalence {P } to {P d } if no constraints are applied. 

123. VDR prepares solution set displacements, sorted by frequency, for output. 

124. Go to DMAP No. 133 if there is no output request for the solution set. 

125. Go to DMAP No. 131 if there is no output request for solution set displacements sorted by 
point number. 

126. SDR3 sorts the solution set displacements by point number. 

127. 0FP formats the requested solution set displacements, sorted by point number, prepared by 
SDR3 and places them on the system output file for printing. 

128. XYTRAN prepares the input for requested X-Y plots of the solution set displacements vs. 
frequency. 

129. XYPL0T prepares the requested X-Y plots of the solution set displacements vs. frequency. 

130. Go to DMAP No. 133. 



2.8-13 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

132. 0FP formats the requested solution set displacements, sorted by frequency, prepared by VDR 
and places them on the system output file for printing. 

134. Go to DMAP No. 159 if there is no output request involving dependent degrees of freedom or" 
forces and stresses. 

135. Equivalence {u,} to {u } if no constraints are applied. 

136. Go to DMAP No. 138 if no constraints are applied. 

137. SDR1 recovers dependent components of displacements 

{u > - [GjJ]^} , 




u _l + _ u _et _ ,. , .. , ... , . re d- 

u s 



- {u n + u e } , ; {u m } = [G> f + u e } 



| u n + u e, 



u m 



V 



an 



d recovers single-point forces of constraint {q s > = -{P s > + [K fs ] {u f } . 



139. SDR2 calculates element forces (0EFC1) and stresses (0ESC1) and prepares load vectors 
(0PPC1), displacement vectors (0UPVC1) and single-point forces of constraint (0QPC1) for 
output and translation components of the displacement vector (PUGVCl), sorted by frequency. 

140. Go to DMAP No. 151 if there are no output requests sorted by point number or element number. 

141. SDR3 prepares requested output sorted by point number or element number. 

142. 0FP formats the tables prepared by SDR3 sorted by point number or element number, and places 
them on the system output file for printing. 

143. XYTRAN prepares the input for requested X-Y plots. 

144. XYPL0T prepares the requested X-Y plots of displacements, forces, stresses, loads and 
single-point forces of constraint vs. frequency. 

145. Go to DMAP No. 154 if there is no Power Spectral Density List. 

146. RAND0M calculates power spectral density functions (PSDF) and autocorrelation functions 
(AUT0) using the previously calculated frequency response. 

147. Go to DMAP No. 154 if no RAND0M calculations are requested. 

148. XYTRAN prepares the input for requested X-Y plots of the RAND0M output. 

149. XYPL0T prepares the requested X-Y plots of autocorrelation functions and power spectral 
density functions. 

150. Go to DMAP No. 154. 

153. 0FP formats the frequency response output requests prepared by SDR2, sorted by frequency, 
and places them on the system output file for printing. 

156. Go to DMAP No. 159 if no deformed structure plots are requested. 



2.8-14 (05/30/86) 



DIRECT FREQUENCY AND RANDOM RESPONSE 

157. PL0T prepares all requested deformed structure and contour plots. 

158. PRTMSG prints plotter data, engineering data and contour data for each deformed plot, 
generated. 

160. Go to DMAP No. 170 if no additional sets of direct input matrices need to be processed. 

161. Go to DMAP No. 97 if additional sets of direct input matrices need to be processed. 

162. Print Error Message No. 3 and terminate execution. 

163. Go to DMAP No. 170 and make normal exit. 

165. Print Error Message No. 2 and terminate execution. 
167. Print Error Message No. 1 and terminate execution. 
169. Print Error Message No. 4 and terminate execution. 



2.8-15 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.8.3 Output for Direct Frequency and Random Response 

The following printed output, sorted by frequency (S0RT1) or by point number or element t 
number (S0RT2), is available, either as real and imaginary parts or magnitude and phase angle (0° - 
360° lead), for the list of frequencies specified by 0FREQUENCY: 

1. Displacements, velocities and accelerations for a list of PHYSICAL points (grid points 
and extra scalar points introduced for dynamic analysis) or S0LUTI0N points (points used 
in the formulation of the dynamic equation). 

2. Nonzero components of the applied load vector and single-point forces of constraint for 
a list of PHYSICAL points. 

3. Stresses and forces in selected elements (ALL available only for S0RT1). 
The following plotter output is available for Frequency Response calculations: 

1. Undeformed plot of the structural model. 

2. Deformed shapes of the structural model for selected frequencies. 

3. Contour plots of stresses and displacements for .selected frequencies. 

4. X-Y plot of any component of displacement, velocity or acceleration of a PHYSICAL point 
or S0LUTI0N point. 

5. X-Y plot of any component of the applied load vector or single-point force of 
constraint. 

6. X-Y plot of any stress or force component for an element. 

The following plotter output is available for Random Response calculations: 

1. X-Y plot of the power spectral density versus frequency for the response of selected 
components for points or elements. 

2. X-Y plot of the autocorrelation versus time lag for the response of selected components 
for points or elements. 

The data used for preparing the X-Y plots may be punched or printed in tabular form (see Section 
4.3). This is the only form of printed output that is available for Random Response. Also, a 
printed summary is prepared for each X-Y plot which includes the maximum and minimum values of the 
plotted function. 

2.8.4 Case Control Deck for Direct Frequency and Random Response 

The following items relate to subcase definition and data selection for Direct Frequency and 
Random Response: 

2.8-16 (05/30/86) 



DIRECT FREQUENCY AND RANDOM RESPONSE 

1. At least one subcase must be defined for each unique set of direct input matrices (K2PP, 
M2PP, B2PP) or frequencies. , 

2. Consecutive subcases for each set of direct input matrices or frequencies are used to 
define the loading conditions - one subcase for each dynamic loading condition. 

3. Constraints must be defined above the subcase level. 

4. DL0AD must be used to define a frequency-dependent loading condition for each subcase. 

5. FREQUENCY must be used to select one, and only one, FREQ, FREQ1, or FREQ2 card from the 
Bulk Data Deck for each unique set of direct input matrices. 

6. On restart following an unscheduled exit due to insufficient time, the subcase structure 
must be changed to reflect the sets of direct input matrices that were completed, and 
FREQUENCY must be changed to select a FREQ, FREQ1, or FREQ2 card that reflects any 
frequencies for which the response has already been determined. Otherwise, the previous 
calculations will be repeated. 

7. ^FREQUENCY may be used above the subcase level or within each subcase to select a subset 
of the solution frequencies for output requests. The default is to use all solution 
frequencies. 

8. If Random Response calculations are desired, RAND0M must be used to select RANDPS and 
RANDTi cards from the Bulk Data Deck. Only one ^FREQUENCY and FREQUENCY card can be 
used for each set of direct input matrices. 

2.8.5 Parameters for Direct Frequency and Random Response 

The following parameters are used in Direct Frequency and Random Response: 

1. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2. AUT0SPC - reserved for future optional use. The default value is -1. 

3. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTRIA2, CPTUBE, CPQDPLT, CPTRPLT, 
CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

4. G - optional. The real value of this parameter is used as a uniform structural damping 
coefficient in the direct formulation of dynamics problems (see Section 9.3.3 of the 
Theoretical Manual). Not recommended for use in hydroelastic problems. 

2.8-17 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

5. GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. All fluid related masses are ignored. " 

6. SURFACE - optional. The computations of the external surface areas for the 
two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

7. V0LUME - optional. The volume computations for the two-dimensional and 
three-dimensional elements are activated by this parameter when they are generated in 
the EMG module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details. 

8. WTMASS - optional. The terms of the structural mass matrix are multiplied by the real 
value of this parameter when they are generated in the EMA module. Not recommended for 
use in hydroelastic problems. 

2.8.6 Automatic ALTERs for Automated Multi-stage Substructuring 

The following lines of the Direct Frequency and Random Response, Rigid Format 8, are ALTERed 
in automated substructure analyses. 



Phase 1 
Phase 2 
Phase 3 



4, 56, 88-120, 121-162 

4, 5-5, 10-20, 23-24, 43-53, 111-112, 118-118, 135-158 

87, 90-136, 138, 160-162 
If APP DISP, SUBS is used, the user may also specify ALTERs. However, these must not 
interfere with the automatically generated DMAP statement ALTERs listed above. See Volume I, 
Section 5.9 for a description and listing of the ALTERs which are automatically generated for 
substructuring. 

2.8.7 Rigid Format Error Messages from Direct Frequency and Random Response 

The following fatal errors are detected by the DMAP statements in the Direct Frequency and 
Random Reponse rigid format. The text for each error message is given below in capital letters and 
is followed by additional explanatory material, including suggestions for remedial action. 

DIRECT FREQUENCY AND RAND0M RESPONSE ERR0R MESSAGE N0. 1 - FREQUENCY RESPONSE LIST REQUIRED F0R 
FREQUENCY RESP0NSE CALCULATIONS. 

Frequencies to be used in the solution of frequency response problems must be supplied on a FREQ, 

2.8-18 (05/30/86) 



DIRECT FREQUENCY AND RANDOM RESPONSE 

FREQ1, or FREQ2 card in the Bulk Data Deck and FREQ in the Case Control Deck must select a 
frequency response set. 

DIRECT FREQUENCY AND RAND0M RESP0NSE ERR0R MESSAGE N0. 2 - DYNAMIC L0ADS TABLE REQUIRED F0R 
FREQUENCY RESP0NSE CALCULATI0NS. 

Dynamic loads to be used in the solution of frequency response problems must be specified on an 
RL0AD1 or RL0AD2 card in the Bulk Data Deck and DL0AD in the Case Control Deck must select a 
dynamic load set. 

DIRECT FREQUENCY AND RAND0M RESP0NSE ERR0R MESSAGE N0. 3 - ATTEMPT T0 EXECUTE M0RE THAN 100 L00PS. 

An attempt has been made to use more than 100 sets of direct input matrices. This number may be 
increased by ALTERing the REPT instruction following the last 0FP instruction. 

DIRECT FREQUENCY AND RAND0M RESP0NSE ERR0R MESSAGE N0. 4 - MASS MATRIX REQUIRED F0R WEIGHT AND 
BALANCE CALCULATI0NS. 

The mass matrix is null because either no elements were defined on Connection cards, nonstructural 
mass was not defined on a Property card, or the density was not defined on a Material card. 



2.8-19 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



2.8-20 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.9 DIRECT TRANSIENT RESPONSE 

2.9.1 DMAP Sequence for Direct Transient Response 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



OPTIONS IN EFFECT GO 



ERR=2 LIST 



NODECK NOREF NOOSCAR 



1 BEGIN D ISP 09 - DIRECT TRANSIENT RESPONSE ANALYSIS - APR. 1986 $ 

2 PRECHK ALL $ 

3 FILE UDVT=APPEND/TOL«APPEND $ 
1* PARAM //*MPY*/CARDN0/O/O $ 

5 GP1 GE0M1,GE0M2,/GPL,EQEXIN,GPDT,CSTM,BGPDT,SIL/S,N,LUSET/ 

S,N,N0GPDT/ALWAYS=-1 $ 

6 PLTTRAN BGPDT,SIL/BGPDP,SIP/LUSET/S,N,LUSEP $ 

7 PURGE USET,GM,GO,KAA,BAA,MAA,KltAA,PST,KFS,QP,EST,ECT,PLTSETX,PLTPAR, 

GPSETS, ELSETS/NOGPDT $ 

8 COND LBL5.N0GPDT $ 

9 GP2 GE0M2.EQEXIN/ECT $ 

10 PARAML PCDB/7*PRESft////JUMPPL0T $ 

11 PURGE PLTSETX, PLTPAR, GPSETS, ELSETS/JUMPPLOT $ 

12 COND Pl.JUMPPLOT $ 

1 3 PLTSET PCDB , EQEX I N , ECT/PLTSETX, PLTPAR, GPSETS , ELSETS/S , N,NS 1 L/ 

S.N.JUMPPLOT $ 

lit PRTMSG PLTSETX// $ 

15 PARAM //*MPY*/PLTFLG/1/1 $ 

16 PARAM //*MPY*/PFILE/0/0 $ 

17 COND Pl.JUMPPLOT $ 

18 PLOT PLTPAR, GPSETS, ELSETS ,CASECC,BGPDT,EQEXI N,S I L, ,ECT, ,/PLOTXl/ 

NSIL/LUSET/S,N,JUMPPLOT/S,N,PLTFLG/S,N,PFILE $ 

19 PRTMSG PLOTX 1 .// $ 

20 LABEL PI $ 

21 GP3 GE0M3.EQEXIN.GE0M2/SLT.GPTT/N0GRAV $ 

2.9-1 (05/30/86) 



DISPLACEMENT RIGID FORMATb 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

22 TA1 ECT,EPT,BGPDT,SIL,GPTT,CSTM/EST,GEI,GPECT,,/ 

LUSET/S,N,NOSIMP=-1/1/S,N,NOGENL=-1/S,N,GENEL $ 

23 PURGE K4GG,GPST,0GPST,MGG,BGG, 

K4NN , K4F F , K4AA , MNN , MF F , MAA , BNN , BF F , BAA , KGGX/NOS I MP/ 
OGPST/GENEL $ 

24 COND LBL1.N0SIMP $ 

25 PARAM //*ADDft/N0KGGX/1/0 $ 

26 PARAM //*ADD*/NOMGG/1/0 $ 

27 PARAM //*ADD*/NOBGG— 1/1/0 $ 

28 PARAM //*ADD*/MOKi»GG/l/0 $ 

29 EMG EST,CSTM,MPT,DIT,GE0M2,/KELM,KDICT,MELM,MDICT,BELM,BDICT,/ 

S , N , NOKGGX/S , N , NOMGG/S , N , NOBGG/S , N , N0K4GG//C , Y , COUPMASS/ 
C,Y,CPBAR/C,Y,CPR0D/C,Y,CPQUAD1/C,Y,CPQUAD2/C,Y,CPTRIA1/ 
C , Y , CPTR I A2/C , Y , CPTUBE/C , Y , CPQDPLT/C , Y , CPTRPLT/C , Y , CPTRBSC/ 
V,Y,V0LUME/V,Y, SURFACE $ 

30 PURGE KGGX,GPST/NOKGGX/MGG/NOMGG $ 

31 COND LBLKGGX.NOKGGX $ 

32 EMA GPECT,KDiCT,KELM/KGGX,GPST $ 

33 LABEL LBLKGGX $ 

34 COND LBLMGG.NOMGG $ 

35 EMA GPECT,MDICT,MELM/MGG,/-1/C,Y,WTMASS=1.0 $ 

36 LABEL LBLMGG $ 

37 COND LBLBGG.NOBGG $ 

38 EMA GPECT,BDICT,BELM/BGG, $ 

39 LABEL LBLBGG $ 

40 COND LBLK4GG.N0K4GG $ 

41 EMA GPECT,KDICT t KELM/K4GG,/N0K4GG $ 

42 LABEL LBLK4GG $ 

43 PURGE MNN,MFF,MAA/NOMGG $ 

44 PURGE BNN.BFF.BAA/NOBGG $ 



2.9-2 (05/30/86) 



DIRECT TRANSIENT RESPONSE 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

45 COND LBL1.GRDPNT $ 

46 COND ERROR3.N0MGG $ 

kl GPWG BGPDP,CSTM,EQEXIN,MGG/0GPWG/V,Y,GRDPNT=-1/C,Y,WTMASS $ 

1*8 OFP OGPWG,,,,,//S,N,CARDNO $ 

kS LABEL LBL1 $ 

50 EQUIV KGGX.KGG/NOGENL $ 

51 COND LBL11.N0GENL $ 

52 SMA3 GEUKGGX/KGG/LUSET/NOGENL/NOSIMP $ 

53 LABEL LBL11 $ 

54 PARAM //ftMPYft/NSKIP/O/0 $ 

55 GP4 CASECC,GEOMlt,EQEXIN,GPDT,BGPDT,CSTM,GPST/RG,,USET,ASET/ 

LUSET/S,N,MPCF1/S,N,MPCF2/S,N,SINGLE/S,N,0M!T/S,N,REACT/ 
S,N,NSKIP/S,N,REPEAT/S,N,NOSET/S,N,NOL/S,N,NOA/C,Y,ASETOUT/ 
S,Y,AUTOSPC $ 

56 PURGE GM,GMD/MPCF1/G0,G0D/0MIT/KFS,PST,QP/SINGLE $ 

57 COND LBL4.GENEL $ 

58 COND LBL4.N0SIMP $ 

59 PARAM //*EQ*/GPSPFLG/AUTOSPC/0 $ 

60 COND LBL4.GPSPFLG $ 

61 GPSP GPL,GPST,USET,SIL/OGPST/S,N,NOGPST $ 

62 OFP OGPST, >>f ,//S f N,CARDNO $ 

63 LABEL LBL4 $ 

64 EQUIV KGG,KNN/MPCF1/MGG,MNN/MPCF1/ BGG, BNN/MPCF l/MiGG.MNN/MPCF 1 $ 

65 COND LBL2.MPCF1 $ 

66 MCE1 USET,RG/GM $ 

67 MCE2 USET,GM,KGG,MGG,BGG,K4GG/KNN,MNN,BNN,K4NN $ 

68 LABEL LBL2 $ 

69 EQUIV KNN,KFF/SINGLE/MNN,MFF/SINGLE/BNN,BFF/SINGLE/K4NN,K4FF/SINGLE $ 



2.9-3 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



70 COND 

71 SCE1 

72 LABEL 

73 EQUIV 
Ik EQUIV 

75 EQUIV 

76 EQUIV 

77 COND 

78 SMP1 

79 COND 

80 SMP2 

81 LABEL 

82 COND 

83 SMP2 

84 LABEL 

85 COND 

86 SMP2 

87 LABEL 

88 DPD 

89 COND 

90 PURGE 

91 EQUIV 

92 BMG 

93 PARAM 

94 PURGE 



LBL3, SINGLE $ 

USET,KNN,MNN,BNN,KltNN/KFF,KFS, ,MFF,BFF,K4FF $ 

LBL3 $ 

KFF.KAA/OMIT $ 

MFF, MA A/OMIT $ 

BFF, BAA/OMIT $ 

Kl»FF,K4AA/0MIT $ 

LBL5.0MIT $ 

USET,KFF,,,/G0,KAA,KO0,L00,,,,, $ 

LBLM.NOMGG $ 

USET.GO.MFF/MAA $ 

LBLM $ 

LBLB.NOBGG $ 

USET,GO,BFF/BAA $ 

LBLB $ 

LBL5,N0K^GG $ 

USET,G0,KifFF/K4AA $ 

LBL5 $ 

DYNAMICS,GPL,SIL,USET/GPLD,SILD,USETD,TFPOOL,DLT,,,NLFT,TRL,, 
EQDYN/LUSET/S , N , LUSETD/NOTF L/S , N , NODLT/NOPSDL/ 
NOF RL/S , N , NONLFT/S , N , NOTRL/NOE ED//S , N , NOUE $ 

ERR0R1.NOTRL $ 

PNLD/NONLFT$ 

GO.GOD/NOUE/GM.GMD/NOUE $ 

MATPOOL,BGPDT,EQEXIN,CSTM/BDPOOL/S,N,NOKBFL/S,N,NOABFL/ 
S.N.MFACT $ 

//*AND*/NOFL/NOABFL/NOKBFL $ 

KBFL/NOKBFL/ ABFL/NOABFL $ 



2.9-4 (05/30/86) 



DIRECT TRANSIENT RESPONSE 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

95 COND LBLFL3.N0FL $ 

96 MTRXIN, ,BDP0OL,EQDYN,,/ABFL,KBFL,/LUSETD/S,N,N0ABFL/S,N,N0KBFL/ 

$ 

97 LABEL LBLFL3 $ 

98 MTRXIN CASECC,MATPOOL,EQDYN, ,TFP00L/K2DPP,M2DPP,B2PP/LUSETD/S,N, 

N0K2DPP/S,N,NOM2DPP/S,N,NOB2PP $ 

99 PARAM //*AN0*/N0M2PP/NOABFL/NOM2DPP $ 

100 PARAM //*AND*/N0K2PP/N0FL /N0K2DPP $ 

101 EQUIV K2DPP.K2PP/N0FL/M2DPP.M2PP/N0ABFL $ 

102 COND LBLFL2.N0FL $ 

103 ADD5 ABFL,KBFL,K2DPP,,/K2PP/(-1.0,0.0) $ 

104 COND LBLFL2.N0ABFL $ 

105 TRNSP ABFL/ABFLT $ 

106 ADD ABFLT.M2DPP/M2PP/MFACT $ 

107 LABEL LBLFL2 $ 

108 PARAM //*ANDVKDEKA/N0UE/N0K2PP $ 

109 PARAM //*AND*/MDEMA/N0UE/N0M2PP $ 

110 PARAM //*AND*/KDEK2/N0GENL/N0SIMP $ 

111 PURGE K2DD/N0K2PP/M2DD/NOM2PP/B2DD/NOB2PP $ 

112 EQUIV H2PP,M2DD/N0A/B2PP,B2DD/N0A/K2PP,K2DD/N0A/MAA,MDD/MDEMA/ 

KAA.KDD/KDEKA $ 

113 COND LBLl6,N0GPDT $ 

114 GKAD USETD,GM,G0,KAA,BAA,MAA,K4AA,K2PP,M2PP,B2PP/KDD,BDD,MDD,GMD, 

GOD , K2DD , M2DD , B2DD/*TRANRESP*/*D I SP*/*D I RECTVC , Y , G=0 . 0/ 
C,Y,W3=0.O/C,Y,W4=0.O/N0K2PP/N0M2PP/N0B2PP/ 
MPCF1/SINGLE/0MIT/N0UE/N0K4GG/N0BGG/ 
KDEK2/-1 $ 

115 LABEL LBL16 $ 

116 EQUIV M2DD,MDD/N0SIMP/B2DD,BDD/N0GPDT/K2DD,KDD/KDEK2 $ 

117 PARAM //*ADD*/NEVER/l/0 $ 



2.9-5 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



118 


PARAM 


119 


LABEL 


120 


PURGE 


121 


CASE 


122 


PARAM 


123 


TRLG 


121* 


EQUIV 


125 


TRD 


126 


VDR 


127 


COND 


128 


SDR3 


129 


OFP 


130 


XYTRAN 


131 


XYPLOT 


132 


LABEL 


133 


PARAM 


13* 


COND 


135 


EQUIV 


136 


COND 


137 


SDR1 


138 


LABEL 


139 


SDR2 



HO SDR3 



//*MPY*/REPEATT/1/-1 $ 

LBL13 $ 

PNLD.0UDV1 .0PNL1 .0UDV2, 0PNL2.XYPLTTA.0PP1 ,0QP1 .0UPV1 ,0ES1 , 
OEFl,OPP2,0QP2,0UPV2 t 0ES2,OEF2,PL0TX2,XYPLTT/NEVER $ 

CASECC,/CASEXX/*TRAN*/S,N,REPEATT/S,N,NOLOOP $ 
//*MPY*/NC0L/0/l $ 

CASEXX,USETD,DLT,SLT,BGPDT,SIL,CSTM,TRL,DIT,GMD,GOD,,EST,MGG, 
MPT/PPT , PST , PDT , PD , , TOL/S , N , NOSET/NCOL $ 

PPT.PDT/NOSET $ 

CA$EXX,TRL,NLFT,DIT,KDD,BDD,MDD,PD/UDVT,PNLD/*DIRECT*/ 
NOUE/NONC'UP/S , N , NCOL/C , Y , I START $ 

CASEXX,EQDYN,USETD,UDVT,TOL,XYCDB,PNLD/OUDV1,OPNL1/ 
*TRANRESP*/*D I RECT*/0/S , N , NOD/S , N , NOP/0 $ 

LBL15,N0D $ 

0UDV1 .0PNL1 , , , ,/0UDV2,0PNL2, , , , $ 

0UDV2,0PNL2,,,,//S,N,CARDN0 $ 

XYCDB,0UDV2,0PNL2,,,/XYPLTTA/*TRAN*/*DSET*/S,N,PFILE/ 
S.N.CARDNO $ 

XYPLTTA// $ 

LBL15 $ 
//*AND*/PJUMP/N0P/JUMPPL0T $ 

LBLl8,PJUMP $ 
UDVT.UPV/NOA $ 
LBL17.N0A $ 
USETD,,UDVT,,,G0D,GMD,PST,KFS,,/UPV,,QP/1/*DYNAMICS* $ 

LBL17 $ 

CASEXX,CSTM,MPT,DIT,EQDYN,SILD,,,BGPDP,TOL,C)P,UPV,EST,XYCDB, 
PPT/0PP1 ,0QP1 .0UPV1 ,0ES1 ,OEF 1 ,PUGV/*TRANRESP* $ 

0PP1,0QP1,0UPV1,0ES1,0EF1,/ 
OPP2,OQP2,OUPV2,0ES2,OEF2, $ 



2.9-6 (05/30/86) 



DIRECT TRANSIENT RESPONSE 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

Hi OFP 0PP2,0QP2,OUPV2,OEF2,OES2,//S,N,CARDN0 $ 

Ut2 SCAN CASECC,0ES2,0EF2/0ESF2/*RF* $ 

1 J43 OFP 0ESF2,,,,,//S,N,CARDN0 $ 

M*k COND P2.JUMPPL0T $ 

145 PLOT PLTPAR,GPSETS,ELSETS,CASEXX,BGPDT,EQEXIN,SIP,,PUGV,GPECT,0ES1/ 
PL0TX2/NSIL/LUSEP/JUMPPL0T/PLTFLG/S.N.PF1LE $ 

H6 PRTMSG PL0TX2// $ 

H7 LABEL P2 $ 

1 48 XYTRAN XYCDB , 0PP2 , 0QP2 , 0UPV2 ,0ES2 ,0EF2/XYPLTT/*TRAN*/*PSET*/ 

S,N,PFILE/S,N,CARDND $ 

149 XYPLOT XYPLTT// $ 

150 LABEL LBL18 $ 

151 COND FINIS, REPEATT $ 

152 REPT LBL13JO0 $ 

153 PRTPARM //-2/*DIRTRD* $ 

154 JUMP FINIS $ 

155 LABEL ERR0R1 $ 

156 PRTPARM //-1/*DIRTRD* $ 

157 LABEL ERR0R3 $ 

158 PRTPARM //-3/*DIRTRD* $ 

159 LABEL FINIS $ 

160 PURGE DUMMY/ALWAYS $ 

161 END $ 



2.9-7 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.9.2 Description of Important DMAP Operations for Direct Transient Response 

5. GP1 generates coordinate system transformation matrices, tables of grid point locations, and t 
tables relating the internal and external grid point numbers, 

6. PLTTRAN modifies special scalar grid points in the BGPDT and SIL tables. 

8. Go to DMAP No, 87 if there is only Direct Matrix Input. 

9. GP2 generates Element Connection Table with internal indices. 

12. Go to DMAP No. 20 if there are no structure plot requests. 

13. PLTSET transforms user input into a form used to drive the structure plotter. 

14. PRTMSG prints error messages associated with the structure plotter. 

17. Go to DMAP No. 20 if no undeformed structure plots are requested. 

18. PL0T generates all requested undeformed structure plots. 

19. PRTMSG prints plotter data and engineering data for each undeformed plot generated. 

21. GP3 generates Grid Point Temperature Table. 

22. TA1 generates element tables for use in matrix assembly and stress recovery. 

24. Go to DMAP No. 49 if there are no structural elements. 

29. EMG generates structural element stiffness, mass, and damping matrix tables and dictionaries 
for later assembly by the EMA module. 

31. Go to DMAP No. 33 if no stiffness matrix is to be assembled. 

32. EMA assembles stiffness matrix [K* ] and Grid Point Singularity Table. 

y y 

34. Go to DMAP No. 36 if no mass matrix is to be assembled. 

35. EMA assembles mass matrix [M ]. 

37. Go to DMAP No. 39 if no viscous damping matrix is to be assembled. 

38. EMA assembles viscous damping matrix [B ]. 

40. Go to DMAP No. 42 if no structural damping matrix is to be assembled. 

41. EMA assembles structural damping matrix [K ]. 

45. Go to DMAP No. 49 if no weight and balance information is requested. 

46. Go to DMAP No. 157 and print Error Message No. 3 if no mass matrix exists. 

47. GPWG generates weight and balance information. 

48. 0FP formats the weight and balance information prepared by GPWG and places it on the system 
output file for printing. 

50. Equivalence [K x ] to [K ] if there are no general elements. 

yy yy 

51. Go to DMAP No. 53 if there are no general elements. 

52. SMA3 adds general elements to [K* ] to obtain stiffness matrix [K gg ]. 



2.9-8 (05/30/86) 



DIRECT TRANSIENT RESPONSE 



55. GP4 generates flags defining members of various displacement sets (USET) and forms 

multipoint constraint equations [R ] (u } = 0. 

y y n 

57. Go to DMAP No. 63 if general elements are present. 

58. Go to DMAP No. 63 if there are no structural elements. 

60. Go to DMAP No. 63 if no potential grid point singularities exist. 

61. GPSP generates a table of potential grid point singularities. 

62. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 

64. Equivalence [K gg ] to [K^], [M gg ] to [Mj, [B gg ] to [B nn ] and [K 4 g ] to 
[K ] if no multipoint constraints exist. 

65. Go to DMAP No. 68 if no multipoint constraints exist. 

66. MCE1 partitions multipoint constraint equations [R ] = [R m | R n l and solves for 

-m r 1 rR . 



multipoint constraint transformation matrix [G m ] = -[R m ]~ [R n ]. 



~nr " m 
67. MCE2 partitions stiffness, mass and damping matrices 



C V ¦ 



[B 99 ] = 



K I K 
n n I nm 

mn mm 



nn ' nm 



-r- 



B I B 
mn mm 



and 



[ % ] = 


M j M 
nn nm 

M mn ' M mm 


[K 99 ] " 


K nn ! K nm 

K 4 1 K 4 
mn mm 



and performs matrix reductions 

[K„ n ] - [K„ n ] + [G^KJ ? [Kj n ][G m ] ? [G^KJCGJ , 

[M nn ] - [M nn ] ? [G> m ] ? [HT n ][G m ] + [G^MjtGJ , 

[B„„] = [Si + [g!][b„„] + [bL][gJ + [gIidlJLgJ , 



nn- 



nn- 



m JI - mn- 



J-ir„4 



mn-"- nr 



4 -,Tr 



nr 1 - mm-"- nr 



J-,r„4 



CC.J - CKj n ] + E^][K mn ] + [^]'[G m ] + [G^K^GJ 



69. Equivalence [K^] to [K ff ], [M pn ] to [M ff ], [B nn ] to [B ff ] and [K nn ] to 
[K ff ] if no single-point constraints exist. 

70. Go to DMAP No. 72 if no single-point constraints exist. 

71. SCE1 partitions out single-point constraints 



2.9-9 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



^ = 



&W = 



^ff_j_ K fs 

K f t K 
sf ss 



D ff 1 D fs 

B . i B 
sf ss 



and 



[M ] = 
L nn J 



[K 4 ] = 






4 4 
K ff I K f s 

K 4 I K 4 
K sf ' K ss 



73. Equivalence [KfA to [K 1 if no omitted coordinates exist. 

tt as 

74. Equivalence [M ff ] to [M ] if no omitted coordinates exist. 

75. Equivalence [B^] to [B 1 if no omitted coordinates exist. 

tt aa 

76. Equivalence [K f ^] to [K 1 if no omitted coordinates exist. 

tt aa 

77. Go to DMAP No. 87 if no omitted coordinates exist. 

78. SMP1 partitions constrained stiffness matrix 



[K ff ] = 



K I K 
aa ao 

K l K 
oa oo 



solves for transformation matrix [G 1 = -[K ]" [K ] 

O UU Ud 

and performs matrix reduction [K aQ ] = [K a& ] + [K ao ][G o ] 



79. Go to DMAP No. 81 if there is no mass matrix. 

80. SMP2 partitions constrained mass matrix 



LM ff ] = 



M I M 
aa ao 

M I M 
oa oo 



and performs matrix reduction 

<] " CM aa] + C M ao^ G o] + fao 6 ./ + [<^M 00 ][G ] 

82. Go to DMAP No. 84 if there is no viscous damping matrix. 

83. SMP2 partitions constrained viscous damping matrix 



[B ff ] = 
and performs matrix reduction 



B | B 
aa ao 

B i B 
oa oo 



2.9-10 (05/30/86) 



DIRECT TRANSIENT RESPONSE 



85. 
86. 



1 T T 

[B ] = [B ] + [B ][G ] + [B 6 ] + [G J[B ][G 1 
L aa J L aa J L ao JL o J L ao o J L o JL oo JL o J 

Go to DMAP No. 87 if there is no structural damping matrix. 
SMP2 partitions constrained structural damping matrix. 

A 



[< f] - 



^aa! K ao 

K 4 I K 4 
K oa K oo 



and performs matrix reduction 

[K 4 ] = [K 4 ] + [K 4 ][G J + [K 4 G ] T + [gI][K 4 ][G J 



aa 



aa- 



ao- 



ao o- 



oo- 



89. 

91. 

92. 

95. 

96, 



98. 
101. 

102. 
103. 
104. 

105. 

106, 

112. 



DPD generates flags defining members of various displacement sets used in dynamic analysis 
(USETD), tables relating the internal and external grid point numbers (GPLD), including 
extra points introduced for dynamic analysis (SILD), and prepares Transfer Function Pool 
(TFP00L), Dynamics Load Table (DLT), Nonlinear Function Table (NLFT), and Transient Response 
List (TRL). 

Go to DMAP No. 63 if no potential grid point singularities exist. 

Equivalence [G ] to [G*h and [G 1'to [G^] if there are no extra points introduced 

for dynamic analysis. 

BMG generates DMIG card images describing the interconnection of the fluid and the 
structure. 

Go to DMAP No. 97 if no fluid-structure interface is defined. 

MTRXIN generates fluid boundary matrices [A b f£ ] and [K fa fjL ] if a fluid-structure 

interface is defined. The matrix [K b f ] is generated only for a nonzero gravity in the 

field. 

MTRXIN selects the direct input matrices [K^], [M^] and [B ]. 

Equivalence [K 2 ] to [K 2d ] if no fluid-structure interface is defined and equivalence 

L" M pp] t0 [M PP J 1f thGre iS n ° [A b,fi 3 ' 

Go to DMAP No. 107 if no fluid-structure interface is defined. 

ADD5 adds [K b fA ] and [K 2 p] and subtracts [A b f£ ] from them to form [K ]. 

Go to DMAP No. 107 if there is no [A fa f ]. 

T 
Transpose [A fa f ] to obtain [A b fJl ] . 

2 T oh 

ADD assembles input matrix [M ] = MFACT [A b>n ] + [Mj£]. 

Equivalence [M 2 J to [M 2 H ], [B 2 J to [B 2 H ] and [K 2 n ] to [K 2 ^] if no constraints 



pp- 



'dd- 



pp- 



2.9-11 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



are applied, [M ] to [M dd ] if there are no direct input mass matrices and no extra 

points, and [K ] to [K.,] if there are no direct input stiffness matrices and no extra 
aa qq 

points. 

113. Go to DMAP No. 115 if only extra points are defined. 

114. GKAD assembles stiffness, mass, and damping matrices for use in Direct Transient Response: 

IXJ = [Kjj + [K*] , 



and 
where 



and 



Md- 



x dd 



dd- 



[M dd ] = [mJ h ] + [mJj 



'dd- 



'dd- 



[B H J - [Bjj + [B* ] + ^ [K J .] + i- [**] 



J dd- 



'del- 



dd- 



K 1 
aa , 
r ¦ 

i 






M I 
aa , 

r 

i 






B I 
I 






aa i 






=>[K dd ] 



=>[M dd ]. 



=>[B dd ] 



=>KJ 



All matrices are real . 

116. Equivalence [B^] to [B dd ] if all damping is Direct Matrix Input, [M dd ] to [M d(J ] if 

all mass is Direct Matrix Input and [K^] to [K dd ] is all stiffness is Direct Matrix 
Input. 

119. Beginning of loop for additional dynamic load sets. 

121. CASE extracts the appropriate record from CASECC corresponding to the current loop and 
copies it into CASEXX. 

123. TRLG generates matrices of loads versus time. {P*}, {P^K and {P*} are generated with 
one column per output time step. {P d > is generated with one column per solution time 
step, and the Transient Output List (T0L) is a list of output time steps. 

124. Equivalence {P 1 } to {P d } if the d and p sets are the same. 

P 



2.9-12 (05/30/86) 



DIRECT TRANSIENT RESPONSE 



125. TRD forms the linear, {P.}, and nonlinear, {pJ A } , dynamic load vectors and integrates 

the equations of motion (using the standard or alternate starting procedure) over specified 
time periods to solve for the displacements, velocities, and accelerations, using the 
following equation 

cv 2+ B d<jp + w (u d } = {P d> + l C> ¦ 

126. VDR prepares displacements, velocities and accelerations, sorted by time step, for output 
using only the solution set degrees of freedom. 

127. Go to DMAP No. 132 if there is no output request for the solution set. 

128. SDR3 prepares the requested output of the solution set displacements, velocities, 
accelerations and nonlinear load vectors sorted by point number of element number. 

129. 0FP formats the tables prepared by SDR3 sorted by point number or element number and places 
them on the system output file for printing. 

130. XYTRAN prepares the input for requested X-Y plots of the solution set quantities. 

131. XYPL0T prepares the requested X-Y plots of the solution set displacements, velocities, 
accelerations and nonlinear load vectors vs. time.. 

134. Go to DMAP No. 150 if no further output is requested. 

135. Equivalence {u.} to {u } if no constraints are applied. 

136. Go to DMAP No. 138 if no constraints are applied. 

137. SDR1 recovers dependent components of displacements 

(u > = [G^u d > , p_|= (u f + u e > 

( "s ) 



m 



P" 



and recovers single-point forces of constraint {q s > = -{P s > + E K f s ] ^ u f^ • 

139. SDR2 calculates element forces (0EF1) and stresses (0ES1) and prepares load vectors (0PP1), 
displacement, velocity and acceleration vectors (0UPV1) and single-point forces of 
constraint (0QP1) for output and translation components of the displacement vector (PUGV) . 
sorted by time step. 

140. SDR3 prepares requested output sorted by point number of element number. 

141. 0FP formats the tables prepared by SDR3 for output sorted by point number of element number 
and places them on the system output file for printing. 

142. SCAN examines the element stresses and forces calculated by SDR3 and generates scanned 
output that meets the specifications set by the user. 



2.9-13 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

143. 0FP formats the scanned output table prepared by SCAN and places it on the system output 
file for printing. 

144. Go to DMAP No. 147 if no deformed structure plots are requested. 

145. PL0T prepares all requested deformed structure and contour plots. 

146. PRTMSG prints plotter data, engineering data, and contour data for each deformed plot 
generated. 

148. XYTRAN prepares the input for requested X-Y plots. 

149. XYPL0T prepares the requested X-Y plots of displacements, velocities, accelerations, forces, 
stresses, loads and single-point forces of constraint versus time. 

150. Go to DMAP No. 159 if no additional dynamic load sets need to be processed. 

152. Go to DMAP No. 119 if additional dynamic load sets need to be processed. 

153. Print Error Message No. 2 and terminate execution. 

154. Go to DMAP No. 159 and make normal exit. 

156. Print Error Message No. 1 and terminate execution. 
158. Print Error Message No. 3 and terminate execution. 



2.9-14 (05/30/86) 



DIRECT TRANSIENT RESPONSE 

2.9.3 Output for Direct Transient Response 

The following printed output, sorted by point number or element number (S0RT2), is available 
at selected multiples of the integration time step: 

1. Displacements, velocities, and accelerations for a. list of PHYSICAL points (grid points 
and extra scalar points introduced for dynamic analysis) or S0LUTI0N points (points used 
in the formulation of the dynamic equation). 

2. Nonzero components of the applied load vector and single-point forces of constraint for 
a list of PHYSICAL points. 

3. Nonlinear force vector for a list of S0LUTI0N points. 

4. Stresses and forces in selected elements (All not allowed). 

5. Scanned output of forces and elements in selected elements. 
The following plotter output is available: 

1. Undeformed plot of the structural model. 

2. Deformed shapes of the structural model for selected time intervals. 

3. Contour plots of stresses and displacements for selected time intervals. 

4. X-Y plot of any component of displacement, velocity, or acceleration of a PHYSICAL point 
or a S0LUTI0N point. 

5. X-Y plot of any component of the applied load vector, nonlinear force vector, or 
single-point force of constraint. 

6. X-Y plot of any stress or force component for an element. 

The data used for preapring the X-Y plots may be punched or printed in tabular form (see Section 
4.3). Also, a printed summary is prepared for each X-Y plot which includes the maximum and minimum 
values of the plotted function. 

2.9.4 Case Control Deck for Direct Transient Response 

The following items relate to subcase definition and data selection for Direct Transient 
Response: 

1. One subcase must be defined for each dynamic loading condition. 

2. DL0AD and/or N0NLINEAR must be used to define a time-dependent loading condition for 
each subcase. 

3. All constraints must be defined above the subcase level. 

4. TSTEP must be used to select the time-step intervals to be used for integration and 
output in each subcase. 

2.9-15 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

5. If nonzero initial conditions are desired, IC must be used to select a TIC card in the 
Bulk Data Deck. 

6. On restart following an unscheduled exit due to insufficient time, the subcase structure 
should be changed to reflect any completed loading conditions. The TSTEP selections 
must be changed if it is desired to resume the integration at the point terminated. 

2.9.5 Parameters for Direct Transient Respo nse 

The following parameters are used in Direct Transient Response: 

1. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2* AUT0SPC - reserved for future optional use. The default value is -1. 

3. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTRIA2, CPTUBE, CPQDPLT, CPTRPLT, 
CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

4. G - optional. The real value of this parameter is used as a uniform structural damping 
coefficient in the direct formulation of dynamics problems (see Section 9.3.3 of the 
Theoretical Manual). Not recommended for use in hydroelastic problems. 

5 - GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. All fluid related masses are ignored. 

6, I START - optional. A positive value of this parameter causes the TRD module to use the 
second (or alternate) starting method (see Section 11.4 of the Theoretical Manual). The 
alternate starting method is recommended when initial accelerations are significant and 
when the mass matrix is non-singular. The default value is -1 and causes the first 
starting method to be used. 

7- SURFACE - optional. The computations of the external surface areas for the 

two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

8. V0LUME - optional. The volume computations for the two-dimensional and 

three-dimensional elements are activated by this parameter when they are generated in 

2.9-16 (05/30/86) 



DIRECT TRANSIENT RESPONSE 

the EMG module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details. 
9. W3_and_W4 - optional. The real values (radians/unit time) of these parameters are used 
as pivotal frequencies for uniform structural damping and element structural damping, 
respectively (see Section 9.3.3 of the Theoretical Manual). Parameter W3 is required if 
uniform structural damping is desired. Parameter W4 is required if structural damping 
is desired for any of the structural elements. Parameter W3 should not be used for 
hydroelastic problems. 
10. WTMASS - optional. The terms of the structural mass matrix are multiplied by the real 
value of this parameter when they are generated in the EMA module. Not recommended for 
use in hydroelastic problems. 

2.9.6 The CONTINUE Feature 

In transient analysis, it is frequently necessary to continue the integration of the coupled 
equations beyond the last (or from any earlier intermediate) output time for which the solution was 
obtained in a previous run. The CONTINUE feature (see Section 11.4.2 of the Theoretical Manual for 
details) makes it possible to do this without re-executing the entire problem. 

In order to use the CONTINUE feature, the user should employ the following steps: 

1. Request a checkpoint of a coupled transient analysis problem. 

2. Check to ensure that the solution for at least one output time is computed in this run 
and that the T0L (list of output times) and UDVT (displacement - velocity - 
acceleration) files are successfully checkpointed. 

3. Restart the problem by changing any one or more of several cards either in the Case 
Control Deck (DL0AD, N0NLINEAR, TSTEP cards) and/or in the Bulk Data Deck (TSTEP, DAREA, 
DL0AD, F0RCE, etc.) that define either the dynamic loading and/or the time step 
selection. Ensure that the following conditions are satisfied. 

a. The structural model and the constraint data for the restart must be the same as 
that used in the checkpoint run. 

b. The dynamic loading and/or the time step selection in the restart need not be the 
same as that used in the checkpoint run. 

c. If the user wishes to continue the integration from an intermediate (rather than 
from the last) output time of the checkpoint run, a DMAP alter should be employed in 
the Executive Control Deck to reset the parameter NC0L to the appropriate value by 

2.9-17 (05/30/86) 

as 



DISPLACEMENT RIGID FORMATS 

means of a PARAM statement just before the TRLG module in the DMAP sequence. (See 
Section 11.4.2 of the Theoretical Manual for details). 
4. Note that the output of the restart does ncrt include the solutions of the checkpoint 
run, but only those solutions that are computed by the restart. Also, any initial 
conditions specified in the data for the restart are ignored since the solution is 
continued by using the displacements, velocities and accelerations corresponding to the 
specified output time of the checkpoint run as initial conditions. 

2-._9.7 Automatic ALTERS for Automated Multi-stage Substructuring 

The following lines of the Direct Transient Response, Rigid Format 9, are ALTERed in 
automated substructue analyses. 

Phase 1: 4, 56, 88-124, 125-153 

Phase 2: 4, 5-5, 10-20, 23-24, 43-53, 109-110, 116-116, 135-149 

Phase 3: 87, 92-136, 138, 151-153 

If APP DISP, SUBS is used, the user may also specify ALTERs. However, these must not 
interfere with the automatically generated DMAP statement ALTERs listed above. See Volume I, 
Section 5.9 for a description and listing of the ALTERs which are automatically generated for 
substructuring. 

2.9.8 Rigid Format Error Messages from Direct Transient Response 

The following fatal errors are detected by the DMAP statements in the Direct Transient 
Response rigid format. The text for each error message is given below in capital letters and is 
followed by additional explanatory material, including suggestions for remedial action. 

DIRECT TRANSIENT RESPONSE ERR0R MESSAGE N0. 1 - TRANSIENT RESPONSE LIST REQUIRED F0R TRANSIENT 
RESPONSE CALCULATIONS. 

Time step intervals to be used must be specified on a TSTEP card in the Bulk Data Deck and a TSTEP 
selection must be made in the Case Control Deck. 

DIRECT TRANSIENT RESPONSE ERR0R MESSAGE N0. 2 - ATTEMPT T0 EXECUTE M0RE THAN 100 L00PS. 

An attempt has been made to use more than 100 dynamic load sets. This number may be increased by 
ALTERing the REPT instruction following the last XYPL0T instruction. 

DIRECT TRANSIENT RESPONSE ERR0R MESSAGE N0. 3 - MASS MATRIX REQUIRED F0R WEIGHT AND BALANCE 
CALCULATIONS. . , n 

The mass matrix is null because either no elements were defined with Connection cards, 
nonstructural mass was not defined on a Property card, or the density was not defined on a Material 

card. 

2.9-18 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.10 MODAL COMPLEX EIGENVALUE ANALYSIS 

2.10.1 DMAP Sequence for Modal Complex Eigenvalue Analysis 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 10 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



OPTIONS IN EFFECT GO 



ERR=2 L I ST 



NODECK NOREF NOOSCAR 



1 BEGIN 

2 PRECHK 

3 FILE 

k PARAM 

5 GP1 

6 PLTTRAN 

7 GP2 

8 PARAML 

9 PURGE 

10 COND 

11 PLTSET 

12 PRTMSG 

13 PARAM 
lit PARAM 

15 COND 

16 PLOT 

17 PRTMSG 

18 LABEL 

19 GP3 

20 TA1 

21 COND 



DISP 10 - MODAL COMPLEX EIGENVALUE ANALYSIS - APR. 1 986 $ 

ALL $ 

GOD=SAVE/GMD=SAVE/LAMA=APPEND/PH I A=APPEND $ 

//AMPYft/CARDNO/0/0 $ 

GEOM1,GEOM2,/GPL,EQEXIN,GPDT,CSTM,BGPDT,SIL/S,N,LUSET/ 
N0GPDT/MINUS1 — 1 $ 

BGPDT,SIL/BGPDP,SIP/LUSET/S,N,LUSEP $ 

GE0M2.EQEXIN/ECT $ 

PCDB//*PRES*////JUMPPLOT $ 

PLTSETX,PLTPAR,GPSETS,ELSETS/JUMPPLOT $ 

P1,JUMPPL0T $ 

PCDB,EQEXIN,ECT/PLTSETX,PLTPAR,GPSETS,ELSETS/S,N,NSIL/ 
S.N.JUMPPLOT $ 

PLTSETX// $ 

//*MPYft/PLTFLG/l/l $ 

//*MPY*/PFILE/0/0 $ 

Pl.JUMPPLOT $ 

PLTPAR t GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIL, ,ECT, ,/PLOTXl/ 
NSIL/LUSET/JUMPPLOT/PLTFLG/S.N.PFILE $ 

PL0TX1// $ 

PI $ 

GE0M3 , EQEX I N , GE0M2/ , GPTT/NOGRAV $ 

ECT,EPT,BGPDT,SIL,GPTT,CSTM/EST,GEI,GPECT,,/ 
LUSET/S,N,N0SIMP/1/S,N,N0GENL/S,N,GENEL $ 

ERRORS, NOS IMP $ 



2.10-1 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 10 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

22 PURGE OGPST/GENEL $ 

23 PARAM //*ADD*/NOKGGX/1/0 $ 
21* PARAM //AADDft/NOMGG/1/0 $ 

25 EMG EST,CSTM,MPT,DIT,GE0M2,/KELM,KDICT,MELM,MDICT,,,/S,N,N0KGGX/ 

S,N,NOMGG////C,Y,COUPMASS/C,Y,CPBAR/ 

C,Y,CPR0D/C,Y,CPQUAD1/C,Y,CPQUAD2/C,Y,CPTRIA1/C,Y,CPTRIA2/ 
C , Y , CPTUBE/C , Y , CPQDPLT/C , Y , CPTRP LT/C , Y , CPTRBSC/ 
V,Y,VOLUME/V,Y, SURFACE $ 

26 PURGE KGGX.GPST/NOKGGX $ 

27 COND JMPKGGX.NOKGGX $ 

28 EMA GPECT,KDICT,KELM/KGGX,GPST $ 

29 LABEL JMPKGGX $ 

30 COND ERR0R1.N0MGG $ 

31 EMA GPECT,MDICT,MELM/MGG,/-1/C,Y,WTMASS=1.0 $ 

32 COND LGPWG.GRDPNT $ 

33 GPWG BGPDP,CSTM,EQEXIN,MGG/0GPWG/V,Y,GRDPNT=-1/C,Y,WTMASS $ 

34 OFP OGPWG,,,,,//S,N,CARDN0 $ 

35 LABEL LGPWG $ 

36 EQUIV KGGX.KGG/NOGENL $ 

37 COND LBL11.N0GENL $ 

38 SMA3 GE1 .KGGX/KGG/LUSET/NOGENL/NOSIMP $ 

39 LABEL LBL11 $ 

1*0 PARAM //*MPY*/NSKIP/0/0 $ 

Al GPl* CASECC,GEOMl*,EQEXIN,GPDT,BGPDT,CSTM,GPST/RG,,USET,ASET/ 
LUSET/S,N,MPCF1/S,N,MPCF2/S,N,SINGLE/S,N,0MIT/S,N,REACT/ 
S,N,NSKiP/S,N,REPEAT/$,N,NOSET/S,N,NOL/S,N,N0A/C,Y,ASET0UT/ 
S.Y.AUTOSPC $ 

1+2 PARAM //*AND*/NOSR/REACT/S INGLE $ 

1*3 PURGE GM,GMD/MPCF1/GO,GOD/OMIT/KFS/SINGLE/QPC/NOSR/KLR,KRR,MLR,MRR, 
DM, MR/REACT $ 



2.10-2 (05/30/86) 



MODAL COMPLEX EIGENVALUE ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 10 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

kk COND LBLlt,GENEL $ 

i»5 PARAM //*EQft/GPSPFLG/AUT0SPC/O $ 

46 COND LBHt.GPSPFLG $ 

i»7 GPSP GPL,GPST,USET,SIL/OGPST/S,N,N0GPST $ 

i*8 OFP OGPST,,,,,//S,N,CARDNO $ 

1*9 LABEL LBL4 $ 

50 EQUIV KGG.KNN/MPCF1/MGG.MNN/MPCF1 $ 

51 COND LBL2,MPCFi $ 

52 MCE1 USET.RG/GM $ 

53 MCE2 USET,GM,KGG,MGG,,/KNN,MNN,, $ 

54 LABEL LBL2 $ 

55 EQUIV KNN,KFF/$INGLE/MNN,MFF/SINGLE $ 

56 COND LBL3, SINGLE $ 

57 SCE1 USET,KNN,MNN,,/KFF,KFS,,MFF,, $ 

58 LABEL LBL3 $ 

59 EQUIV KFF.KAA/OMIT $ 

60 EQUIV MFF.MAA/OMIT $ 

61 COND LBL5.0MIT $ 

62 SMP1 USET,KFF,,,/G0,KAA,KOO,LO0,,,,, $ 

63 SMP2 USET,GO,MFF/MAA $ 

64 LABEL LBL5 $ 

65 COND LBL6, REACT $ 

66 RBMG1 USET,KAA,MAA/KLL,KLR,KRR,MLL,MLR,MRR $ 

67 RBMG2 KLL/LLL $ 

68 RBMG3 LLL,KLR,KRR/DM $ 

69 RBMG4 DM,MLL,MLR,MRR/MR $ 



2.10-3 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 10 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



70 LABEL LBL6 $ 

71 DPD DYNAMICS, GPL, S I L.USET/GPLD, S I LD.USETD.TFPOOL, , , , , ,EED,EQDYN/ 

LUSET/S , N , LUSETD/NOTF L/NODLT/NOPSDL/ 
N0FRL/NONLFT/NOTRL/S,N,N0EED//S,N,NOUE $ 

72 COND ERROR2.N0EED $ 

73 EQUIV GO,GOD/NOUE/GM,GMD/NOUE $ 
Jk PARAM //*MPY*/NEIGV/1/-1 $ 

75 READ KAA,MAA,MR,DM,EED,USET,CASECC/LAMA,PHIA,MI ,0E I GS/*MODES*/S,N, 

NEIGV $ 

76 OFP OEIGS,,,,,//S,N,CARDNO $ 

77 COND ERRORS, NEIGV $ 

78 OFP LAMA //S.N.CARDNO $ 

79 PARAM //*ADD*/NEVER/1/0 $ 

80 PARAM //*MPY*/REPEATE/1/-1 $ 

81 LABEL LBL13 $ 

82 PURGE PHIH,CLAMA,OPHIH,CPHID,CPHIP,QPC,OQPC1,OCPHIP,OESC1,OEFC1, 

K2PP,M2PP,B2PP,K2DD,M2DD,B2DD/NEVER $ 

83 CASE CASECC,/CASEXX/*CEIGN*/S,N,REPEATE/S,N,NOLOOP $ 

81* MTRXIN CASEXX,MATP00L,EQDYN,,TFP00L/K2PP,M2PP,B2PP/LUSETD/S,N, 
N0K2PP/S,N,N0M2PP/S,N,N0B2PP $ 

85 PURGE K2DD/N0K2PP/M2DD/N0M2PP/B2DD/N0B2PP $ 

86 EQUIV M2PP,M2DD/N0SET/B2PP,B2DD/N0SET/K2PP,K2DD/N0SET $ 

87 GKAD USETD,GM,G0,,,,,K2PP,M2PP,B2PP/, ) ,GMD,G0D,K2DD, 

M2DD , B2DD/*CHPLEV*/*D I.SP*/*M0DAL*/O .0/ 
O.0/O.0/N0K2PP/N0M2PP/N0B2PP/ 
MPCF1/SINGLE/0MIT/N0UE/-1/-1/ 
-1/-1 $ 

88 GKAM USETD,PHIA,MI,LAMA,DIT t M2DD,B2DD,K2DD,CASEXX/MHH,BHH,KHH,PH!DH/ 

N0UE/C,Y,LM0DES=O/C,Y,LFREQ=0.O/C,Y,HFREQ=-1.0/ 
N0M2PP/N0B2PP/N0K2PP/S,N,N0NCUP/S,N,FMODE $ 

89 CEAD KHH,BHH,MHH,EED,CASEXX/PHIH,CLAMA,OCEIGS,/S,N,E!GVS $ 

90 OFP OCEIGS ; ,,,,//S,N,CARDNO $ 



2.10-4 (05/30/86) 



MODAL COMPLEX EIGENVALUE ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 10 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

91 COND LBL17.EIGVS $ 

92 OFP CLAMA,,,,, //S.N.CARDNO $ 

93 VDR CASEXX, EQDYN , USETD , PH I H , CLAMA, ,/OPH I H , /*CE I GEN */*M0DAL */ 

N0SORT2/S,N,N0H/S,N,N0P/FMODE $ 

9A COND LBL16.N0H $ 

95 OFP 0PHIH,,,,,//S,N,CARDN0 $ 

96 LABEL LBL16 $ 

97 COND LBL17.N0P $ 

98 DDR1 PHIH.PHIDH/CPHID $ 

99 EQUIV CPHID,CPHIP/NOA $ 

100 COND LBLNOA.NOA $ 

101 SDR1 USETD,,CPHID,,,GOD,GMD,,KFS,,/CPHIP,,QPC/l/ftDYNAMICS* $ 

102 LABEL LBLNOA $ 

103 SDR2 CASEXX, CSTM, MPT, D IT, EQDYN, S I LD f ,,, CLAMA, QPC.CPH IP, EST,,/ 

,0QPC1,0CPHIP,0ESC1,0EFC1, /*CEIGEN* $ 

10lt OFP 0CPHIP,0QPCl,OEFCl,0ESCl,,//S,N,CARDN0 $ 

105 LABEL LBL17 $ 

106 COND FINIS, REPEATE $ 

107 REPT LBL13.100 $ 

108 PRTPARM //-3/*MDLCEAD* $ 

109 JUMP FINIS $ 

110 LABEL ERR0R2 $ 

111 PRTPARM //-2/*MDLCEAD* $ 

112 LABEL ERR0R1 $ 

113 PRTPARM //-1/*MDLCEAD* $ 

114 LABEL ERRORit $ 

115 PRTPARM //-V*MDLCEAD* $ 



2.10-5 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 10 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

116 LABEL ERRORS $ 

117 PRTPARM //-5/*MDLCEAD* $ 

118 LABEL FINIS $ 

119 PURGE DUMMY/MI NUS1 $ 

120 END $ 



2.10-6 (05/30/86) 



MODAL COMPLEX EIGENVALUE ANALYSIS 

2.10.2 Description of Important DMAP Operations for Modal Complex Eigenvalue Analysis 

5. GP1 generates coordinate system transformation matrices, tables of grid point locations, and 
tables relating the internal and external grid point numbers. 

6. PLTTRAN modifies special scalar grid points in the BGPDT and SIL tables. 

7. GP2 generates Element Connection Table with internal indices. 

10. Go to DMAP No. 18 if there are no structure plot requests. 

11. PLTSET transforms user input into a form used to drive the structure plotter. 

12. PRTMSG prints error messages associated with the structure plotter. 

15. Go to DMAP No. 18 if no undeformed structure plots are requested. 

16. PL0T generates all requested undeformed structure plots. 

17. PRTMSG prints plotter data and engineering data for each undeformed plot generated. 

19. GP3 generates Grid Point Temperature Table. 

20. TA1 generates element tables for use in matrix assembly and stress recovery. 

21. Go to DMAP No. 116 and print Error Message No. 5 if there are no structural elements. 

25. EMG generates structural element stiffness and mass matrix tables and dictionaries for later 
assembly by the EMA module. 

27. Go to DMAP No. 29 if no stiffness matrix is to be assembled. 

28. EMA assembles stiffness matrix [K* ] and Grid Point Singularity Table. 

30. Go to DMAP No. 112 and print Error Message No. 1 if no mass matrix is to be assembled. 

31. EMA assembles mass matrix [M ]• 

32. Go to DMAP No. 35 if no weight and balance information is requested. 

33. GPWG generates weight and balance information. 

34. 0FP formats the weight and balance information prepared by GPWG and places it on the system 
output file for printing. 

36. Equivalence [K* ] to [K ] if no general elements exist. 

yy yy 

37. Go to DMAP No. 39 if no general elements exist. 

38. SMA3 adds general elements to [K* ] to obtain stiffness matrix C K gg ]- 

41. GP4 generates flags defining members of various displacement sets (USET) and forms 

multipoint constraint equations [R ] {u } = 0. 

y y 

44. Go to DMAP No. 49 if general elements are present. 

46. Go to DMAP No. 49 if no potential grid point singularities exist. 

47. GPSP generates a table of potential grid point singularities. 

48. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 



2.10-7 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



50. Equivalence [K 1 to [K 1 and IM „] to [Ml if no multipoint constraints exist. 

99 nn 99 nn J r 

51. Go to DMAP No. 54 if no multipoint constraints exist. 

52. MCE1 partitions multipoint constraint equations [R ] = [R R ] and solves for 

multipoint constraint transformation matrix [G„] = -[R m ]~ [R„]. 

m m n 

53. MCE2 partitions stiffness and mass matrices 











~ 




k j k ; 

nn nm 


and 


&nJ = 


M i M 
nn | nm 




K 1 K 

mn mm ; 




99 


M i M 
mn mm 



and performs matrix reductions 



.[X ] = [K ] + [G'JtK ] + [K 1 ][G ] + [G'][K 3DG ] and 

L nn J L nn J L m JL mn J L mn JL nr L m JL mm JL m J 

[M ] = [M 3 + [G T 3[M ] + [M T TIG ] + [G T 3[M ][G 3 . 

L nn J L nn J L m JL mn J L mn JL m J L m JL mm JL m J 



55. Equivalence [K ] to [K^ and [M 3 to [M^l if no single-point constraints exist. 

^ nn tf nn ft 3 r 

56. Go to DMAP No. 58 if no single-point constraints exist. 

57. SCE1 partitions out single-point constraints 



CW 



^ff_[_ K fs 

K - I K 
sf ss 



and 



CM„J = 



nn 






59. Equivalence [K,,J. to [K a 3 if no omitted coordinates exist. 

60. Equivalence [M-^] to [M ] if no omitted coordinates exist. 

61. Go to DMAP No. 64 if no omitted coordinates exist. 

62. SMP1 partitions constrained stiffness matrix 



[K ff 3 - 



K I K 
aa | ao 

K l K 
oa oo 



solves for transformation matrix [G ] = -[K 1" [K„„] 

o oo oa 



and performs matrix reduction [K ] = [K ] + [K 1[G 1 

aa aa oa o 



63. SMP2 partitions constrained mass matrix 



[M ff J = 



M I M 

aa . ao 

M I M 
oa oo 



2.10-8 (05/30/86) 



MODAL COMPLEX EIGENVALUE ANALYSIS 



and performs matrix reduction 



[M aa ] = [M ] + [M T J[G ] + [G T ][M ] + [G T ][M ][G ] 
aa aa oa o L o oa J o L oo o 

65. Go to DMAP No. 70 if there are no free-body supports. 

66. RBMG1 partitions out free-body supports 





K nn 1 K 






M 1 M 


[K ] = 
L aa J 


K i K 

rz rr 


and 


w«] ¦ 


JO Jv 1 A' I 

M | M 
ri ' rr 



67. RBMG2 decomposes constrained stiffness matrix [K] = lUJCLLj. 

XfXf XsXr XsXj 

68. RBMG3 forms rigid body transformation matrix 

[D] = -lK u Th^l, 
calculates rigid body check matrix 



[X] = [K rr ] + [K; r ][D] 



and calculates rigid body error ratio 



^ 



69. RBMG4 forms rigid body mass matrix 



Em p ] = [M rr ] + [M; r ][D] + [D'][M tr ] + [D'][M £Jl ][D]. 

71. DPD generates flags defining members of various displacement sets used in dynamic analysis 
{USETD), tables relating the internal and external grid point numbers (GPLD), including 
extra points introduced for dynamic analysis (SILD), and prepares Transfer Function Pool 
(TFP00L), and Eigenvalue Extraction Data (EED). 

72. Go to DMAP No. 110 and print Error Message No. 2 if there is no Eigenvalue Extraction Data. 

73. Equivalence [G ] to [G ] and [G ] to [G 1 if there are no extra points introduced 
_^ o o m m J r 

dynamic analysis. 

75. READ extracts real eigenvalues and eigenvectors from the equation 

[K - AM ]{u } = , 
L aa aa J a * 

calculates rigid body modes by finding a square matrix [<t> ] such that 

[m Q ] = [* ro ][m r ][* r() ] 
is diagonal and normalized, computes rigid body eigenvectors 

D 4> 



ao 



] = 



_ ro 



2.10-9 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

calculates modal mass matrix 

M = [^][M aa ][^] 
and normalizes eigenvectors according to one of the following user requests: 

1) Unit value of a selected component 

2) Unit value of the largest component 

3) Unit value of the generalized mass. 

76. 0FP formats the summary of eigenvalue extraction information (0EIGS) prepared by REA8 and. 
places it on the system output file for printing. 

77. Go to DMAP No. 114 and print Error Message No. 4 if no eigenvalues were found. 

78. 0FP formats the eigenvalues (LAMA) prepared by READ and places them on the system output 
file for printing. 

81. Beginning of loop for additional sets of direct input matrices. 

83. CASE extracts the appropriate record from CASECC corresponding to the current loop and 
copies it into CASEXX. 

84. MTRXIN selects the direct input matrices for the current loop, [K ], [M ] and 

[B 2 ]. 
L PP J 

86. Equivalence [M 2 p ] to [M 2 ^], [B pp ] to [B 2 d ] and [K 2 p ] to [K 2 ^] if no constraints 
are applied. 

9 9 

87. GKAD applies constraints to direct input matrices [K ], [Mr" ] and [Bfj ], forming 
[KJj d ], [MJj d ] and [B d 2 d ]. 

88. GKAM assembles stiffness, mass and damping matrices in modal coordinates for use in Complex 
Eigenvalue Analysis: 

[K hh ] = [k] ? [?J h j[l(2 d ][* dh ] , 



[M hh ] - M + [?J h ][i£ 1 H* dh ] 
and [B hh ] . [b] ? [4][B d 2 d ][* dh ] , 

where m. = modal masses , 

b i = m i 2* f i g(f.) 

and k i = m. 4-rr 2 f? . 
Direct input matrices may be complex. 
89. CEAD extracts complex eigenvalues and eigenvectors from the equation 

[M hh p 2 + B hh p + K hh ] {Uh > - 
and normalizes eigenvectors according to one of the following user requests: 



2.10-10 (05/30/86) 



MODAL COMPLEX EIGENVALUE ANALYSIS 

1) Unit magnitude of a selected component 

2) Unit magnitude of the largest component. , 

90. 0FP formats the summary of eigenvalue extraction information (0CEIGS) prepared by CEAD and i 
places it on the system output file for printing. 

91. Go to DMAP No. 105 if no complex eigenvalues were found. 

92. 0FP formats the complex eigenvalues (CLAMA) prepared by CEAD and places them on the system j 
output file for printing. 

93. VDR prepares eigenvectors (0PHIH) for output, using only the extra points introduced for 
dynamic analysis and modal coordinates. 

94. Go to DMAP No. 96 if 'there is no output request for the extra points introduced for dynamic 
analysis or modal coordinates. 

95. 0FP formats the table of eigenvectors for extra points introduced for dynamic analysis and 
modal coordinates prepared by VDR and places it on the system output file for printing. 

97. Go to DMAP No. 105 if there is no output request involving dependent degrees of freedom or 
forces and stresses. 

98. DDR1 transforms the complex eigenvectors from modal to physical coordinates 

[* d J = [* dh ][* h ] • 

99. Equivalence U.] to U ] if no constraints are applied. 

100. Go to DMAP No. 102 if no constraints are applied. 

101. SDR1 recovers dependent components of eigenvectors 

U > = [aJ]U d > , j_! d -l = { *f + *e } 

( *o ) 



- — - -<?> 

and recovers single-point forces of constraint {q £ } = [Kf s l L<j>f}. 

103. SDR2 calculates element forces (0EFC1) and stresses (0ESC1) and prepares eigenvectors 
(0CPHIP) and single-point forces of constraint (0QPC1) for output. 

104. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

106. Go to DMAP No. 118 and make normal exit if no additional sets of direct input matrices need 
to be processed. 

107. Go to DMAP No. 81 if additional sets of direct input matrices need to be processed. 

108. Print Error Message No. 3 and terminate execution. 




2.10-11 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

109. Got to DMAP No. 118 and make normal exit. 

111. Print Error Message No. 2 and terminate execution. 

113. Print Error Message No. 1 and terminate execution. 

115. Print Error Message No. 4 and terminate execution. 

117. Print Error Message No. 5 and terminate execution. 



2.10-12 (05/30/86) 



MODAL COMPLEX EIGENVALUE ANALYSIS 

2,10.3 Output for Modal Complex Eigenvalue Analysis 

The real Eigenvalue Summary Table and the real Eigenvalue Analysis Summary, as described 
under Normal Modes Analysis {see Section 2.3.3), are automatically printed. All real eigenvalues 
extracted are included even though not all are used in the modal formulation. 

The complex Eigenvalue Summary Table and the complex Eigenvalue Analysis Summary, as ' 
described under Direct Complex Eigenvalue Analysis (see Section 2.7.3), are automatically printed 
for each set of direct input matrices. 

Output that may be requested is the same as that described under Direct Complex Eigenvalue 
Analysis. Output for S0LUTI0N points will have the modal coordinates identified by the mode number 
determined in real eigenvalue analysis. 

The eigenvectors used in the modal formulation may be obtained for the S0LUTI0N points by 
using the ALTER feature to print the matrix of eigenvectors following the execution of READ. The 
eigenvectors for all points in the model may be obtained by running the problem initially on the 
Normal Modes Analysis Rigid Format or by making a modified restart using the Normal Modes Analysis 
rigid format. 

2.10.4 Case Control Deck for Modal Complex Eigenvalue Analysis 

The following items related to subcase definition and data selection must be considered in 
addition to the list presented with Direct Complex Eigenvalue Analysis: 

1. METH0D must appear above the subcase level to select an EIGR card that exists in the 
Bulk Data Deck. 

2. All of the eigenvectors used in the modal formulation must be determined in a single 
execution. 

3. An SPC set must be selected above the subcase level unless the model is a free body or 
all constraints are specified on GRID cards, Scalar Connection cards or with General 
Elements. 

4. SDAMPING must be used to select a TABDMP1 table if structural damping is desired. 

2.10.5 Parameters for Modal Complex Eigenvalue Analysis 

The following parameters are used in Modal Complex Eigenvalue Analysis: 



2.10-13 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

1. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses" 
the generation of this output data block. The default value is 0. 

2* AUT0SPC - reserved for future optional use. The default value is -1. 

3. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTRIA2, CPTUBE, CPQPPLT, CPTRPLT, 
CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

4- GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. All fluid related masses are ignored. 

5. LFREQ and HFREQ - required, unless parameter LM0DES is used. The real values of these 
parameters give the cyclic frequency range (LFREQ is the lower limit and HFREQ is the 
upper limit) of the modes to be used in the modal formulation. To use this option, 
parameter LM0DES must be set to 0. 

6. LM0DES - required, unless parameters LFREQ and HFREQ are used. The integer value of 
this parameter is the number of lowest modes to be used in the modal formulation. 

7. SURFACE - optional. The computations of the external surface areas for the 
two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

8. V0LUME - optional. The volume computations for the two-dimensional and 
three-dimensional elements are activated by this parameter when they are generated in 
the EMG module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details, 

9. WTMASS - optional. The terms of the structural mass matrix are multiplied by the real 
value of this parameter when they are generated in the EMA module. Not recommended for 
use in hydroelastic problems. 

2.10.6 Optional Diagnostic Output for FEER 

Special detailed information obtained by requesting DIAG 16 in the Executive Control Deck is 
the same as that described under Normal Modes Analysis (see Section 2.3.6). 

2.10-14 (05/30/86) 



MODAL COMPLEX EIGENVALUE ANALYSIS 

2.10.7 The APPEND Feature 

The APPEND feature can be used for real eigenvalue extraction in Modal Complex Eigenvalue 
Analysis. See Section 2.3.7 for details. 

2.10.8 Rigid Format Error Messages from Modal Complex Eigenvalue Analysis 

The following fatal errors are detected by the DMAP statements in the Modal Complex 
Eigenvalue Analysis rigid format. The text for each error message is given below in capital 
letters and is followed by additional explanatory material, including suggestions for remedial 
action. 

M0DAL C0MPLEX EIGENVALUE ANALYSIS ERR0R MESSAGE N0. 1 - MASS MATRIX REQUIRED F0R M0DAL F0RMULATI0N. 

The mass matrix is null because either no structural elements were defined with Connection cards, 
nonstructural mass was not defined on a Property card, or the density was not defined on a Material 
card. 

M0DAL C0MPLEX EIGENVALUE ANALYSIS ERR0R MESSAGE N0. 2 - EIGENVALUE EXTRACTI0N DATA REQUIRED F0R 
REAL EIGENVALUE ANALYSIS. 

Eigenvalue extraction data must be supplied on an EIGR card in the Bulk Data Deck and METH0D in the 
Case Control Deck must select an EIGR set. 

M0DAL C0MPLEX EIGENVALUE ANALYSIS ERR0R MESSAGE N0. 3 - ATTEMPT T0 EXECUTE M0RE THAN 100 L00PS. 

An attempt has been made to use more than 100 different sets of direct input matrices. This number 
can be increased by ALTERing the REPT instruction following the last 0FP instruction. 

M0DAL C0MPLEX EIGENVALUE ANALYSIS ERR0R MESSAGE N0. 4 - REAL EIGENVALUES REQUIRED F0R M0DAL 
F0RMULATI0N. 

No real eigenvalues were found in the frequency range specified by the user. 

M0DAL C0MPLEX EIGENVALUE ANALYSIS ERR0R MESSAGE N0. 5 - N0 STRUCTURAL ELEMENTS HAVE BEEN DEFINED. 
No structural elements have been defined with Connection cards. 



2.10-15 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



2.10-16 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.11 MODAL FREQUENCY AND RANDOM RESPONSE 

2.11.1 DMAP Sequence for Modal Frequency and Random Response 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 11 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



OPTIONS IN EFFECT GO 



ERR=2 LIST 



NODECK NOREF NOOSCAR 



1 BEGIN 

2 PRECHK 

3 FILE 

h PARAM 

5 GP1 

6 PLTTRAN 

7 GP2 

8 PARAML 

9 PURGE 

10 COND 

11 PLTSET 

12 PRTMSG 

13 PARAM 
H PARAM 

15 COND 

16 PLOT 

17 PRTMSG 

18 LABEL 
IS GP3 

20 TA1 

21 COND 



DISP 11 - MODAL FREQUENCY/RANDOM RESPONSE ANALYSIS-APR. I986 $ 

ALL $ 

GOD=SAVE/GMD=SAVE/LAMA=APPEND/PH I A=APPEND $ 

//*MPY*/CARDNO/0/0 $ 

GE0Ml,GEOM2,/GPL,EQEXIN,GPDT,C$TM,BGPDT,SIL/S,N,LUSET/ 
N0GPDT/MINUS1=~1 $ 

BGPDT,SIL/BGPDP,SIP/LUSET/S,N,LUSEP $ 

GE0M2.EQEXIN/ECT $ 

PCDB//*PRES*////JUMPPLOT $ 

PLTSETX, PLTPAR, GPSETS, ELSETS/JUMPPLOT $ 

Pl.JUMPPLOT $ 

PCDB, EQEX I N , ECT/PLTSETX , PLTPAR , GPSETS , ELSETS/S , N , NS I L/ 
S.N.JUMPPLOT $ 

PLTSETX// $ 

//ftMPYft/PLTFLG/1/1 $ 

//*MPY*/PFILE/0/0 $ 

P1,JUMPPL0T $ 

PLTPAR, GPSETS, ELSETS.CASECC.BGPDT, EQEX I N,S I L, ,ECT, ,/PLOTXl/ 
NSIL/LUSET/S,N,JUMPPLOT/S t N,PLTFLG/S,N,PF ILE $ 

PL0TX1// $ 

PI $ 

GE0M3 , EQEX I N , GE0M2/ , GPTT/NOGRAV $ 

ECT,EPT,BGPDT,SIL,GPTT,CSTM/EST,GEI,GPECT,,/ 
LUSET/S , N , NOS I MP/l/S , N , NOGENL/S , N , GENEL $ 

ERR0R7,N0SSMP $ 



2.11-1 (05/30/86) 



DISPLACEMENT RIGID FORMAIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 11 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

22 PURGE OGPST/GENEL $ 

23 PARAM //*ADD*/KIOKGGX/1/0 $ 
2k PARAM //AADDVNOMGG/1/0 $ 

25 EMG EST,CSTM,MPT,DIT,GE0M2,/KELM,KDICT,MELM,MDICT,,,/S ( N,N0KGGX/ 

S,N,NOMGG////C,Y,COUPMASS/C,Y,CPBAR/ 

C,Y,CPR0D/C,Y,CPQUAD1/C,Y,CPQUAD2/C,Y,CPTRIA1/C,Y,CPTRIA2/ 
C,Y,CPTUBE/C,Y t CPQDPLT/C,Y,CPTRPLT/C,Y,CPTRBSC/ 
V,Y,VOLUME/V,Y, SURFACE $ 

26 PURGE KGGX.GPST/NOKGGX $ 

27 COND JMPKGGX.NOKGGX $ 

28 EMA GPECT,KDICT,KELM/KGGX,GP$T $ 

29 LABEL JMPKGGX $ 

30 COND ERROR l.NOMGG $ 

31 EMA GPECT,MDICT,MELM/MGG,/-1/C,Y,WTMASS=1.0 $ 

32 COND LGPWG.GRDPNT $ 

33 GPWG BGPDP,CSTM,EQEXIN,MGG/0GPWG/V,Y,GRDPNT=-1/C,Y,WTMASS $ 

34 OFP QGPWG,„,,//S,N,CARDNQ $ 

35 LABEL LGPWG $ 

36 EQUIV KGGX.KGG/NOGENL $ 

37 COND LBL11,N0GENL $ 

38 SMA3 GEI.KGGX/KGG/LUSET/NOGENL/NOSIMP $ 

39 LABEL LBLU $ 

kO PARAM //*MPY*/NSK IP/0/0 $ 

1*1 GPU CASECC,GEOMit,EQEXIN,GPDT,BGPDT,CSTM,GPST/RG,,USET,ASET/ 

LUSET/S,N,MPCF1/S,N,MPCF2/S,N,SINGLE/S,N,0MIT/S,N,REACT/ 
S,N,NSKIP/S,N,REPEAT/S,N,NOSET/S,N,N0L/S,N,NOA/C,Y,ASET0UT/ 
S.Y.AUTOSPC $ 

42 PARAM //*AND*/NOSR/REACT/S INGLE $ 

43 PURGE GM,GMD/MPCF1/G0,G0D/0MIT/KFS,PSF/SINGLE/QPC/N0SR/KLR,KRR,MLR, 

MRR,DM,MR/REACT/MDD/MODACC $ 



2.11-2 (05/30/86) 



MODAL FREQUENCY AND RANDOM RESPONSE 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 11 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

kk COND LBL4.GENEL $ 

**5 PARAM //*EQ*/GPSPFLG/AUTOSPC/0 $ 

it6 COND LBLlt.GPSPFLG $ 

kl GPSP GPL,GPST,USET,$IL/0GPST/S,N,NOGPST $ 

48 OFP 0GPST,,,,,//S,N,CARDN0 $ 

k3 LABEL LBLi* $ 

50 EQU1V KGG,KNN/MPCF1/MGG,MNN/MPCF1 $ 

51 COND LBL2.MPCF1 $ 

52 MCE1 USET.RG/GM $ 

53 MCE2 USET,GM,KGG,MGG,,/KNN,MNN,, $ 
5k LABEL LBL2 $ 

55 EQUIV KNN.KFF/SINGLE/MNN.MFF/SINGLE $ 

56 COND LBL3, SINGLE $ 

57 SCE1 USET,KNN,MNN,,/KFF,KFS,,MFF,, $ 

58 LABEL LBL3 $ 

59 EQUIV KFF.KAA/OMIT $ 

60 EQUIV MFF.MAA/OMIT $ 

61 COND LBL5.0MIT $ 

62 SMP1 USET,KFF,,,/GO,KAA,KOO,LOO,,,,, $ 

63 SMP2 USET,G0,MFF/MAA $ 
6it LABEL LBL5 $ 

65 EQUIV KAA,KLL/REACT $ 

66 COND LBL6, REACT $ 

67 RBMG1 USET,KAA,MAA/KLL,KLR,KRR,MLL,MLR,MRR $ 

68 JUMP LBL8 $ 

69 LABEL LBL6 $ 



2.11-3 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 11 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



70 COND LBL7,M0DACC $ 

71 LABEL LBL8 $ 

72 RBMG2 KLL/LLL $ 

73 COND LBL7.REACT $ 

Ik RBMG3 LLL.KLR.KRR/DM $ 

75 RBMG4 DM,MLL,MLR,MRR/MR $ 

76 LABEL LBL7 $ 

77 DPD DYNAMICS, GPL, S I L, USET/GPLD.S I LD,USETD,TFPOOL,DLT, PSDL,FRL, , , 

EED,EQDYN/LUSET/S,N,LUSETD/NOTFL/S,N,NODLT/S,N,NOPSDL/ 
S,N,N0FRL/NONLFT/NOTRL/S,N,N0EED//S,N,NOUE $ 

78 COND ERR0R2.N0EED $ 

79 PURGE UEVF/NOUE $ 

80 EQUIV G0,G0D/NOUE/GM,GMD/N0UE $ 

81 PARAM //*MPYA/NE!GV/1/-1 $ 

82 READ KAA,MAA,MR,DM, EED.USET, CASECC/LAMA,PH I A.MI ,0E t GS/*M0DES*/S,N, 

NEIGV $ 

83 OFP 0EIGS,,,,,//S,N,CARDN0 $ 
8^ COND ERRORS, NEIGV $ 

85 OFP LAMA,,,,,//S,N,CARDN0 $ 

86 PARAM //*ADD*/NEVER/l/0 $ 

87 PARAM //*MPY*/REPEATF/1/-1 $ 

88 LABEL LBL13 $ 

89 PURGE 0UHVC1 ,0UHVC2,XYPLTFA, 0PPC1 .0QPC1 ,0UPVC1 ,0ESC1 ,0EFC1 .0PPC2, 

0QPC2,0UPVC2,0ESC2,0EFC2,XYPLTF,PSDF,AUT0,XYPLTR,K2PP,M2PP, 
B2PP,K2DD,M2DD,B2DD,0PPCA, I QP1 , I PH I PI , I ESI , IEF1.0PPCB, IQP2, 
IPHIP2, IES2, IEF2,ZQPC2,ZUPVC2,ZESC2,ZEFC2,ZQPC1,ZUPVC1,ZESC1, 
ZEFC1/NEVER $ 

90 CASE CASECC,PSDL/CASEXX/*FREQ*/S,N,REPEATF/S,N,N0LO0P $ 

91 MTRXIN CASEXX,MATPO0L,EQDYN,,TFPO0L/K2PP,M2PP,B2PP/LUSETD/S,N, 

N0K2PP/S,N,N0M2PP/S,N,N0B2PP $ 



2.11-4 (05/30/86) 



MODAL FREQUENCY AND RANDOM RESPONSE 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 11 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



92 PURGE K2DD/N0K2PP/M2DD/N0M2PP/B2DD/N0B2PP $ 

93 PARAM //*AND*/MDEMA/N0UE/N0M2PP $ 

Sk EQUIV M2PP,M2DD/N0A/B2PP,B2DD/N0A/K2PP,K2DD/N0A/MAA,MDD/MDEMA $ 

95 GKAD USETD,GM,G0,,,MAA,,K2PP,M2PP,B2PP/,,MDD,GMD, 

GOD , K2DD , M2DD , B2DD/*FREQRESP*/*D I SP*/*M0DAL ft/0 .0/ 
.0/0 .0/N0K2PP/N0M2PP/N0B2PP/ 
MPCF 1 /S I NG LE/OM I T/NOUE/- 1 /- 1 / 
1/V,Y,M0DACC = -1 $ 

96 GKAM USETD,PHIA,MI , LAMA.D IT,M2DD,B2DD,K2DD,CASEXX/MHH,BHH ,KHH,PH IDH/ 

NOUE/C,Y,LMODES=0/C,Y,LFREQ=0.0/C,Y,HFREQ=-1.0/ 
N0M2PP/N0B2PP/N0K2PP/S,N,NONCUP/S,N,FMODE $ 

97 COND ERRORS, NOFRL $ 

98 COND ERRORS, NODLT $ 

99 FRRD CASEXX , USETD , DLT, FRL , GMD , GOD , KHH , BHH ,MHH , PH I DH , D I T/UHVF , PSF , 

PDF , PPF/ftD I SP*/*MODAL*/LUSETD/MPCF 1 /S I NGLE/ 
OMIT/NONCUP/S.N.FRQSET $ 

100 EQUIV PPF.PDF/NOSET $ 

101 VDR CASEXX,EQDYN,USETD,UHVF,PPF,XYCDB,/0UHVC1,/*FREQRESP*/ 

*MODAL */S , N , N0S0RT2/S , N , NOH/S , N , NOP/FMODE $ 

102 COND LBL16.N0H $ 

103 COND LBL16A.N0SORT2 $ 

101* SDR3 0UHVC1,,,,,/0UHVC2,,,,, $ 

105 OFP OUHVC2,,,,,//S,N,CARDN0 $ 

106 XYTRAN XYCDB,0UHVC2,,,,/XYPLTFA/*FREQ*/*HSET*/S,N,PFILE/ 

S,N,CARDNO $ 

107 XYPLOT XYPLTFA // $ 

108 JUMP LBL16 $ 

109 LABEL LBL16A $ 

110 OFP 0UHVC1,,,,,//S,N,CARDN0 $ 

111 LABEL LBL16 $ 

112 COND LBL1M0P $ 



2.11-5 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 11 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

113 PARAM //*N0T*/NOMOD/V,Y,M0DACC $ 

114 COND LBDDRM.MODACC $ 

115 DDR1 UHVF.PH1DH/UDV1F $ 

116 DDR2 USETD,UDV1F,PDF,K2DD,B2DD,MDD,PPF,LLL,DM/UDV2F,UEVF,PAF/ 

*FREQRESPft/NOUE/REACT/FRQ$ET $ 

117 EQUIV UDV2F.UDV1F/N0M0D $ 

118 EQUIV UDV1F.UPVC/N0A $ 

119 COND LBLNOA.NOA $ 

120 SDR1 USETD,,UDV1F,,,G0D,GMD,PSF,KFS,,/UPVC,,QPC/1/*DYNAMICS* $ 

121 LABEL LBLNOA $ 

122 SDR2 CASEXX,CSTM,MPT,DIT,EQDYN,SILD, , ,BGPDP,PPF ,QPC,UPVC, EST, 

XYCDB,PPF/0PPC1,0QPC1,0UPVC1,0ESC1,DEFC1,PUGV/AFREQA/ 
S,N,N0S0RT2 $ 

123 COND LBL18.N0S0RT2 $ 

124 SDR3 OPPCl,0QPCl,OUPVCl,OESCl,0EFCl,/0PPC2,OQPC2,OUPVC2,OESC2, 

0EFC2, $ 

125 JUMP P2A $ 

126 LABEL LBDDRM $ 

127 SDR1 USETD,,PHIDH,,,G0D,GMD,,KFS,,/PHIPH,,QPH/1/*DYNAMICS* $ 

128 SDR2 CASEXX,CSTM,MPT,DIT,EQDYN,SILD,,,,LAMA,QPH,PHIPH,EST,XYCDB,/ 

, IQP1.IPHIP1JES1, IEF1,/*MMREIG*/S,N,N0S0RT2 $ 

129 SDR2 CASEXX,,,,EQDYN,SILD,,,,PPF,,,,XYCDB,PPF/OPPCA,,,,,/*FREQ* $ 

130 EQUIV 0PPCA.0PPC1/M0DACC $ 

131 COND LBLS0RT.NOSORT2 $ 

132 SDR3 |QP1,|PHIP1,IES1,IEF1,0PPCA,/IQP2,IPHIP2,IES2,IEF2,0PPC8, $ 

133 EQUIV OPPCB,0PPC2/MODACC $ 

134 DDRMM CASEXX,UHVF,PPF, IPHIP2, IQP2, I ES2, I EF2,XYCDB,EST,MPT,D IT/ 

ZUPVC2,ZQPC2,ZESC2,ZEFC2, $ 

135 EQUIV ZUPVC2,0UPVC2/M0DACC/ZQPC2,0QPC2/M0DACC/ZESC2,0ESC2/M0DACC/ 

ZEFC2,0EFC2/M0DACC $ 



2.11-6 (05/30/86) 



MODAL FREQUENCY AND RANDOM RESPONSE 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 11 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



136 JUMP P2A $ 

137 LABEL LBLSORT $ 

138 DDRMM CASEXX,UHVF,PPF,IPHIP1,IQP1,IES1,IEF1,,EST,MPT,DIT/ 

ZUPVC1,ZQPC1,ZESC1,ZEFC1, $ 

139 EQUIV ZUPVC1,OUPVC1/MODACC/ZQPC1,OQPC1/MODACC/ZESC1,OESC1/MODACC/ 

ZEFC1.0EFC1/MODACC $ 

140 JUMP LBL18 $ 

141 LABEL P2A $ 

142 OFP 0PPC2,0QPC2,0UPVC2,0EFC2,0ESC2,//S,N,0ARDN0 $ 

143 XYTRAN XYCDB,0PPC2,OQPC2,0UPVC2,0ESC2,OEFC2/XYPLTF/*FREQ*/*PSET*/ 

S,N,PFILE/S,N,CARDNO $ 

144 XYPLOT XYPLTF// $ 

145 COND LBL21.JUMPPL0T $ 

146 PLOT PLTPAR,GPSETS,EL$ETS,CASEXX,BGPDT,EQEXIN,SIP,,PUGV, t / 

PL0TX2/NS I L/LUSEP/JUMPPLOT/PLTFLG/S,N,PF I LE $ 

147 PRTMSG PL0TX2// $ 

148 LABEL LBL21 $ 

149 COND LBL14.N0PSDL $ 

150 RANDOM XYCDB,DIT,PSDL,OUPVC2,0PPC2,OQPC2,0ESC2,OEFC2,CASEXX/PSDF,AUT0/ 

S.N.NORD $ 

151 COND LBL14.N0RD $ 

152 XYTRAN XYCDB,PSDF,AUTO,,,/XYPLTR/*RAND*/*PSET*/S,N,PFILE/ 

S.N.CARDNO $ 

153 XYPLOT XYPLTR// $ 

154 JUMP LBL14 $ 

155 LABEL LBL18 $ 

156 OFP OUPVC1,OPPC1,OQPC1,OEFC1,OESC1,//S,N,CARDNO $ 

157 LABEL LBL14 $ 

158 COND FINIS.REPEATF $ 



2.11-7 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 11 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

159 REPT LBL13,100 $ 

160 PRTPARM //-3/*MDLFRRDA $ 

161 JUMP FINIS $ 

162 LABEL ERR0R2 $ 

163 PRTPARM //-2/*MDLFRRD* $ 
l6*t LABEL ERR0R1 $ 

165 PRTPARM //-1/*MDLFRRD* $ 

166 LABEL ERRORS $ 

167 PRTPARM //-V*MDLFRRD* $ 

168 LABEL ERRORS $ 

169 PRTPARM //-5/*MDLFRRD* $ 

170 LABEL ERR0R6 $ 

171 PRTPARM //-6/AMDLFRRD* $ 

172 LABEL ERR0R7 $ 

173 PRTPARM //-7/*MDLFRRD* $ 
]Jh LABEL FINIS $ 

175 PURGE DUMMY/MINUS1 $ 

176 END $ 



2.11-8 (05/30/86) 



MODAL FREQUENCY AND RANDOM RESPONSE 

2.11.2 Description of Important DMAP Operations for Modal Frequency and Random Response 

5. GP1 generates coordinate system transformation matrices, tables of grid point location's, and 
tables relating the internal and external grid point numbers. 

6. PLTTRAN modifies special scalar grid points in the BGPDT and SIL tables. 

7. GP2 generates Element Connection Table with internal indices. 

10. Go to DMAP No. 18 if there are no structure plot requests. 

11. PLTSET transforms user input into a form used to drive the structure plotter. 

12. PRTMSG prints error messages associated with the structure plotter. 

15. Go to DMAP No. 18 if no undeformed structure plots are requested. 

16. PL0T generates all requested undeformed structure plots. 

17. PRTMSG prints plotter data and engineering data for each undeformed plot generated. 

19. GP3 generates Grid Point Temperature Table. 

20. TA1 generates element tables for use in matrix assembly and stress recovery. 

21. Go to DMAP No. 172 and print Error Message No. 7 if there are no structural elements. 

25. EMG generates structural element stiffness and mass matrix tables and dictionaries for later 
assembly by the EMA module, 

27. Go to DMAP No. 29 if no stiffness matrix is to be assembled. 

28. EMA assembles stiffness matrix [K* ] and Grid Point Singularity Table. 

yy 

30. Go to DMAP No. 164 and print Error Message No. 1 if no mass matrix is to be assembled. 

31. EMA assembles mass matrix [M ]. 

y y 

32. Go to DMAP No. 35 if no weight and balance information is requested. 

33. GPWG generates weight and balance information. 

34. 0FP formats the weight and balance information prepared by GPWG and places it on the system 
output file for printing. 

36. Equivalence [K x ] to [K 1 if no general elements exist. 

gg gg 

37. Go to DMAP No. 39 if no general elements exist. 

38. SMA3 adds general elements to [K* ] to obtain stiffness matrix [K ]. 

yy yy 

41. GP4 generates flags defining members of various displacement sets (USET) and forms 

multipoint constraint equations [R ] {u } - 0. 

y y 

44. Go to DMAP No. 49 if general elements are present. 

46. Go to DMAP No. 49 if no potential grid point singularities exist. 

47. GPSP generates a table of potential grid point singularities. 

48. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 



2.11-9 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



50. 
51. 
52. 

53. 



Equivalence [K ] to [K ] and [Ml to [Ml if no multipoint constraints exist. 

99 "" 99 
Go to DMAP No. 54 if no multipoint constraints exist. 

MCE1 partitions multipoint constraint equations [R ] = [R m | R n ] and solves for 

multipoint constraint transformation matrix [G m ] = -C R m ] [ R n l- 

MCE2 partitions stiffness and mass matrices 





K i K 


L" K nJ = 


nn . nm 


99 


K l K 




mn mm 



and 



V - 



M I M 

_nn . nm 

M 1 M 
mn mm 



and performs matrix reductions 

[IL,] - [M„J + [Gl][M mn ] ? LM^JtGj ? [G^[M.][GJ . 



nn- 



nn- 



55. 
56. 
57. 



Equivalence [K^] to [K ff ] and [M np ] to [M ff ] if no single-point constraints exist. 
Go to DMAP No. 58 if no single-point constraints exist. 
SCE1 partitions out single-point constraints 



["J - 



^ff_]_ K fs 



and 



^W = 



M sf " M ss 



59. 
60. 
61. 
62, 



Equivalence [K«] to [K ] if no omitted coordinates exist. 
tt aa 

Equivalence [M ff ] to [M aa ] if no omitted coordinates exist. 
Go to DMAP No. 64 if no omitted coordinates exist. 
SMP1 partitions constrained stiffness matrix 



[K ff ] - 



^aa_j_ K ao 

K oa ' K oo 



,-lr 



63. 



solves for transformation matrix [G Q ] = -C K 00 J t K oa ] 

_ T 

and performs matrix reduction [K fla ] = [K fta ] + [K oa ][G Q ] . 
SMP2 partitions constrained mass matrix 



[M ff ] = 



M i M 
aa > ao 

M I M„ rt 
oa oo 



2.11-10 (05/30/86) 



MODAL FREQUENCY AND RANDOM RESPONSE 



and performs matrix reduction 



P1J = [M a J + [V? 1[G 1 + [Gj][H 1 + [G]j[M 1[G I 
aa aa oa o u o oa o L oo o 



65. Equivalence [K ] to [K ] if no free-body supports exist. 

66. Go to DMAP No. 69 if no free-body supports exist. 

67. RBMG1 partitions out free-body supports 





K„„ 1 K 






M 1 M 


[K ] = . 
L aa J 


_ K rSL ' K rr_ 


and 


»>J - 


JLSL 1 JX 

\ t ' M rr_ 



68. Go to DMAP No. 71. 

70. Go to DMAP No. 76 if there is no request for mode acceleration data recovery. 

72. RBMG2 decomposes constrained stiffness matrix [K M ] = [L.JCU ..]. 

73. Go to DMAP No. 76 if no free-body supports exist. 

74. RBMG3 forms rigid body transformation matrix 

[D] ¦ -LV^V- 

calculates rigid body check matrix 



[X] = [K rr ] + [K; r ][D] 



and calculates rigid body error ratio 



K i 

rr 



75. RBMG4 forms rigid body mass matrix 



[m r ] = [M rr ] + [Mj r ][D] + [D T ]LM Ar ] + [D T ][M U ][D]. 

77. DPD generates flags defining members of various displacement sets used in dynamic analysis 
(USETD), tables relating the internal and external grid point numbers (GPLD), including 
extra points introduced for dynamic analysis (SILD) , and prepares Transfer Function Pool 
(TFP00L), Dynamic Loads Table (DLT), Power Spectral Density List (PSDL), Frequency Response 
List (FRL)) and Eigenvalue Extraction Data (EED). 

78. Go to DMAP No. 162 and print Error Message No. 2 if there is no Eigenvalue Extraction Data. 

80. Equivalence [G 1 to I G ] and [G ] to [G ] if there are no extra points introduced 
^ o o m m r 

for dynamic analysis. 

82. READ extracts real eigenvalues and eigenvectors from the equation 

[K - AM J{u J = , 
L aa aa J a * 

calculates rigid body modes by finding a square matrix [<t> ] such that 



2.11-11 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



[m Q ] = L>; ][m r ][* r0 ] 



is diagonal and normalized, computes rigid body eigenvectors 



^ = 



T ro 
Vo 



calculates modal mass matrix 



[m] = [^][M aa ][* a ] 
and normalizes eigenvectors according to one of the following user requests: 

1) Unit value of a selected component 

2) Unit value of the largest component 

3) Unit value of the generalized mass. 

83. 0FP formats the summary of eigenvalue extraction information (0EIGS) prepared by READ and 
places it on the system output file for printing. 

84. Go to DMAP No. 166 and print Error Message No. 4 if no eigenvalues were found. 

85. 0FP formats the eigenvalues (LAMA) prepared by READ and places them on the system output 
file for printing. 



88. Beginning of loop for additional sets of direct input matrices. 

90. CASE extracts the appropriate record from CASECC corresponding to the current loop and 
copies it into CASEXX. 

2 2 

91. MTRXIN selects the direct input matrices for the current loop, IX p ]> [ M p J and 



94. 



PP 
Equivalence [M* ] to [M^], [BJj ] to [B^] and [KJj ] to [K^] if no constraints 



are applied, and [M ] to [M, .] if there are no direct input mass matrices and no extra 



aa- 



'dd 



95. 



96. 



points introduced for dynamic analysis. 

2 2 2 
GKAD applies constraints to direct input matrices [K ], [Ml and [B ], forming 

[Kjj d ], [M^ d ] and [B^]. 

GKAM assembles stiffness, mass and damping matrices in modal coordinates for use in 
Frequency Response: 

u hh ] = [ki + [?; h ][ic2 d ][, dh ] , 



t\J = [m] + [*IJlmL][*hJ 



'hh 



dh JL "dd JLT dh- 



and [B hh ] = [b] + E*J h ^ B dd^dh ] 



where 



m. = modal masses 



m. 



1 Zir f i gt^) 



2.11-12 (05/30/86) 



MODAL FREQUENCY AND RANDOM RESPONSE 

2 2 

and k. = m- 4ir f . . 

ill i 

Direct input matrices may be complex. 

97. Go to DMAP No. 168 and print Error Message No. 5 if there is no Frequency Response List. 

98. Go to DMAP No. 170 and print Error Message No. 6 if there is no Dynamic Loads Table. 

99. FRRD forms the dynamic load vectors {P.} and solves for the displacements using the 
following equation 

[*V 2+ iB hh" + W = tF v- 

100. Equivalence {P } to {P.} if no constraints are applied. 

101. VDR prepares displacements (0UHVC1), sorted by frequency, for output using only the extra 
points introduced for dynamic analysis and modal coordinates (solution points). 

102. Go to DMAP No. Ill if there is no output request for solution points. 

103. Go to DMAP No. 109 if there is no output request for solution points sorted by extra point 
or mode number. 

104. SDR3 sorts the solution point displacements by extra point or mode number. 

105. 0FP formats the requested solution point displacements prepared by SDR3 and places them on 
the system output file for printing. 

106. XYTRAN prepares the input for requested X-Y plots of the solution point displacements vs. 
frequency. 

107. XYPL0T prepares the requested X-Y plots of the solution point displacements vs. frequency. 

108. Go to DMAP No. 111. 

110. 0FP formats the requested solution point displacements prepared by VDR and places them on 
the system output file for printing. 

112. Go to DMAP No. 157 if there is no output request involving dependent degrees of freedom or 
forces and stresses. 

114. Go to DMAP No. 126 if the mode acceleration technique is not requested. 

115. DDR1 transforms the solution vector of displacements from modal to physical coordinates 

{u d > = f> dh ]<u h } . 

116. DDR2 calculates an improved displacement vector using the mode acceleration technique. 

117. Equivalence {u.} to the improved displacement vector. (Flag N0M0D is negative since the 
mode acceleration technique is requested). 

118. Equivalence lu^} to {u } if no constraints are applied. 

119. Go to DMAP No. 121 if no constraints are applied. 



2.11-13 (05/30/86) 



DISPLACEMENT RIGID FORMATS 
120. SDR1 recovers dependent components of displacements 

( "o ) 
I u s / 

and recovers single-point forces of constraint (q } = "^ P s^ + ^fs^ * u f^ * 

122. SDR2 calculates element forces (0EFC1) and stresses (0ESC1) and prepares load vectors 
(0PPC1), displacement vectors (0UPVC1) and single-point forces of constraint (0QPC1) for 
output and translation components of the displacement vector (PUGV), sorted by frequency. 

123. Go to DMAP No. 155 if there are no requests for output sorted by point number or element 
number. 

124. SDR3 prepares the requested output sorted by point number of element number. 

125. Go to DMAP No. 141. 

127. SDR1 recovers dependent components of eigenvectors 

u > = [gJ] u n > , (M = { *f + v 



^•f + U I rl 

— -> ~ U + U } , {<(>}= [G ] {* + U } , 

i , ( xv n e * w m L m J T n e * 



<t> + u 



= {* + u } = {d> } 
w g e J xv p J 



and recovers single-point forces of constraint {q } = [K f ] {<fy}. 

128. SDR2 calculates element forces (IEF1) and stresses (IES1) and prepares eigenvectors (IPHIP1) 
and single-point forces of constraint (IQP1) for output sorted by frequency. 

129. SDR2 prepares load vectors for output (0PPCA) sorted by frequency. 

130. Equivalence 0PPCA to 0PPC1. (Flag M0DACC is negative since the mode acceleration technique 
is not requested). 

131. Go to DMAP No. 137 if there are no requests for output sorted by point number or element 
number. 

132. SDR3 prepares the requested output sorted by point number or element number. 



2.11-14 (05/30/86) 



MODAL FREQUENCY AND RANDOM RESPONSE 

133. Equivalence 0PPCB to 0PPC2. (Flag M0DACC is negative since the mode acceleration technique 
is not requested). 

134. DDRMM prepares a subset of the element forces (ZEFC2) and stresses (ZESC2), and displacement 
vectors (ZUPVC2) and single-point forces of constraint (ZQPC2) for output sorted by point 
number or element number. 

135. Equivalence ZUPVC2 to 0UPVC2, ZQPC2 to 0QPC2, ZESC2 to 0ESC2, and ZEFC2 to 0EFC2. (Flag 
M0DACC is negative since the mode acceleration technique is not requested). 

136. Go to DMAP No. 141. 

138. DDRMM prepares a subset of the element forces (ZEFC1) and stresses (ZESC1), and displacement 
vectors (ZUPVC1) and single-point forces of constraint (ZQPC1) for output sorted by 
frequency. 

139. Equivalence ZUPVC1 to 0UPVC1, ZQPC1 to 0QPC1, ZESC1 to 0ESC1, and ZEFC1 to 0EFC1. (Flag 
M0DACC is negative since the mode acceleration technique is not requested). 

140. Go to DMAP No. 155. 

142. 0FP formats the requested output prepared by SDR3 (with mode acceleration) or DDRMM (no mode 
acceleration) and places it on the system output file for printing. 

143. XYTRAN prepares the input for requested X-Y plots. 

144. XYPL0T prepares the requested X-Y plots of displacements, forces, stresses, loads and 
single-point forces of constraint vs. frequency. 

145. Go to DMAP No. 148 if no deformed structure plots are requested. 

146. PL0T generates all requested deformed structure and contour plots. 

147. PRTMSG prints plotter data, engineering data, and contour data for each deformed plot 
generated. 

149. Go to DMAP No. 157 if no power spectral density functions or autocorrelation functions are 
requested. 

150. RAND0M calculates power spectral density functions (PSDF) and autocorrelation functions 
(AUT0) using the previously calculated frequency response. 

151. Go to DMAP No. 157 if no X-Y plots of RAND0M calculations are requested. 

152. XYTRAN prepares the input for requested X-Y plots of the RAND0M output. 

153. XYPL0T prepares the requested X-Y plots of autocorrelation functions and power spectral 
density functions. 

154. Go to DMAP No. 157. 

156. 0FP formats the frequency response output requests prepared by SDR2 (with mode acceleration) 
or DDRMM (no mode acceleration) and places them on the system output file for printing. . 

158. Go to DMAP No. 174 and make normal exit if no additional sets of direct input matrices need 
to be processed. 

159. Go to DMAP No. 88 if additional sets of direct input matrices need to be processed. 

160. Print Error Message No. 3 and terminate execution. 

161. Go to DMAP No. 174 and make normal exit. 



.2.11-15 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

163. Print Error Message No. 2 and terminate execution. 

165. Print Error Message No. 1 and terminate execution. 

167. Print Error Message No. 4 and terminate execution. 

169. Print Error Message No. 5 and terminate execution. 

171. Print Error Message No. 6 and terminate execution. 

173. Print Error Message No. 7 and terminate execution. 



2.11-16 (05/30/86) 



MODAL FREQUENCY AND RANDOM RESPONSE 

2.11.3 Output for Modal Frequency and Random Response 

The Eigenvalue Summary Table and the Eigenvalue Analysis Summary, as described under 'Normal 
Modes Analysis (see Section 2.3.3), are automatically printed. All real eigenvalues extracted are 
included even though not all are used in the modal formulation. 

Output that may be requested is the same as that described under Direct Frequency and Random | 
Response. Output for S0LUTI0N points will have the modal coordinates identified by the mode number 
determined in real eigenvalue analysis. 

The eigenvectors used in the modal formulation may be obtained for the S0LUTI0N points by 
using the ALTER feature to print the matrix of eigenvectors following the execution of READ. The 
eigenvectors for all points in the model may be obtained by running the problem initially on the 
Normal Modes Analysis rigid format or by making a modified restart using the Normal Modes Analysis 

rigid format. 

2.11.4 Case Control Deck for Modal Frequency and Random Response 

The following items related to subcase definition and data selection must be considered in 
addition to the list presented with Direct Frequency and Random Response: 

1. METH0D must appear above the subcase level to select an EIGR card that exists in the 
Bulk Data Deck. 

2. All of the eigenvectors used in the modal formulation must be determined in a single 
execution. 

3. An SPC set must be selected above the subcase level unless the model is a free body or 
all constraints are specified on GRID cards, Scalar Connection cards or with General 
Elements. 

4. SDAMPING must be used to select a TABDMP1 table if structural damping is desired. 

2.11.5 Parameters for Modal Frequency and Random Response 

The following parameters are used in Modal Frequency and Random Response: 

1. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2. AUT0SPC - reserved for future optional use. The default value is -1. 



2.11-17 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

3. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTRIA2, CPTUBE, CPQDPLT, CPTRPLT, 
CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

4. GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. All fluid related masses are ignored. 

5. LFREQ and HFREQ - required, unless parameter LM0DES is used. The real values of these 
parameters give the cyclic frequency range (LFREQ is the lower limit and HFREQ is the 
upper limit) of the modes to be used in the modal formulation. To use this option, 
parameter LM0DES must be set to 0. 

6. LM0DES - required, unless parameters LFREQ and HFREQ are used. The integer value of 
this parameter' is the number of lowest modes to be used in the modal formulation. 

7. M0DACC - optional. A positive integer value of this parameter causes the Dynamic Data 
Recovery module to use the mode acceleration method. Not recommended for use in 
hydroelastic problems. 

8. SURFACE - optional. The computations of the external surface areas for the 
two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

9 - V0LUME - optional. The volume computations for the two-dimensional and 

three-dimensional elements are activated by this parameter when they are generated in 
the EMG module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details. 
10 - WTMASS - optional. The terms of the structural mass matrix are multiplied by the real 
value of this parameter when they are generated in the EMA module. Not recommended for 
use in hydroelastic problems. 

2.11.6 Optional Diagnostic Output for FEER 

Special detailed information obtained by requesting DIAG 16 in the Executive Control Deck is 
the same as that described under Normal Modes Analysis {see Section 2.3.6)— 



2.11-18 (05/30/86) 



MODAL FREQUENCY AND RANDOM RESPONSE 

2.11.7 The APPEND Feature 

The APPEND feature can be used for real eigenvalue extraction in Modal Frequency and 'Random 
Response. See Section 2.3.7 for details. 

2.11.8 Rigid Format Error Messages from Modal Frequency and Random Response 

The following fatal errors are detected by the Modal Frequency and Random Response rigid 
format. The text for each error message is given below in capital letters and is followed by 
additional explanatory material , including suggestions for remedial action. 



M0DAL FREQUENCY AND RAND0M RESPONSE ERR0R MESSAGE N0. 1 - MASS MATRIX REQUIRED F0R M0DAL 
F0RMULATI0N. 

The mass matrix is null because either no structural elements were defined with Connection cards, 
nonstructural mass was not defined on a Property card, or the density was not defined on a Material 
card. 

M0DAL FREQUENCY AND RANDOM RESP0NSE ERR0R MESSAGE N0. 2 - EIGENVALUE EXTRACTION DATA REQUIRED F0R 
REAL EIGENVALUE ANALYSIS. 

Eigenvalue extraction data must be supplied on an EIGR card in the Bulk Data Deck and METH0D in the 
Case Control Deck must select an EIGR set. 

M0DAL FREQUENCY AND RAND0M RESP0NSE ERR0R MESSAGE N0. 3 - ATTEMPT T0 EXECUTE M0RE THAN 100 L00PS. 

An attempt has been made to use more than 100 sets of direct input matrices. This number can be 
increased by ALTERing the REPT instruction following the last 0FP instruction. 

M0DAL FREQUENCY AND RAND0M RESP0NSE ERR0R MESSAGE N0. 4 - REAL EIGENVALUES REQUIRED F0R M0DAL 
F0RMULATI0N. 

No real eigenvalues were found in the frequency range specified by the user. 

M0DAL FREQUENCY AND RAND0M RESP0NSE ERR0R MESSAGE N0. 5 - FREQUENCY RESP0NSE LIST REQUIRED F0R 
FREQUENCY RESP0NSE CALCULATIONS. 

Frequencies to be used in the solution of frequency response problems must be supplied on a FREQ, 
FREQ1 or FREQ2 card in the Bulk Data Deck and FREQ in the Case Control Deck must select a frequency 
response set. 

MODAL FREQUENCY AND RAND0M RESPONSE ERR0R MESSAGE N0. 6 - DYNAMIC L0ADS TABLE REQUIRED F0R 
FREQUENCY RESPONSE CALCULATIONS. 

Dynamic loads to be used in the solution of frequency response problems must be specified on an 
RL0AD1 or RL0AD2 card in the Bulk Data Deck and DL0AD in the Case Control Deck must select a 
dynamic load set. 

M0DAL FREQUENCY AND RAND0M RESPONSE ERR0R MESSAGE N0. 7 - NO STRUCTURAL ELEMENTS HAVE BEEN DEFINED. 
No structural elements have been defined with Connection cards. 

2.11-19 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



2.11-20 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.12 MODAL TRANSIENT RESPONSE 

2.12.1 DMAP Sequence for Modal Transient Response 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 12 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

OPTIONS IN EFFECT GO ERR-2 LIST NODECK NOREF NOOSCAR 

1 BEGIN D1SP 12 - MODAL TRANSIENT RESPONSE ANALYSIS - APR. I986 $ 

2 PRECHK ALL $ 

3 FILE LAMA=APPEND/PHIA=APPEND/UHVT=APPEND/TOL=APPEND $ 
h PARAM //*MPY*/CARDN0/O/0 $ 

5 GP1 GE0M1,GE0M2,/GPL,EQEXIN,GPDT,CSTM,BGPDT,SIL/S,N,LUSET/ 

N0GPDT/MINUS1=-1 $ 

6 PLTTRAN BGPDT,SIL/BGPDP,$IP/LUSET/S,N,LUSEP $ 

7 GP2 GE0M2.EQEXIN/ECT $ 

8 PARAML PCDB//*PRES*////JUMPPLOT $ 

9 PURGE PLTSETX.PLTPAR.GPSETS.ELSETS/JUMPPLOT $ 

10 COND Pl.JUMPPLOT $ 

11 PLTSET PCDB,EQEXIN,ECT/PLTSETX,PLTPAR,GPSETS,ELSETS/S,N,NSIL/ 

S,N,JUMPPLOT $ 

12 PRTMSG PLTSETX// $ 

13 PARAM //*MPY*/PLTFLG/1/1 $ 
\k PARAM //*MPY*/PFILE/0/0 $ 

15 COND Pl.JUMPPLOT $ 

16 PLOT PLTPAR,GPSETS t ELSETS,CASECC,BGPDT,EQEXIN,S'lL,,ECT,,/PLOTXl/ 

NSIL/LUSET/S,N,JUMPPLOT/S,N,PLTFLG/S,N,PFILE $ 

17 PRTMSG PL0TX1// $ 

18 LABEL PI $ 

19 GP3 GE0M3,EQEXIN,GE0M2/SLT,GPTT/N0GRAV $ 

20 TA1 ECT,EPT,BGPDT,SIL,GPTT,CSTM/EST,GEI,GPECT,./ 

LUSET/S,N,N0SIMP/1/S,N,N0GENL/S,N,GENEL $ 

21 COND ERROR6.N0SIMP $ 

2.12-1 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 12 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

22 PURGE OGPST/GENEL $ 

23 PARAM //*ADD*/NOKGGX/1/0 $ 

24 PARAM //ftADDVNOMGG/1/0 $ 

25 EMG EST,CSTM,MPT,DIT,GE0M2,/KELM,KDICT,MELM,MDICT,,,/S,N,N0KGGX/ 

S , N , N0MGG////C , Y , COUPMASS/C , Y , CPBAR/ 

C,Y,CPR0D/C,Y,CPQUAD1/C,Y,CPQUAD2/C,Y,CPTRIA1/C,Y,CPTRIA2/ 
C , Y , CPTU8E/C , Y , CPQDPLT/C , Y , CPTRPLT/C , Y , CPTRBSC/ 
V,Y,VOLUME/V,Y, SURFACE $ 

26 PURGE KGGX.GPST/NOKGGX $ 

27 COND JMPKGGX.NOKGGX $ 

28 EMA GP£CT,KDICT,KELM/KGGX,GPST $ 

29 LABEL JMPKGGX $ 

30 COND ERROR! .NOMGG $ 

31 EMA GPECT,MDICT,MELM/MGG,/-1/C,Y,WTMASS=1.0 $ 

32 COND LGPWG.GRDPNT $ 

33 GPWG BGPDP,CSTM,EQEXIN,MGG/0GPWG/V,Y,GRDPNT=-1/C,Y,WTMASS $ 

34 OFP OGPWG //S.N.CARDNO $ 

35 LABEL LGPWG $ 

36 EQUIV KGGX.KGG/NOGENL $ 

37 COND LBL11,N0GENL $ 

38 SMA3 GEI.KGGX/KGG/LUSET/NOGENL/NOSIMP $ 

39 LABEL LBL11 $ 

kO PARAM //AMPY*/NSKIP/0/0 $ 

41 GP4 CASECC,GEOMi»,EQEXIN,GPDT,BGPDT,CSTM,GPST/RG ( ,USET,ASET/ 
L USET/S , N , MPCF 1 /$ , N , MPCF2/S , N , S I NGLE/S , N , OM I T/S , N , REACT/ 
S , N , NSK I P/S , N , REPEAT/S , N , NOSET/S , N , NOL/S , N , NOA/C , Y , ASETOUT/ 
S,Y,AUTOSPC $ 

hi PARAM //*AND*/NOSR/REACT/S INGLE $ 

43 PURGE GM, GMD/MPCF 1 /GO , GOD/OM I T/KFS , PST/S 1 NGLE/QP/NOSR/KLR , KRR.MLR, MR , 
MRR, DM/REACT $ 



2.12-2 (05/30/86) 



MODAL TRANSIENT RESPONSE 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 12 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

hk COND LBL4.GENEL $ 

1*5 PARAM //*EQ*/GPSPFLG/AUTOSPC/0 $ 

46 COND LBHt.GPSPFLG $ 

kj GPSP GPL,GPST,USET,SIL/OGPST/S,N,N0GPST $ 

kZ OFP OGPST //S.N.CARDNO $ 

i»9 LABEL LBU $ 

50 EQUIV KGG,KNN/MPCF1/MGG,MNN/MPCF1 $ 

51 COND LBL2.MPCF1 $ 

52 MCE1 USET.RG/GM $ 

53 MCE2 USET,GM,KGG,MGG,,/KNN,MNN,, $ 

54 LABEL LBL2 $ 

55 EQUIV KNN,KFF/SINGLE/MNN,MFF/S!NGLE $ 

56 COND LBL3, SINGLE $ 

57 SCE1 USET,KNN,MNN,,/KFF,KFS f ,MFF,, $ 

58 LABEL LBL3 $ 

59 EQUIV KFF.KAA/OMIT $ 

60 EQUIV MFF.MAA/OMIT $ 

61 COND LBL5.0MIT $ 

62 SMP1 USET,KFF,,,/GO,KAA,KOO,LOO,,,,. $ 

63 SMP2 USET,GO,MFF/MAA $ 
61* LABEL LBL5 $ 

65 EQUIV KAA.KLL/REACT $ 

66 COND LBL6, REACT $ 

67 RBMG1 USET,KAA,MAA/KLL,KLR,KRR,MLL,MLR,MRR $ 

68 JUMP LBL8 $ 

69 LABEL LBL6 $ 



2.12-3 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1586 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 12 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

70 COND LBL7.M0DACC $ 

71 LABEL LBL8 $ 

72 RBMG2 KLL/LLL $ 

73 COND LBL7, REACT $ 

Ik RBMG3 LLL.KLR.KRR/DM $ 

75 RBMG4 DM,MLL,MLR,MRR/MR $ 

76 LABEL LBL7 $ 

77 DPD DYNAMICS, GPL, S I L.USET/GPLD.S I LD,USETD,TFPOOL,DLT, , ,NLFT,TRL, 

E ED , EQDYN/LUSET/S , N , LUSETD/NOTFL/S , N , NODLT/NOPSDL/ 
NOFRL/S , N , NONLFT/S , N , NOTRL/S , N , NOE ED//S , N , NOUE $ 

78 COND ERR0R2.N0EED $ 

79 PURGE UEVT/NOUE/PNLH/NONLFT $ 

80 EQUI V GO.GOD/NOUE/GM.GMD/NOUE $ 

81 PARAM //*MPY>VNEIGV/1/-T $ 

82 READ KAA,MAA,MR,DM,EED,USET,CASECC/LAMA,PHIA,MI ,0E I GS/ftMODES*/S,N, 

NEIGV $ 

83 OFP OEIGS,,,,,//S,N,CARDN0 $ 

84 COND ERRORif, NEIGV $ 

85 OFP LAMA,,,,,//S,N,CARDNO $ 

86 MTRXIN CASECC.MATPOOL.EQDYN, ,TFP00L/K2PP,M2PP, B2PP/LUSETD/S.N, 

N0K2PP/S t N,NOM2PP/S,N,NOB2PP $ 

87 PURGE K2DD/NOK2PP/M2DD/N0M2PP/B2DD/N0B2PP $ 

88 PARAM //*AND*/MDEMA/N0UE/NOM2PP $ 

89 EQU1V M2PP,M2DD/N0A/B2PP,B2DD/N0A/K2PP,K2DD/N0A/MAA,MDD/MDEMA $ 

90 GKAD USETD,GM,G0,,,MAA,,K2PP,M2PP,B2PP/,,MDD,GMD, 

GOD , K2DD , M2DD , B2DD/ATRANRESP */*D I SP*/*MODAL*/0 .0/ 
.0/O.O/N0K2PP/N0M2PP/N0B2PP/ 
MPCF 1 /S I NG LE/OM I T/NOUE/- 1 /- 1 / 
1/V.Y.MODACC = -1 $ 



2.12-4 (05/30/86) 



MODAL TRANSIENT RESPONSE 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 12 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



91 GKAM USETD.PHIA.MI , LAMA.D IT,M2DD,B2DD,K2DD, CASECC/MHH.BHH.KHH, PH I DH/ 

N0UE/C,Y,LM0DES=O/C,Y,LFREQ=0.0/C,Y,HFREQ=-1.0/ 
N0M2PP/N0B2PP/N0K2PP/S,N,N0NCUP/S,N,FM0DE $ 

92 COND ERRORS, NOTRL $ 

93 PARAM //*ADD*/NEVER/l/0 $ 

Sk PARAM //*MPY*/REPEATT/1/-1 $ 

95 LABEL LBL13 $ 

96 PURGE PNLH.0UHV1 ,0PNL1 ,OUHV2,OPNL2,XYPLTTA,OPP1 ,0QP1 .0UPV1 ,0ES1 ,0EF1 . 

OPP2,0QP2,OUPV2,OES2,0EF2,PL0TX2,XYPLTT,0PPA, IQP1 , IPHIP1, IES1, 
IEF1.0PPB, IQP2,IPHIP2,IES2,IEF2,ZQP2,ZUPV2,ZES2,ZEF2/NEVER $ 

97 CASE CASECC,/CASEXX/*TRAN*/S,N,REPEATT/S,N,NOLOOP $ 

98 PARAM //AMPYA/NCOL/0/1 $ 

99 TRLG CA$EXX,USETD,DLT,SLT,BGPDT,SIL,CSTM,TRL,DIT,GMD,GOD,PHIDH, 

EST,MGG,/PPT,P$T,PDT,PD,PH,TOL/S,N,NOSET/NCOL $ 

100 EQUIV PPT.PDT/NOSET $ 

101 TRD CASEXX,TRL,NLFT,DIT,KHH,BHH,MHH,PH/UHVT,PNLH/*MODALV 

NOUE/NONCUP/S,N f NCOL/C,Y, ISTART $ 

102 VDR CASEXX,EQDYN,USETD,UHVT,TOL,XYCDB,PNLH/OUHV1,OPNL1/ 

*TRANRESP*/*MODAL*/0/S , N , NOH/S , N , NOP/FMODE $ 

103 COND LBL16.N0H $ 

104 SDR3 0UHV1,0PNL1,,,,/0UHV2,0PNL2,,,, $ 

105 OFP OUHV2,0PNL2,,,,//S,N,CARDN0 $ 

106 XYTRAN XYCDB, 0UHV2 , 0PNL2 , , , /XYPLTTA/*TRAN*/*HSETft/S , N , PF I LE/ 

S,N,CARDN0 $ 

107 XYPLOT XYPLTTA// $ 

108 LABEL LBL16 $ 

109 PARAM //*AND*/PJUMP/NOP/JUMPPLOT $ 

110 COND LBL15.PJUMP $ 

111 PARAM //*NOT*/NOMOD/V,Y,MODACC $ 

112 PARAM //*AND*/MPJUMP/V,Y,MODACC/JUMPPLOT $ 



2.12-5 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 12 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

113 COND LBDDRM.MPJUMP $ 

114 DDR1 UHVT.PHIDH/UDV1T $ 

115 COND LBLMOD.MODACC $ 

116 DDR2 USETD,UDV1T,PDT,K2DD,B2DD,MDD,,LLL,DM/UDV2T,UEVT,PAF/ 

*TRANRESP*/NOUE/REACT/0 $ 

117 EQUIV UDV2T,UDV1T/N0M0D $ 

118 LABEL LBLMOD $ 

119 EQUIV UDV1T.UPV/N0A $ 

120 COND LBL14.N0A $ 

121 SDR1 U$ETD,,UDV1T,,,G0D,GMD,PST,KFS,,/UPV,,QP/1/*DYNAMICS* $ 

122 LABEL LBLllt $ 

123 SDR2 CASEXX, CSTM, MPT, DIT, EQDYN, SILD, , ,BGPDP,T0L,QP, UPV,EST,XYCDB, 

PPT/0PP1 ,0QP1 ,0UPV1 ,0ES1 ,0EF1 ,PUGV/*TRANRESP* $ 

124 SDR3 OPP1,OQP1,OUPV1,OES1,OEF1,/OPP2,OQP2,OUPV2,OES2,OEF2, $ 

125 JUMP P2A $ 

126 LABEL LBDDRM $ 

127 SDR1 USETD,,PHIDH,,,G0D,GMD,,KFS,,/PHIPH,,QPH/1/*DYNAMICS* $ 

128 SDR2 CASEXX, CSTM, MPT, DIT, EQDYN, SILD,, , , LAMA, QPH.PHIPH, EST, XYCDB,/ 

, I QP1 , I PH I P 1 , I ES 1 , I EF 1 , /*MMRE I G* $ 

129 SDR2 CASEXX,, ,, EQDYN, SILD, , , ,TOL, , , ,XYCDB,PPT/OPPA, , , , ,/ 

ftTRANRESP* $ 

130 SDR3 OPPA, IQP1, IPHIP1,IES1,IEF1,/0PPB,IQP2, I PHI P2, I ES2, I EF2, $ 

131 EQUIV 0PPB.0PP2/M0DACC $ 

132 DDRMM CASEXX, UHVT,TOL, I PHI P2, I QP2, I ES2, I EF2, , EST, MPT, DIT/ 

ZUPV2,2QP2,ZES2,ZEF2, $ 

133 EQUIV ZUPV2,0UPV2/MODACC/ZQP2,OQP2/MODACC/ZEF2,OEF2/MODACC/ZES2,OES2/ 

MODACC $ 

134 LABEL P2A $ 

135 OFP 0UPV2,OPP2,OQP2,OEF2,0ES2,//S,N,CARDN0 $ 



2.12-6 (05/30/86) 



MODAL TRANSIENT RESPONSE 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 12 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

136 SCAN CASECC,0ES2,0EF2/0ESF2/*RF* $ 

137 OFP 0ESF2,, , ,,.//S,N,CARDNO $ 

138 COND P2.JUMPPL0T $ 

139 PLOT PLTPAR,GPSETS,ELSETS,CASEXX,BGPDT,EO_EXIN,S1P,,PUGV,,/PLOTX2/ 

NSIL/LUSEP/JUMPPLOT/PLTFLG/S,N,PFILE $ 

11*0 PRTMSG PL0TX2// $ 

11*1 LABEL P2 $ 

1 42 XYTRAN XYCDB , 0PP2 , 0QP2 , 0UPV2 , 0ES2 , OEF 2/XYPLTT/ftTRAN*/*PSET*/ 
S,N,PFILE/S,N,CARDNO $ 

H»3 XYPLOT XYPLTT// $ 

H*l* LABEL LBL15 S 

11+5 COND FINIS, REPEATT $ 

11*6 REPT LBL13J00 $ 

U7 PRTPARM //-3/*MDLTRD* $ 

11*8 JUMP FINIS $ 

11*9 LABEL ERR0R2 $ 

150 PRTPARM //-2/*MDLTRD* $ 

151 LABEL ERR0R1 $ 

152 PRTPARM //-1/*MDLTRD* $ 

153 LABEL ERROR** $ 

15^ PRTPARM //-4/*MDLTRD* $ 

155 LABEL ERRORS $ 

156 PRTPARM //-5/*MDLTRD* $ 

157 LABEL ERR0R6 $ 

158 PRTPARM //-6/*MDLTRD* $ 

159 LABEL FINIS $ 

160 PURGE DUMMY/MI NUS1 $ 

161 END $ 

2.12-7 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.12.2 Description of Important DMAP Operations for Modal Iransient Response 

5. GP1 generates coordinate system transformation matrices, tables of grid point locations, and * 
tables relating the internal and external grid point numbers. 

6. PLTTRAN modifies special scalar grid points in the BGPDT and SIL tables. 

7. GP2 generates Element Connection Table with internal indices. 

10. Go to DMAP No. 18 if there are no structure plot requests. 

11. PLTSET transforms user input into a form used to drive the structure plotter. 

12. PRTMSG prints error messages associated with the structure plotter. 

15. Go to DMAP No. 18 if no undeformed structure plots are requested. 

16. PL0T generates all requested undeformed structure plots. 

17. PRTMSG prints plotter data and engineering data for each undeformed plot generated. 

19. GP3 generates Grid Point Temperature Table. 

20. TA1 generates element tables for use in matrix assembly and stress recovery. 

21. Go to DMAP No. 157 and print Error Message No. 6 if there are no structural elements. 

25. EMG generates structural element stiffness and mass matrix tables and dictionaries for later 
assembly by the EMA module. 

27. Go to DMAP No. 29 if no stiffness matrix is to be assembled. 

28. EMA assembles stiffness matrix [K* ] and Grid Point Singularity Table. 

30. Go to DMAP No. 151 and print Error Message No. 1 if no mass matrix is to be assembled. 

31. EMA assembles mass matrix [M ]. 

32. Go to DMAP No. 35 if no weight and balance information is requested. 

33. GPWG generates weight and balance information. 

34. 0FP formats the weight and balance information prepared by GPWG and places it on the system 
output file for printing. 

36. Equivalence [K* ] to [K ] if no general elements exist. 

37. Go to DMAP No. 39 if no general elements exist. 

38. SMA3 adds general elements to [K* ] to obtain stiffness matrix [K ]. 

99 yy 

41. GP4 generates flags defining members of various displacement sets (USET) and forms 

multipoint constraint equations [R ] {u } = 0. 

y y 

44. Go to DMAP No. 49 if general elements are present. 

46. Go to DMAP No. 49 if no potential grid point singularities exist. 

47. GPSP generates a table of potential grid point singularities. 

48. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 



2.12-8 (05/30/86) 



MODAL TRANSIENT RESPONSE 



50. Equivalence [K QQ ] to [K ] and [M ] to [M 1 if no multipoint constraints exist. 

51. Go to DMAP No. 54 if no multipoint constraints exist. 

52. MCE1 partitions multipoint constraint equations [R 1 = [R ' R 1 and solves for 

r -i gj I. m , n j 

multipoint constraint transformation matrix [G 1 = -[R']~ [R ]• 

r m u m n ¦ 

53. MCE2 partitions stiffness and mass matrices 



C V • 



K I K 

n n | nm 

K I K 
mn mm 



and 



[M ] = 

L gg J 



M I M 
n n nm 

M I M 
mn mm 



and performs matrix reductions 



[K 1 = [K J + [G T ][K ] + [K T ][GJ + [G T ][K ][G ] and 

L nn J L nn J u m JL mn J L mn JL m J L m JL mm JL m J 

[M ] = [M ] + [G T ][M ] + [M T ][G ] + [G T ][M ][G ] . 

L nn J L nn J L m JL mn J L mn JL m J L m JL mm JL m J 



55. Equivalence [K ] to [K^] and [M J to [M Jf ] if no single-point constraints exist, 

^ nn ff nn ff a r 

56. Go to DMAP No. 58 if no single-point constraints exist. 

57. SCE1 partitions out single-point constraints 



tW - 



ff , f S 



K sf |K 



ss 



and 



["J - 



M,, I M, 
f f . fs 

M.I M cc 
sf ss 



59. Equivalence [K ff ] to [K ] if no omitted coordinates exist. 

60. Equivalence [M^J to [Ml if no omitted coordinates exist. 

tt aa 

61. Go to DMAP No. 64 if no omitted coordinates exist. 

62. SMP1 partitions constrained stiffness matrix 



[K ff ] = 



K I K 
aa , ao 

K 1 K 
oa oo 



solves for transformation matrix [G 1 = -[K 1" [K 1 

o oo oa J 



aa- 



oa-"- o- 



and performs matrix reduction [K 1 = [K aa ] + [K na ][G n ] 
63. SMP2 partitions constrained mass matrix 



[M ff ] - 



M I M 
aa | ao 

oa oo 



2.12-9 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



and performs matrix reduction 

[Ml = [Ml + LmL][GJ + [g!][M 1 + [GT][H nn ][G J . 



aa- 



aa- 



oa- 



oa- 



00' 



65. Equivalence [K ] to [K. ] if no free-body supports exist. 

aa A.Jt» 

66. Go to DMAP No. 69 if no free-body supports exist. 

67. RBMG1 partitions out free-body supports 



[K ] = 
u aa J 



K ri ' K rr 



M i M 

and [M ] = 1 

aa M i M 
rl rr 



"£,*- 



li- 



es. Go to DMAP No. 71. 

70. Go to DMAP No. 76 if there is no request for mode acceleration data recovery. 

72. RBMG2 decomposes constrained stiffness matrix [K ££ ] = [L ot ][U OJ ]. 

73. Go to DMAP No. 76 if no free-body supports exist. 

74. RBMG3 forms rigid body transformation matrix 

to] - -r^rtv], 

calculates rigid body check matrix 

[X] = [K ] + [k!j[D] 



rr- 



ir~ 



and calculates rigid body error ratio 



rr 



75. RBMG4 forms rigid body mass matrix 



Dn r ] = [M rr ] + CM{ r ][D] + [D T ][M £r ] + [D T ][M U ][D], 

77. DPD generates flags defining members of various displacement sets used in dynamic analysis 
(USETD), tables relating the internal and external grid point numbers (GPLD), including 
extra points introduced "for dynamic analysis (SILD), and prepares Transfer Function Pool 
(TFP00L), Dynamic Loads Table (DLT), Nonlinear Function Table (NLFT), Transient Response 
List (TRL). 

78. Go to DMAP Nc. 149 and print Error Message No. 2 if there is no Eigenvalue Extraction Data. 
80. Equivalence [G ] to [G°] and [G ] to [G ] if there are no extra points introduced 

for dynamic analysis. 
82. READ extracts real eigenvalues and eigenvectors from the equation 

C K aa " W " ° • 
calculates rigid body modes by finding a square matrix [<f> ro ] such that 



2.12-10 (05/30/86) 



MODAL TRANSIENT RESPONSE 



Cm ] = [?J ][m r ][* ro ] 



is diagonal and normalized, computes rigid body eigenvectors 



LY ao 



ro 
Vo 



calculates modal mass matrix 



[m] = [*J]CM aa ][* a J 
and normalizes eigenvectors according to one of the following user requests: 

1) Unit value of a selected component 

2) Unit value of the largest component 

3) Unit value of the generalized mass. 

83. 0FP formats the summary of eigenvalue extraction information (0EIGS) prepared by READ and 
places it on the system output file for printing. 

84. Go to DMAP No. 153 and print Error Message No. 4 if no eigenvalues were found. 

85. 0FP formats the eigenvalues (LAMA) prepared by READ and places them on the system output 
file for printing. 

86. MTRXIN selects the direct input matrices [Kp ], [M^ ] and [Bjj ]. 

89. Equivalence [M* ] to [M^], [B* ] to [B^] and [K^ ] to [KJj d ] if no constraints 

are applied, and LM ] to [M. .] if there are no direct input mass matrices and no extra 

points introduced for dynamic analysis. 

2 2 2 

90. GKAD applies constraints to direct input matrices [K 3» [ M DD 1 and [B ], forming 

rr pp pp 

[&]. [¦&] and [ujj,,]. 

91. GKAM assembles stiffness, mass and damping matrices in modal coordinates for use in 
Transient Response: 

[K hh i - [k] ? [?;„][¦&,][?„,] , 



and 



[M hh ] . W + [?J,]D& 1 ][* dh ] 

[B hh ]' - [b] + [4][Bd d ][* dh ] 



where m. = modal masses , 



b. = m. 2tt f. g(f.) 



and k i = m. 4tt 2 f^ . 
All matrices are real. 
92. Go to DMAP No. 155 and print Error Message No. 5 if there is no Transient Response List. 

2.12-11 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

95. Beginning of loop for additional dynamic load sets. 

97. CASE extracts the appropriate record from CASECC corresponding to the current loop and » 
copies it into CASEXX. 

t t t 
99. TRL6 generates matrices of loads versus time. "C p K i p ,,} a ^d {P,} are generated with 

one column per output time step. {Pj} and {P. } are generated with one column per 

solution time step, and the Transient Output List (T0L) is a list of output time steps. 



100 



. Equivalence {P^} to {P } if the d and p sets are the same. 



101. TRD forms the linear, {P-ih and nonlinear, {P."}, dynamic load vectors and integrates 

the equations of motion over specified time periods to solve for the displacements, 
velocities and accelerations, using the following equation 

t"h h P 2+ B hhP + K hh3 tu h> " (P h> + <C> • 

102. VDR prepares displacements, velocities and accelerations, sorted by time step, for output 
using only the extra points introduced for dynamic analysis and modal coordinates (solution 
points). 

103. Go to DMAP No. 108 if there is no output request for the solution points. 

104. SDR3 sorts the solution point displacements, velocities, accelerations and nonlinear load 
vectors by extra point or mode number. 

105. 0FP formats the requested solution point displacements, velocities, accelerations and 
nonlinear load vectors prepared by SDR3 and places them on the system output file for 
printing. 

106. XYTRAN prepares the input for X-Y plotting of the solution point displacements, velocities, 
accelerations and nonlinear load vectors vs.. time. 

107. XYPL0T prepares the requested X-Y plots of the solution point displacements, velocities, 
accelerations and nonlinear load vectors vs. time. 

110. Go to DMAP No. 144 if there is no output request involving dependent degrees of freedom, 
forces and stresses, or deformed structure plots. 

113. Go to DMAP No. 126 if the mode acceleration technique is not requested and if there are no 
requests for deformed structure plots. 

114. DDR1 transforms the solution vector displacements from modal to physical coordinates 

{u d } = [ *dh ]{ V • 

115. Go to DMAP No. 118 if the mode acceleration technique is not requested. 

116. DDR2 calculates an improved displacement vector using the mode acceleration technique. 

117. Equivalence {u ,} to the improved displacement vector. (Flag N0M0D is negative since the 
mode acceleration technique is requested). 

119. Equivalence {u,} to {u } if no constraints are applied. 

120. Go to DMAP No. 122 if no constraints are applied. 



2.12-12 (05/30/86) 



MODAL TRANSIENT RESPONSE 
121. SDR1 recovers dependent components of displacements 



.*%> ¦ C«vK«d } ' 



if ef _ r,. j. .. i /,. \ = rc d 




u s 



n el 



u m 



" {u n + u e } ' V * ^ u f + u e } 



= {u p } 



and recovers single-point forces of constraint {q } = -t p s } + E K f s ] ^ u f^ * 

123. SDR2 calculates element forces (0EF1) and stresses (0ES1) and prepares load vectors (0PP1), 
displacement, velocity and acceleration vectors (0UPV1) and single-point forces of 
constraint (0QP1) for output and translation components of the displacement vector (PUGV), 
sorted by time step. 

124. SDR3 prepares requested output sorted by point number or element number. 

125. Go to DMAP No. 134. 

127. SDR1 recovers dependent components of eigenvectors 

cy - [G d ] (*„} , jM - u f + V 



— —I = { *n + V • { V = &$ ( *n + V • 



<f> + U 

r n e 



r m 



= U + u } = {* } 



and recovers single-point forces of constraint {q } = E K f S l ^f}- 



128. SDR2 calculates element forces (IEF1) and stresses (IES1) and prepares eigenvectors (IPHIP1) 
and single-point forces of constraint (IQP1) for output sorted by time step. 

129. SDR2 prepares load vectors for output (0PPA) sorted by time step. 

130. SDR3 prepares the requested output sorted by point number or element number. 

131. Equivalence 0PPB to 0PP2. (Flag M0DACC is negative since the mode acceleration technique is 
not requested). 

132. DDRMM prepares a subset of the element forces (ZEF2) and stresses (ZES2), and displacement 
vectors (ZUPV2) and single-point forces of constraint (ZQP2) for output sorted by point 
number or element number. 



2.12-13 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

133. Equivalence ZUPV2 to 0UPV2, ZQP2 to 0QP2, ZES2 to 0ESZ and ZEF2 to 0EF2. {Flag M0DACC is 
negative since the mode acceleration technique is not requested). 

» 

135. 0FP formats the requested output prepared by SDR3 (with mode acceleration) or DDRMM (no mode 
acceleration) and places it on the system output file for printing. 

136. SCAN examines the element stresses and forces calculated by SDR3 or DDRMM and generates 
scanned output that meets the specifications set by the user. 

137. 0FP formats the scanned output table prepared by SCAN and places it on the system output 
file for printing. 

138. Go to DMAP No. 141 if no deformed structure plots are requested. 

139. PL0T prepares all requested deformed structure and contour plots. 

140. PRTMSG prints plotter data, engineering data, and contour data for each deformed plot 
generated. 

142. XYTRAN prepares the input for requested X-Y plots. 

143. XYPL0T prepares the requested X-Y plots of displacements, velocities, accelerations, forces, 
stresses, loads and single-point forces of constraint vs. time. 

145. Go to DMAP No. 159 and make normal exit if no additional dynamic load sets need to be 
processed. 

146. Go to DMAP No. 95 if additional dynamic load sets need to be processed. 

147. Print Error Message No. 3 and terminate execution. 

148. Go to DMAP No. 159 and make normal exit. 

150. Print Error Message No. 2 and terminate execution. 

152. Print Error Message No. 1 and terminate execution. 

154. Print Error Message No. 4 and terminate execution. 

156. Print Error Message No. 5 and terminate execution. 

158. Print Error Message No. 6 and terminate execution. 



2.12-14 (05/30/86) 



MODAL TRANSIENT RESPONSE 

2.12.3 Output for Modal Transient Response 

The Eigenvalue Summary Table and the Eigenvalue Analysis Summary, as described under*Normal 
Modes Analysis (see Section 2.3.3), are automatically printed. All real eigenvalues extracted are 
included even though not all are used in the modal formulation. 

Output that may be requested is the same as that described under Direct Transient Response. ' 
Output for S0LUTI0N points will have the modal coordinates identified by the mode number determined 
in real eigenvalue analysis. 

The eigenvectors used in the modal formulation may be obtained for the S0LUTI0N points by 
using the ALTER feature to print the matrix of eigenvectors following the execution of READ. The 
eigenvectors for all points in the model may be obtained by running the problem initially on the 
Normal Modes Analysis rigid format or by making a modified restart using the Normal Modes Analysis 
rigid format. 

2.12.4 Case Control Deck for Modal Transient Response 

The following items related to subcase definition and data selection must be considered in 
addition to the list presented with Direct Transient Response: 

1. METH0D must appear above the subcase level to select an EIGR card that exists in the 
Bulk Data Deck. 

2. All of the eigenvectors used in the modal formulation must be determined in a single 
execution. 

3. An SPC set must be selected above the subcase level unless the model is a free body or 
all constraints are specified on GRID cards, Scalar Connection cards or with General 
Elements. 

4. SDAMPING must be used to select a TABDMP1 table if structural damping is desired. 

2.12.5 Parameters for Modal Transient Response 

The following parameters are used in Modal Transient Response: 

1. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2. AUT0SPC - reserved for future optional use. The default value is -1. 



2. 12- 15" (05/ 30/ 86) 



DISPLACEMENT RIGID FORMATS 

3. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTRIA2, CPTUBE, CPQDPLT, CPTRPLT, 
CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

4. GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. All fluid related masses are ignored. 

5- I START - optional. A positive value of this parameter causes the TRD module to use the 
second (or alternate) starting method (see Section 11.4 of the Theoretical Manual). The 
alternate starting method is recommended when initial accelerations are significant and 
when the mass matrix is non-singular. The default value is -1 and causes the first 
starting method to be used. 

6. LFREQ and HFREQ - required, unless parameter LM0DES is used. The real values of these 
parameters give the cyclic frequency range (LFREQ is the lower limit and HFREQ is the 
upper limit) of the modes to be used in the modal formulation. To use this option, 
parameter LM0DES must be set to 0. 

7. LM0DES - required, unless parameters LFREQ and HFREQ are used. The integer value of 
this parameter is the number of lowest modes to be used in the modal formulation. 

8- M0DACC - optional. A positive integer value of this parameter causes the Dynamic Data 
Recovery module to use the mode acceleration method. Not recommended for use in 
hy droe 1: a st.ic p r o b T ems . 

9. SURFACE - optional. The computations of the external surface areas for the 

two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

10. V0LUME - optional. The volume computations for the two-dimensional and 
three-dimensional elements are activated by this parameter when they are generated in 
the EMG module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details. 

11. WTMASS - optional. The terms of the structural mass matrix are multiplied by the real 
value of this parameter when they are generated in the EMA module. Not recommended for 
use in hydroelastic problems. 

2.12-16 (05/30/86) 



MODAL TRANSIENT RESPONSE 

2.12.6 Optional Diagnostic Output for FEER 

Special detailed information obtained by requesting DIAG 16 in the Executive Control 'Deck is 
the same as that described under Normal Modes Analysis (see Section 2.3.6). 

2.12.7 The APPEND Feature 

The APPEND feature can be used for real eigenvalue extraction in Modal Transient Response. 
See Section 2.3.7 for details. 

2.12.8 The CONTINUE Feature 

The CONTINUE feature can be used for coupled transient analysis in Modal Transient Response. 
See Section 2.9.6 for details. 

2.12.9 Rigid Format Error Messages from Modal Transient Response 

The following fatal errors are detected by the DMAP statements in the Modal Transient 
Response rigid format. The text for each error message is given below in capital letters and is 
followed by additional explanatory material, including suggestions for remedial action. 

M0DAL TRANSIENT RESP0NSE ERR0R MESSAGE N0. 1 - MASS MATRIX REQUIRED F0R M0DAL F0RMULATION. 

The mass matrix is null because either no structural elements were defined with Connection cards, 
nonstructural mass was not defined on a Property card, or the density was not defined on a Material 
card. 

M0DAL TRANSIENT RESP0NSE ERR0R MESSAGE N0. 2 - EIGENVALUE EXTRACTI0N DATA REQUIRED F0R REAL 
EIGENVALUE ANALYSIS. 

Eigenvalue extraction data must be supplied on an EIGR card in the Bulk Data Deck and METH0D in the 
Case Control Deck must select an EIGR set. 

M0DAL TRANSIENT RESP0NSE ERR0R MESSAGE N0. 3 - ATTEMPT T0 EXECUTE M0RE THAN 100 L00PS. 

An attempt has been made to use more than 100 dynamic load sets. This number can be increased by 
ALTERing the REPT instruction following the last XYPL0T instruction. 

M0DAL TRANSIENT RESP0NSE ERR0R MESSAGE N0. 4 - REAL EIGENVALUES REQUIRED F0R M0DAL F0RMULATI0N. 
No real eigenvalues were found in the frequency range specified by the user. 

M0DAL TRANSIENT RESP0NSE ERR0R MESSAGE N0. 5 - TRANSIENT RESP0NSE LIST REQUIRED F0R TRANSIENT 
RESP0NSE CALCULATI0NS. 

Time step intervals to be used must be specified on a TSTEP card in the Bulk Data Deck and a TSTEP 
selection must be made in the Case Control Deck. 

2.12-17 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

M0DAL TRANSIENT RESP0NSE ERR0R MESSAGE N0. 6 - N0 STRUCTURAL ELEMENTS HAVE BEEN DEFINED. 
No structural elements have been defined with Connection cards. 



2.12-18 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.13 NORMAL MODES WITH DIFFERENTIAL STIFFNESS 

2.13.1 DMAP Sequence for Normal Modes With Differential Stiffness 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 13 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

OPTIONS IN EFFECT GO ERR=2 LIST NODECK NOREF NOOSCAR 



1 BEGIN DISP 13 - NORMAL MODES WITH DIFFERENTIAL STIFFNESS-APR. 1 986 $ 

2 PRECHK ALL $ 

3 FILE LAMA=APPEND/PHIA=APPEND $ 
it PARAM //AMPYA/CARDNO/0/O $ 

5 GP1 GE0M1,GE0M2,/GPL,EQEXIN,GPDT,CSTM,BGPDT,SIL/S,N,LUSET/ 

N0GPDT/MINUS1 — 1 $ 

6 PLTTRAN BGPDT,SIL/BGPDP,SIP/LUSET/S,N,LUSEP $ 

7 GP2 GE0M2.EQEXIN/ECT $ 

8 PARAML PCDB//*pRES*////JUMPPLOT $ 

9 PURGE PLTSETX,PLTPAR,GPSETS,ELSETS/JUMPPLOT $ 

10 COND Pl.JUMPPLOT $ 

1 1 PLTSET PCDB, EQEX I N , ECT/PLTSETX , PLTPAR, GPSETS , ELSETS/S , N ,NS I L/ 

S,N,JUMPPLOT $ 

12 PRTMSG PLTSETX// $ 

13 PARAM //*MPY*/PLTFLG/1/1 $ 

14 PARAM //*MPY*/PFILE/0/0 $ 

15 COND Pl.JUMPPLOT $ 

16 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIL,,ECT, ,/PLOTXl/ 

NS I L/LUSET/S, N, JUMPPLOT/S , N, PLTF LG/S , N , PF I LE $ 

17 PRTMSG PL0TX1// $ 

18 LABEL PI $ 

GE0M3 , EQEX I N , GE0M2/SLT, GPTT/NOGRAV $ 

ECT,EPT,BGPDT,SIL,GPTT,CSTM/EST,GEI,GPECT,,/ 
LUSET/S,N,N0SIMP/1/S,N,N0GENL/S,N,GENEL $ 

ERR0R1.N0SIMP $ 

2.13-1 (05/30/86) 



19 


GP3 


20 


TA1 


21 


COND 



DISPLACEMENT RIGID FORMAlS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 13 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

22 PURGE OGPST/GENEL $ 

23 PARAM //ftADDft/NOKGGX/1/0 $ 

24 PARAM //AADDA/NOMGG/1/0 $ 

25 EMG EST,CSTM,MPT,DIT,GE0M2,/KELM,KDICT,MELM,MDICT,,,/S,N,N0KGGX/ 

S , N , NOMGG////C , Y , COUPMASS/C , Y , CPBAR/ 

C,Y,CPR0D/C,Y,CPQUAD1/C,Y,CPQUAD2/C,Y,CPTRIA1/C,Y,CPTRIA2/ 
C , Y , CPTUBE/C , Y , CPQDPLT/C , Y , CPTRPLT/C , Y , CPTRBSC/ 
V,Y,VOLUME/V,Y, SURFACE $ 

26 PURGE KGGX.GPST/NOKGGX $ 

27 COND JMPKGG.NOKGGX $ 

28 EMA GPECT,KDICT,KELM/KGGX,GPST $ 

29 LABEL JMPKGG $ 

30 COND ERRORS, NOMGG $ 

31 EMA GPECT,MDICT,MELM/MGG,/-1/C,Y,WTMASS=1.0 $ 

32 COND LBL1.GRDPNT $ 

33 GPWG BGPDP,CSTM,EQEXIN,MGG/OGPWG/V,Y,GRDPNT/C,Y,WTMASS $ 
3^ OFP OGPWG,,,,,//S,N,CARDNO $ 

35 LABEL LBL1 $ 

36 EQUIV KGGX.KGG/NOGENL $ 

37 COND LBLI1.N0GENL $ 

38 SMA3 GEI.KGGX/KGG/LUSET/NOGENL/NOSIMP $ 

39 LABEL LBL11 $ 

kO PARAM //*MPY*/NSK I P/O/0 $ 

k 1 GP4 CASECC, GE0M4, EQEX I N , GPDT, BGPDT, CSTM, GPST/RG , YS , USET, ASET/ 
LUSET/S,N,MPCF1/S,N,MPCF2/S,N,SINGLE/S,N,0M!T/S,N,REACT/ 
S,N,NSKIP/S,N,REPEAT/S,N,NOSET/S,N,NOL/S,N,NOA/C f Y,ASETOUT/ 
S,Y,AUTOSPC $ 

kl COND ERR0R6.N0L $ 

43 PARAM //*AND*/N0SR/S INGLE/REACT $ 



2.13-2 (05/30/86) 



NORMAL MODES WITH DIFFERENTIAL STIFFNESS 



RIGID FORMAT DMAP LISTING 
APRIL I986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 13 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

44 PURGE GM/MPCF1/GO.KO0, LOO, PO,UOOV,RUOV/OMIT/PS,KFS,KSS/S INGLE/ 

QG/NOSR $ 

45 COND LBL4D, REACT $ 

46 JUMP ERR0R2 $ 

47 LABEL LBL4D $ 

48 COND LBL4.GENEL $ 

49 PARAM //*EQ*/GPSPFLG/AUTOSPC/0 $ 

50 COND LBL4.GPSPFLG $ 

51 GPSP GPL,GPST,USET,SIL/OGPST/S,N,NOGPST $ 

52 OFP OGPST,,,,,//S,N,CARDNO $ 

53 LABEL LBL4 $ 

54 EQUIV KGG.KNN/MPCF1 $ 

55 COND LBL2.MPCF1 $ 

56 MCE1 USET.RG/GM $ 

57 MCE2 USET,GM,KGG,,,/KNN, ,, $ 

58 LABEL LBL2 $ 

59 EQUIV KNN.KFF/SINGLE $ 

60 COND LBL3, SINGLE $ 

61 SCE1 USET,KNN,,,/KFF,KFS,KSS,,, $ 

62 LABEL LBL3 $ 

63 EQUIV KFF.KAA/OMIT $ 

64 COND LBL5.0MIT $ 

65 SMP1 USET,KFF,,,/GO,KAA,KOO,LOO $ 

66 LABEL LBL5 $ 

67 RBMG2 KAA/LLL $ 

68 SSG1 SLT,BGPDT,CSTM,SIL,EST,MPT,GPTT,EDT,MGG,CASECC,DIT,/PG,,,,/ 

LUSET/1 $ 



2.13-3 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 13 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



69 EQUIV PG.PL/NOSET $ 

70 COND LBL10.N0SET $ 

71 SSG2 USET,GM,YS,KFS,GO,,PG/,PO,PS,PL $ 

72 LABEL LBL10 $ 

73 SSG3 LLL,KAA,PL,LOO,KOO,PO/ULV,UOOV,RULV,RUOV/OMIT/V,Y,IRES=-1/ 

1/S.N.EPSI $ 

Ik COND UL9JRES $ 

75 MATGPR GPL,USET,SIL,RULV//*Lft $ 

76 MATGPR GPL,USET,SIL,RUOV//*0* $ 

77 LABEL LBL9 $ 

78 SDR1 USET,PG,ULV,UOOV,YS,GO,GM,PS,KFS,KSS,/UGV,PGG,QG/1/ 

*BKLO* $ 

79 SDR2 CASECC,CSTM,MPT,DIT,EQEXIN,SIL,GPTT,EDT,BGPDP,,QG,UGV,EST,,PGG/ 

0PG1 ,0QG1 .0UGV1 ,0ES1 ,0EF1 ,PUGV1/*BKL0* $ 

80 OFP OUGV1,OPG1,OQG1,OEF1,OES1,//$,N,CARDNO $ 

81 SCAN CASECC,0ES1,0EF1/0ESF1/C,N,*RF* $ 

82 OFP 0ESF1,,,,,//S,N,CARDN0 $ 

83 COND P2.JUMPPL0T $ 

8i* PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIP,PUGV1,,GPECT,0ES1/ 
PL0TX2/NS I L/LUSEP/JUMPPLOT/PLTF LG/S ,N , PF I LE $ 

85 PRTMSG PL0TX2// $ 

86 LABEL P2 $ 

87 TAT ECT,EPT,BGPDT,SIL,GPTT,CSTM/X1,X2,X3,ECPT,GPCT/LUSET/ 

NOSIMP/O/NOGENL/GENEL $ 

88 DSMG1 CASECC,GPTT,SIL,EDT,UGV,CSTM,MPT,ECPT,GPCT,DIT/KDGG/ 

S,N,DSCOSET $ 

89 EQUIV KDGG.KDNN/MPCF2 / MGG.MNN/MPCF2 $ 

90 COND LBL2D,MPCF2 $ 

91 MCE2 USET,GM,KDGG,MGG,,/KDNN,MNN,, $ 



2.13-4 (05/30/86) 



NORMAL MODES WITH DIFFERENTIAL STIFFNESS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 13 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



92 LABEL 

93 EQUI V 
3k COND 

95 SCE1 

96 LABEL 

97 EQUIV 

98 COND 

99 SMP2 

100 SMP2 

101 LABEL 

102 PARAM 

103 EQUIV 

104 PARAM 

105 DSMG2 

106 RBMG2 

107 PRTPARM 

108 PRTPARM 

109 SSG3 

110 COND 

1 1 1 MATGPR 

112 LABEL 

113 SDR1 

114 SDR2 



LBL2D $ 

KDNN.KDFF/SINGLE / MNN.MFF/SINGLE $ 

LBL3D, SINGLE $ 

USET,KDNN,MNN,,/KDFF,KDFS,KDSS,MFF,, $ 

LBL3D $ 

KDFF.KDAA/0M1T / MFF.MAA/OMIT $ 

LBL5D.0MIT $ 

USET,GO,KDFF/KDAA $ 

USET,GO,MFF/MAA $ 

LBL5D $ 

//*ADD*/DSCOSET/-l/0 $ 

PL,PBL/DSC0SET/PS,PBS/DSCOSET/YS,YBS/DSCOSET/U00V,UB00V/ 
DSCOSET $ 

//AMPYVNDSK IP/0/0 $ 

MPT,KAA,KDAA,KFS,KDFS,KSS,KDSS,PL,PS,YS,UOOV/KBLL,KBFS,KBSS, 
PBL , PBS , YBS , UBOOV/S , N , NDSK I P/S , N , REPEATD/DSCOSET $ 

KBLL/LBLL/S,N,POWER/S,N,DET $ 

//0/*DET* $ 

//0/*POWER* $ 

LBLL,KBLL,PBL,,,/UBLV,,RUBLV,/-1/V,Y, IRES/NDSKIP/ 
S,N,EPSI $ 

LBL9D, IRES $ 

GPL,USET,SIL,RUBLV//*Lft $ 

LBL9D $ 

USET, , UBLV, UBOOV, YBS , GO, GM, PBS , KBFS , KBSS , /UBGV, , QBG/NDSK I P/ 
*DS1* $ 

CASECC,CSTM,MPT,DIT,EQEXIN,SIL,GPTT,EDT,BGPDP,,QBG,UBGV,EST, t /, 
0QBG1 ,0UBGV1 .0ESB1 ,0EFB1 ,PUBGV1/ADS1* $ 



2.13-5 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 13 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



115 OFP OQBG1,OUBGV1,OESB1,OEFB1,,//S,N,CARDNO $ 

116 DPD DYNAMICS,GPL,S1L,USET/GPLD,SILD,USETD,,,,,,,EED,EQDYN/ 

LUSET/LUSETD/NOTFL/NODLT/NOPSDL/NOFRL/ 
N0NLFT/N0TRL/S,N,N0EED//N0UE $ 

117 COND ERR0R3.N0EED $ 

1 1-8 PARAM //*MPY*/NEIGV/1/-1 $ 

119 READ KBLL,MAA,,,EED,USET,CASECC/LAMA,PHIA,MI,OEIGS/*MODES*/ 

S,N,NEIGV/3 $ 

120 OFP 0EIGS,,,,,//S,N,CARDN0 $ 

121 COND ERRORA.NEIGV $ 

122 OFP LAMA,,,,,//S,N,CARDNO $ 

123 SDR1 USET,,PHIA,,,G0,GM,,KDFS,,/PHIG,,BQG/1/*REIG* $ 
]2k CASE CASECC,/CASEXX/*TRANRESP>VKEPEAT=3/L00P $ 

125 SDR2 CASEXX,CSTM,MPT,DIT,EQEXIN,SIL,,,BGPDP,LAMA,BQG,PHIG,EST,,/, 

OBQG 1 , OPH I G , OBES 1 , OBEF 1 , PPH I G/*RE I G* $ 

126 OFP 0PHIG,0BQG1,0BEF1,0BES1,,//S,N,CARDN0 $ 

127 COND P3.JUMPPL0T $ 

128 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIP,,PPHIG,GPECT, 

0BES1/PL0TX3/NSIL/LUSEP/JUMPPL0T/PLTFLG/ 
S.N.PFILE $ 

129 PRTMSG PL0TX3// $ 

130 LABEL P3 $ 

131 JUMP FINIS $ 

132 LABEL ERR0R1 $ 

133 PRTPARM //-1/*NMDS* $ 
13*+ LABEL ERR0R2 $ 

135 PRTPARM //-2/*NMDS* $ 

136 LABEL ERR0R3 $ 

137 PRTPARM //-3/*NMDS* $ 



2.13-6 (05/30/86) 



NORMAL MODES WITH DIFFERENTIAL STIFFNESS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 13 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

138 LABEL ERR0R4 $ 

139 PRTPARM //-4/*NMDS* $ 

140 LABEL ERRORS $ 

141 PRTPARM //-5/*NMDS* $ 

142 LABEL ERR0R6 $ 

143 PRTPARM //-6/ftNMDS* $ 

144 LABEL FINIS $ 

145 PURGE DUMMY/MI NUS1 $ 

146 END $ 



2.13-7 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.13.2 Description of Important DMAP Operations for Normal Modes with Differential Stiffness 

5. 6P1 generates coordinate system transformation matrices, tables of grid point locations, and 
tables relating the internal and external grid point numbers. 

6. PLTTRAN modifies special scalar grid points in the BGPDT and SIL tables. 

7. GP2 generates Element Connection Table with internal indices. 

10. Go to DMAP No. 18 if there are no structure plot requests. 

11. PLTSET transforms user input into a form used to drive the structure plotter. 

12. PRTMSG prints error messages associated with the structure plotter. 

15. Go to DMAP No. 18 if no undeformed structure plots are requested. 

16. PL0T generates all requested undeformed structure plots. 

17. PRTMSG prints plotter data and engineering data for each undeformed plot generated. 

19. GP3 generates Static Loads Table and Grid Point Temperature Table. 

20. TA1 generates element tables for use in matrix assembly and stress recovery. 

21. Go to DMAP No. 132 and print Error Message No. 1 if no structural elements have been 
defined. 

25. EMG generates structural element stiffness and mass matrix tables and dictionaries for later 
assembly by the EMA module. 

27. Go to DMAP No. 29 if no stiffness matrix is to be assembled. 

28. EMA assembles stiffness matrix [K* ] and Grid Point Singularity Table. 

30. Go to DMAP No. 140 and print Error Message No. 5 if no mass matrix is to be assembled. 

31. EMA assembles mass matrix [M ]. 

32. Go to DMAP No. 35 if no weight and balance information is requested. 

33. GPWG generates weight and balance information. 

34. 0FP formats the weight and balance information prepared by GPWG and places it on the system 
output file for printing. 

36. Equivalence [K x ] to [K ] if there are no general elements. 

37. Go to DMAP No. 39 if there are no general elements. 

38. SMA3 adds general elements to [K* ] to obtain stiffness matrix [ K qq 3- 

41. GP4 generates flags defining members of various displacement sets (IISET), forms multipoint 
constraint equations [R ] {u } = and forms enforced displacement vector {Y }. 

9 9 ^ 

42. Go to DMAP No. 142 and print Error Message No. 6 if no independent degrees of freedom are 
defined. 

45. Go to DMAP No. 47 if there are no support cards. 

46. Go to DMAP No. 134 and print Error Message No. 2. 
48. Go to DMAP No. 53 if general elements are present. 



2.13-8 (05/30/86) 



NORMAL MODES WITH DIFFERENTIAL STIFFNESS 



50. Go to DMAP No. 53 if no potential grid point singularities exist. 

51. GPSP generates a table of potential grid point singularities. ' 

52. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 

54. Equivalence [K ] to [K ] if no multipoint constraints exist. 

gg nn r 

55. Go to DMAP No. 58 if no multipoint constraints exist. 

56. MCE1 partitions multipoint constraint equations [R ] = [R ' R ] and solves for 

r ^ g m i n 

multipoint constraint transformation matrix [G 1 = -[R ]" [R ]. 
r . ¦- m L m J L n J 

57. MCE2 partitions stiffness matrix 



[K ] = 

gg J 



and performs matrix reduction 



K I K 
n n ¦ nm 

mn mm 



[K ] = [K ] + [G T ]LK ] + [K T ][G ] + [G T ][K ][G J. 
L nn J L nn J L m JL mn J L mn JL m J L m JL mm JL m J 



59. Equivalence [K_ ] to [K ff ] if no single-point constraints exist. 

60. Go to DMAP No. 62 if no single-point constraints exist. 

61. SCE1 partitions out single-point constraints 



£ V = 



^ff_|_ K fs_ 

K.IK 
sf ss 



63. Equivalence [K ff ] to [K ] if no omitted coordinates exist. 

64. Go to DMAP No. 66 if no omitted coordinates exist. 

65. SMP1 partitions constrained stiffness matrix 



[K ff ] = 



K I K 
aa - ao 



solves for transformation matrix [Gl = -[K 1" [K 1 

O 00 Ua 

and performs matrix reduction [K 1 = [K aa ] + [K„ a ][G„] . 

da aa Oa 

67. RBMG2 decomposes constrained stiffness matrix [K ] = [Ljj ][U ]. 

68. SSG1 generates static load vectors (P ' }. 

69. Equivalence {P } to {P } if no constraints are applied. 

g * 

70. Go to DMAP No. 72 if no constraints are applied. 



2.13-9 (05/30/86) 



DISPLACEMENT RIGID FORMATS 
71. SS62 applies constraints to static load vectors 

' m / 
i P n } = 7"! • (P f } = { V " CK fs« Y s } ' 

' S ' 

( P ) T 

i P f } = T a - and { V = {P a } + CG o ]{P o } * 

' o f 

73. SS63 solves for displacements of independent coordinates 

solves for displacements of omitted coordinates 

calculates residual vector (RULV) and residual vector error ratio for independent 
coordinates 

{6PJ = {P J - [K ]{u > , 

AJ A/ A> A< As 



< P I»V 



and calculates residual vector (RU0V) and residual vector error ratio for omitted 
coordinates 



{uJ>{6P } 

e = 
o 



< P o Ku o> 



74. Go to DMAP No. 77 if residual vectors are not to be printed. 

75. MATGPR prints the residual vector for independent coordinates (RULV), 

76. MATGPR prints the residual vector for omitted coordinates (RU0V). 



2.13-10 (05/30/86) 



NORMAL MODES WITH DIFFERENTIAL STIFFNESS 



78. SDR1 recovers dependent displacements 



<V ¦[8 ]fV + lu S> 




= (u n > 



{u m> ¦ [W • 




and recovers single-point forces of constraint 

Cq s J ¦ -{P t } + [Kj s ](u f) ? [K ss ]{Y s } . 



79. SDR2 calculates element forces (0EF1) and stresses (0ES1) and prepares load vectors (0PG1), 
displacement vectors (0UGV1) and single-point forces of constraint (0QG1) for output and 
translation components of the displacement vector (PUGV1) for the static solution. 

80. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

81. SCAN examines the element stresses and forces calculated by SDR2 and generates scanned 
output that meets the specifications set by the user. 

82. 0FP formats the scanned output table prepared by SCAN and places it on the system output 
file for printing. 

83. Go to DMAP No. 86 if no static solution deformed structure plots are requested. 

84. PL0T generates all requested static solution deformed structure and contour plots. 

85. PRTMSG prints plotter data, engineering data, and contour data for each static solution 
deformed plot generated. 

87. TA1 generates element tables for use in differential stiffness matrix assembly. 

88. DSMG1 generates differential stiffness matrix [K ]. 

gg 

89. Equivalence [K ] to [K pn ] and [M ] to [M np ] if no multipoint constraints exist. 

90. Go to DMAP No. 92 if no multipoint constraints exist. 

91. MCE2 partitions differential stiffness matrix 



<] - 



and performs matrix reduction 



K nn I K nm 

K d I K d 
mn mm 



93, 



CC,] ¦ [C,] ? [gee,] ? [£,][<y ? tgtC^J- 

Equivalence [K ] to [K ff ] and [M ] to [M ff ] if no single-point constraints exist. 



2.13-11 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

94. Go to DMAP No. 96 if no single-point constraints exist. 

95. SCE1 partitions out single-point constraints 



Knl - 



K ?f I 

- + - 

K d I K d 
sf ss 



and 



[M J = 
L nn J 



M f f I M f s 

- + - 

M , I M 
sf ss 



97. Equivalence [K^] to [K ] and [M^] to [M a l if no omitted coordinates exist. 

tt aa tt aa 

98. Go to DMAP No. 101 if no omitted coordinates exist. 

99. SMP2 partitions constrained differential stiffness matrix 



[K d f ] = 



K d . K d 
a a ' ao 

7 + 7 

*oa ' C 



and performs matrix reduction PC 3 ] = IK A + LX,J[G,J . 

aa act aO o 

100. SMP2 partitions constrained mass matrix 



[M ff ] = 



M | W 
aa ao 

M oa ' M oo 



and performs matrix reduction 

IK,! = CM„] *¦ CmLiCgJ + [gI][m 1 + [G&[M n J[G J 



aa- 



aa- 



oa-"- o- 



oa- 



oo-"- o* 



103. Equivalence {P^} to CPJj'K {P s > to {P^}, (Y s > to {Y^} and {u°} to {u° b } if a 

scale factor is not specified on a DSFACT card. 

105. DSMG2 adds partitions of stiffness matrix to similar partitions of differential stiffness 
matrix 

<] - ["W + ^aaJ • 

[K^] = [K fs ] + e[K^ s ] and 

[K^ s ] - [K ss ] ? g[Kj $ ] 

and multiplies partitions of load vectors and displacement vectors by the value of the 
differential stiffness scale factor (6) 



{p ? ¦ * { V 



{P^> = 3(P S > 



{Y^} = 3{Y s > and 



<«S°> 



61u°> 



2.13-12 (05/30/86) 



NORMAL MODES WITH DIFFERENTIAL STIFFNESS 

106. RBMG2 decomposes the combined differential stiffness matrix and elastic stiffness matrix 

107. PRTPARM prints the scaled value of the determinant of the combined differential stiffness 
matrix and elastic stiffness matrix. 

108. PRTPARM prints the scale factor (power of ten) of the determinant of the combined 
differential stiffness matrix and the elastic stiffness matrix. 

109. SSG3 solves for displacements of independent coordinates for the value of differential 
stiffness scale factor (g) 

i L an i 

and calculates residual vector (RBULV) and residual vector error ratio for current 
differential stiffness load vector 

<> - < pb > - <]< u *> • 



(p $ )T < ub *> 



110. Go to DMAP No. 112 if the residual vector for current differential stiffness load factor is 
not to be printed. 

111. MATGPR prints the residual vector for current differential stiffness load factor. 

113. SDR1 recovers dependent displacements for the current differential stiffness scale factor 

< u o> = £<y (ub) + {u o b} • 






= <«»' • 



IA! 


= {u£} , 






m 


[G ] {u b } , 
L m J n ' 



m 



and recovers single-point forces of constraint for the current differential stiffness 
scale factor 

{qj!> = -ify + [KjfltUf > + [Kf f ]n b > • 



2.13-13 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

114. SDR2 calculates element forces (0EFB1) and stresses (0ESB1) and prepares displacement 
vectors (0UBGV1) and single-point forces of constraint (0QBG1) for output and translation t 
components of the displacement vector (PUBGV1) for the differential stiffness solution. 

115. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

116. DPD extracts Eigenvalue Extraction Data from Dynamics data block. 

117. Go to DMAP No. 136 and print Error Message No. 3 if there is no Eigenvalue Extraction Data. 
119. READ extracts real eigenvalues and eigenvectors from the equation 

calculates rigid body modes by finding a square matrix [<f> ] such that 

[m Q ] = [*J ][m r .]J> ro ] 
is diagonal and normalized, computes rigid body eigenvectors 



L ao J 



D *ro 



ro 



calculates modal mass matrix' 

Cm] = C^][M aa ][* a J 
and normalizes eigenvectors according to one of the following user requests: 

1) Unit value of a selected component 

2) Unit value of the largest component 

3) Unit value of the generalized mass. 

120. 0FP formats the summary of eigenvalue extraction information (0EIGS) prepared by READ and 
places it on the system output file for printing. 

121. Go to DMAP No. 138 and print Error Message No. 4 if no eigenvalues were found. 

122. 0FP formats the eigenvalues (LAMA) prepared by READ and places them on the system output 
file for printing. 

123. SDR1 recovers dependent components of the eigenvectors 

<y = [g ] u a > , 




— M = {<)>} » U } = [G ] U } , 

, ( T n J T m L m J y n 




2.13-14 (05/30/86) 



ES WITH DIFFERENTIAL STIFFNESS 



FFERENTIAL STIFFNESS 



must be defined in the first subcase with a L0AD, 



selection, unless all loadi- 



ng is specified by grid point 



the second subcase, either to select a DSFACT set from the 

tly select the DEFAULT value of unity. 

rd subcase to select an EIGR bulk data card. 

Differential Stiffness 

in Normal Modes with Differential Stiffness: 
ve integer value of this parameter causes the ASET output 

the GP4 module. A negative integer value or suppresses 

data block. The default value is 0. 

optional use. The default value is -1. 

^-^»2^p™^^ 

rameters cause the generation of coupled mass matrices 

es for all bar elements, rod elements, and plate elements 

> integer value of this parameter causes the Grid Point 
d and the resulting weight and balance information to be 
ises are ignored. 

stations of the external surface areas for the 
sional elements are activated by this parameter when they 
*. The results are multiplied by the real value of this 

under the PARAM bulk data card for details. 
me computations for the two-dimensional and 
activated by this parameter when they are generated in 
e multiplied by the real value of this parameter. See 

bulk data card for details. 

f the structural mass matrix are multiplied by the real 

y are generated in the EMA module. Not recommended for 



•aint {q s > = [K fs ] T {<|. f }. 

he third subcase from CASECC into CASEXX. 

and stresses (0BES1) and prepares eigenvectors 
aint (0BQG1) for output and translation components 
1 mode solution. 

and places them on the system output file for 

solution deformed structure plots are requested, 
ilue solution deformed structure and contour plots, 
data, and contour data for each deformed plot 



execution, 
execution, 
execution, 
execution, 
execution, 
execution. 



3-17 (05/30/86) 



•15 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.13.3 Output for Normal Modes with Differential Stiffness 

The Eigenvalue Summary Table and the Eigenvalue Analysis Summary, as described under Normal' 
Modes Analysis (see Section 2.3.3), are automatically printed. 

The value of the determinant of the sum of the elastic stiffness and the differential 
stiffness is also automatically printed. 

The following output may be requested: 

1. Nonzero components of the applied static load for the linear solution at selected grid 
points. 

2. Displacement and nonzero components of the single-point forces of constraint, with and 
without differential stiffness, at selected grid points. 

3. Forces and stresses in selected elements, with and without differential stiffness. 

4. Scanned output of forces and elements in selected elements. 
The following plotter output may be requested: 

1. Deformed and undeformed plots with and without differential stiffness. 

2. Contour plots of stresses and displacements with and without differential stiffness. 
The following output may be requested for the eigenvector solution subcase: 

1. Eigenvectors along with the associated eigenvalue for each mode. 

2. Nonzero components of the single-point forces of constraint for selected modes at 
selected grid points. 

3. Forces and stresses in selected elements for selected modes. 

4. Undeformed plot of the structural model and mode shapes for selected modes. 

5. Contour plots of stresses and displacements for selected modes. 

2.13.4 Case Control Deck for Normal Modes with Differential Stiffness 

The following items relate to subcase definition and data selection for Normal Modes with 
Differential Stiffness: 

1. The Case Control Deck must contain three subcases. Output selections may be made above 
the subcase level and within the individual subcases. 

2. The linear solution is output from the first subcase. The static differential stiffness 
solution is output from the second subcase. The eigenvector solution is output from the 
third subcase. 

3. An SPC set must be selected above the subcase level unless all constraints are specified 
on GRID cards. 

2.13-16 (05/30/86) 



NORMAL MODES WITH DIFFERENTIAL STIFFNESS 

4. A static loading condition must be defined in the first subcase with a L0AD, 
TEMPERATURE (L0AD), or DEF0RM selection, unless all loading is specified by grid point 
displacements on SPC cards. 

5. DSC0EFFICIENT must appear in the second subcase, either to select a DSFACT set from the 
Bulk Data Deck, or to explicitly select the DEFAULT value of unity. 

6. METH0D must appear in the third subcase to select an EIGR bulk data card. 

2.13.5 Parameters for Normal Modes with Differential Stiffness 

The following parameters are used in Normal Modes with Differential Stiffness: 

1. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2. AUT0SPC - reserved for future optional use. The default value is -1. 

3. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTRIA2, CPTUBE, CPQDPLT, CPTRPLT, 
CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

4. GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. All fluid related masses are ignored. 

5. SURFACE - optional. The computations of the external surface areas for the 
two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

6. V0LUME - optional. The volume computations for the two-dimensional and 
three-dimensional elements are activated by this parameter when they are generated in 
the EMG module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details. 

7. WTMASS - optional. The terms of the structural mass matrix are multiplied by the real 
value of this parameter when they are generated in the EMA module. Not recommended for 
use in hydroelastic problems. 



2.13-17 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.13.6 Optional Diagnostic Output for FEER 

Special detailed information obtained by requesting DIA6 16 in the Executive Control Deck is * 
the same as that described under Normal Modes Analysis (see Section 2.3.6). 

2.13.7 The APPEND Feature 

The APPEND feature can be used for real eigenvalue extraction in Normal Modes with 
Differential Stiffness. See Section 2.3.7 for details. 

2.13.8 Rigid Format Error Messages from Normal Modes with Differential Stiffness 

The following fatal errors are detected by the DMAP statements in the Normal Modes with 
Differential Stiffness rigid format. The text for each error message is given below in capital 
letters and is followed by additional explanatory material, including suggestions for remedial 
action. 



NORMAL M0DES WITH DIFFERENTIAL STIFFNESS ERR0R MESSAGE N0. 1 - N0 STRUCTURAL ELEMENTS HAVE BEEN 
DEFINED. 

No structural elements have been defined with Connection cards. 

N0RMAL M0DES WITH DIFFERENTIAL STIFFNESS ERR0R MESSAGE N0. 2 - FREE B0DY SUPP0RTS N0T ALL0WED. 

Free bodies are not allowed in Normal Modes with Differential Stiffness. The SUP0RT cards must be 
removed from the Bulk Data Deck and other constraints applied if required for stability. 

N0RMAL M0DES WITH DIFFERENTIAL STIFFNESS ERR0R MESSAGE N0. 3 - EIGENVALUE EXTRACTION DATA REQUIRED 
F0R REAL EIGENVALUE ANALYSIS. 

Eigenvalue extraction data must be supplied on an EIGR card in the Bulk Data Deck and METH0D in the 
Case Control Deck must select an EIGR set. 

N0RMAL M0DES WITH DIFFERENTIAL STIFFNESS ERR0R MESSAGE N0. 4 - N0 EIGENVALUE F0UND. 
No eigenvalues were found in the frequency range specified by the user. 

N0RMAL M0DES WITH DIFFERENTIAL STIFFNESS ERR0R MESSAGE N0. 5 - MASS MATRIX REQUIRED F0R REAL 
EIGENVALUE ANALYSIS. 

The mass matrix is null because either no structural elements were defined with Connection cards, 
nonstructural mass was not defined on a Property card or the density was not defined on a Material 
card. 

N0RMAL M0DES WITH DIFFERENTIAL STIFFNESS ERR0R MESSAGE N0. 6 - N0 INDEPENDENT DEGREES 0F FREED0M 
HAVE BEEN DEFINED. 

Either no degrees of freedom have been defined on GRID, SP0INT or Scalar Connection cards, or all 
defined degrees of freedom have been constrained by SPC, MPC, SUP0RT, 0MIT or GRDSET cards, or 
grounded on Scalar Connection cards. 

2.13-18 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.14 STATIC ANALYSIS USING CYCLIC SYMMETRY 

2.14.1 DMAP Sequence for Static Analysis Using Cyclic Symmetry 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT Ht 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

OPTIONS IN EFFECT GO ERR=2 LIST NODECK NOREF NOOSCAR 



1 BEGIN DISP lit - STATIC ANALYSIS WITH CYCLIC SYMMETRY - APR. 1986 $ 

2 PRECHK ALL $ 

3 FILE KKK=SAVE/PK=SAVE $ 
k FILE UXV=APPEND $ 

5 PARAM //*MPYVCARDN0/O/O $ 

6 PARAM //*N0P*/V,Y,CYCI0=1 $ 

7 GP1 GE0M1,GE0M2,/GPL,EQEXIN,GPDT,CSTM,BGPDT,SIL/S,N,LUSET/ 

N0GPDT/MINUS1=-1 $ 

8 PLTTRAN BGPDT,SIL/BGPDP,SIP/LUSET/S,N,LUSEP $ 

9 GP2 GE0M2.EQEXIN/ECT $ 

10 PARAML PCDB//*PRES*////JUMPPLOT $ 

11 PURGE PLTSETX,PLTPAR,GPSETS,ELSETS/JUMPPLOT $ 

12 COND Pl.JUMPPLOT $ 

13 PLTSET PCDB,EQEXIN,ECT/PLTSETX,PLTPAR,GPSETS,EL$ETS/S,N,NSIL/ 

S.N.JUMPPLOT $ 

lit PRTMSG PLTSETX// $ 

15 PARAM //*MPY*/PLTFLG/1/1 $ 

16 PARAM //*MPY*/PF!LE/0/0 $ 

17 COND P1,JUMPPL0T $ 

18 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT t EQEXIN,SIL,,ECT,,/PLOTXl/ 

NS I L/LUSET/S , N , JUMPPLOT/S ,N , PLTF LG/S , N , PF I LE $ 

19 PRTMSG PL0TX1// $ 

20 LABEL PI $ 

21 GP3 GE0M3,EQEXIN,GEOM2/SLT,GPTT/S,N,N0GRAV $ 

2.14-1 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT U 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

22 PARAM //*AND*/N0MGG/N0GRAV/V,Y,GRDPNT=-1 $ 

23 TA1 ECT,EPT,BGPDT,SIL,GPTT,CSTM/EST,GEI , GPECT,,/ 

LUSET/S,N,N0SIMP/1/S,N,N0GENL/S,N,GENEL $ 

2k PARAM //*AND*/NOELMT/NOGENL/NOSIMP $ 

25 COND ERR0R4.N0ELMT $ 

26 PURGE GPST/NOSIMP/OGPST/GENEL $ 

27 COND LBL1.N0SIMP $ 

28 PARAM //*ADD*/NOKGGX/1/0 $ 

29 EMG EST.CSTM,MPT,DIT,GE0M2,/KELM,KDICT,MELM,MDICT,,,/S,N,N0KGGX/ 

S , N , N0MGG////C , Y , COUPMASS/C , Y , CPBAR/ 

C,Y,CPR0D/C,Y,CPQUAD1/C,Y,CPQUAD2/C,Y,CPTRIA1/C,Y,CPTRIA2/ 
C , Y , CPTUBE/C , Y , CPQDPLT/C , Y , CPTRPLT/C , Y , CPTRBSC/ 
V,Y,VOLUME/V,Y, SURFACE $ 

30 PURGE KGGX.GPST/NOKGGX/MGG/NOMGG $ 

31 COND JMPKGG,NOKGGX $ 

32 EMA GPECT, KDICT.KELM/KGGX.GPST $ 

33 LABEL JMPKGG $ 

3if COND JMPMGG.NOMGG $ 

35 EMA GPECT, MDICT,MELM/MGG,/-1/C,Y,WTMASS=1.0 $ 

36 LABEL JMPMGG $ 

37 COND LBL1.GRDPNT $ 

38 COND ERROR2.N0MGG $ 

39 GPWG BGPDP,CSTM,EQEXIN,MGG/OGPWG/V,Y,GRDPNT/C,Y,WTMASS 3 
kO OFP OGPWG,,,,,//S,N,CARDNO $ 

Itl LABEL LBL1 $ 

42 EQUIV KGGX,KGG/NOGENL $ 

i»3 COND LBL11A.N0GENL $ 

hk SMA3 GEI,KGGX/KGG/LUSET/NOGENL/NOSIMP $ 

45 LABEL LBLMA $ 



2.14-2 (05/30/86) 



STATIC ANALYSIS USING CYCLIC SYMMETRY 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 14 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

46 PARAM //>VMPY*/NSK IP/0/0 $ 

47 GP4 CASECC , GE0M4 , EQEX I N , GPDT , BGPDT, CSTM, GPST/RG , YS, USET, ASET/ 

LUSET/S,N,MPCF1/S,N,MPCF2/S,N,SINGLE/S,N,0MIT/S,N,REACT/ 
S,N,NSKIP/S,N,REPEAT/S,N,NOSET/S,N,NOL/S,N,NOA/C,Y,ASETOUT/ 
S.Y.AUTOSPC $ 

48 COND ERROR3.N0L $ 

49 PARAM //*NOT*/REACDATA/REACT $ 

50 COND ERR0R6.REACDATA $ 

51 PURGE GM/MPCF1/GO,KOO,LOO,PO,UOOV,RUOV/OMIT/PS,KFS,KSS,QG/SINGLE $ 

52 GPCYC GE0M4,EQEXiN,USET/CYCD/V,Y,CTYPE/S,N,N0G0 $ 

53 COND ERROR7.N0GO $ 

54 COND LBL4,GENEL $ 

55 PARAM //*EQ*/GPSPFLG/AUTOSPC/0 $ 

56 COND LBL4.GPSPFLG $ 

57 GPSP GPL t GPST, USET, S1L/0GPST/S,N,N0GPST $ 

58 OFP OGPST,,,,,//S,N,CARDNO $ 

59 LABEL LBL4 $ 

60 EQUIV KGG.KNN/MPCF1 $ 

61 COND LBL2.MPCF1 $ 

62 MCE1 USET,RG/GM $ 

63 MCE2 USET,GM,KGG,,,/KNN,,, $ 

64 LABEL LBL2 $ 

65 EQUIV KNN.KFF/SINGLE $ 

66 COND LBL3, SINGLE $ 

67 SCE1 USET,KNN,,,/KFF,KFS,KSS,,, $ 

68 LABEL LBL3 $ 

69 EQUIV KFF,KAA/OMIT $ 

70 COND LBL5.0MIT $ 



2.14-3 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT ]k 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

71 SMP1 USET,KFF,,,/GO,KAA,KO0,LO0,,,,, $ 

72 LABEL LBL5 $ 

73 SSG1 SLT,BGPDT,CSTM,SIL,EST,MPT,GPTT,EDT,MGG,CA$ECC,DIT,/PG,,,,/ 

LUSET/NSKIP $ 

Ik EQUIV PG,PL/NOSET $ 

75 COND LBL9.N0SET $ 

76 SSG2 USET,GM,YS,KFS,G0,,PG/,P0,PS,PL $ 

77 COND LBL9.0MIT $ 

78 SSG3 L00,K0O,PO,, t /U00V,,RU0V,/-l/V,Y,IRES=-l $ 

79 COND LBL9, IRES $ 

80 MATGPR GPL,USET,SiL,RUOV//*0* $ 

81 LABEL LBL9 $ 

82 EQUIV PL,PX/CYCI0 $ 

83 COND LBLIO.CYCIO $ 

84: CYCT1 PL/PX,GCYCF/V t Y,CTYPE/*FORE*/V,Y,NSEGS=-l/S,Y,KMAX=-l/V,Y, 
NL0AD=1/S,N,N0G0 $ 

85 LABEL LBL10 $ 

86 COND ERR0R7.N0G0 $ 

87 PARAM //*ADD*/K INDEX/0/0 $ 

88 LABEL LBL11 $ 

89 CYCT2 CYCD,KAA,,PX,,/KKK,,PK,,/*FORE*/V f Y,NSEGS/KINDEX/V,Y, 

CYCSEQ=-1/V,Y,NLOAD/S,N,NOGO $ 

90 COND ERROR7.N0G0 $ 

91 RBMG2 KKK/LKK $ 

92 SSG3 LKK,KKK,PK,,,/UKV,,RUKV,/-1/V,Y, IRES $ 

93 CYCT2 CYCD,,,UKV,RUKV,/, t UXV,RUXV,/*BACKVV,Y,NSEGS/KINDEX/ 

V,Y,CYCSEQ/V,Y,NLOAD/S,N,NOGO $ 

Sh COND ERR0R7.N0G0 $ 



2.14-4 (05/30/86) 



STATIC ANALYSIS USING CYCLIC SYMMETRY 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT ]h 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



95 COND LBL14, IRES $ 

96 MATGPR GPL,USET,SIL,RUXV//*A* $ 

97 LABEL LBLU* $ 

98 PARAM //*ADD*/K I NDEX/K INDEX/1 $ 

99 PARAM //ftSUB*/DONE/V,Y,KMAX/K INDEX $ 

100 COND LBL15.D0NE $ 

101 REPT LBL1 1,360 $ 

102 JUMP ERR0R1 $ 

103 LABEL LBL15 $ 

10*1 EQUIV UXV.ULV/CYCIO $ 

105 COND LBL16.CYCI0 $ 

106 CYCT1 UXV/ULV,GCYCB/V,Y,CTYPE/*BACKft/V,Y,NSEGS/V,Y,KMAX/V,Y,NLOAD/ 

S,N,NOGO $ 

107 COND ERR0R7.N0G0 $ 

108 LABEL LBL16 $ 

109 SDR1 USET,PG,ULV,UOOV,YS,GO,GM,PS,KFS,KSS,/UGV,PGG,QG/NSKIP/ 

*STATICSft $ 

110 COND NOMPCF.GRDEQ $ 

1 1 1 EQMCK CASECC, EQEX I N , GPL , BGPDT , S I L , USET, KGG , GM, UGV, PGG , 0_G , CSTM/ 

00_M1/V,Y,OPT=0/V,Y,GRDEQ/NSKIP $ 

112 OFP 0QM1,,,,,//S,N,CARDN0 $ 

113 LABEL NOMPCF $ 

11 it SDR2 CASECC,CSTM,MPT,DIT,EQEXIN,$IL,GPTT,EDT,BGPDP,,QG f UGV,EST, ,PGG/ 
OPG 1 ,0QG 1 , 0UGV1 , OES 1 , OEF 1 , PUGV1 /*STAT I CS* $ 

115 OFP OUGV1,OPG1,OQG1,OEF1,OES1,//S,N,CARDNO $ 

116 SCAN CASECC, 0ES1 ,OEF 1/OESF 1/*RF* $ 

117 OFP 0ESF1, ,,,,//$, N.CARDNO $ 

118 COND P2.JUMPPL0T $ 



2.14-5 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT U 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

119 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIP,PUGV1,,GPECT,0ES1/ 

PL0TX2/NSIL/LUSEP/JUMPPL0T/PLTFLG/S t N,PFILE $ 

120 PRTMSG PL0TX2// $ 

121 LABEL P2 $ 

122 JUMP FINIS $ 

123 LABEL ERROR 1 $ 

12A PRTPARM //-1/ftCYCSTATICS* $ 

125 LABEL ERR0R2 $ 

126 PRTPARM //-2/ACYCSTATICS* $ 

127 LABEL ERR0R3 $ 

128 PRTPARM //-3/*CYCSTATICS* $ 

129 LABEL ERR0R4 $ 

130 PRTPARM //-4/*CYCSTATICS* $ 

131 LABEL ERR0R6 $ 

132 PRTPARM //-6/ACYCSTATICS* $ 

133 LABEL ERR0R7 $ 

13^ PRTPARM //-7/*CYCSTATICS* $ 

135 LABEL FINIS $ 

136 PURGE DUMMY/MINUS1 $ 

137 END $ 



2.14-6 (05/30/86) 



STATIC ANALYSIS USING CYCLIC SYMMETRY 

2.14.2 Description of Important DMAP Operations for Static Analysis Using Cyclic Symmetry 

7. GP1 generates coordinate system transformation matrices, tables of grid point locations, and 
tables relating the internal and external grid point numbers. 

8. PLTTRAN modifies special scalar grid points in the BGPDT and SIL tables. 

9. GP2 generates Element Connection Table with internal indices. , 

12. Go to DMAP No. 20 if there are no structure plot requests. 

13. PLTSET transforms user input into a form used to drive the structure plotter. 

14. PRTMSG prints error messages associated with the structure plotter. 

17. Go to DMAP No. 20 if no undeformed structure plots are requested. 

18. PL0T generates all requested undeformed structure plots. 

19. PRTMSG prints plotter data and engineering data for each undeformed plot generated. 
21. GP3 generates Static Loads Table and Grid Point Temperature Table. 

23. TA1 generates element tables for use in matrix assembly and stress recovery. 

25. Go to DMAP No. 129 and print Error Message No. 4 if no elements have been defined. 

27. Go to DMAP No. 41 if there are no structural elements. 

29. EMG generates structural element stiffness and mass matrix tables and dictionaries for later 
assembly by the EMA module. 

31. Go to DMAP No. 33 if no stiffness matrix is to be assembled. 

32. EMA assembles stiffness matrix [K* ] and Grid Point Singularity Table. 

y y 

34. Go to DMAP No. 36 if no mass matrix is to be assembled. 

35. EMA assembles mass matrix [ M qq L 

37. Go to DMAP No. 41 if no weight and balance information is requested. 

38. Go to DMAP No. 125 and print Error Message No. 2 if no mass matrix exists. 

39. GPWG generates weight and balance information. 

40. 0FP formats the weight and balance information prepared by GPWG and places it on the system 
output file for printing. 

42. Equivalence [K x ] to [K ] if there are no general elements. 

y y y.y 

43. Go to DMAP No. 45 if there are no general elements. 

44. SMA3 adds general elements to [K* ] to obtain stiffness matrix [ K gg ]' 

47. GP4 generates flags defining members of various displacement sets (USET), forms multipoint 
constraint equations [R ] (u } = and forms enforced displacement vector {Y s >. 

48. Go to DMAP No. 127 and print Error Message No. 3 if no independent degrees of freedom are 
defined. 

50. Go to DMAP No. 131 and print Error Message No. 6 if free-body supports are present. 



2.14-7 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



52. GPCYC prepares segment boundary table (CYCD). 

53. Go to DMAP No. 133_and print Error Message No. 7 if CYJ0IN data is inconsistent. 

54. Go to DMAP No. 59 if general elements are present. 

56. Go to DMAP No. 59 if no potential grid point singularities exist. 

57. GPSP generates a table of potential grid point singularities. 

58. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 

60. Equivalence [L] to [K ] if no multipoint constraints exist. 

61. Go to DMAP No. 64 if no multipoint constraints exist. 

62. MCE1 partitions multipoint constraint equations [R ] = [R I R 1 and solves for 

g m i n 

multipoint constraint transformation matrix [G 1 = -[R ] [R 1. 

m m n 

63. MCE2 partitions stiffness matrix 



[I W 



K I K 
n n n m 

K mn ' K mm 



and performs matrix reduction 

[K nn ] - [K nn ] + [GT][K mn ] + [K^JEGJ + [GT] [Kmm ][G m ]. 



¦65. 
66. 
67. 



Equivalence [K ] to [K ff ] if no single-point constraints exist. 
Go to DMAP No. 68 if no single-point constraints exist. 
SCE1 partitions out single-point constraints 



rv ¦ 



f f I f s 
I 

K , i K 
sf ss 



69. 
70. 
71. 



Equivalence [K^] to [K ] if no omitted coordinates exist, 
tf aa 

Go to DMAP No. 72 if no omitted coordinates exist. 
SMP1 partitions constrained stiffness matrix 



[K ff ] - 



K | K 
aa ao 

K a I K 
oa oo 



solves for transformation matrix [G ] = -[K ]" [K 1 

o oo oa 



and performs matrix reduction [K ] = [K ] + [k' ][G ] . 

aa aa oa o 



73. SSG1 generates static load vectors {P }, 



2.14-8 (05/30/86) 



STATIC ANALYSIS USING CYCLIC SYMMETRY 

74. Equivalence {P } to {P.} if no constraints are applied. 

75. Go to DMAP No. 81 if no constraints are applied. 

76. SSG2 applies constraints to static load vectors 



{ -V = 7- ¦ ( V-'<V*t G > p ,, } - • 



{ V = J7-J • lP f> ¦ <V - ^."V 



(P a ) - (P a > + [Gj](P > , 




and calculates determinate forces of reaction {q r > = ~^ r ^ " t D ^ p ji^' 

77. Go to DMAP No. 81 if no omitted coordinates exist. 

78. SSG3 solves for displacements of omitted coordinates (these are not transformed) 

and calculates residual vector (RU0V) and residual vector error ratio for omitted 
coordinates 

UP > - <P > - [K 00 ]<u°} . 

tu o" sP o> 
£ o • 

< pT o><u°> 

79. Go to DMAP No. 81 if residual vectors are not to be printed. 

80. MATGPR prints the residual vector for omitted coordinates (RU0V). 

82. Equivalence {P„} to {P x > if symmetric components of loads have been input. 

83. Go to DMAP No. 85 if symmetric conponents of loads have been input. 

84. CYCT1 transforms loads on analysis points to symmetric components by the equation 

{P x } = [G| ] {F V ' 

2.14-9 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

86. Go to DMAP No. 133 and print Error Message No. 7 if a CYCT1 error was found. 

88. Beginning of loop for cyclic index (KINDEX) values. 

89. CYCT2 transforms matrices and loads from symmetric components to solution set by the 
equations 

where G, = G (cosine) and G 2 = G s (sine) for rotational symmetry, 

and G, = G $ (Symmetric) and G 2 = G A (Antisymmetric) for dihedral symmetry, 

{P.} = [G T ]{P } + [G T ]{P } for rotational symmetry, 

{P k } = ^ {P cS } + ^ {P sA } • 

and {P^} = [Gj]iP cA > + L"g£K p s S } for dihedral symmetry. 

90. Go to DMAP No. 133 and print Error Message No. 7 if a CYCT2 error was found. 

91. RBMG2 decomposes constrained stiffness matrix for solution set 

tV ¦ CL kk ][U kk ] 

92. SSG3 solves for displacements of solution set coordinates 

and calculates residual vector (RUKV) and residual vector error ratio for solution set 
coordinates 

«P k } = <P k >-[K kk ]{u k } , 



(p k"V 



93. CYCT2 finds symmetric components of displacement from solution set data and appends to 
output for each KINDEX. 

94. Go to DMAP No. 133 and print Error Message No. 7 if a CYCT2 error was found. 

95. Go to DMAP No. 97 if residual vectors are not to be printed. 

96. MATGPR prints the residual vector for solution set coordinates (RUXV). 

100. Go to DMAP No. 103 if all cyclic index (KINDEX) values are complete. 

101. Go to DMAP No. 88 if additional cyclic index values are needed. 

102. Go to DMAP No. 123 and print Error Message No. 1 if number of loops exceeds 360. 

104. Equivalence lu } to {u } if output of symmetric components was requested. 

X x, 

105. Go to DMAP No. 108 if output of symmetric components was requested. 

2.14-10 (05/30/86) 



STATIC ANALYSIS USING CYCLIC SYMMETRY 

106. CYCT1 transforms displacements from symmetric components to physical components. 

107. Go to DMAP No. 131 and print Error Message No. 7 if a CYCT1 error was found. 
109. SDR1 recovers dependent displacements 

K:-S ¦ '-<' • 




and recovers single-point forces of constraint 

(q s } - -(P s > ? [4 s ](u f > ? [K SS ]{Y S ) . 

110. Go to DMAP No. 113 if no multipoint constraint force balance is requested. 

111. EQMCK calculates the force and moment equilibrium check and prepares the multipoint 
constraint force balance (0QM1) for output. 

112. 0FP formats the table prepared by EQMCK and places it on the system output file for 
printing. 

114. SDR2 calculates element forces (0EF1) and stresses (0ES1) and prepares load vectors (0PG1), 
displacement vectors (0UGV1) and single-point forces of constraint (0QG1) for output and 
translation components of the displacement vector (PUGV1). 

115. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

116. SCAN examines the element stresses and forces calculated by SDR2 and generates scanned 
output that meets the specifications set by the user. 

117. 0FP formats the scanned output table prepared by SCAN and places it on the system output 
file for printing. 

118. Go to DMAP No. 121 if no deformed structure plots are requested. 

119. PL0T generates all requested deformed structure and contour plots. 

120. PRTMSG prints plotter data, engineering data, and contour data for each deformed plot 
generated. 

122. Go to DMAP No. 135 and make normal exit. 

124. Print Error Message No. 1 and terminate execution. 

126. Print Error Message No. 2 and terminate execution. 

128. Print Error Message No. 3 and terminate execution. 

130. Print Error Message No. 4 and terminate execution. 

132. Print Error Message No. 6 and terminate execution. 

134. Print Error Message No. 7 and terminate execution. 

2.14-11 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.14.3 Output for Static Analysis Using Cyclic Symmetry 

The following printed output, for each loading condition and each symmetric segment or * 
index, may be requested for Static Analysis Using Cyclic Symmetry: 

1. Displacements and components of static loads and single-point forces of constraint at 
selected grid points or scalar points. 

2. Forces and streses in selected elements. 

3. Scanned output of forces and elements in selected elements. 
The following plotter output may be requested: 

1. Undeformed and deformed plots of the structural model (1 segment). 

2. Contour plots of stresses and displacements (1 segment). 

3. X-Y plot of any component of displacement, static load, or single-point force of 
constraint for a grid point or scalar point. 

4. X-Y plot of any stress or force component for an element. 

2.14.4 Case Control Deck for Static Analysis Using Cyclic Symmetry 

The following items relate to subcase definition and data selection for Static Analysis 
Using Cyclic Symmetry: 

1. A separate group of subcases must be defined for each symmetric segment. For dihedral 
symmetry, a separate group of subcases must be defined for each half. There may be up 
to 360 subcases corresponding to 1° segments. 

2. The different loading conditions are defined within each group of subcases. The loads 
on each symmetric segment and the selected output requests may be independent. The 
number of loading cases is specified on the PARAM card NL0AD. 

3. The SPC and MPC request must appear above the subcase level and may not be changed. 

4. An alternate loading method is to define a separate group of subcases for each harmonic 
index, k. The parameter CYCI0 is included and the load components for each index are 
defined directly within each group for the various loading conditions. 

2.14.5 Parameters for Static Analysis Using Cyclic Symmetry 

The following parameters are used in Static Analysis Using Cyclic Symmetry: 
1. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2.14-12 (05/30/86) 



STATIC ANALYSIS USING CYCLIC SYMMETRY 

2. AUT0SPC - reserved for future optional use. The default value is -1. 

3. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTRIA2, CPTUBE, CPQDPLT, CPTRPLT, 
CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

4. CTYPE - required. The BCD value of this parameter defines the type of cyclic symmetry 
as follows: 

(1) R0T - rotational symmetry 

(2) DRL - dihedral symmetry, using right and left halves 

(3) DSA - dihedral symmetry, using symmetric and antisymmetric components 

5. CYCI0 - optional. The integer value of this parameter specifies the form of the input 
and output data. A value of +1 is used to specify physical segment representation, and 
a value of -1 for cyclic transform representation. The default value is +1. 

6. CYCSEQ - optional. The integer value of this parameter specifies the procedure for 
sequencing the equations in the solution set. A value of +1 specifies that all cosine 
terms should be sequenced before all sine terms, and a value of -1 specifies alternating 
cosine and sine terms. The default value is -1. 

7. GRDEQ - optional. A positive integer value of this parameter selects the grid point 
about which equilibrium will be checked for the Case Control output request, MPCF0RCE. 
If the integer value is zero, the basic origin is used. The default value is -1. 

8. 6RDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. All fluid related masses are ignored. 

9. IRES - optional. A positive integer value of this parameter causes the printing of the 
residual vectors following the execution of the SSG3 module. 

10. KMAX - optional. The integer value of this parameter specifies the maximum value of the 
harmonic index. The default value is ALL which implies NSEGS/2 for NSEGS even and 
(NSEGS - l)/2 for NSEGS odd. 

11. NL0AD - optional. The integer value of this parameter is the number of static loading 
conditions. The default value is 1. 

12. NSEGS - required. The integer value of this parameter is the number of identical 
segments in the structural model. 

2.14-13 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

13- ,0 PJ - optional. A positive integer value of this parameter causes both equilibrium and 
multipoint constraint forces to be calculated for the Case Control output request, 
MPCF0RCE. A negative integer value of this parameter causes only the equilibrium force 
balance to be calculated for the output request. The default value is which causes 
only the multipoint constraint forces to be calculated for the output request. 

14. SURFACE - optional- The computations of the external surface areas for the 
two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

15. V0LUME - optional. The volume computations for the two-dimensional and 
three-dimensional elements are activated by this parameter when they are generated in 
the EMG module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details. 

16. WTMASS - optional. The terms of the mass matrix are multiplied by the real value of 
this parameter when they are generated in the EMA module. 

2.14.6 Rigid Format Error Messages from Static Analysis Using Cyclic Symmetry 

The following fatal errors are detected by the DMAP statements in the Static Analysis Using 
Cyclic Symmetry rigid format. The text for each error message is given below in capital letters 
and is followed by additional explanatory material, including suggestions for remedial action. 

STATICS WITH CYCLIC SYMMETRY ERR0R MESSAGE N0. 1 - ATTEMPT T0 EXECUTE M0RE THAN 360 L00PS. 

An attempt has been made to use more than 360 cyclic index (KINDEX) values. This number may be 
increased by ALTERing the REPT instruction in the DMAP. 

STATICS WITH CYCLIC SYMMETRY ERR0R MESSAGE N0. 2 - MASS MATRIX REQUIRED F0R WEIGHT AND BALANCE 
CALCULATI0NS. 

The mass matrix is null because either no elements were defined with Connection cards, 
nonstructural mass was not defined on a Property card or the density was not defined on a Material 
card. 

STATICS WITH CYCLIC SYMMETRY ERR0R MESSAGE N0. 3 - N0 INDEPENDENT DEGREES 0F FREED0M HAVE BEEN 
DEFINED. 

Either no degrees of freedom have been defined on GRID, SP0INT or Scalar Connection cards, or all 
defined degrees of freedom have been constrained by SPC, MPC, SUP0RT, 0MIT or GRDSET cards, or 
grounded on Scalar Connection cards. 



2.14-14 (05/30/86) 



STATIC ANALYSIS USING CYCLIC SYMMETRY 

STATICS WITH CYCLIC SYMMETRY ERR0R MESSAGE N0. 4 - N0 ELEMENTS HAVE BEEN DEFINED. 
No elements have been defined with either Connection cards or GENEL cards. 

STATICS WITH CYCLIC SYMMETRY ERR0R MESSAGE N0. 6 - FREE B0DY SUPPORTS N0T ALL0WED. 

Free bodies are not allowed in Static Analysis Using Cyclic Symmetry. The SUP0RT cards must be 
removed from the Bulk Data Deck and other constraints applied if required for stability. 

STATICS WITH CYCLIC SYMMETRY ERR0R MESSAGE N0. 7 - CYCLIC TRANSF0RMATI0N DATA ERR0R. 

See Section 1.12 for proper modeling techniques and corresponding PARAM card requirements. 



2.14-15 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



2.14-16 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.15 NORMAL MODES ANALYSIS USING CYCLIC SYMMETRY 

2.15.1 DMAP Sequence for Normal Modes Analysis Using Cyclic Symmetry 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 15 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



OPTIONS IN EFFECT GO 



ERR=2 L I ST 



NODECK NOREF NOOSCAR 



1 BEGIN DISP 15 NORMAL MODES ANALYSIS WITH CYCLIC SYMMETRY-APR. 1 986 $ 

2 PRECHK ALL $ 

3 PARAM //*MPY*/CARDN0/O/O $ 

k GP1 GE0M1,GE0M2,/GPL,EQEXIN,GPDT,CSTM,BGPDT,SIL/S,N,LUSET/ 
N0GPDT/MINUS1=-1 $ 

5 PLTTRAN BGPDT,SIL/BGPDP,SIP/LUSET/S,N,LUSEP $ 

6 GP2 GE0M2.EQEXIN/ECT $ 

7 PARAML PCDB//*PRES*////JUMPPLOT $ 

8 PURGE PLTSETX, PLTPAR, GPSETS, ELSETS/JUMPPLOT $ 

9 COND P1,JUMPPL0T $ 

1 PLTSET PCDB, EQEX I N , ECT/PLTSETX , PLTPAR , GPSETS , ELSETS/S , N , NS I L/ 

S.N.JUMPPLOT $ 

11 PRTMSG PLTSETX// $ 

12 PARAM //*MPY*/PLTFLG/1/1 $ 

13 PARAM //ftMPYft/PFlLE/O/0 $ 
lit COND P1,JUMPPL0T $ 

15 PLOT PLTPAR, GPSETS, ELSETS,CASECC,BGPDT, EQEX I N,S I L, ,ECT, ,/PLOTXl/ 

NSIL/LUSET/S,N,JUMPPLOT/S,N,PLTFLG/S,N,PFILE $ 

16 PRTMSG PLOTXl//$ 

17 LABEL PI $ 

18 GP3 GEOM3,EQEXIN,GEOM2/,GPTT/NOGRAV $ 

19 TA1 ECT,EPT,BGPDT,SIL,GPTT,CSTM/EST,GEI,GPECT,,/ 

LUSET/S , N , NOS I MP/1 /S , N , NOGENL/S , N , GENEL $ 

20 COND ERROR6.N0SIMP $ 

21 PURGE OGPST/GENEL $ 

2.15-1 (05/30/86) 



DISPLACEMENT RIGID FORMAIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 15 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

22 PARAM //*ADD*/NOKGGX/l/0 $ 

23 PARAM //*ADD*/NOMGG/l/0 $ 

24 EMG EST,CSTM,MPT,DIT,GE0M2,/KELM,KDICT,MELM,MD1CT,,,/S,N,N0KGGX/ 

S , N , N0MGG////C , Y f COUPMASS/C , Y , CPBAR/C , Y , CPROD/ 
C,Y,CPQUAD1/C,Y,CPQUAD2/C,Y,CPTRIA1/C,Y,CPTRIA2/C,Y,CPTUBE/ 
C,Y,CPQDPLT/C,Y,CPTRPLT/C,Y,CPTRBSC/ 
V,Y,VOLUME/V,Y, SURFACE $ 

25 PURGE KGGX.GPST/NOKGGX $ 

26 COND JMPKGG.NOKGGX $ 

27 EMA GPECT,KDICT,KELM/KGGX,GPST $ 

28 LABEL JMPKGG $ 

29 COND ERROR 1,N0MGG $ 

30 EMA GPECT,MDICT,MELM/MGG,/-1/C,Y,WTMASS=1.0 $ 

31 COND LGPWG.GRDPNT $ 

32 GPWG BGPDP,CSTM,EQEXIN,MGG/0GPWG/V,Y,GRDPNT«-1/C,Y,WTMASS $ 

33 OFP OGPWG,,,,,//S,N,CARDNO $ 
Ik LABEL LGPWG $ 

35 EQUIV KGGX.KGG/NOGENL $ 

36 COND LBL11.N0GENL $ 

37 SMA3 GEI,KGGX/KGG/LUSET/NOGENL/NOSIMP $ 

38 LABEL LBL11 $ 

39 PARAM //*MPYft/NSK I P/O/O $ 

1*0 GP4 CASECC,GE0MJ4,EQEX1N,GPDT,BGPDT,CSTM,GPST/RG,,USET,ASET/ 
LUSET/S,N,MPCFl/S,N,MPCF2/S,N,SINGLE/S,N,0MIT/S f N,REACT/ 
S,N,NSKIP/S,N,REPEAT/S,N,NOSET/S,N,NOL/S,N,NOA/C,Y,ASETOUT/ 
S,Y,AUTOSPC $ 

h] COND ERR0R3.N0L $ 

k2 PARAM //*NOT*/REACDATA/REACT $ 

i*3 COND ERR0R4.REACDATA $ 

kk PURGE GM/MPCF1/G0/0MIT/KFS,QG/SINGLE $ 



2.15-2 (05/30/86) 



NORMAL MODES ANALYSIS USING CYCLIC SYMMETRY 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 15 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



45 GPCYC 

46 COND 

47 COND 

48 PARAM 

49 COND 

50 GPSP 

51 OFP 

52 LABEL 

53 EQUIV 

54 COND 

55 MCE1 

56 MCE2 

57 LABEL 

58 EQUIV 

59 COND 

60 SCE1 

61 LABEL 

62 EQUIV 

63 EQUIV 

64 COND 

65 SMP1 

66 SMP2 

67 LABEL 

68 DPD 

69 COND 



GE0M4,EQEXIN,USET/CYCD/V,Y,CTYPE/S,N,N0G0 $ 

ERR0R5.N0G0 $ 

LBL4.GENEL $ 

//*EQ*/GPSPFLG/AUTOSPC/0 $ 

LBL4.GPSPFLG $ 

GPL , GPST , US ET , S 1 L/OGPST/S , N , NOGPST $ 

OGPST,,,,,//S,N,CARDNO $ 

LBL4 $ 

KGG,KNN/MPCF1/MGG,MNN/MPCF1 $ 

LBL2,MPCF1 $ 

USET.RG/GM $ 

USET,GM,KGG,MGG,,/KNN,MNN,, $ 

LBL2 $ 

KNN,KFF/SINGLE/MNN,MFF/S1NGLE $ 

LBL3, SINGLE $ 

USET,KNN,MNN,,/KFF,KFS,,MFF,, $ 

LBL3 $ 

KFF,KAA/OMIT $ 

MFF.MAA/OMIT $ 

LBL5.0MIT $ 

USET.KFF , , ,/G0,KAA,KOO,LO0, , , , , $ 

USET.GO.MFF/MAA $ 

LB15 $ 

DYNAMICS, GPL, S I L,USET/GPLD,S I LD,USETD, , , , , , .EED.EQDYN/ 
LUSET/LUSETD/NOTFL/NODLT/NOPSDL/NOFRL/ 
N0NLFT/N0TRL/S,N,NOEED//NOUE $ 

ERR0R2,N0EED $ 



2.15-3 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 15 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



70 CYCT2 

71 COND 

72 READ 

73 OFP 
Jk COND 

75 OfP 

76 CYCT2 

77 COND 

78 SDR1 

79 COND 

80 EQMCK 

81 OFP 

82 LABEL 

83 SDR2 

84 OFP 

85 SCAN 

86 OFP 

87 COND 

88 PLOT 

89 PRTMSG 

90 LABEL 

91 JUMP 

92 LABEL 

93 PRTPARM 



CYCD,KAA,MAA,,,/KKK,MKK,,,/*F0RE*/V,Y,NSEGS=-1/V,Y,KINDEX=-1/ 
V,Y,CYCSEQ»-1/1/S,N,N0G0 $ 

ERRORS, NOGO $ 

KKK,MKK,,,EED,,CASECC/LAMK,PHIK,MI,OEIGS/*MODES*/S,N,NEIGV $ 

0E1GS,,,,,//S,N, CARDNO $ 

FINIS, NEIGV $ 

LAMK,,,,,//S,N,CARDNO $ 

CYCD,,,,PHIK,LAMK/,,,PHIA,LAMA/*BACK*/V,Y,NSEGS/V,Y,KINDEX/ 
V,Y,CYCSEQ/1/S,N,N0G0 $ 



ERR0R5*N0G0 $ 

USET,,PHIA,,,G0,GM,,KFS,,/PHIG,,QG/1/*REIG* $ 

NOMPCF.GRDEQ $ 

CASECC,EQEXIN,GPL,BGPDT,SIL,USET,KGG,GM,PHIG,LAMA,QG,CSTM/ 
0QM1/V,Y,0PT=0/V,Y,GRDEQ/-1 $ 

0QM1,,,,,//S,N, CARDNO $ 

NOMPCF $ 

CASECC,CSTM,MPT,DIT,EQEXIN,SIL,,,BGPDP,LAMA,QG,PHIG,EST,,/, 
OQG 1 , OPH I G , OES 1 , OEF 1 , PPH I G/*RE I G* $ 

0PHIG.0QG1 ,OEF 1 ,0ES1 , ,//S,N, CARDNO $ 

CASECC,OESl,OEFl/OESFl/*RFft $ 

0ESF1,,,,,//S,N, CARDNO $ 

P2.JUMPPL0T $ 

PLTPAR,GPSETS,ELSETS,CASECC t BGPDT,EQEXIN,SIP,,PPHIG,GPECT,OESl/ 
PL0TX2/NSIL/LUSEP/JUMPPL0T/PLTFLG/S,N,PFILE $ 

PL0TX2// $ 

P2 $ 

FINIS $ 

ERR0R1 $ 

//-1/ACYCMODES* $ 



2.15-4 (05/30/86) 



NORMAL MODES ANALYSIS USING CYCLIC SYMMETRY 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 15 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

9*t LABEL ERR0R2 $ 

95 PRTPARM //-2/*CYCM0DES* $ 

96 LABEL ERR0R3 $ 

97 PRTPARM //-3/*CYCM0DES* $ 

98 LABEL ERRORS $ 

99 PRTPARM //-V*CYCMODES* $ 
500 LABEL ERR0R5 $ 

101 PRTPARM //-5/ftCYCMODES* $ 

102 LABEL ERRORS $ 

103 PRTPARM //-6/ACYCMODES* $ 
101* LABEL FINIS $ 

105 PURGE DUMMY/MINUS1 $ 

106 END $ 



2.15-5 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.15.2 Description of Important DMAP Operations for Normal Modes Analysis Using Cyclic Symmetry 

4. GP1 generates coordinate system transformation matrices, tables of grid point locations, and 
tables relating the internal and external grid point numbers. 

5. PLTTRAN modifies special scalar grid points in the 8GPDT and SIL tables. 

6. GP2 generates Element Connection Table with internal indices. 
9. Go to DMAP No. 17 if there are no structure plot requests. 

10. PLTSET transforms user input into a form used to drive the structure plotter. 

11. PRTMSG prints error messages associated with the structure plotter. 

14. Go to DMAP No. 17 if no undeformed structure plots are requested. 

15. PL0T generates all requested undeformed structure plots. 

16. PRTMSG prints plotter data and engineering data for each undeformed plot generated, 

18. GP3 generates Static Loads Table and Grid Point Temperature Table. 

19. TA1 generates element tables for use in matrix assembly and stress recovery. 

20. Go to DMAP No. 102 and print Error Message No. 6 if no structural elements have been 
defined. 

24. EMG generates structural element stiffness and mass matrix tables and dictionaries for later 
assembly by the EMA module. 

26. Go to DMAP No. 28 if no stiffness matrix is to be assembled. 

27. EMA assembles stiffness matrix [K* ] and Grid Point Singularity Table. 

29. Go to DMAP No. 92 and print Error Message No. 1 if no mass matrix is to be assembled. 

30. EMA assembles mass matrix [M „]. 

gg 

31. Go to DMAP No. 34 if no weight and balance information is requested. 

32. GPWG generates weight and balance information. 

33. 0FP formats the weight and balance information prepared by GPWG and places it on the system 
output file for printing. 

35. Equivalence [K ] to [K ] if there are no general elements. 

36. Go to DMAP No. 38 if there are no general elements. 

37. SMA3 adds general elements to [K x ] to obtain stiffness matrix [K 1. 

3 gg gg 

40. GP4 generates flags defining members of various displacement sets (USET), forms multipoint 

constraint equations [R ] {u } = and forms enforced displacement vector {Y }. 

9 9 s 

41. Go to DMAP No. 96 and print Error Message No. 3 if no independent degrees of freedom are 
defined. 

43. Go to DMAP No. 98 and print Error Message No. 4 if free-body supports are present. 

45. GPCYC prepares segment boundary table (CYCD). 

46. Go to DMAP No. 100 and print Error Message No. 5 if CYJ0IN data is inconsistent. 



2.15-6 (05/30/86) 



NORMAL MODES ANALYSIS USING CYCLIC SYMMETRY 



47. Go to DMAP No. 52 if general elements are present. 

49. Go to DMAP No. 52 if no potential grid point singularities exist. 

50. GPSP generates a table of potential grid point singularities. 

51. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 

53. Equivalence [K ] to [K ] and [M ] to [Ml if no multipoint constraints exist. 

^ gg nn gg nn 

54. Go to DMAP No, 57 if no multipoint constraints exist. 

55. MCE1 partitions multipoint constraint equations [R ] = [R jR ] and solves for 
multipoint constraint transformation matrix [G m ] = "t^" L" R n -^ 

56. MCE2 partitions stiffness matrix 



CI W ¦ 



K 1 K 
mn mm 



and performs matrix reduction 

[K n „] - [K n „] + [G^KJ + [K^CGJ ? [GX»W • 



58. Equivalence [K ] to [K ff ] and [Ml to [M ff ] if no single-point constraints exist. 

59. Go to DMAP No. 61 if no single-point constraints exist. 

60. SCE1 partitions out single-point constraints 



tW ¦ 



% _]_ K fs 
K sf i K ss 



and 



[•W ¦ 



M sf ' M ss 



62. Equivalence [K,J to [K ] if no omitted coordinates exist, 
ft aa 



63. Equivalence [M ff ] to [M ] if no omitted coordinates exist. 

64. Go to DMAP No. 67 if no omitted coordinates exist. 

65. SMP1 partitions constrained stiffness matrix 



[K ff ] = 



K | K 
aa ao 



solves for transformation matrix [G Q ] = -[K Q0 ] ^ oa } 
and performs matrix reduction [K ] = [K afl ] + [K oa ][G Q ] . 



2.15-7 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



66. SMP2 partitions constrained mass matrix 



[M ff ] = 



M t M 
aa ao 



oa oo 



and performs matrix reduction 

[M ] = [M ] + [M T J[G J + [g]"][M 1 + [G^M l[Gj . 
L aa aa J oa o o oa o JL oo o J 

68. DPD extracts Eigenvalue Extraction Data from Dynamics data block. 

69. Go to DMAP No. 94 and print Error Message No. 2 if there is no Eigenvalue Extraction Data. 

70. CYCT2 transforms matrices from symmetric components to solution set by the equations 

CW = ^W^ + ^ K aa£<y - 
and [M kj< ] = [GjlCM^lCGj] + [G^][M aa [G 2 ] , 

where G, = G (cosine) and G~ = G (sine) for rotational symmetry, 

and G, = G s (Symmetric) and G 2 = G ft (Antisymmetric) for dihedral symmetry. 

71. Go to DMAP No. 100 and print Error Message No. 5 if a CYCT2 error was found. 

72. READ extracts real eigenvalues and eigenvectors from the equation 

calculates modal mass matrix 

Cm] = [?J][M kk ][* k ] 
and normalizes eigenvectors according to one of the following user requests: 

1) Unit value of a selected component 

2) Unit value of the largest component 

3) Unit value of the generalized mass. 

73. 0FP formats the summary of eigenvalue extraction information (0EIGS) prepared by READ and 
places it on the system output file for printing. 

74. Go to DMAP No. 104 and make normal exit if no eigenvalues were found. 

75. 0FP formats the eigenvalues (LAMK) prepared by READ and places them on the system output 
file for printing. 

76. CYCT2 finds symmetric components of eigenvectors from solution set eigenvectors. 

77. Go to DMAP No. 100 and print Error Message No. 5 if a CYCT2 error was found. 



2.15-8 (05/30/86) 



c~y 



NORMAL MODES ANALYSIS USING CYCLIC SYMMETRY 
78. SDR1 recovers dependent components of the eigenvectors 

< V> = [g ] i y , JM = *M 



U } = [G 1 H ,} , 
-Mil- L m J - T n- ' 




and recovers single-point forces of constraint iq } - [K f ] {f*h 

79. Go to DMAP No. 82 if no multipoint constraint force balance is requested. 

80. EQMCK calculates the force and moment equilibrium check and prepares the multipoint 
constraint force balance (0QM1) for output. 

81. 0FP formats the table prepared by EQMCK and places it on the system output file for 
printing. 

83. SDR2 calculates element forces (0EF1) and stresses (0ES1) and prepares eigenvectors (0PHIG) 
and single-point forces of constraint (0QG1) for output and translation components of the 
eigenvectors (PPHIG). 

84. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

85. SCAN examines the element stresses and forces calculated by SDR2 and generates scanned 
output that meets the specifications set by the user. 

86. 0FP formats the scanned output table prepared by SCAN and places it on the system output 
file for printing. 

87. Go to DMAP No. 90 if no deformed structure plots are requested. 

88. PL0T generates all requested deformed structure and contour plots. 

89. PRTMSG prints plotter data, engineering data, and contour data for each deformed plot 
generated. 

91. Go to DMAP No. 104 and make normal exit. 

93. Print Error Message No. 1 and terminate execution. 

95. Print Error Message No. 2 and terminate execution. 

97. Print Error Message No. 3 and terminate execution. 

99. Print Error Message No. 4 and terminate execution. 

101. Print Error Message No. 5 and terminate execution. 

103. Print Error Message No. 6 and terminate execution. 



2.15-9 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.15.3 Output for Normal Modes Analysis Using Cyclic Symmetry 

The Eigenvalue Summary Table and the Eigenvalue Analysis Summary, as described under Normal * 
Modes Analysis (see Section 2.3.3), are automatically printed. 

Each NASTRAN run calculates modes for only one symmetry index, k. The following output may 
be requested: 

1. Eigenvectors along with the associated eigenvalue for each mode. 

2. Nonzero components of the single-point forces of constraint for selected modes at 
selected grid points. 

3. Forces and stresses in selected elements for selected modes. 

4. Scanned output of forces and elements in selected elements. 
The following plotter output may be requested: 

1. Undeformed plot of the structural model and mode shapes for selected modes. 

2. Contour plots of stresses and displacements for selected modes. 

2.15.4 Case Control Deck for Normal Modes Analysis Using Cyclic Symmetry 

The following items relate to subcase definition and data selection for Normal Modes 
Analysis Using Cyclic Symmetry: 

1. METH0D must be used to select an EIGR card that exists in the Bulk Data Deck. 

2. An SPC set must be selected unless the model is a free body or all constraints are 
specified on GRID cards, Scalar Connection cards or with General Elements. 

3. Multiple subcases are used only to control output requests. A single subcase is 
sufficient if the same output is desired for all modes. If multiple subcases are 
present, the output requests will be honored in succession for increasing mode numbers. 
M0DES may be used to repeat subcases in order to make the same output request for 
several consecutive modes. 

2.15.5 Parameters for Normal Modes Analysis Using Cyclic Symmetry 

The following parameters are used in Normal Modes Analysis Using Cyclic Symmetry: 

1. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2. AUT0SPC - reserved for future optional use. The default value is -1. 

2.15-10 (05/30/86) 



NORMAL MODES ANALYSIS USING CYCLIC SYMMETRY 

3. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTRIA2, CPTUBE, CPQDPLT, CPTRPLT, 
CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

4. CTYPE - required. The BCD value of this parameter defines the type of cyclic symmetry 
as follows: 

(1) R0T - rotational symmetry 

(2) DRL - dihedral symmetry, using right and left halves 

(3) DSA - dihedral symmetry, using symmetric and antisymmetric components 

5- CYCSEQ - optional. The integer value of this parameter specifies the procedure for 
sequencing the equations in the solution set. A value of +1 specifies that all cosine 
terms should be sequenced before all sine terms, and a value of -1 specifies alternating 
cosine and sine terms. The default value is -1. 

6 - GRDEQ - optional. A positive integer value of this parameter selects the grid point 
about which equilibrium will be checked for the Case Control output request, MPCF0RCE. 
If the integer value is zero, the basic origin is used. The default value is -1. 

7. GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 

Weight Generator to be executed and the resulting weight and balance information to be 

printed. All fluid related masses are ignored. 
8 - KINDEX - required. The integer value of this parameter specifies a single value of the 

harmonic index. 
9. NSEGS - required. The integer value of this parameter is the number of identical 

segments in the structural model . 

10. 0PT - optional. A positive integer value of this parameter causes both equilibrium and 
multipoint constraint forces to be calculated for the Case Control output request, 
MPCF0RCE. A negative integer value of this parameter causes only the equilibrium force 
balance to be calculated for the output request. The default value is which causes, 
only the multipoint constraint forces to be calculated for the output request. 

11. SURFACE - optional. The computations of the external surface areas for the 
two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

2.15-11 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

12. V0LUME - optional. The volume computations for the two-dimensional and 
three-dimensional elements are activated by this parameter when they are generated in * 
the EM6 module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details. 

13. WTMASS - optional. The terms of the structural mass matrix are multiplied by the real 
value of this parameter when they are generated in the EMA module. Not recommended for 
use in hydroelastic problems. 

2.15.6 Optional Diagnostic Output for FEER 

Special detailed information obtained by requesting DIAG 16 in the Executive Control Deck is 
the same as that described under Normal Modes Analysis (see Section 2.3.6). 

2.15.7 The APPEND Feature 

The APPEND feature can be used, for real eigenvalue extraction in Normal Modes Analysis Using 
Cyclic Symmetry. See Section 2.3.7 for details. 

2.15.8 Rigid Format Error Messages from Normal Modes Analysis Using Cyclic Symmetry 

The following fatal errors are detected by the DMAP statements in the Normal Modes Analysis 
Using Cyclic Symmetry rigid format. The text for each error message is given below in capital 
letters and is followed by additional explanatory material, including suggestions for remedial 
action. 



NORMAL M0DES WITH CYCLIC SYMMETRY ERR0R MESSAGE N0. 1 - MASS MATRIX REQUIRED F0R REAL EIGENVALUE 
ANALYSIS. 

The mass matrix is null because either no elements were defined with Connection cards, 
nonstructural mass was not defined on a Property card, or the density was not defined on a Material 
card. 

N0RMAL M0DES WITH CYCLIC SYMMETRY ERR0R MESSAGE N0. 2 - EIGENVALUE EXTRACTION DATA REQUIRED F0R 
REAL EIGENVALUE ANALYSIS. 

Eigenvalue extraction data must be supplied on an EIGR card in the Bulk Data Deck and METHOD in the 
Case Control Deck must select an EIGR set. 

N0RMAL M0DES WITH CYCLIC SYMMETRY ERR0R MESSAGE N0. 3 - N0 INDEPENDENT DEGREES 0F FREED0M HAVE BEEN 
DEFINED. 

Either no degrees of freedom have been defined on GRID, SP0INT, or Scalar Connection cards, or all 
defined degrees of freedom have been constrained by SPC, MPC, SUP0RT, 0MIT or GRDSET cards, or 
grounded on Scalar Connection cards. 

2.15-12 (05/30/86) 



NORMAL MODES ANALYSIS USING CYCLIC SYMMETRY 

N0RMAL M0DES WITH CYCLIC SYMMETRY ERR0R MESSAGE N0. 4 - FREE B0DY SUPP0RTS N0T ALL0WED. 

Free bodies are not allowed in Normal Modes Analysis Using Cyclic Symmetry. The SUP0RT cards' must 
be removed from the Bulk Data Deck and other constraints applied if required for stability. 

N0RMAL M0DES WITH CYCLIC SYMMETRY ERR0R MESSAGE N0. 5 - CYCLIC TRANSF0RMATI0N DATA ERR0R. 
See Section 1.12 for proper modeling techniques and corresponding PARAM card requirements. 

N0RMAL M0DES WITH CYCLIC SYMMETRY ERR0R MESSAGE N0. 6 - N0 STRUCTURAL ELEMENTS HAVE BEEN DEFINED. 
No structural elements have been defined with Connection cards. 



2.15-13 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



2.15-14 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.16 STATIC AEROTHERMOELASTIC DESIGN/ANALYSIS OF AXIAL-FLOW COMPRESORS 

2.16.1 DMAP Sequence for Static Aerothermoelastic Design/Analysis of Axial -Flow Compressors 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 16 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

OPTIONS IN EFFECT GO ERR=2 LIST NODECK NOREF NOOSCAR 



1 BEGIN DISP 16 - STATIC AEROTHERMOELASTIC DESIGN/ANALYSIS-APR. 1986 $ 

2 PRECHK ALL $ 

3 PARAM //AMPY*/CARDN0/O/O $ 

U GP1 GE0M1,GE0M2,/GPL,EQEXIN,GPDT,CSTM,BGPDT,SIL/S,N,LUSET/S,N, 
N0GPDT/MINUS1=-1 $ 

5 COND ERR0R3.N0GPDT $ 

6 PLTTRAN BGPDT,SIL/BGPDP,SIP/LUSET/S,N,LUSEP $ 

7 GP2 GE0M2.EQEX1N/ECT $ 

8 PARAML PCDB//*PRES*////JUMPPLOT $ 

9 PARAMR //*C0MPLEX*//V,Y,SIGN/O.O/CSIGN $ 

10 PURGE PLT$ETX,PLTPAR,GP$ET$,ELSETS/JUMPPLOT $ 

11 COND Pl.JUMPPLOT $ 

12 PLTSET PCDB,EQEXIN,ECT/PLTSETX,PLTPAR,GPSETS,ELSETS/S,N,NSIL/S,N, 

JUMPPLOT $ 

13 PRTMSG PLTSETX// $ 

H* PARAM //*MPY*/PLTFLG/1/1 $ 

15 PARAM //*MPY*/PFILE/0/0 $ 

16 COND Pl.JUMPPLOT $ 

17 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIL,,,,/PL0TX1/ 

NS I L/LUSET/S , N , JUMPPLOT/S , N t PLTF LG/S , N , PF I LE $ 

18 PRTMSG PL0TX1// $ 

19 LABEL PI $ 

20 GP3 GE0M3,EQEXIN,GE0M2/SLT,GPTT/$,N,N0GRAV $ 

21 PARAM //*AND*/N0MGG/N0GRAV/V,Y,GRDPNT=-1 $ 

2.16-1 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 16 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

22 TA1 ECT,EPT,BGPDT,SIL,GPTT,CSTM/EST,GEI,GPECT,,/LUSET/S,N, 

N0SIMP/1/S,N,N0GENL/S,N,GENEL $ 

23 COND ERR0R1,N0SIMP $ 
2i+ PURGE OGPST/GENEL $ 

25 PARAM //*ADD*/NOKGGX/l/0 $ 

26 EMG EST, CSTM, MPT, D IT , GE0M2 , /KELM, KD I CT,MELM, MD I CT, , , /S , N , NOKGGX/ 

S,N,N0MGG////C,Y,C0UPMASS/C,Y,CPBAR/C,Y,CPROD/C,Y, 
CPQUAD1/C,Y,CPQUAD2/C,Y,CPTRIA1/C,Y,CPTRIA2/C,Y,CPTUBE/C,Y, 
CPQDPLT/C , Y, CPTRPLT/C , Y, CPTRBSC $ 

27 COND JMPKGG, NOKGGX $ 

28 EMA GPECT,KDICT,KELM/KGGX,GPST $ 

29 LABEL JMPKGG $ 

30. COND JMPMGG.NOMGG $ 

31 EMA GPECT,MDICT,MELM/MGG,/-1/C,Y,WTMASS=1.0 $ 

32 LABEL JMPMGG $ 

33 COND LBL1,GRDPNT $ 
yk COND ERRORS, NOMGG $ 

35 GPWG BGPDP,CSTM,EQEXIN,MGG/OGPWG/V,Y,GRDPNT/C,Y,WTMASS $ 

36 OFP OGPWG,,,,,//S,N,CARDNO $ 

37 LABEL LBL1 $ 

38 EQUIV KGGX,KGG/NOGENL $ 

39 COND LBL11.N0GENL $ 

kO SMA3 GEI,KGGX/KGG/LUSET/NOGENL/NOSIMP $ 
k] LABEL LBL11 $ 

42 PARAM //*MPY*/NSK IP/0/0 $ 

43 GP1» CASECC,GEOMit,EQEXIN,GPDT,BGPDT,CSTM,/RG,YS,USET,ASET/ 

LUSET/S,N,MPCF1/$,N,MPCF2/$,N,SINGLE/S,N,0M1T/S,N,REACT/S,N, 
NSKIP/S,N,REPEAT/S,N,NOSET/S,N,N0L/S,N,N0A/C,Y,ASETOUT/S,Y, 
AUTOSPC $ 

UU COND ERRORS, NOL $ 



2.16-2 (05/30/86) 



STATIC AEROTHERMOELASTIC DESIGN/ANALYSIS OF AXIAL-FLOW COMPRESSORS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 16 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

kS PURGE GM/MPCF1/G0.K00, LOO, P0,U00V,RU0V/0MIT/PS,KFS,KSS,QG/S INGLE/ 
PBS,KBFS,KBSS,KDFS,KDSS/SINGLE $ 

46 COND LBL4D, REACT $ 

47 JUMP ERR0R2 $ 

48 LABEL LBL4D $ 

1*9 COND LBL4,GENEL $ 

50 PARAM //*EQ*/GPSPFLG/AUTOSPC/0 $ 

51 COND LBL4.GPSPFLG $ 

52 GPSP GPL,GPST,USET,SIL/OGPST/S,N,NOGPST $ 

53 OFP 0GP$T,,,,,//S,N,CARDNO $ 

54 LABEL LBL4 $ 

55 EQUIV KGG,KNN/MPCF1 $ 

56 COND LBL2.MPCF2 $ 

57 MCE1 USET.RG/GM $ 

58 MCE2 USET,GM,KGG,,,/KNN,,, $ 

59 LABEL LBL2 $ 

60 EQUIV KNN.KFF/SINGLE $ 

61 COND LBL3, SINGLE $ 

62 SCE1 USET,KNN,,,/KFF,KFS,KSS,,, $ 

63 LABEL LBL3 $ 

64 EQUIV KFF.KAA/OMIT $ 

65 COND LBL5.0MIT $ 

66 SMP1 USET,KFF,,,/G0,KAA,K00.L00,,,,, $ 

67 LABEL LBL5 $ 

68 RBMG2 KAA/LLL $ 

69 SSG1 SLT,BGPDT,CSTM,SIL,EST,MPT,GPTT,EDT,MGG,CASECC,D!T,/PGNA,,,,/ 

LUSET/1 $ 



2.16-3 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 16 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

70 PARAM //*AND*/ALOAD/V,Y,APRESS/V,Y,ATEMP $ 

71 COND NOAL.ALOAD $ 

72 ALG CASECC,,EQEXIN,,ALGDB,,/CASECCA1,GE0M3A1/S,Y,APRESS/$,Y, 

ATEMP/-1/-1/V,Y,1PRTCI/S,N, I FAIL $ 

73 COND FINIS, IFAIL $ 

7h PARAM //*AND*/ALOAD/V,Y,APRESS/V,Y,ATEMP $ 

75 COND NOAL.ALOAD $ 

76 GP3 GEOM3Al,EQEXIN,GEOM2/SLTA1,GPTTAl/NOGRAV $ 

77 SSG1 SLTA1,BGPDT,CSTM,SIL,EST,MPT,GPTTA1,EDT,MGG,CASECCA1,DIT,/ 

PGA1,,,,/LUSET/1 $ 

78 ADD PGNA.PGA1/PG $ 

79 LABEL NOAL $ 

80 EQUIV PGNA.PG/ALOAD $ 

81 EQUIV PG.PL/NOSET $ 

82 COND LBL10.N0SET $ 

83 SSG2 USET,GM,YS,KFS,GO,,PG/,PO,PS,PL $ 

84 LABEL LBL10 $ 

85 SSG3 LLL.KAA.PL, LOO, K00,PO/ULV,UO0V,RULV,RUOV/OMIT/V,Y, IRES=-1/ 

1/S.N.EPSI $ 

86 COND . LBL9, IRES $ 

87 MATGPR GPL,USET,SIL,RULV//ftL* $ 

88 MATGPR GPL,USET,SIL,RUOV//*0* $ 

89 LABEL LBL9 $ 

90 SDR1 USET,,ULV,U00V,YS,G0,GM,PS,KFS,KSS,/UGV,PG1,QG/1/*DS0* $ 

91 SDR2 CASECC,CSTM,MPT,DIT,EQEXIN,S1L,GPTT,EDT,BGPDP,,QG,UGV,EST,,PG/ 

0PG1 ,0QG1 .0UGV1 ,0ES1 ,0EF1 ,PUGV1/*DS0* $ 

92 OFP 0UGV1,0PG1,0QG1,0EF1,0ES1,//S,N,CARDN0 $ 

93 COND P2.JUMPPL0T $ 



2.16-4 (05/30/86) 



STATIC AEROTHERMOELASTIC DESIGN/ANALYSIS OF AXIAL-FLOW COMPRESSORS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 16 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



94 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIP,PUGV1,,GPECT,0ES1/ 
PL0TX2/NSIL/LUSET/JUMPPL0T/PLTFLG/S,N,PFILE $ 



95 


PRTMSG 


PL0TX2// $ 


96 


LABEL 


P2 $ 


97 


TA1 


ECT,EPT,BGPDT,SIL,GPTT,CSTM/X1,X2, 
NOSIMP/0/NOGENL/GENEL $ 


98 


DSMG1 


CASECC,GPTT,SIL,EDT,UGV,CSTM,MPT,I 
DSCOSET$ 


99 


COND 


NOALO,AL0AD $ 


100 


EQUIV 


PGNA.PG $ 


101 


LABEL 


NOALO $ 


102 


PARAM 


//*ADD*/SHIFT/-l/0 $ 


103 


PARAM 


//*ADD*/C0UNT/ALWAYS=-1/NEVER=1 $ 


104 


PARAMR 


//*ADD*/DSEPSI/0. 0/0.0 $ 


105 


PARAML 


YS//*NULL*////NOYS $ 


106 


LABEL 


OUTLPTOP $ 


107 


EQUIV 


PG.PG1/N0YS $ 


108 


PARAM 


//*KL0CK*/T0 $ 


109 


EQUIV 


KDGG.KDNN/MPCF2 $ 


110 


COND 


LBL2D,MPCF2 $ 


111 


MCE2 


USET,GM,KDGG,,,/KDNN,,, $ 


112 


LABEL 


LBL2D $ 


113 


EQUIV 


KDNN.KDFF/S1NGLE $ 


lit 


COND 


LBL3D, SINGLE $ 


115 


SCE1 


USET,KDNN,,,/KDFF,KDFS,KDSS,,, $ 


116 


LABEL 


LBL3D $ 


117 


EQUIV 


KDFF.KDAA/OMIT $ 


118 


COND 


LBL5D.0MIT $ 



2.16-5 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 16 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

119 SMP2 USET.GO.KDFF/KDAA $ 

120 LABEL LBL5D $ 

121 ADD KAA,KDAA/KBLL/(1.0,0.0)/CS1GN $ 

122 ADD KFS,KDFS/KBFS/(1.0,0.0)/CSIGN $ 

123 ADD KSS,KDSS/KBSS/(1.0,0.0)/CS1GN $ 
12*» COND PGOK,NOYS $ 

125 MPYAD KBSS,YS,/PSS/0 $ 

126 MPYAD KBFS.YS./PFS/O $ 

127 UMERGE USET,PFS,PSS/PN/*Nft/ftF*/ftS* $ 

128 EQUIV PN,PGX/MPCF2 $ 

129 COND LBL6D,MPCF2 $ 

130 UMERGE USET,PN,/PGX/*Gft/*N*/*M* $ 

131 LABEL LBL6D $ 

132 ADD PGX,PG/PGG/(-1.0,0.0) $ 

133 EQUIV PGG.PG1/ ALWAYS $ 
13**- LABEL PGOK $ 

135 ADD PG1./PG0/ $ 

136 COPY UGV/AUGV $ 

137 RBMG2 KBLL/LBLL/S,N,POWER/S,N,DET $ 

138 PRTPARM //0/*DET* $ 

139 PRTPARM //0/*P0WER* $ 
UtO LABEL INLPTOP $ 

Hi PARAM //*KL0CK*/TI $ 

1 i+2 COND N0AL1.AL0AD $ 

H3 ALG CASECC,EDT,EQEXIN,AUGV,ALGDB,CSTM,BGPDT/CASECCA,GE0M3A/S,Y, 

APRESS/S,Y,ATEMP/-1/-1/V,Y,IPRTCL/S,N,IFAIL/V,Y,SIGN/V, 
Y,Z0RIGN/V,Y,FXCO0R/V,Y,FYC0OR/V,Y,FZC00R $ 



2.16-6 (05/30/86) 



STATIC AEROTHERMOELASTIC DESIGN/ANALYSIS OF AXIAL-FLOW COMPRESSORS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 16 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

144 COND DONE, I FAIL $ 

145 PARAM //*MPY*/V,Y,IPRTCL/0 $ 

146 PARAM //*AND*/ALOAD/V,Y,APRESS/V,Y,ATEMP $ 

147 COND N0AL1.AL0AD $ 

148 GP3 GE0M3A,EQEXIN,GEOM2/SLTA,GPTTA/N0ASL/NOGRAV/NOATL $ 

149 SSG1 SLTA,BGPDT,CSTM,SIL,EST,MPT,GPTTA,EDT,MGG,CASECCA,DIT,/PGA,,,,/ 

LUSET/1 $ 

150 ADD PG1.PGA/PG2 $ 

151 LABEL N0AL1 $ 

152 EQUIV PG1.PG2/AL0AD $ 

153 SSG2 U$ET,GM,YS,KDFS,G0,,PG2/,PB0,PBS,PBL $ 

154 SSG3 LBLL,KBLL,PBL,,,/UBLV,,RUBLV,/-1/V,Y,IRES/NDSKIP/S,N, 

EPS I $ 

155 COND LBL9D, IRES $ 

156 MATGPR GPL,USET,SIL,RUBLV//*L* $ 

157 LABEL LBL9D $ 

158 SDR1 USET,,UBLV,,YS,G0,GM,PBS,KBFS,KBSS,/UBGV,,QBG/1/*DS1* $ 

159 COND N0AL2.AL0AD $ 

160 EQUIV UBGV,AUGV $ 

161 LABEL N0AL2 $ 

162 ADD UBGV,UGV/DUGV/(-1.0,0.0) $ 

163 DSMG1 CASECC,GPTT,SIL,EDT,DUGV,CSTM,MPT,ECPT,GPCT,DIT/DKDGG/V,N, 

DSCOSET $ 

164 MPYAD DKDGG,UBGV,PGO/PGI 1/0 $ 

165 ADD PGI1.PGA/PGI2 $ 

166 DSCHK PG2,PGI2,UBGV//C,Y,EPSI0=l.E-5/S,N,DSEPSl/C,Y,NT=10/ 

TO/T I /S , N , DONE/S , N , SH I FT/S , N , COUNT/C , Y , BETAD=4 $ 

167 COND DONE, DONE $ 



2.16-7 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 16 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



168 COND 

169 EQUIV 

170 EQUIV 

171 EQUIV 

172 REPT 

173 TABPT 
]Jk LABEL 

175 ADD 

176 EQUIV 

177 EQUIV 

178 REPT 

179 TABPT 

180 LABEL 

181 PARAM 

182 COND 

183 ADD 

18* OUTPUT 1 

185 OUTPUT! 

186 LABEL 

187 ALG 

188 SDR2 

189 OFP 

190 SDR1 

191 GPFDR 



SHI FT, SHI FT $ 

PG,PG1/NEVER $ 

PGM.PGl /ALWAYS $ 

PG1.PGI1/NEVER $ 

INLPTOP.IOOO $ 

PGI 1,PG1,PG,,// $ 

SHIFT $ 

DKDGG,KDGG/KDGGl/(-1.0,0.0) $ 

UBGV.UGV/ALWAYS/KDGG1 ,KDGG/ALWAYS $ 

KDGG,KDGG1/NEVER/UGV,UBGV/NEVER $ 

0UTLPT0P.1000 $ 

KDGGl.KDGG.UGV,,// $ 

DONE $ 

//*N0P*/V,Y,KT0UT=-1 $ 

JMPKTOUT.KTOUT $ 

KGG,KDGG/KT0TAL/(1.0,0.0)/CSIGN $ 

KTOTAL , , , , //C , Y , LOCAT I 0N=- 1 /C, Y , 1 NPTUN I T=0 $ 

....//-3/0 $ 

JMPKTOUT $ 

CASECC,EDT,EQEXIN,UBGV,ALGDB,CSTM,BGPDT/CASECCB,GE0M3B/ 
-1/-1/V,Y,STREAML/V,Y,PGE0M/V,Y, IPRTCF/S.N, I FAI L/V, Y,S IGN/ 
V,Y,ZORIGN/V,Y,FXC00R/V,Y,FYCO0R/V,Y,FZC0OR $ 

CASECCCSTM.MPT.DIT.EQEXIN.SIL.GPTT.EDT.BGPDP^QBG.UBGV.EST,,/, 
0QBG1,0UBGV1,0ESB1,0EFB1,PUBGV1/*DS1* $ 

0UBGV1 ,0QBG1 ,0EFB1 ,0ESB1 , ,//S,N,CARDN0 $ 

USET,PG2,UBLV,,YS,G0,GM,PBS I KBFS,KBSS,/AUBGV,APGG,AQBG/ 
1/*DS1* $ 

CASECC,AUBGV,KELM,KDICT,ECT,EQEXIN,GPECT,APGG,AQBG/0NRGY1, 
0GPFB1/*STATICS* $ 



2.16-8 (05/30/86) 



STATIC AEROTHERMOELASTIC DESIGN/ANALYSIS OF AXIAL-FLOW COMPRESSORS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

DISPLACEMENT APPROACH, RIGID FORMAT 16 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

192 OFP ONRGY1,OGPFB1,,,,//S,N,CARDNO $ 

193 COND P3.JUMPPLQT $ 

194 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQEXIN,SIP,PUBGV1,,GPECT, 

0ESB1/PL0TX3/NS I L/LUSET/JUMPPLOT/PLTFLG/S,N,PF I LE $ 

195 PRTMSG PL0TX3// $ 

196 LABEL P3 $ 

197 JUMP FINIS $ 

198 LABEL ERR0R1 $ 

199 PRTPARM //-1/*ASTA* $ 

200 LABEL ERR0R2 $ 

201 PRTPARM //-2/*ASTA* $ 

202 LABEL ERR0R3 $ 

203 PRTPARM //-3/*ASTA* $ 
20it LABEL ERRORS $ 

205 PRTPARM //-V*ASTAft $ 

206 LABEL ERRORS $ 

207 PRTPARM //-5/*ASTA* $ 

208 LABEL FINIS $ 

209 PURGE DUMMY/MI NUS1 $ 

210 END $ 



2.16-9 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

2.16.2 Description of Important DMAP Operations for Static Aerothermoelastic Design/Analysis 
of Axial -Flow Compressors 

4. GP1 generates coordinate system transformation matrices, tables of grid point locations, and 
tables relating the internal and external grid point numbers. 

5. Go to DMAP No. 202 and print Error Message No. 3 if there is no Grid Point Definition Table. 

6. PLTTRAN modifies special scalar grid points in the BGPDT and SIL tables. 

7. GP2 generates Element Connection Table with internal indices. 

9. PARAMR sets CSIGN=(SIGN, 0.0), where SIGN = +1.0 for analysis type run and SIGN = -1.0 for 
design type run. 

11. Go to DMAP No. 19 if there are no structure plot requests. 

12. PLTSET transforms user input into a form used to drive the structure plotter. 

13. PRTMSG prints error messages associated with the structure plotter. 

16. Go to DMAP No. 19 if no undeformed structure plots are requested. 

17. PL0T generates all requested undeformed structure plots. 

18. PRTMSG prints plotter data and engineering data for each undeformed plot generated. 
20. GP3 generates Static Loads Table and Grid Point Temperature Table. 

22. TA1 generates element tables for use in matrix assembly and stress recovery. 

23. Go to DMAP No. 198 and print Error Message No. 1 if there are no structural elements. 

26. EMG generates structural element stiffness and mass matrix tables and dictionaries for later 
assembly by the EMA module. 

27. Go to DMAP No. 29 if no stiffness matrix is to be assembled. 

28. EMA assembles stiffness matrix [K* ] and Grid Point Singularity Table. 

y y 

30. Go to DMAP No. 32 if no mass matrix is to be assembled. 

31. EMA assembles mass matrix [Ml. 

99 

33. Go to DMAP No. 37 if no weight and balance information is requested. 

34. Go to DMAP No. 204 and print Error Message No. 4 if no mass matrix exists. 

35. GPWG generates weight and balance information. 

36. 0FP formats the weight and balance, information prepared by GPWG and places it on the system 
output file for printing. 

38. Equivalence [K x 1 to [K ] if no general elements exist. 

gg gg 

39. Go to DMAP No. 41 if no general elements exist. 

40. SMA3 adds general elements to [K* ] to obtain stiffness matrix [K ]. 

43. GP4 generates flags defining members of various displacement sets (USET) , forms multipoint 

constraint equations [R ] {u } = and forms enforced displacement vector {Y }. 

9 9 ¦* 

44. Go to DMAP No. 206 and print Error Message No. 5 if no independent degrees of freedom are 
defined. 

2.16-10 (05/30/86) 



STATIC AEROTHERMOELASTIC DESIGN/ANALYSIS OF AXIAL-FLOW COMPRESSORS 



46. Go to DMAP No. 48 if no free-body supports are supplied. 

47. Go to DMAP No. 200 and print Error Message No. 2. ' 
49. Go to DMAP No. 54 if general elements are present. 

51. Go to DMAP No. 54 if no potential grid point singularities exist. 

52. GPSP generates a table of potential grid point singularities. J 

53. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing.^ 

55. Equivalence [K 1 to [K J if no multipoint constraints exist. 

^ L gg J u nn 

56. Go to DMAP No. 59 if no multipoint constraints exist. 

57. MCE1 partitions multipoint constraint equations [R ] = [R J R ] and solves for 
multipoint constraint transformation matrix [G ] = -[fL]~ L*R|J* 

58. MCE2 partitions stiffness matrix 



[ V - 



5in_j_ K nm 
mn | mm 



and performs matrix reduction 

[K nn ] - [K nn ] + [s^] ? [£,][y ? [gXjcgj. 



60. Equivalence [K ] to [K ff ] if no single-point constraints exist. 

61. Go to DMAP No. 63 if no single-point constraints exist. 

62. SCE1 partitions out single-point constraints 



E"W " 



^ff_[_ K fs_ 
sf | ss 



64. Equivalence [K„] to [K 1 if no omitted coordinates exist. 

tt aa 

65. Go to DMAP No. 67 if no omitted coordinates exist. 

66. SMP1 partitions constrained stiffness matrix 



68. 



[K ff ] - 



k Ik 

aa , ao 

K IK 
oa oo 



solves for transformation matrix [G 1 = -[K n .]" [K__] 
and performs matrix reduction [K__] = [K__] + [K ][G ] . 

ad aa ua u 

RMBG2 decomposes constrained stiffness matrix [K ] = C L AJl HU £Jl ]. 



2.16-11 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



NA 
69. SSG1 generates non-aerodynamic static load vectors {P }. 

71. Go to DMAP No. 79 if no aerodynamic loads exist. 

72. ALG generates aerodynamic load data. 

77. SSG1 generates aerodynamic load vector {P_}- 

NA A 

78. Add {P } and {P } to form total load vector {P >. 

g g g 

NA 

80. Equivalence {P } to {P } if no aerodynamic loads exist. 

g g 

81. Equivalence {P } to {P } if no constraints are applied. 

9 ^ 

82. Go to DMAP No. 84 if no constraints are applied. 

83. SSG2 applies constraints to static load vectors 



<y = j4 n -| • {P n } ¦ f v + Bfrv ¦ 

m 



if.)- '- f - 



p . (P f' ¦ "V - r K f S i<V 

s 



P J T 

(P f > = { — a - , and {P z } = {P a > + [G ]{P > 



85. SSG3 solves for displacements of independent coordinates 
solves for displacements of omitted coordinates 

<# - [k«Av • 

calculates residual vector (RULV) and residual vector error ratio for independent 
coordinates 

H = 



< P I H V 



and calculates residual vector (RU0V) and residual vector error ratio for omitted 
coordinates 

«P„) - (P > - CK 00 ](u°> , 



2.16-12 (05/30/86) 



STATIC AEROTHERMOELASTIC DESIGN/ANALYSIS OF AXIAL-FLOW COMPRESSORS 



{uJ}«SP > 
s o = • 

<^< u o> 

86. Go to DMAP No. 89 if residual vectors are not to be printed. 

87. MAT6PR prints the residual vector for independent coordinates (RULV). 

88. MATGPR prints the residual vector for omitted coordinates (RU0V). 

90. SDR1 recovers dependent displacements 

<u > ¦ [G ]t Ul ) + (u«) . 

|fj=<v. ft- j ¦<-„>. 

v^w- S4 B -!" { v 

and recovers single-point forces of constraint 

lq s ) ¦ -<P S > +[Kj s ]<U f > ? [K SS ](Y S }. 

91. SDR2 calculates element forces (0EF1) and stresses (0ES1) and prepares load vectors (0PG1), 
displacement vectors (0UGV1) and single-point forces of constraint (0QG1) for output and 
translation components of the displacement vector (PUGV1) for the static solution. 

92. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

93. Go to DMAP No. 96 if no deformed static solution structure plots are requested. 

94. PL0T generates all requested static solution deformed structure and contour plots. 

95. PRTMSG prints plotter data, engineering data, and contour data for each deformed static 
solution plot generated. 

97. TA1 generates element tables for use in differential stiffness matrix assembly. 

98. DSMG1 generates differential stiffness matrix [K ]. 

99. Go to DMAP No. 101 if no aerodynamic loads exist. 

100. Equivalence {P } to {P } to remove aerodynamic loads from total load vector before 
9 9 
entering the differential stiffness loop. New aerodynamic loads will be generated in the 

loop. 

106. Beginning of outer (stiffness adjustment) loop for differential stiffness iteration. 

107. Equivalence {P } to {P Q i> if no enforced displacements are specified. 



2.16-13 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



109. 
110. 

111. 



Equivalence [K 1 to [K 1 if no multipoint constraints exist, 
^ u gg nn r 

Go to DMAP No, 112 if no multipoint constraints exist. 
MCE2 partitions differential stiffness matrix 



< ] - 



ie 



_nn_ 

<« 

mn 



10 



nm 
mm 



and performs matrix reduction 

[kI] = [Kil + CgI][k1] + [Kl][Gj + [gT][k1][gj. 



nn- 



nn- 



rmr 



mn- 



mm- 



1.13. 

114. 
115. 



Equivalence [K ] to [K^ f ] if no single-point constraints exist. 
Go to DMAP No. 116 if no single-point constraints exist. 
SCE1 partitions out single-point constraints 



<i - 



K ff K fs 



<f I <s 



117. 
1.18. 
119. 



Equivalence [K$L] to [K ] if no omitted coordinates exist. 

Go to DMAP No. 120 if no omitted coordinates exist. 

SMP2 partitions constrained differential stiffness matrix 



[K ff ] = 



aa 



oa 



_ap 

d 
oo 



and performs matrix reduction 

[Kl] = [&] + [KlfCG J + [G n ] T [K<] + [G J T [Kl][Gj. 



aa- 



aa- 



oa- 



oa- 



oo- 



121. 
122. 
123, 
124. 
125. 
126. 
127. 



ADD [K aa ] and [K^] to form [K^]. 

ADD [K fs ] and [K* s ] to form [K^]. 

ADD [K ss ] and [K^] to form [K^]. 

Go to DMAP No. 134 if no enforced displacements are specified. 

MPYAD multiplies [K^ ] and {Y $ } to form {P ss >. 

MYPAD multiplies [K^] and {Y g } to form {P fs >. 

UMERGE combines {P fs > and {P gs } to form {P n >. 



2.16-14 {05/30/86) 



STATIC AEROTHERMOELASTIC DESIGN/ANALYSIS OF AXIAL-FLOW COMPRESSORS 



128. Equivalence {P } to {P*} if no multipoint constraints exist. 

129. Go to DMAP No. 131 if no multipoint constraints exist. 

130. UMERGE expands {P n > to form {P*}. 

132. ADD -{P*} and {P } to form {P gg K 

133. Equivalence {P } to {P .}. 

135. ADD {P .} and nothing to create {P qo >- 

136. Copy {u } to {u } to initialize aerodynamic displacements. 

y y 

137. RBMG2 decomposes the combined differential stiffness matrix and elastic stiffness matrix 

<^ - &«]tu b M ]. 

138. PRTPARM prints the scaled value of the determinant of the combined differential stiffness 
matrix and elastic stiffness matrix. 

139. PRTPARM prints the scale factor (power of ten) of the determinant of the combined 
differential stiffness matrix and elastic stiffness matrix. 

140. Beginning of inner (load correction) loop for differential stiffness iteration. 

142. Go to DMAP No. 151 if no aerodynamic loads exist. 

143. ALG generates aerodynamic load data. 

144. Go to DMAP No. 180 if ALG fails to converge while generating aerodynamic load data. 

A 

149. SSG1 generates aerodynamic load vector {P Q K 

n 

150. ADD {P j} to {P } to form total load vector {P q2 >. 

153. SSG2 applies constraints to static load vectors 

pb 
(P gl }= j- n -[ . ^ - {P^> + [G> m > 

P b 

m 

pb 

{P n } = |~M » {P f } = {P f } " [K fs ]{ V • 
pb 
s 

i P b i 
{p b } = j_a_j and {p b } = {p b } + [ G J] { pb } 

P b 
o 



2.16-15 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

154. SSG3 solves for displacements of independent coordinates for current differential stiffness 
load vector 

(u b ) - ck^-V,} , 

and calculates residual vector (RBULV) and residual vector error ratio for current 
differential stiffness load vector 

»P b ) ¦ <P b > - [K b u ]^ } , 

h = 

155. Go to DMAP No. 157 if the residual vector for current differential stiffness solution is not 
to be printed. 

156. MATGPR prints the residual vector for current differential stiffness solution. 

158. SDR1 recovers dependent displacements for the current differential stiffness solution 

b 
{¦6 = [G J {u b J + {u° b } , ?-M= (M 



V L V l, V tu o J ' ) i lu f J 

b 



u o 



s 



Uf ' - < u n> > <"m> = CV < u n> 



.b " 



m / 



and recovers single-point forces of constraint for the current differential stiffness 
solution 

159. Go to DMAP No. 161 if no aerodynamic loads exist. 

B A 

160. Equivalence {u } and {u }. 

y y 

162. ADD -{ujj} and {U } to form {U^}. 

163. DSMG1 generates differential stiffness matrix [<5K ]. 

y y 



2.16-16 (05/30/86) 



STATIC AEROTHERMOELASTIC DESIGN/ANALYSIS OF AXIAL-FLOW COMPRESSORS 

164. MYPAD forms the load vector for inner loop iteration 

{ V = [6K gg ] (u g } + { V K 

165. ADD {P„ T1 > and {P A } to form {P TO }. 

gii g gi2 

166. DSCHK performs differential stiffness convergence checks. 

167. Go to DMAP No. 180 if differential stiffness iteration is complete. 

168. Go to DMAP No. 174 if additional differential stiffness matrix changes are necessary for 
further iteration. 

169. Break the previous equivalence of {P } and lP Q i}- 

170. Equivalence {P ,.} to {P ,}. 

171. Break the previous equivalence of {P al } to {P a Ti}« 

172. Go to DMAP No. 140 for an additional inner loop differential stiffness iteration. 

173. TABPT table prints vectors {P n } , {P nl }, and {PI. 

9 j ^ " " 

175. ADD -[6K^] and [K^L] to form [K^Lj. 

gg gg ggi 

176. Equivalence {U^} to {U } and [Kg -] to [Kg ]. 

177. Break the previous equivalence of [K ] to [K ,] and {11} to {U }. 

178. Go to DMAP No, 106 for an additional outer loop differential stiffness iteration. 

179. TABPT table prints [Kj| .], [Kjj], and {U }. 

182. Go to DMAP No. 186 if the total stiffness matrix [KT0TAL] is not to be saved on an external 
file. 

d 

183. ADD [K ] and [K ] to form [KT0TAL]. 

gg gg 

184. 0UTPUT1 outputs [KT0TAL] to an external file. 

185. 0UTPUT1 prints the names of the data blocks on the external file. 

187. ALG generates final aerodynamic results and generates GRID and STREAML2 bulk data cards on 
the system punch file, if requested. 

188. SDR2 calculates element forces (0EFB1) and stresses (0ESB1) and prepares displacement 
vectors (0UBGV1) and single-point forces of constraint (0QBG1) for output and translation 
components of the displacement vector (PUBGV1) for the differential stiffness solution. 

189. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

190. SDR1 recovers dependent displacements after differential stiffness loop for grid point 
force balance. 

191. GPFDR calculates for requested sets the grid point force balance and element strain energy 
for output. 

2.16-17 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

192. 0FP formats the tables prepared by GPFDR and places them on the system output file for 
printing. 

193. Go to DMAP No. 196 if no differential stiffness solution deformed plots are requested. 

194. PL0T generates all requested differential stiffness solution deformed structure and contour 
plots. 

195. PRTMSG prints plotter data, engineering data, and contour data for each differential 
stiffness solution deformed plot generated. 

197. Go to DMAP No. 208 and make normal exit. 

199. Print Error Message No. 1 and terminate execution. 

201. Print Error Message No. 2 and terminate execution. 

203. Print Error Message No. 3 and terminate execution. 

205. Print Error Message No. 4 and terminate execution. 

207. Print Error Message No. 5 and terminate execution. 



2.16-18 (05/30/86) 



STATIC AEROTHERMOELASTIC DESIGN/ANALYSIS OF AXIAL-FLOW COMPRESSORS 

2.16.3 Output for Static Aerothermoelastic Design/Analysis of Axial-Flow Compressors 

The value of the determinant of the sum of the elastic stiffness and the differential 

stiffness is automatically printed for each differential stiffness loading condition. 

Iterative differential stiffness computations are terminated for one of five reasons. 

Iteration termination reasons are automatically printed in an information message. These reasons '¦ 

have the following meanings: 

1. REASON means the iteration procedure was incomplete at the time of exit. This is 
caused by either an unexpected interruption of the iteration procedure (i.e., system 
abort) or termination is not scheduled (for the other four reasons) at the completion of 
the current iteration. 

2. REASON 1 means the iteration procedure converged to the EPSI0 value supplied by the user 
on a PARAM bulk data card. (The default value of EPSI0 is 1.0E-5.) 

3. REASON 2 means the iteration procedure is diverging from the EPSI0 value supplied by the 
user on a PARAM bulk data card. (The default value of EPSI0 is 1.0E-5.) 

4. REASON 3 means insufficient time remaining to achieve convergence to the EPSI0 value 
supplied by the user on a PARAM bulk data card. (The default value of EPSI0 is 1.0E-5.) 

5. REASON 4 means the number of iterations supplied by the user on a PARAM bulk data card 
has been met. (The default number of iterations is 10.) 

Parameter values at the time of exit are automatically output as follows: 

1. Parameter D0NE: -1 is normal; + N is the estimate of the number of iterations required 
to achieve convergence. 

2. Parameter SHIFT: +1 indicates a return to the top of the inner loop was scheduled; -1 
indicates a return to top of the outer loop was scheduled following the current 
iteration. 

3. Parameter DSEPSI: the value of the ratio of energy error to total energy at the time of 
exit. 

The following output may be requested: 

1. Nonzero Components of the applied static load for the linear solution at selected grid 
points. 

2. Displacements and nonzero components of the single-point forces of constraint, with and 
without differential stiffness, at selected grid points. 

3. Forces and stresses in selected elements, with and without differential stiffness. 

2.16-19 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

4. Undeformed and deformed plots of the structural model. 

5. Contour plots of stresss and displacements. * 

2.16.4 Case Control Deck for Static Aerothermoelastic Design/Analysis of Axial -Flow Compressors 
The following items relate to subcase definition and data selection for Static 

Aerothermoelastic Design/Analysis of Axial-Flow Compressors: 

1. The Case Control Deck must contain two subcases. 

2. A static loading condition must be defined above the subcase level with a L0AD, 
TEMPERATURE (L0AD), or DEF0RM selection, unless all loading is specified by grid point 
displacements on SPC cards. 

3. An SPC set must be selected above the subcase level unless all constraints are specified 
on GRID cards. 

4. Output requests that apply only to the linear solution must appear in the first subcase. 

5. Output requests that apply only to the solution with differential stiffness must be 
placed in the second subcase. 

6. Output requests that apply to both solutions, with and without differential stiffness, 
may be. placed above the subcase level. 

2.16.5 Parameters for Static Aerothermoelastic Design/Analysis of Axial -Flow Compressors 

The following parameters are used in Static Aerothermoelastic Design/Analysis of Axial-Flow 
Compressors:. 

1. APRESS - optional. A positive integer value causes the generation of aerodynamic 
pressure loads. A negative integer value suppresses the generation of these loads. The 
default value is -1. 

2. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated. by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

3. ATEMP - optional . A positive integer value causes the generation of aerodynamic 
temperature loads. A negative integer value suppresses the generation of these loads. 
The default value is -1. 

4. AUT0SPC - reserved for future optional use. The default value is -1. 



2.16-20 (05/30/86) 



STATIC AEROTHERMOELASTIC DESIGN/ANALYSIS OF AXIAL-FLOW COMPRESSORS 

5. BET AD - optional. The integer value of this parameter is the number of iterations 
allowed for computing the load correction in the inner (load) loop before shifting 4 to 
the outer (stiffness) loop, which adjusts the differential stiffness. The default value 
is 4 iterations. 

6. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTRIA2, CPTUBE, CPQDPLT, CPTRPLT, 
CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

7. EPSI0 - optional. The real value of this parameter is used to test the convergence of 
the iterated differential stiffness. The default value is 10 . 

8. FXC00R, FYC00R and FZC00R - optional. The real values of these parameters are the 
fractions of the displacements used to redefine the blade geometry. The default values 
are: FXC00R = 1.0, FYC00R = 1.0 and FZC00R = 1.0. 

9. GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. 

10. IPRTCI, IPRTCL and IPRTCF - optional. If IPRTi is a positive integer, then intermediate 
print will be generated in the ALG module based on the print option in the ALGDB data 
table. If IPRTi = (the default), no intermediate print will be generated. 

11. IRES - optional. A positive integer value of this parameter causes the printing of 
the residual vectors following the execution of the SSG3 module. 

12. KT0UT - optional. A positive integer value of this parameter indicates that the user 
wants to save the total stiffness matrix on an external file (GIN0 file INPT) via the 
0UTPUT1 module in the rigid format. The default value is -1 when not needed. 

13. L0CATI0N and INPTUNIT - required when using the KT0UT parameter. See Section 5.5 for a 
description of these parameters which are required by the 0UTPUT1 module. The default 
values for L0CATI0N and INPTUNIT are -1 and 0, respectively. 

14. NT - optional. The integer value of this parameter limits the cumulative number of 
iterations in both loops. The default value is 10 iterations. 

15. PGE0M - optional. The integer value of this parameter specifies the punching of various 
bulk data cards. PGE0M = 1 causes the punching of GRID bulk data cards. PGE0M = 2 

' causes the punching of GRID, CTRIA2 and PTRIA2 bulk data cards. PGE0M = 3 causes the 

2.16-21 (05/30/86) 



DISPLACEMENT RIGID FORMATS 

punching of GRID cards and the modified ALGDB table on DTI cards. The default value of 
-1 suppresses the punching of any of these cards. * 

16. SIGN - optional. The real value of this parameter controls the type of run being 
performed. SIGN = 1.0 specifies a standard analysis type run. SIGN = -1.0 specifies a 
design type run. The default value is 1.0. 

17. STREAML - optional. The integer value of this parameter specifies the punching of 
various bulk data cards. STREAML = 1 causes the punching of STREAML1 bulk data cards. 
STREAML = 2 causes the punching of STREAML2 bulk data cards. STREAML = 3 causes both 
STREAML1 and STREAML2 cards to be punched. The default value of -1 suppresses the 
punching of any of these cards. 

18. SURFACE - optional. The computations of the external surface areas for the 
two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

19. V0 LU ME _ optional. The volume computations for the two-dimensional and 
three-dimensional elements are activated by this parameter when they are generated in 
the EMG module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details. 

20. WTMASS - optional. The terms of the mass matrix are multiplied by the real value of 
this parameter when they are generated in the EMA module. 

2.16.6 Rigid Format Error Messages from Static Aerothermoelastic Design/Analysis of Axial -Flow 
Compressors 

The following fatal errors are detected by the DMAP statements in the Static 
Aerothermoelastic Design/Analysis of Axial -Flow Compressors. The text for each error message is 
given below in capital letters and is followed by additional explanatory material, including 
suggestions for remedial action. 

AER0THERM0ELASTIC ERR0R N0. 1 - N0 STRUCTURAL ELEMENTS HAVE BEEN DEFINED. 
No structural elements have been defined with Connection cards. 

AER0THERM0ELASTIC ERR0R N0. 2 - FREE B0DY SUPP0RTS N0T ALL0WED. 

Free bodies are not allowed in Static Analysis with Differential Stiffness. The SUP0RT cards must 
be removed from the Bulk Data Deck and other constraints applied if required for stability. 

2.16-22 (05/30/86) 



STATIC AEROTHERMOELASTIC DESIGN/ANALYSIS OF AXIAL-FLOW COMPRESSORS 

AER0THERM0ELASTIC ERR0R N0. 3 - N0 GRID P0INT DATA IS SPECIFIED. 

No points have been defined with GRID or SP0INT cards. * 

AER0THERM0ELASTIC ERR0R N0. 4 - MASS MATRIX REQUIRED F0R WEIGHT AND BALANCE CALCULATI0NS. 

The mass matrix is null because either no elements were defined with Connection cards, 
nonstructural mass was not defined on a Property card, or the density was not defined on a Material 
card. 

AER0THERM0ELASTIC ERR0R N0. 5 - N0 INDEPENDENT DEGREES 0F FREED0M HAVE BEEN DEFINED. 

Either no degrees of freedom have been defined on GRID, SP0INT or Scalar Connection cards, or all 
defined degrees of freedom have been constrained by SPC, MPC, 0MIT or GRDSET cards, or grounded on 
Scalar Connection cards. 



2.16-23 (05/30/86) 



DISPLACEMENT RIGID FORMATS 



2.16-24 (05/30/86) 



3. HEAT RIGID FORMATS 

3.1 STATIC HEAT TRANSFER ANALYSIS 

3.1.1 DMAP Sequence for Static Heat Transfer Analysis 

RIGID FORMAT DMAP LISTING 
APRIL 1985 RELEASE 

HEAT APPROACH, RIGID FORMAT 1 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



OPTIONS IN EFFECT GO 



ERR=2 LIST 



NODECK NOREF NOOSCAR 



1 BEGIN HEAT 01 - STATIC HEAT TRANSFER ANALYSIS - APR. I985 $ 

2 PRECHK ALL $ 

3 FILE HQG=APPEND/HPGG«APPEND/HUGV«APPEND/HGM»SAVE/HKNN=SAVE $ 

14 PARAM //*MPY*/CARDN0/O/O $ 

5 GP1 GE0M1,GE0M2,/GPL,HEQEX1N,GPDT,CSTM,BGPDT,HSIL/S,N,HLUSET/ 

N0GPDT/MINUS1 — 1 $ 

6 PLTTRAN BGPDT,HSIL/BGPDP,HSIP/HLUSET/S,N,HLUSEP $ 

7 GP2 GE0M2.HEQEXIN/ECT $ 

5 PARAML PCDB//*PRE$*////JUMPPLOT $ 

9 PURGE PLTSETX, PLTPAR, GPSETS.ELSETS/JUMPPLOT $ 

10 COND HP1,JUMPPL0T $ 

1 1 PLTSET PCDB , HEQEX I N , ECT/PLTSETX , PLTPAR, GPSETS, ELSETS/S , N , HNS I L/ 

S,N,JUMPPLOT $ 

12 PRTMSG PLTSETX// $ 

13 PARAM //ftMPY*/PLTFLG/l/l $ 
lit PARAM //*MPY*/PF I LE/O/O $ 

15 COND HP1,JUMPPL0T $ 

16 PLOT PLTPAR, GPSETS, ELSETS,CASECC,BGPDT,HEQEXI N.HSI L, ,ECT, ,/PLOTXl/ 

HNS I L/HLUSET/S , N, JUMPPLOT/S , N , PLTFLG/S , N , PF I LE $ 

17 PRTMSG PL0TX1// $ 

18 LABEL HP1 $ 

19 GP3 GE0M3,HEQEXIN,GE0M2/HSLT,GPTT/N0GRAV $ 

20 TA1 ECT,EPT,BGPDT,HSIL,GPTT,CSTM/HEST,,HGPECT,,/ 

HLUSET/S,N,N0SIMP/1/N0GENL/GENEL $ 

21 COND ERRORS, NOS IMP $ 



3.1-1 (05/30/86) 



HEAT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1985 RELEASE 

HEAT APPROACH, RIGID FORMAT 1 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

22 PURGE HKGG.GPST/NOSIMP $ 

23 COND HLBL1.N0SIMP $ 

24 PARAM //*ADD*/HNOKGG/l/0 $ 

25 EMG HEST,CSTM,MPT,DIT,GE0M2,/HKELM,HKDICT,,,,,/S,N,HN0KGG $ 

26 PURGE HKGG.GPST/HNOKGG $ 

27 COND HLBL1.HN0KGG $ 

28 EMA HGPECT,HKDICT,HKELM/HKGG,GPST $ 

29 LABEL HLBL1 $ 

30 PARAM //*MPY*/NSK IP/0/0 $ 

31 LABEL HLBL11 $ 

32 GP4 CASECC , GEOMit , HEQEX I N ,GPDT , BGPDT , CSTM, GPST/RG , YS , HUSET t HASET/ 

HLUSET/S,N,MPCFl/S,N,MPCF2/S,N,SINGLE/S,N,0MrT/$,N,REACT/ 
S,N,NSKIP/S,N t HREPEAT/S,N,NOSET/S,N,NOL/S,N,NOA/C,Y,ASETOUT/ 
S,Y,AUTOSPC $ 

33 COND ERR0R3.N0L $ 

34 PARAM //*AND*/NOSR/SiNGLE/REACT $ 

35 PURGE HKRR,HKLR,HQR,HDM/REACT/GM/MPCF1/HG0,HK00,HL00,HP0,HU00V, 

HRUOV/OMIT/HPS,HKFS,HKSS/SINGLE/HQG/NOSR $ 

36 PARAM //*EQ*/GPSPFLG/AUTOSPC/0 $ 

37 COND HLBL4.GPSPFLG $ 

38 GPSP GPL, GPST, HUSET, HS1 L/OGPST/S,N,NOGPST $ 

39 OFP OGPST //S.N.CARDNO $ 

40 LABEL HLBL4 $ 

41 EQUIV HKGG.HKNN/MPCF1 $ 

42 COND HLBL2,MPCF1 $ 

43 MCE1 HUSET, RG/GM $ 

44 MCE2 HUSET, GM,HKGG,,,/HKNN,,, $ 

45 LABEL HLBL2 $ 



3.1.-2 (05/30/86) 



STATIC HEAT TRANSFER ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1985 RELEASE 

HEAT APPROACH, RIGID FORMAT 1 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

*t6 EQUIV HKNN.HKFF/SINGLE $ 

47 COND HL8L3, SINGLE $ 

MJ SCE1 HUSET,HKNN,,,/HKFF,HKFS,HKSS,,, $ 

kS LABEL HLBL3 $ 

50 EQUIV HKFF.HKAA/OMIT $ 

51 COND HLBL5,0MIT $ 

52 SMP1 HUSET,HKFF,,,/HGO,HKAA,HKOO,HLOO $ 

53 LABEL HLBL5 $ 

5A EQUIV HKAA.HKLL/REACT $ 

55 COND HLBL6, REACT $ 

56 RBMG1 HUSET.HKAA./HKLL.HKLR.HKRR,,, $ 

57 LABEL HLBL6 $ 

58 RBMG2 HKLL/HLLL $ 

59 COND HLBL7, REACT $ 

60 RBMG3 HLLL.HKLR.HKRR/HDM $ 

61 LABEL HLBL7 $ 

62 SSG1 HSLT,BGPDT,CSTM,HSIL,HEST,MPT,GPTT,EDT,,CASECC,DIT,/ 

HPG,,,,SCR/HLUSET/NSKIP $ 

63 EQUIV HPG.HPL/NOSET $ 
Gh COND HLBL10,NOSET $ 

65 SSG2 HUSET,Gtt,YS,HKFS,HGO,HDM,HPG/HQR,HPO,HPS,HPL $ 

66 LABEL HLBL10 $ 

67 SSG3 HLLL,HKLL,HPL,HLOO,HKOO,HPO/HULV,HUOOV,HRULV,HRUOV/OMIT/ 

V,Y,IRES=-1/NSKIP/S,N,EPSI $ 

68 COND HLBL9, IRES $ 

69 MATGPR GPL,HUSET,HSIL,HRULV//*L* $ 

70 MATGPR GPL,HUSET,HSIL,HRUOV//*0* $ 



3.1-3 (05/30/86) 



HEAT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1985 RELEASE 

HEAT APPROACH, RIGID FORMAT 1 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

71 LABEL HLBL9 $ 

72 SDR1 HUSET,HPG,HULV,HUOOV,YS,HGO,GM,HPS,HKFS,HKSS,HQR/HUGV,HPGG, 

H0_G/NSK1P/*HSTATICS* $ 

73 COND HLBL8.HREPEAT $ 
Ik REPT HLBL1 1,100 $ 

75 JUMP ERR0R1 $ 

76 PARAM //*NOT*/HTEST/HREPEAT $ 

77 COND ERRORS, HTEST $ 

78 LABEL HLBL8 $ 

79 SDR2 CASECC,CSTM,MPT,DIT,HEQEXIN,HSIL,GPTT,EDT,BGPDP,,HQG,HUGV, 

HEST,,HPGG/H0PG1,H0QG1,H0UGV1,,H0EF1,HPUGV1/*STATICS* $ 

80 OFP H0UGV1,H0PG1,H0QG1,H0EF1,,//S,N,CARDN0 $ 

81 COND HP2.JUMPPL0T $ 

82 PLOT PLTPAR,GPSETS,ELSET$,CASECC,BGPDT,HEQEXIN,HSIP,HPUGV1,,HGPECT, 

/PL0TX2/HNS I L/HLUSEP/JUMPPLOT/PLTFLG/ 
S,N,PFILE $ 

83 PRTMSG PL0TX2// $ 

84 LABEL HP2 $ 

85 JUMP FINIS $ 

86 LABEL ERR0R1 $ 

87 PRTPARM //-1/ftHSTA* $ 

88 LABEL ERR0R3 $ 

89 PRTPARM //-3/*HSTA* $ 

90 LABEL ERR0R4 $ 

91 PRTPARM //-it/*HSTA* $ 

92 LABEL ERR0R5 $ 

93 PRTPARM //-5/*HSTA>'c $ 
Sk LABEL FINIS $ 



3.1-4 (05/30/86) 



STATIC HEAT TRANSFER ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1985 RELEASE 

HEAT APPROACH, RIGID FORMAT 1 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

95 PURGE DUMMY/MI NUS1 $ 

96 END $ 



3.1-5 (05/30/86) 



HEAT RIGID FORMATS 

3.1.2 Description of Important DMAP Operations for Static Heat Transfer Analysis 

5. GP1 generates coordinate system transformation matrices, tables of grid point locations, and 
tables relating the internal and external degree of freedom indices. 

6. PLTTRAN modifies special scalar grid points in the BGPDT and HSIL tables. 

7. GP2 generates Element Connection Table with internal indices. 

10. Go To DMAP No. 18 if there are no structure plot requests. 

11. PLTSET transforms user input into a form used to drive the structure plotter. 

12. PRTMSG prints error messages associated with the structure plotter. 

15. Go to DMAP No. 18 if no boundary and structure (heat conduction) element plots are 
requested. 

16. PL0T generates all requested boundary and heat conduction element plots. 

17. PRTMSG prints plotter data and engineering data for each plot generated. 

19. GP3 generates applied Static (Thermal) Loads Table (HSLT) and Grid Point Temperature Table. 

20. TA1 generates element tables for use in matrix assembly, load generation, and data recovery. 

21. Go to DMAP No. 90 and print Error Message No. 4 if no elements have been defined. 

23. Go to DMAP No. 29 if there are no heat conduction elements. 

25. EMG generates element heat conduction matrix tables and dictionaries for later assembly by 
the EMA module. 

27. Go to DMAP No. 29 if no heat conduction matrix is to be assembled. 

28. EMA assembles heat conduction matrix [K* ] and Grid Point Singularity Table. 

31. Beginning of loop for additional constraint sets. 

32. GP4 generates flags defining members of various displacement sets (USET), forms multipoint 
constraint equations [R ] {u } = and forms enforced displacement vector fY ). 

33. Go to DMAP No. 88 and print Error Message No. 3 if no independent degrees of freedom are 
defined. 

37. Go to DMAP No. 40 if no potential grid point singularities exist. 

38. GPSP generates a table of potential grid point singularities. 

39. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 

41. Equivalence [K 1 to [K ] if no multipoint constraints exist. 

M L gg J L nn r 

42. Go to DMAP No. 45 if no multipoint constraints exist. 

43. MCE1 partitions multipoint constraint equations [R ] = C R m j R n Il and solves for 
multipoint constraint transformation matrix [6 ] = -{% m Y [R n ]. 



3.1-6 (05/30/86) 



STATIC HEAT TRANSFER ANALYSIS 



44. MCE2 partitions heat conduction matrix 



[ V ¦ 



K I K 
n n nm 

K mn ' K mm 



and performs matrix reduction 

46. Equivalence [K ] to [K ff ] if no single-point constraints exist. 

47. Go to DMAP No. 49 if no single-point constraints exist. 

48. SCE1 partitions out single-point constraints 



fW - 



K sf ' K ss 



50. Equivalence [K^l to [K ] if no omitted coordinates exist. 

ff aa 

51. Go to DMAP No. 53 if no omitted coordinates exist. 

52. SMP1 partitions constrained heat conduction matrix 



[K ff ] ¦ 



K I K 
aa ao 

K l K 
oa oo 



i-li 



solves for transformation matrix [G 1 = -[K 1" [K 1 

00 Oa 

and performs matrix reduction [K ] = [K ] + [K ][G ] . 



aa- 



54. Equivalence [K ] to [K ] if no free-body supports exist. 

55. Go to DMAP No. 57 if no free-body supports exist. 

56. RBMG1 partitions out free-body supports 



£*..] - 



K.IK 



58. RBMG2 decomposes constrained heat conduction matrix [K ] = [L ][U ]. 



ll- 



ll J IV 



59. Go to DMAP No. 61 if no free-body supports exist. 

60. RBMG3 forms rigid body transformation matrix 

[D] - -[K^r 1 ^] 



3.1-7 (05/30/86) 



HEAT RIGID FORMATS 
calculates rigid body check matrix 



[X] = [K rr ] + [Kj r ][D] 



and calculates rigid body error ratio 



K 
rr 

62. SSG1 generates static thermal load vectors -[ P > . 

63. Equivalence {P } to {P } if no constraints are applied. 

64. Go to DMAP No. 66 if no constraints are applied. 

65. SSG2 applies constraints to static thermal load vectors 



{ V = 7 1 - ' "V = "n> + [G I ]{P m> • 
' m ' 



p f 

,P n» = \--\ ¦ {P f> = (P f> " CK fs3 {V s' • 



{Pf> " |~H * <Pa> = ^ + [G ° ]tPo1 ' 



{P a } - 



P 

a 

T~ 
r 



and calculates determinate thermal powers {q r > = -(P r > - [D KP^K 
67. SSG3 solves for displacements of independent coordinates 

<V - c^'V • 

solves for displacements of omitted coordinates 

tu S> ¦ t K oo]" 1{P o> • 

calculates residual vector (HRULV) and residual vector error ratio for independent 
coordinates 

is v ¦ <v - CK u ]{ V ¦ 



3.1-8 (05/30/86) 



STATIC HEAT TRANSFER ANALYSIS 



e l 



{P I ,( V 



and calculates residual vector (HRU0V) and residual vector error ratio for omitted 
coordinates 

l"o } - {P o> - lK ooH> ¦ 

{uJ>W> ) 



< p o> tu o> 



68. Go to DMAP No. 71 if residual vectors are not to be printed. 

69. MATGPR prints the residual vector for independent coordinates (HRULV). 

70. MATGPR prints the residual vector for omitted coordinates (HRU0V). 
72. SDR1 recovers dependent temperatures 

t u 



u r 



-<V • <»o } -[6 ]V tu !!> • 



and recovers single-point powers of sustained thermal constraint 

<V ¦ - lP s> + [ K f S ^ u f } * tWV- 

73. Go to DMAP No. 78 if all constraint sets have been processed. 

74. Go to DMAP No. 31 if additional sets of constraints need to be processed. 

75. Go to DMAP No. 86 and print Error Message No. 1 as the number of constraint sets exceeds . 
100. 

77. Go to DMAP No. 92 and print Error Message No. 5 if multiple boundary conditions are 
attempted with an improper subset. 

79. SDR2 calculates conduction and boundary element heat flows and gradients (H0EF1) and 

prepares thermal load vectors (H0PG1), temperature vectors (H0UGV1) and single-point powers 
of constraint (H0QG1) for output and components of the temperature vector (HPUGV1). 



3.1-9 (05/30/86) 



HEAT RIGID FORMATS 

80. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

81. Go to DMAP No. 84 if no temperature profile plots are requested. 

82. PL0T generates all requested temperature profile and thermal contour plots. 

83. PRTMSG prints plotter data, engineering data, and contour data for each temperature profile 
and thermal contour plot generated. 

85. Go to DMAP No. 94 and make normal exit. 

87. Print Error Message No. 1 and terminate execution. 

89. Print Error Message No. 3 and terminate execution. 

91. Print Error Message No. 4 and terminate execution. 

93. Print Error Message No. 5 and terminate execution. 



3.1-10 (05/30/86) 



STATIC HEAT TRANSFER ANALYSIS 

3.1.3 Output for Static Heat Transfer Analysis 

The following output may be requested for Static Heat Transfer Analysis: * 

1. Temperatures (THERMAL) and nonzero components of static loads (0L0AD) and constrained 
heat flow (SPCF0RCE) at selected grid points or scalar points. 

2. The punch option of a THERMAL request will produce TEMP bulk data cards. 

3. Flux density (ELF0RCE) in selected elements. 

4. Plots of the structural model and temperature profiles. 

5. Contour plots of the thermal field. 

3.1.4 Case Control Deck for Static Heat Transfer Analysis 

The following items relate to subcase definition and data selection for Static Heat Transfer 
Analysis: 

1. A separate subcase must be defined for each unique combination of constraints and static 
loads. 

2. A static loading condition must be defined for (not necessarily within) each subcase 
with a L0AD selection, unless all loading is specified with grid point temperatures on 
SPC cards. 

3. An SPC set must be selected for (not necessarily within) each subcase, unless all 
constraints are specified on GRID cards or Scalar Connection cards. 

4. Loading conditions associated with the same sets of constraints should be in contiguous 
subcases, in order to avoid unnecessary looping. 

5. REPCASE may be used to repeat subcases in order to allow multiple sets of the same 
output item. 

3.1.5 Parameters for Static Heat Transfer Analysis 

The following parameters are used in Static Heat Transfer Analysis: 

1. ASET0UT - optional. A positive integer value of this parameter causes the HASET output 
data block to be generated by the 6P4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2. AUT0SPC - reserved for future optional use. The default value is -1. 

3. IRES - optional. A positive integer value of this parameter causes the printing of the 
residual vectors following each execution of the SSG3 module. 

3.1-11 (05/30/86) 



HEAT RIGID FORMATS 

3.1.6 Rigid Format Error Messages from Static Heat Transfer Analysis 

The following fatal errors are detected by the DMAP statements in the Static Heat Transfer 
Analysis rigid format. The text for each error message is given below in capital letters and is 
followed by additional explanatory material, including suggestions for remedial action. 

STATIC HEAT TRANSFER ANALYSIS ERR0R MESSAGE N0. 1 - ATTEMPT T0 EXECUTE M0RE THAN 100 L00PS. 

An attempt has been made to use more than 100 different sets of boundary conditions. This number 
may be increased by ALTERing the REPT instruction following SDR1. 

STATIC HEAT TRANSFER ANALYSIS ERR0R MESSAGE N0. 3 - N0 INDEPENDENT DEGREES 0F FREED0M HAVE BEEN 
DEFINED. 

Either no degrees of freedom have been defined on GRID, SP0INT or Scalar Connection cards, or all 
defined degrees of freedom have been constrained by SPC, MPC, SUP0RT, 0MIT or GRDSET cards, or 
grounded on Scalar Connection cards. 

STATIC HEAT TRANSFER ANALYSIS ERR0R MESSAGE N0. 4 - N0 ELEMENTS HAVE BEEN DEFINED. 
No elements have been defined with either Connection cards or GENEL cards. 

STATIC HEAT TRANSFER ANALYSIS ERR0R MESSAGE N0. 5 - A L00PING PR0BLEM RUN 0N A N0N-L00PING SUBSET. 

A problem requiring boundary condition changes was run on subset 1 or 3. The problem should be 
restarted on subset 0. 



3.1-12 (05/30/86) 



HEAT RIGID FORMATS 

3.2 NONLINEAR STATIC HEAT TRANSFER ANALYSIS 

3.2.1 DMAP Sequence for Nonlinear Static Heat Transfer Analysis 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

HEAT APPROACH, RIGID FORMAT 3 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

OPTIONS IN EFFECT GO ERR=2 LIST NODECK NOREF NOOSCAR 



1 BEGIN HEAT 03 - NONLINEAR STATIC HEAT TRANSFER ANALYSIS - APR. 1986 $ 

2 PRECHK ALL $ 

3 PARAM //*MPY*/CARDN0/O/O $ 

k GP1 GE0M1,GE0M2,/GPL,HEQEXIN,GPDT,CSTM,BGPDT,HSIL/S,N,HLUSET/ 
N0GPDT/MINUS1=-1 $ 

5 PLTTRAN BGPDT,HSIL/BGPDP,HSIP/HLUSET/S,N,HLUSEP $ 

6 GP2 GE0M2.HEQEXIN/ECT $ 

7 PARAML PCDB//*PRES*////JUMPPLOT $ 

8 PURGE PLTSETX.PLTPAR.GPSETS.ELSETS/JUMPPLOT $ 

9 COND HP1.JUMPPL0T $ 

10 PLTHBDY GE0M2,ECT,EPT,HSIL,HEQEXIN,BGPDT/PECT,PSIL,PEQEXIN,PBGPDT/ 

NHBDY/V,Y,MESH=NO $ 

11 EQUIV ECT,PECT/NHBDY/HSIL,PSIL/NHBDY/HEQEXIN,PEQEXIN/NHBDY/ 

BGPDT.PBGPDT/NHBDY $ 

12 PLTSET PCDB,PEQEXIN,PECT/PLTSETX,HPLTPAR,HGPSETS,HELSETS/S,N,HNSIL/ 

S,N,JUMPPLOT $ 

13 PRTMSG PLTSETX// $ 

H PARAM //ftMPY*/PLTFLG/l/l $ 

15 PARAM //*MPY*/PFILE/0/0 $ 

16 COND HP1.JUMPPL0T $ 

17 PLOT HPLTPAR,HGPSETS,HELSETS,CASECC,PBGPDT, PEQEXIN.PS I L, , , ,/PLOTXl/ 

HNSIL/HLUSET/S,N,JUMPPLOT/S,N,PLTFLG/S,N,PFILE $ 

18 PRTMSG PL0TX1// $ 

19 LABEL HP1 $ 

20 GP3 GE0M3,HEQEXIN,GE0M2/HSLT,GPTT/N0GRAV $ 

3.2-1 (05/30/86) 



HEAT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

HEAT APPROACH, RIGID FORMAT 3 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

21 SETVAL //S,N,REPEATH/-1 $ 

22 LABEL LOOPTOP $ 

23 CASE CAS£CC,/CASEXX/*TRANRESPft/S,N,REPEATH/S,N,N0LOOP $ 
2k PARAML CASEXX//*DTI*/l/8//S,N,TEMPMATE $ 

25 PARAM //*STSR*/V,N,TEMPMATE/-10 $ 

26 TA1 ECT,EPT,BGPDT,HSIL,GPTT,CSTM/HEST,,HGPECT,,/ 

HLUSET/S , N , NOS I MP/ 1 /NOGENL/HXYZ $ 

27 COND ERR0R2,N0SIMP $ 

28 PARAM //*ADD*/HNOKGG/l/0 $ 

29 EMG HEST,CSTM,MPT,DIT,GE0M2,/HKELM,HKDICT,,,,,/S,N,HN0KGG $ 

30 PURGE HKGG.GPST/HNOKGG $ 

31 COND JMPKGGX.HNOKGG $ 

32 EMA HGPECT,HKDICT,HKELM/HKGGX,GPST $ 

33 LABEL JMPKGGX $ 

34 RMG HEST , MATPOOL , GPTT, HKGGX/HRGG , HQGE , HKGG/C , Y ,TABS/C , Y , S I GMA=0 . 0/ 

S,N,HNLR/HLUSET $ 

35 EQU1V HKGGX.HKGG/HNLR $ 

36 PURGE HQGE.HRGG/HNLR $ 

37 GPi» CASEXX,GE0M4,HEQEXIN,GPDT,BGPDT,CSTM,GPST/RG, ,HUSET,HASET/ 

HLUSET/S, N,MPCF1/S,N,MPCF2/S,N,S I NGLE/S,N,0MIT/S,N .REACT/ 
S , N , NSK I P/S , N , REPEATH/S , N , NOSET/S , N , NOL/S , N , NOA/C , Y , ASETOUT/ 
S.Y.AUTOSPC $ 

38 COND ERROR!, NOL $ 

39 PURGE GM/MPCF1/HPS,HKFS,HKSS,HKSF,HRSN,HQG/SINGLE $ 
kO PARAM //*EQ*/GPSPFLG/AUT0SPC/O $ 

k\ COND HLBL5.GPSPFLG $ 

J+2 GPSP GPL,GPST,HUSET,HSIL/OGPST/S,N,NOGPST $ 

it 3 OFP OGPST,,,,,//S,N,CARDNO $ 

kk LABEL HLBL5 $ 



3.2-2 (05/30/86) 



NONLINEAR STATIC HEAT TRANSFER ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

HEAT APPROACH, RIGID FORMAT 3 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



k5 EQUIV 

ki> COND 

1*7 MCE1 

1*8 MCE2 

i*9 LABEL 

50 EQUIV 

51 COND 

52 VEC 

53 PARTN 
$k PARTN 

55 LABEL 

56 DECOMP 

57 COND 

58 SSG1 

59 EQUIV 

60 COND 

61 SSG2 

62 LABEL 

63 SSGHT 

i>k COND 

65 MATGPR 

66 LABEL 

67 SDR2 

'68 OFP 



HKGG , HKNN/MPCF 1 /HRGG , HRNN/MPCF 1 $ 

HLBL1.MPCF1 $ 

HUSET, RG/GM $ 

HUSET, GM, HKGG, HRGG, ,/HKNN.HRNN, , $ 

HLBL1 $ 

HKNN.HKFF/SINGLE/HRNN.HRFN/SINGLE $ 

HLBL2, SINGLE $ 

HUSET/VFS/*N*/*F*/*S* $ 

HKNN.VFS./HKFF.HKSF.HKFS.HKSS $ 

HRNN,,VFS/HRFN,HRSN,,/1 $ 

HLBL2 $ 

HKFF/HLLL , HULL/0/O/MD I AG/DET/PWR/S , N , KS I NG $ 

ERR0R3.KSING $ 

HSLT,BGPDT,CSTM,HSIL,HEST,MPT,GPTT,EDT,,CASEXX,DIT,/ 
HPG,,, .SCR/HLUSET/NSKIP $ 

HPG.HPF/NOSET $ 

HLBL3.N0SET $ 

HUSET, GM..HKFS,,, HPG/, ,HPS,HPF $ 

HLBL3 $ 

HUSET,HSIL,GPTT,GM,HEST,MPT,DIT,HPF,HPS,HKFF,HKFS,HKSF, 
HKSS , HRFN ,HRSN ,HLLL , HULL/HUGV, HQG ,HRULV/HNNLK=1 /HNLR/ 
C,Y,EPSHT=.001/C,Y,TABS=0.0/C,Y,MAXIT*J*/V,Y, IRES/ 
MPCF1/SINGLE $ 

HLBL4, IRES $ 

GPL,HUSET,H$IL,HRULV//*F* $ 

HLBUt $ 

CASEXX , CSTM,MPT , D I T , HEQEX I N , HS I L , GPTT, EDT, BGPDP , , HQG , HUGV, HEST , , 
HPG/H0PG1 ,H0QG1 .H0UGV1 ,H0ES1 ,H0EF1 ,HPUGV1/*STATI CS* $ 

H0UGV1 , HOPG 1 , HOQG 1 , , , //S , N , CARDNO $ 



3.2-3 (05/30/86) 



HEAT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

HEAT APPROACH, RIGID FORMAT 3 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

69 SDRHT HSIL,HUSET,HUGV,H0EF1,HSLT,HEST,DIT,HQGE,,/H0EF1X/C,Y,TABS/ 

HNLR $ 

70 OFP H0EF1X,,,,,//S,N,CARDN0 $ 

71 COND HP2.JUMPPL0T $ 

72 PLTSET PCDB,HEQEXIN,ECT/PSMES,DPLTPAR,DGPSETS,DELSETS/S,N,DS1L/DJ $ 

73 PLOT DPLTPAR,DGPSETS,DELSETS,CASEXX,BGPDT,HEQEXIN,HSIP,HPUGV1,, 

HGPECT,H0ES1/PL0TX2/DSIL/HLUSEP/JUMPPL0T/PLTFLG/S,N,PFILE $ 

Ik PRTMSG PL0TX2// $ 

75 LABEL HP2 $ 

76 COND FINIS, REPEATH $ 

77 KEPT LOOPTOP.IOO $ 

78 JUMP FINIS$ 

79 LABEL ERROR 1 $ 

80 PRTPARM //-1/*HNLI* $ 

81 LABEL ERR0R2 $ 

82 PRTPARM //-2/*HNLI* $ 

83 LABEL ERR0R3 $ 

Bk PRTPARM //-3/*HNLI* $ 

85 LABEL FINIS$ 

86 PURGE DUMMY/MINUS! $ 

87 END $ 



3.2-4 (05/30/86) 



NONLINEAR STATIC HEAT TRANSFER ANALYSIS 

3.2.2 Description of Important DMAP Operations for Nonlinear Static Heat Transfer Analysis 

4. GP1 generates coordinate system transformation matrices, tables of grid point locations, and 
tables relating the internal and external degree of freedom indices. 

5. PLTTRAN modifies special scalar grid points in the BGPDT and HSIL tables. 

6. GP2 generates the Element Connection Table with internal indices. 
9. Go to DMAP No. 19 if there are no structure plot requests. 

10. PLTHBDY modifies the data in the ECT, HSIL, HEQEXIN and BGPDT tables to permit the plotting 
of HBDY (thermal boundary) elements. 

11. Equivalence PECT to ECT, PSIL to HSIL, PEQEXIN to HEQEXIN and PBGPDT to BGPDT if there are 
no HBDY elements. 

12. PLTSET transforms user input into a form used to drive the structure plotter. 

13. PRTMSG prints error messages associated with the structure plotter. 

16. Go to DMAP No. 19 if no boundary and structure (heat conduction) element plots are 
requested. 

17. PL0T generates all requested boundary and heat conduction element plots. 

18. PRTMSG prints plotter and engineering data for each generated plot. 

20. GP3 generates applied Static (Heat Flux) Loads Table (HSLT) and the Grid Point Temperature 
Table. 

23. CASE extracts the appropriate record from CASECC corresponding to the current loop and 
copies it to CASEXX. 

24. PARAML extracts the 8 word in the data record of CASEXX (representing the thermal 
material set ID) and stores its value in the parameter TEMPMATE. 

25. PARAM stores the value of the parameter TEMPMATE in the 10 th word of C0MM0N /SYSTEM/. 

26. TA1 generates element tables for use in matrix assembly, load generation, and heat flux data 
recovery. 

27. Go to DMAP No. 81 and print Error Message No. 2 if no elements have been defined. 

29. EMG generates element heat conduction matrix tables and dictionaries for later assembly by 
the EMA module. 

31. Go to DMAP No. 33 if no heat conduction matrix is to be assembled. 

32. EMA assembles heat conduction matrix [K* ] and Grid Point Singularity Table. 

y y 

34. RMG generates the radiation matrix, [R Qa L and adds the estimated linear component of 

radiation to the heat conduction matrix. The element radiation flux matrix, [Q„ ], is 

ge 

also generated for use in recovery data for the HBDY elements. 

35. Equivalence [K* ] to [K ] if there is no linear component of radiation. 

37. GP4 generates flags defining members of various displacement sets (HUSET) and forms 
multipoint constraint equations [R ] {u } = {0}. 

38. Go to DMAP No. 79 and print Error Message No. 1 if no independent degrees of freedom are 
defined. 

3.2-5 (05/30/86) 



HEAT RIGID FORMATS 



41. Go to DMAP No. 4-4 if no potential grid point singularities exist. 

42. GPSP generates a table of potential grid point singularities. These singularities may be 
extraneous in a radiation problem, since some points may transfer heat through radiation 
only. 

43. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 

45. Equivalence [K ] to [K ] and [R ] to [R„,J if no multipoint constraints exist. 

99 nn 99 nn 

46. Go to DMAP No. 49 if no multipoint constraints exist. 

47. MCE1 partitions the multipoint constraint equation matrix [R ] = [R J R ] and solves 
for the multipoint constraint transformation matrix 9 

[<y ¦ -eg" 1 [ R „] • 

48. MCE2 partitions heat conduction and radiation matrices 



C V - 



K | K 

nn nm 

K | K 

mn mm 



and 



C V ¦ 



R I R 
n n mn 

R i R 
mn mm 



and performs matrix reductions 

[K nn ] - [K„ n ] ? [ G J][K mn j ? [K^iDg + [ejHKJCV snd 
LR nn ] - [L] + [gT][r ] + [rT ][g 1 + [Gl][U[U. 



50. Equivalence [K ] to [K ff ] and [R nn l to [R fn 3 if no single-point constraints exist. 

51. Go to DMAP No. 55 if no single-point constraints exist. 

52. VEC generates a partitioning vector (u } ¦*¦ (u f } + (u }. 

53. PARTN partitions the heat conduction matrix 



[K ] = 
L nn J 



^ff_j_ K fs 
L K fs ' K ssJ 



54. PARTN partitions the radiation matrix 

~R 



tw - 



fn 



R. 



sn 



56. DEC0MP decomposes the potentially unsymmetric matrix [K ff ] into upper and lower triangular 



factors [U„ 1 and [L 1. 



57. Go to DMAP No. 83 and print Error Message No. 3 if the matrix is singular, 

58. SSG1 generates the input heat flux vector (P-). 



3.2-6 (05/30/86) 



NONLINEAR STATIC HEAT TRANSFER ANALYSIS 



59. Equivalence {P } to (P f ) if no constraints are applied. 

60. Go to DMAP No. 62 if no constraints of any kind exist. 

61. SSG2 reduces the heat flux vector 






tp n > ¦ ip n i + [<]ff B i 




and 

63. SSGHT solves the nonlinear heat transfer problem by an iteration technique which is limited 
by parameters EPSHT and MAXIT. The output data blocks are: {u }, the solution 

temperature vector, (q }, the heat flux due to single-point constraints, and {6P >, the 
9 ^ 

matrix of residual heat fluxes at each iteration step. 

64. Go to DMAP No. 66 if residual vectors are not to be printed. 

65. MATGPR prints the residual vectors for independent coordinates (HRULV). 

67. SDR2 calculates the heat flux due to conduction and convection in the elements (H0EF1) and 
prepares the temperature vector (H0UGV1), the load vector (H0PG1), and the power of 
constraint (H0QG1) for output and components of the temperature vector (HPUGV1). 

68. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

69. SDRHT processes the HBDY elements to produce heat flux into the elements (H0EF1X) due to 
convection, radiation, and applied flux. 

70. 0FP formats the element flux table prepared by SDRHT and places it on the system output file 
for printing. 

71. Go to DMAP No. 75 if no temperature profile plots are requested. 

72. PLTSET transforms user input into a form used to drive the structure plotter. 

73. PL0T generates all requested temperature profile and thermal contour plots. 

74. PRIMSG prints plotter data, engineering data, and contour data for each temperature profile 
and thermal contour plot generated. 

76. Go to DMAP No. 85 and make normal exit if all constraint sets have been processed. 

77. Go to DMAP No. 22 if additional constraint sets need to be processed. 

78. Go to DMAP No. 85 and make normal exit. 

80. Print Error Message No. 1 and terminate execution. 
82. Print Error Message No. 2 and terminate execution. 
74. Print Error Message No. 3 and terminate execution. 

3.2-7 (05/30/86) 



HEAT RIGID FORMATS 

3.2.3 Output for Nonlinear Static Heat Transfer Analysis 

The following output may be requested for the last iteration in Nonlinear Static Heat * 
Transfer Analysis: 

1. Temperature (THERMAL) and nonzero components of static loads (0L0AD) and constrained 
heat flow (SPCF0RCE) at selected grid points or scalar points. 

2. The punch option of a THERMAL request will produce TEMP bulk data cards. 

3. Flux density (ELF0RCE) in selected elements. In the case of CHBDY elements, a flux 
density summary is produced that includes applied flux, radiation flux, and convective 
flux. 

4. Plots of the structural model and temperature profiles. 

5. Contour plots of the thermal field. 

3.2.4 Case Control Deck for Nonlinear Static Heat Transfer Analysis 

The following items relate to subcase definition and data selection for Nonlinear Static 
Heat Transfer Analysis: 

1. A separate subcase must be defined for each unique combination of constraints and 
loading conditions. 

2. An estimated temperature distribution vector must be defined on TEMP cards and selected 
with a TEMP(MATERIAL) request for each subcase. Temperatures for constrained components 
are taken from these TEMP cards and entries on SPC cards are ignored. 

3.2.5 Parameters for Nonlinear Static Heat Transfer Analysis 

The following parameters are used in Nonlinear Static Heat Transfer Analysis: 
1. ASET0UT - optional. A positive integer value of this parameter causes the HASET output 
data block to be generated by the 6P4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 
2 - AUT0SPC - reserved for future optional use. The default value is -1. 

3. EPSHT - optional. The real value of this parameter is used to test the convergence of 
the nonlinear heat transfer solution (see Section 8.4.1 of the Theoretical Manual). The 
default value is 0.001. 

4 « IRES - optional. A positive integer value of this parameter causes the printing of the 
residual vectors following the execution of the SSGHT module for each iteration. 

3.2-8 (05/30/86) 



NONLINEAR STATIC HEAT TRANSFER ANALYSIS 

5. MAX IT - optional. The integer value of this parameter limits the maximum number of 

» 
iterations. The default value is 4 iterations. 

6. SIGMA - optional. The real value of this parameter is the Stefan-Boltzmann constant. 
The default value is 0.0. 

7. TABS - optional. The real value of this parameter is the absolute reference 
temperature. The default value is 0.0. 

3.2.6 Rigid Format Error Messages from Nonlinear Static Heat Transfer Analysis 

The following fatal errors are detected by the DMAP statements in the Nonlinear Static Heat 
Transfer Analysis rigid format. The text for each error message is given below in capital letters 
and is followed by additional explanatory material, including suggestions for remedial action. 

N0NLINEAR STATIC HEAT TRANSFER ANALYSIS ERR0R MESSAGE N0. 1 - N0 INDEPENDENT DEGREES 0F FREED0M 
HAVE BEEN DEFINED. 

Either no degrees of freedom have been defined on GRID, SP0INT or Scalar Connection cards, or all 
defined degrees of freedom have been constrained by SPC, MPC, SUP0RT, 0MIT or GRDSET cards, or 
grounded on Scalar Connection cards. 

N0NLINEAR STATIC HEAT TRANSFER ANALYSIS ERR0R MESSAGE N0. 2 - N0 SIMPLE STRUCTURAL ELEMENTS. 
No structural elements have been defined with Connection Cards. 

N0NLINEAR STATIC HEAT TRANSFER ANALYSIS ERR0R MESSAGE N0. 3 - STIFFNESS MATRIX SINGULAR. 
The heat conduction matrix is singular due to unspecified grid point temperatures. 



3.2-9 (05/30/86) 



HEAT RIGID FORMATS 



3.2-10 (05/30/86) 



HEAT RIGID FORMATS 

3.3 TRANSIENT HEAT TRANSFER ANALYSIS 

3.3.1 DMAP Sequence for Transient Heat Transfer Analysis 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

HEAT APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



OPTIONS IN EFFECT GO 



ERR=2 LIST 



NODECK NOREF NOOSCAR 



1 BEGIN HEAT 09 - TRANSIENT HEAT TRANSFER ANALYSIS - APR. 1986 $ 

2 PRECHK ALL $ 

3 PARAM //*MPYft/CARDN0/O/O $ 

it GP1 GE0M1,GE0M2,/GPL,HEQEXIN,GPDT,CSTM,BGPDT,HSIL/S,N,HLUSET/ 
$,N,N0GPDT/MINUS1=-1 $ 

5 PLTTRAN BGPDT,HSIL/BGPDP,HSIP/HLUSET/S,N,HLUSEP $ 

6 PURGE HUSET,GM,HGO,HKAA,HBAA,HPSO,HKFS,HQP,HEST/NOGPDT $ 

7 COND HLBL5.N0GPDT $ 

8 GP2 GE0M2.HEQEXIN/ECT $ 

9 PARAML PCDB//*PRES*////JUMPPLOT $ 

10 PURGE PLTSETX f PLTPAR,GPSETS,ELSETS/JUMPPLOT $ 

11 COND HP1.JUMPPL0T $ 

12 PLTSET PCDB,HEQEXIN,ECT/PLTSETX,PLTPAR,GPSETS,ELSETS/S,N,HNSIL/ 

S,N,JUMPPLOT $ 

13 PRTMSG PLTSETX// $ 

H PARAM //AMPYft/PLTFLG/1/1 $ 

15 PARAM //*MPY*/PFILE/0/0 $ 

16 COND HP1,JUMPPL0T$ 

17 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,HEQEXIN,HSIL,,ECT,,/PL0TX1/ 

HNS I L/HLUSET/S , N , JUMPPLOT/S ,N, PLTFLG/S , N , PF I LE $ 

18 PRTMSG PL0TX1// $ 

19 LABEL HP1 $ 

20 GP3 GE0M3,HEQEXIN,GE0M2/HSLT,GPTT/1 $ 

21 TA1 ECT,EPT,BGPDT,HSIL,GPTT,CSTM/HEST,,HGPECT,,/ 

HLUSET/S,N,N0SIMP=-1/1/123/123 $ 

3.3-1 (05/30/86) 



HEAT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

HEAT APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

22 PURGE HKGG,GPST,HBGG/NOSIMP $ 

23 COND HLBL1.N0SIMP $ 

2k PARAM //*ADD*/NOKGGX/l/0 $ 

25 PARAM //*ADD*/NOBGG/l/0 $ 

26 EMG HEST,CSTM,MPT,DIT,GE0M2,/HKELM,HKDICT,, ,HBELM,HBD I CT./S.N, 

NOKGGX//S.N.NOBGG $ 

27 PURGE HKGGX,GPST/NOKGGX $ 

28 COND JMPKGGX.NOKGGX $ 

29 EMA HGPECT,HKDICT,HKELM/HKGGX,GPST $ 

30 LABEL JMPKGGX $ 

31 COND JMPHBGG,NOBGG $ 

32 EMA HGPECT,HBDICT,HBELM/HBGG, $ 

33 LABEL JMPHBGG $ 

3k PURGE HBNN,HBFF,HBAA,HBGG/NOBGG $ 

35 LABEL HLBL1 $ 

36 RMG HEST,MATPOOL,GPTT,HKGGX/HRGG,HQGE,HKGG/C,Y,TABS/C,Y,SIGMA=0.0/ 

S.N.HNLR/HLUSET $ 

37 EQUIV HKGGX,HKGG/HNLR $ 

38 PURGE HRGG,HRNN,HRFF,HRAA,HRDD/HNLR $ 

39 GP4 CASECC,GE0M4,HEQEXIN,GPDT,BGPDT,CSTM,GPST/RG,,HUSET,ASET/ 

HLUSET/S , N , MPCF 1 /S , N ,MPCF2/S , N , S I NGLE/S , N , OM I T/ 

$,N, REACT/0/1 23/S,N,NOSET/S,N,NOL/S,N,N0A/C,Y,ASET0UT/ 

S.Y.AUTOSPC $ 

kO PURGE GM,GMD/MPCF1/HGO,HGOD/OMIT/HKFS,HPSO,HQP/S INGLE $ 

k] COND HLBL2.N0S1MP $ 

42 PARAM //AEQA/GPSPFLG/AUTOSPC/0 $ 

43 COND HLBL2.GPSPFLG $ 

kk GPSP GPL»GPST,HUSET,HSiL/OGPST/S,N,NOGPST $ 
J*5 OFP OGPST,,,,,//S,N,CARDNO $ 



3.3-2 (05/30/86) 



TRANSIENT HEAT TRANSFER ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

HEAT APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



t»6 LABEL 

if 7 EQUIV 

48 COND 

kS MCE1 

50 MCE2 

51 LABEL 

52 EQUIV 

53 COND 
5^ SCE1 

55 LABEL 

56 EQUIV 

57 EQUIV 

58 EQUIV 

59 COND 

60 SMP1 

61 COND 

62 SMP2 

63 LABEL 

64 COND 

65 SMP2 

66 LABEL 

67 DPD 

68 COND 

69 EQUIV 

70 PURGE 



HLBL2 $ 

HKGG,HKNN/MPCF1/HRGG,HRNN/MPCF1/HBGG,HBNN/MPCF1 $ 

HLBL3.MPCF1 $ 

HUSET.RG/GM $ 

HUSET,GM,HKGG,HRGG,HBGG,/HKNN,HRNN,HBNN, $ 

HLBL3 $ 

HKNN.HKFF/SINGLE/HRNN.HRFF/SINGLE/HBNN.HBFF/SINGLE $ 

HLBL4, SINGLE $ 

HUSET,HKNN,HRNN,HBNN,/HKFF,HKFS,,HRFF,HBFF, $ 

HLBLJ+ $ 

HKFF.HKAA/OMIT $ 

HRFF.HRAA/OMIT $ 

HBFF.HBAA/OMiT $ 

HLBL5.0MIT $ 

HUSET.HKFF, , ,/HG0,HKAA,HK00,HL00, . , , , $ 

HLBLR.HNLR $ 

HUSET,HGO,HRFF/HRAA $ 

HLBLR $ 

HLBL5.N0BGG $ 

HUSET,HGO»HBFF/HBAA $ 

HLBL5 $ 

DYNAM I CS , GPL , HS I L , HUSET/GPLD , HS I LD , HUSETD , TFPOOL , HDLT, , , 
HNLFT.HTRL, ,HEQDYN/HLUSET/S,N,HLUSETD/123 /S,N,NODLT/ 
1 23/ 1 23/S , N, NONLFT/S ,N , NOTRL/1 23//S , N , NOUE $ 

ERR0R1.N0TRL $ 

HGO,HG0D/N0UE/GM,GMD/N0UE $ 

HPP0,HPSO,HPDO,HPDT/NODLT $ 



3.3-3 (05/30/86) 



HEAT RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

HEAT APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



71 MTRXIN CASECC,MATPOOL,HEQDYN,,TFPOOL/HK2PP,,HB2PP/HLUSETD/ 

S,N,N0K2PP/123/S,N,NOB2PP $ 

72 PARAM //*AND*/KDEKA/N0UE/N0K2PP $ 

73 PURGE HK2DD/N0K2PP/HB2DD/N0B2PP $ 

Ik EQUI V HKAA,HKDD/KDEKA/HB2PP,HB2DD/N0A/HK2PP,HK2DD/N0A/HRAA,HRDD/ 
NOUE $ 

75 COND HLBL6.N0GPDT $ 

76 GKAD HUSETD,GM,HG0,HKAA,HBAA,HRAA,,HK2PP,,HB2PP/HKDD,HBDD, 

HRDD , GMD , HGOD , HK2DD , , HB2DD/*TRANRESP*/*D I SP*/ 
*DIRECT*/C,Y,G-0.0/C f Y,W3=0.0/C,Y,W4»0.0/NOK2P'P/-l-/ 
N0B2PP/MPCF1/SINGLE/0MIT/N0UE/ 
-1/N0BGG/N0SIMP/-1 $ 

77 LABEL HLBL6 $ 

78 EQUIV HK2DD,HKDD/N0SIMP/HB2DD,HBDD/N0GPDT $ 

79 PARAM //*NPYft/REPEATT/l/-l $ 

80 LABEL HLBL10 $ 

81 CASE CASECC,/CASEXX/*TRAN*/S,N,REPEATT/S,N,NOLOOP $ 

82 TRLG CASEXX,HUSETD,HDLT,HSLT,BGPDT,HSIL,CSTM,HTRL,DIT,GMD,HGOD, t 

HEST, ,/HPPO,HPSO,HPDO,HPDT, ,HTOL/S,N,NOSET $ 

83 EQUIV HPPO.HPDO/NOSET $ 

84 TRHT CASEXX,HUSETD,HNLFT,DIT,GPTT,HKDD,HBDD,HRDD,HPDT,HTRL/ 

HUDVT,HPNLD/C,Y,BETA=.55/C,Y,TABS»0.0/HNLR/C,Y,RADLIN=-1/ 
C,Y,SIGMA=0.0 $ 

85 VDR CASEXX,HEQDYN,HUSETD,HUDVT,HT0L,XYCDB,HPNLD/H0UDV1 .H0PNL1/ 

*TRANRESP*/*DIRECT*/0/S,N,NOD/S,N,NOP/0 $ 

86 COND HLBL7.N0D $ 

87 SDR3 HOUDVl,HOPNLl,,,,/H0UDV2,H0PNL2,,,, $ 

88 OFP HOUDV2,HOPNL2,,,,//S,N,CARDNO $ 

89 XYTRAN XYCDB,H0UDV2,H0PNL2,,,/HXYPLTTA/*TRAN*/*DSET*/S,N,HPFILE/ 

S,N,HCARDNO $ 

90 XYPLOT HXYPLTTA// $ 

91 LABEL HLBL7 $ 



3.3-4 (05/30/86) 



TRANSIENT HEAT TRANSFER ANALYSIS 

)MA^£erati^^ 

astern transformation matrices, tables of grid point locations, and 

£l and external degree of freedom indices. 

scalar grid points in the BGPDT and HSIL tables. 

e is no Grid Point Definition Table. 

. Connection Table with internal indices. 

-e are no structure plot requests. 

,put into a form used to drive the structure plotter. 

ages associated with the structure plotter. 

o boundary and structure (heat conduction) element plots are 

sted boundary and heat conduction element plots. 
lt a and engineering data for each generated plot, 
tatic (Heat Flux) Load Tables; (HSLT) and the Grid Point Temperature 

abl es for use in matrix assembly, load generation, and data recovery, 
heat conduction or boundary elements: exist. 

ie at conduction and capacity matrix" tables and dictionaries for 
MA module. 

, heat conduction matrix is to be assembled, 
iuction matrix [K* gg ] and Grid Point Singularity Table. 
D heat capacitance matrix is to be assembled. 

acitance matrix [B gg ]- 

ation matrix, [R gg ], and adds the elated iinear cogent of 

.ctlvlty <»tr1x'. The ele.rent-radiation.f1ux matrix, [Q ge ], is.ll«> 

lata recovery. 

r heat transfer matrix, [K gg ], to the heat conduction matrix if no 

fining members of various dispiacement sets (HUSET) and forms the 

equations, [R g ] (u g > =0. 
no simple elements exist, 
no potential grid point singularities exist. 

s of potentia, grid point singuiarities prepared by GPSP and p! aces it 
file for printing. 



U.YSIS 



P/l/ 



Lhqp.hupv.hest, 

pV/ATRANRESP* $ 

Lt,/hoefix/c,y, 



JUPV2,H0ES2, 



„HPUGV, 



RAN*/*PSET*/S,N, 



3.3^7 (05/30/86) 



HEAT RIGID FORMATS 



RIGID FORMAT DrtAP LISTING 
APRIL 1986 RELEASE 

HEAT APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

115 PRTPARM //-l/*HTftD* $ 

116 LABEL F IN 1 S$ 

117 PURGE DUMMY/MINUS1 $ 

118 END $ 



3.3-6 (05/30/86) 



TRANSIENT HEAT TRANSFER ANALYSIS 

3.3.2 Description of Important DMAP Operations for Transient Heat Transfer Analysis 

4. GP1 generates coordinate system transformation matrices, tables of grid point locations/ and 
tables relating the internal and external degree of freedom indices. 

5. PLTTRAN modifies special scalar grid points in the BGPDT and HSIL tables, 

7. Go to DMAP No. 66 if there is no Grid Point Definition Table. 

8. GP2 generates the Element Connection Table with internal indices. 

11. Go to DMAP No. 19 if there are no structure plot requests. 

12. PLTSET transforms us,er input into a form used to drive the structure plotter. 

13. PRTMSG prints error messages associated with the structure plotter. 

16. Go to DMAP No. 19 if no boundary and structure (heat conduction) element plots are 
requested. 

17. PL0T generates all requested boundary and heat conduction element plots. 

18. PRTMSG prints plotter data and engineering data for each generated plot. 

20. GP3 generates applied Static (Heat Flux) Load Tables (HSLT) and the Grid Point Temperature 
Table. 

21. TA1 generates element tables for use in matrix assembly, load generation, and data recovery. 

23. Go to DMAP No. 35 if no heat conduction or boundary elements: exist. 

26. EMG generates element heat conduction and capacitancib matrix tables and dictionaries for 
later assembly by the EMA module, 

28. Go to DMAP No. 30 if no heat conduction matrix is to be assembled. 

29. EMA assembles heat conduction matrix [K* ] and Grid Point Singularity Table. 

31. Go to DMAP No. 33 if no heat capacitance matrix is to be assembled. 

32. EMA assembles heat capacitance matrix [B qq ]. 

36. RMG generates the radiation matrix, [R ],and adds the estimated linear component of 

radiation to the conductivity matrix. The element-radiation flux matrix, [Q qe L is. also 
generated for use in data recovery. 

37. Equivalence the linear heat transfer matrix, [K q ], to the heat conduction matrix if no 
radiation exists. 

39. GP4 generates flags defining members of various displacement sets (HUSET) and forms the 
multipoint constraint equations, [R ] {u } = 0. ;¦ 

41. Go to DMAP No. 46 if no simple elements exist. ' 

43. Go to DMAP No. 46 if no potential grid point singularities exist. 

44. GPSP generates a table of potential grid point singularities. These singularities may be 
extraneous in a radiation problem, since some points may transfer heat through radiation 
only. 

45.. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 



3.3r7 (05/30/86) 



HEAT RIGID FORMATS 



47. Equivalence [K ] to [K n J, [R nn ] to [R__]. and [B J to [B ] if no multipoint 



gg 



nn 



gg 



nn- 



gg- 



nn- 



constraints exist. 

48. Go to DMAP No. 51 if no multipoint constraints exist. 

49. MCE1 partitions the multipoint constraint equation matrix, [R ] = [R^|R ], and solves 
for the multipoint constraint transformation matrix, 9 

[G m ] - -[RJ- 1 [R n ] . 

50. MCE2 partitions heat conduction and radiation matrices 



[K 99 ] " 



K nn ! K nm 



>W lK 



mm 



V - 



[ V • 



R_„ I R„„ 

nn t nm 
1 

R m« ' R mm 

mn mm 



B i B 
n n nm 

B I B 
mn mm 



and performs matrix reductions 

[K„ n ] - [K n „] + [GT][^] ? [K^HGJ + [Gj][^][G m ] . 
The same equation is applied to [R nn ] and [B nn 3. 

52. Equivalence [K nn ] to [K ff ], [B nn 3 to [B ff ], and [R pn ] to [R ff ] if no 
single-point constraints exist. 

53. Go to DMAP No. 55 if no single-point constraints exist. 

54. SCE1 partitions the matrices as follows: 



tV ¦ 



^ff !_ K fs 

K sf ' K SS 



[R ] and [B ] are partitioned in the same manner, except that only the ff partitions 
are saved. 

56. Equivalence [ICJ to [K aa ] if no omitted coordinates exist. 

tt aa 

57. Equivalence [R^] to [R._] if no omitted coordinates exist. 

tt aa 



3.3-8 (05/30/86) 



TRANSIENT HEAT TRANSFER ANALYSIS 

58. Equivalence [B.-l to [B 1 if no omitted coordinates exist. 

n ft aa 

59. Go to DMAP No. 66 if no omitted coordinates exist. 

60. SMP1 partitions the heat conduction matrix 



[K ff ] - 






solves for the transformation matrix [G Q ]: 

f^ 1%1 - - [K oa3 • 
and solves for the reduced heat conduction matrix [K ]: 

[^ " l\J + [K a„] ^ • 

61. Go to DMAP No. 63 if no radiation matrix exists. 

62. SMP2 partitions constrained radiation matrix 



[R ff ] ¦ 



V^ao 
R oa ' R oo 



and performs matrix reduction 



aa- 



aa- 



oa- 



64, 
65, 



Go to DMAP No. 66 if no heat capacitance matrix, [B ff ], exists. 

SMP2 calculates a reduced heat capacitance matrix, [B aa L with the same. equation as DMAP 
No. 62. " 



67. DPD generates the table defining the displacement sets each degree of freedom belongs to _ 
(HUSETD), including extra points. It prepares. the Transfer Function Pool, the Dynamics Load 
Table, the Nonlinear Function Table, and the Transient Response List. 

68. Go to DMAP No. 114 and print Error Message No. 1 if there is no Transient Response List. 

69. Equivalence [G ] to [g||] and [Gj to'[GJjj if no extra points were defined. 

2 2 
71. MTRXIN selects the direct input matrices [K ] and [B pp ]. 

Equivalence [K ] to [l(J d ] if there are no direct input stiffness matrices and no 

extra points; [B ] to [B^] and [K pp ] to [K dd ] if only extra points are used; 

and [R ] to [R,.] if no extra points are used. 

75. Go to DMAP No. 77 if there is no Grid Point Definition Table. 

76. GKAD expands the matrices to include extra points and assembles heat conduction, 
capacitance, and radiation matrices for use in the transient analysis: 



74. 



3.3-9 (05/ 30/86) 



HEAT RIGID FORMATS 



^ - 



CBdd3 



[•W 



K 1 
aa ' 

f— 

I 






i 






O I 







and 



[K dd ] = [Kjj + [!&,] 



v dd- 



\Jd- 



CB.J = [bL] + [BL] 



'dd- 



'dd- 



'dd- 



{Nonzero values of the parameters W4, G, and W3 (see the PARAM bulk data card) are not 
recommended for use in heat transfer analysis and therefore do not appear in the above 
equations.) 

2 2 

78. Equivalence [K..] to [K.J and [B dd ] to [B dd ] if no matrices were generated from 

the element heat conduction and capacitance assemblers. 

80. Beginning of loop for additional dynamic load sets. 

81. CASE extracts the appropriate record from CASECC corresponding to the current loop and 
copies it into CASEXX. 

82. TRLG generates matrices of heat flux loads versus time. {P°}, {P°}, and (P d ) are 
generated with one column per output time step. (P d > is generated with one column per 
solution time step, and the Transient Output List is a list of output time steps. 

83. Equivalence (P°} to {PJJ} if the d and p sets are the same. 

84. TRHT integrates the equation of motion: 

[B dd ]{u} + [K dd ]{u} = {P d } + {N d } , 

where {u} is a vector of temperatures at any time, 

(u) is the time derivative of (u> ("velocity"), 

{P.} is the applied heat flux at any time step, and 

(NJ'is the total nonlinear heat flux from radiation and/or N0LINi data, 
extrapolated from the previous solution vector. 

The output consists of the [ulj] matrix containing temperature vectors and temperature 
"velocity" vectors for the output time steps. 

85. VDR prepares the solution set temperatures, temperature "velocities", and nonlinear loads, 
sorted by time step 9 for output. 

86. Go to DMAP No. 91 if there is no output request for the solution set. 



3.3-10 (05/30/86) 



TRANSIENT HEAT TRANSFER ANALYSIS 

87. SDR3 prepares the requested output of the solution set temperatures, temperature 
"velocities", and nonlinear loads sorted by point number or element number. , 

88. 0FP formats the tables prepared by SDR3 for output sorted by point number or element number 
and places them on the system output file for printing. 

89. XYTRAN prepares the input for requested X-Y plots of the solution set quantities. 

90. XYPL0T prepares the requested X-Y plots of the solution set temperatures, "velocities" and 
nonlinear loads versus time. 

93. Go to DMAP No. 109 if no further output is requested. 

94. Equivalence iu,} to (u } if no structure points were input. 

95. Go to DMAP No. 97 if no structure points were input. 

96. SDR1 recovers the dependent temperatures: 

{u„> - [G d ]{u d ) , 




V - [<] W + V 




and 



The module also recovers the heat flux into the points having single-point constraints: 

(q s J - -{P s ) + [Kj s ] <U f } . 

98. SDR2 calculates requested heat flux transfer in the elements and prepares temperatures, 
"velocities", and heat flux loads for output sorted by time step. 

99. SDRHT modifies the H0EF1 data block by combining the heat flow data from different sources 
for the HBDY elements and writes the results on the H0EF1X output data block. 

100. Equivalence H0EF1 data block to the H0EF1X data block. 

101. SDR3 prepares requested output sorted by point number or element number. 

102. 0FP formats the tables prepared by SDR3 for output and places them on the system output file 
for printing. 

103. Go to DMAP No. 106 if no temperature profile plots are requested. 

104. PL0T generates all requested temperature profile plots and thermal contours for specified 
times. 



3.3-11 (05/30/86) 



HEAT RIGID FORMATS 

105. PRTMSG prints plotter data, engineering data, and contour data for each temperature profile 
and thermal contour plot generated. 

107. XYTRAN prepares the input for requested X-Y plots. 

108. XYPL0T prepares the requested X-Y plots of temperatures, "velocities", element flux, and 
applied heat loads versus time. 

110. Go to DMAP No. 116 if no additional dynamic load sets need to be processed. 

111. Go to DMAP No. 80 if additional dynamic load sets need to be processed. 

112. Print Error Message No. 2 and terminate execution. 

113. Go to DMAP No. 116 and make normal exit. 

115. Print Error Message No. 1 and terminate execution. 



3.3-12 (05/30/86) 



TRANSIENT HEAT TRANSFER ANALYSIS 

3.3.3 Output for Transient Heat Transfer Analysis 

The following printed output, sorted by point number or element number (S0RT2), is available 
at selected multiples of the integration time step: 

1. Temperatures (THERMAL) and derivatives of temperatures (VEL0CITY) for a list of PHYSICAL 
points (grid points and extra scalar points introduced for dynamic analysis) or 
SDISPLACEMENT and SVEL0CITY for S0LUTI0N points (points used in the formulation of the 
dynamic equation). 

2. Nonzero components of the applied load vector (0L0AD) and constrained heat flow 
(SPCF0RCE) for a list of PHYSICAL points. 

3. Nonlinear load vector for a list of S0LUTI0N points. 

4. Flux density (ELF0RCE) in selected elements. 
The following plotter output is available: 

1. Plot of the Structural model. 

2. Temperature profiles and thermal contours for selected time intervals. 

3. X-Y plot of temperature or derivative of temperature for a PHYSICAL point or a S0LUTI0N 
point. 

4. X-Y plot of the applied load vector, nonlinear load vector, or constrained heat flow. 

5. X-Y plot of flux density for an element. 

The data used for preparing the X-Y plots may be punched or printed in tabular form (see 
Volume I, Section 4.3). Also, a printed summary is prepared for each X-Y plot which includes the 
maximum and minimum values of the plotted function. 

3.3.4 Case Control Deck for Transient Heat Transfer Analysis 

The following items relate to subcase definition and data selection for Transient Heat 
Transfer Analysis: 

1. One subcase must be defined for each dynamic loading condition. 

2. DL0AD and/or N0NLINEAR must be used to define a time-dependent loading condition for 
each subcase. The static load cards (QVECT, QV0L, QHBDY, QBDY1, and QBDY2) can also be 
used to define a dynamic load by using these cards with, or instead of, the DAREA cards. 
The set identification number on the static load cards (field 2) is used in the same 
manner as the set identification number on the DAREA cards (field 2). 

3. All constraints must be defined above the subcase level. 

3.3-13 (05/30/86) 



HEAT RIGID FORMATS 

4. TSTEP must be used to select the time-step intervals to be used for integration and 

* 
output in each subcase. 

5. If nonzero initial conditions are desired, IC must be used to select a TEMP set in the 
Bulk Data Deck. 

6. An estimated temperature distribution vector must be defined on TEMP cards and selected 
with a TEMP (MATERIAL) request if radiation effects are included. 

7. On restart following an unscheduled exit due to insufficient time, the subcase structure 
should be changed to reflect any completed loading conditions. 

3.3.5 Parameters fo r T ransient Heat Transfer Analysis 

The following parameters are used in Transient Heat Transfer Analysis: 

1. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2. AUT0SPC - reserved for future optional use. The default value is -1. 

3. BETA - optional. The real value of this parameter is used as a factor in the 
integration algorithm (see Section 8.4.2 of the Theoretical Manual). The default value 
is 0.55. 

4. RADLIN - optional. A. positive integer value of this parameter causes some of the 
radiation efffects to be linearized (see Equation 2, Section 8.4.2 of the Theoretical 
Manual). The default value is -1. 

5. SIGMA - optional. The real value of this parameter is the Stefan-Boltzmann constant. 
The default value is 0.0. 

6. TABS - optional. The real value of this parameter is the absolute reference 
temperature. The default value is 0.0. 

3.3.6 Rigid Format Error Messages from Transient Heat Transfer Analysis 

The following fatal errors are detected by the DMAP instructions in the Transient Heat 
Transfer Analysis rigid format. The text for each error message is given below in capital letters 
and is followed by additional material, including suggestions for remedial action. 



TRANSIENT HEAT TRANSFER ANALYSIS ERR0R MESSAGE N0. 1 - TRANSIENT RESPONSE LIST REQUIRED F0R 
TRANSIENT RESPONSE CALCULATIONS. 



3.3-14 (05/30/86) 



TRANSIENT HEAT TRANSFER ANALYSIS 

Time step intervals to be used must be specified on a TSTEP card in the Bulk Data Deck and a TSTEP 
selection must be made in the Case Control Deck. * 

TRANSIENT HEAT TRANSFER ANALYSIS ERR0R MESSAGE N0. 2 - ATTEMPT T0 EXECUTE M0RE THAN 100 L00PS. 

An attempt has been made to use more than 100 dynamic load sets. This number may be increased by 
ALTERing the REPT instruction following the last XYPL0T instruction. 



3.3-15 (05/30/86) 



HEAT RIGID FORMATS 



3.3-16 (05/30/86) 



4. AERO RIGID FORMATS 

4.1 BLADE CYCLIC MODAL FLUTTER ANALYSIS 

4.1.1 DMAP Sequence for Blade Cyclic Modal Flutter Analysis 

RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



OPTIONS IN EFFECT GO 



ERR=2 LIST 



NODECK NOREF NOOSCAR 



1 BEGIN AERO 09 - COMPRESSOR BLADE MODAL FLUTTER ANALYSIS - APR. 1986 $ 

2 PRECHK ALL $ 

3 FILE PHIHL=APPEND/AJJL=APPEND/FSAVE=APPEND/CASEYY=APPEND/CLAMAL= 

APPEND/OVG=APPEND/QHHL=APPEND $ 

k PARAM //*MPY*/CARDN0/0/0 $ 

5 GP1 GE0M1,GE0M2,/GPL,EQEX!N,GPDT,CSTM,BGPDT,SIL/S,N,LUSET/S,N, 

N0GPDT/MINUS1=-1 $ 

6 COND ERR0R5.N0GPDT $ 

7 GP2 GE0M2 f EQEXIN/ECT $ 

8 GP3 GE0M3,EQEXIN,GE0M2/,GPTT/N0GRAV $ 

9 TA1 ECT,EPT,BGPDT,SIL,GPTT,CSTM/EST,GEI,GPECT,,/LUSET/S,N, 

N0SIMP/1/S,N,N0GENL/S,N,GENEL $ 

10 COND ERR0R5.N0SIMP $ 

11 PURGE OGPST/GENEL $ 

12 PARAM //*ADDA/NOKGGX/1/0 $ 

13 PARAM //*ADD*/NOMGG/1/0 $ 

14 PARAM //*N0P*/V,Y,KGGIN=-1 $ 

15 COND JMPKGGIN,KGGIN $ 

16 PARAM //*ADD*/NOKGGX/-1/0 $ 

17 INPUTT1 /KT0TAL,,,,/C,Y,L0CATI0N=-1/C,Y,INPTUNIT=0 $ 

18 EQUIV KTOTAL.KGGX $ 

19 LABEL JMPKGGIN $ 

20 EMG EST,CSTM,MPT,DIT,GE0M2,/KELM,KDICT,MELM,MDICT,,,/S,N,N0KGGX/S, 

N , N0MGG////C , Y , COUPMASS/C , Y , CPBAR/C , Y , CPROD/C , Y , 
CPQUAD1/C,Y,CPQUAD2/C,Y,CPTRIA1/C,Y,CPTRIA2/C,Y,CPTUBE/C,Y, 
CPQDPLT/C,Y,CPTRPLT/C,Y,CPTRBSC $ 

4.1-1 (05/30/86) 



AERO RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

21 COND JMPKGGX.NOKGGX $ 

22 EMA GPECT,KDICT t KELM/KGGX,GPST $ 

23 LABEL JMPKGGX $ 

24 COND ERROR l.NOMGG $ 

25 EMA GPECT,MDICT,MELM/MGG,/-1/C,Y,WTMASS=1.0 $ 

26 COND LGPWG.GRDPNT $ 

27 GPWG BGPDT,CSTM,EQEXIN,MGG/0GPWG/V,Y,GRDPNT=-1/C,Y,WTMASS $ 

28 OFP OGPWG,,,,,//S,N,CARDNO $ 

29 LABEL LGPWG $ 

30 EQUIV KGGX,KGG/NOGENL $ 

31 COND LBL11.N0GENL $ 

32 SMA3 GEI .KGGX/KGG/LUSET/NOGENL/NOSIMP $ 

33 LABEL LBL11 $ 

34 GP4 CASECC,GE0M4,EQEXIN,GPDT,BGPDT,CSTM,/RG,,USET,ASET/ 

LUSET/S,N,MPCFl/S,N,MPCF2/S,N,SINGLE/S,N,0MlT/S,N t REACT/0/ 
S , N , REPE AT/S , N , NOSET/S , N , NOL/S , N , NOA/C , Y , ASETOUT/S , Y , 
AUTOSPC $ 

35 PARAM //*NOT*/REACDATA/REACT $ 

36 COND ERR0R6,REACDATA $ 

37 PURGE GM,GMD/MPCFl/G0,GOD/OMIT/KFS,QPC/SINGLE $ 

38 GPCYC GEOM4,EQEXIN,USET/CYCD/V,Y,CTYPE/S,N,NOG0 $ 

39 COND ERROR7.NOG0 $ 

40 COND LBL4.GENEL $ 

41 PARAM //*EQft/GPSPFLG/AUTOSPC $ 

42 COND LBL4.GPSPFLG $ 

43 GPSP GPL,GPST,USET,SIL/OGPST/S,N,NOGPST $ 

44 OFP OGPST,,,,,//S,N,CARDNO $ 

45 LABEL LBL4 $ 



4.1-2 (05/30/86) 



BLADE CYCLIC MODAL FLUTTER ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

1*6 EQUIV KGG.KNN/MPCF1/MGG.MNN/MPCF1 $ 

kj COND LBL2.MPCF1 $ 

li8 MCE1 USET.RG/GM $ 

1*9 MCE2 USET,GM,KGG,MGG,,/KNN,MNN,, $ 

50 LABEL LBL2 $ 

51 EQUIV KNN,KFF/SINGLE/MNN,MFF/SINGLE $ 

52 COND LBL3, SINGLE $ 

53 SCE1 USET,KNN,MNN,,/KFF,KFS,,MFF,, $ 
5I4 LABEL LBL3 $ 

55 EQUIV KFF.KAA/OMIT/MFF.MAA/OMIT $ 

56 COND LBL5.0MIT $ 

57 SMP1 USET,KFF,,,/GO,KAA,K00,L00,,,„ $ 

58 SMP2 USET.GO.MFF/MAA $ 

59 LABEL LBL5 $ 

60 DPD DYNAMICS, GPL, S I L,USET/GPLD,S I LD.USETD.TFPOOL, , , , , ,EED, EQDYN/ 

LUSET/S,N,LUSETD/N0TFL/NODLT/N0PSDL/NOFRL/ 
NONLFT/NOTRL/S , N , NOEED//S , N , NOUE $ 

61 COND ERR0R2.N0EED $ 

62 EQUIV GO.GOD/NOUE/GM.GMD/NOUE $ 

63 CYCT2 CYCD,KAA,MAA,,,/KKK,MKK,,,/*F0RE*/V,Y,NSEGS=-1/V,Y, 

KINDEX=-l/V,Y,CYCSEQ=-l/l/S,N,N0GO $ 

61* COND ERR0R7.N0G0 $ 

65 READ KKK,MKK,,,EED,,CASECC/LAMK,PHIK, ,0E IGS/*M0DES*/S,N, 

NEIGV $ 

66 OFP OEIGS,LAMK,,,,//S,N,CARDNO $ 

67 COND ERRORS, NEIGV $ 

68 CYCT2 CYCD,,,,PHIK,LAMK/,,,PHIA,LAMA/*BACK*/V,Y,NSEGS/V,Y, 

KINDEX/V,Y,CYCSEQ/1/S,N,N0G0 $ 

69 COND ERR0R7.N0G0 $ 



4.1-3 (05/30/86) 



AERO RIGID FORMATS 



RiGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



70 SDR1 USET,,PHIA,,,G0,GM,,KFS,,/PHIG,,/1/*REIG* $ 

71 SDR2 CASECC,CSTM,MPT,DIT,EQEXIN,SIL,,,BGPDT,LAMA,,PHIG,EST,,/,, 

OPHIG,,,PPHIG/*REIG* $ 

72 OFP 0PH1G,,,, f //S,N,CARDN0 $ 

73 PARAML PCDB//*PRES*////JUMPPLOT $ 

74 PURGE PLTSETZ,PLTPARZ,GPSETSZ,ELSETSZ/JUMPPLOT $ 

75 COND PZZ.JUMPPLOT $ 

76 PLTSET PCDB,EQEXIN,ECT/PLTSETZ,PLTPARZ,GPSETSZ,ELSETSZ/ 

S,N,NSILZ/S,N,JUMPZ=-1 $ 

77 PRTMSG PLTSETZ// $ 

78 COND PZZ.JUMPZ $ 

79 PLOT PLTPARZ,GPSETSZ,ELSETSZ,CA$ECC,BGPDT,EQEXIN,SIL, .PPHIG, ,/ 

PL0TZ/NSILZ/LUSET/JUMPZ/PLTFLGZ=-1/S,N,PFILEZ=0 $ 

80 PRTMSG PLOTZ// $ 

81 LABEL PZZ $ 

82 APDB EDT,USET,BGPDT,CSTM,EQEXIN,GM,GO/AERO,ACPT,FLIST,GTKA,PVECT/ 

S,N,NK/S,N,NJ/V,Y,MINMACH/V,Y,MAXMACH/V,Y,IREF/V,Y,MTYPE/ 
NEIGV/V,Y,KINDEX=-1 $ 

83 PARTN PHIA,PVECT,/PHIAX,,,/1 $ 

81» SMPYAD PHIAX,MAA,PHIAX,,, /Ml/3/1/1/0/1 $ 

85 MTRXIN CASECC,MATP00L,EQDYN,,TFP00L/K2PP,M2PP,B2PP/LUSETD/S,N, 

N0K2PP/S,N,N0M2PP/S,N,N0B2PP $ 

86 PURGE K2DD/N0K2PP/M2DD/N0M2PP/B2DD/N0B2PP $ 

87 EQUIV M2PP,M2DD/N0SET/B2PP,B2DD/N0SET/K2PP,K2DD/N0SET $ 

88 GKAD USETD,GM,G0,,,,,K2PP,M2PP,B2PP/,,,GMD,G0D,K2DD,M2DD,B2DD/ 

ftCMPLEV*/*DISP*/*MODAL*/0.0/0.0/0.0/NOK2PP/ 
N0M2PP/N0B2PP/MPCF1/SINGLE/0MIT/N0UE/ 
-1/-1/-1/-1 $ 

89 GKAM USETD,PHIAX,Ml,LAMK,DIT,M2DD,B2DD,K2DD,CASECC/MHH,BHH,KHH, 

PH I DH/NOUE/C , Y , LM0DES=999999/C , Y , LFREQ=0 .0/C , Y , HFREQ=0 .0/ 

NOM2PP/NOB2PP/N0K2PP/S,N,NONCUP/S,N,FM0DE/C,Y, 

KDAMP=-1 $ 



4.1-4 (05/30/86) 



BLADE CYCLIC MODAL FLUTTER ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

90 PURGE PLTSETX,PLTPAR,GPSETS,ELSETS/JUMPPLOT $ 

91 COND P2, JUMPPLOT $ 

92 PLTSET PCDB,EQDYN,ECT/PLTSETX,PLTPAR,GPSETS,ELSETS/S,N,NSIL1/S,N, 

JUMPPLOT $ 

93 PRTMSG PLTSETX//$ 

git PARAM //WYVPLTFLG/1/1 $ 

95 PARAM //AMPY*/PFILE/0/0 $ 

96 COND P2, JUMPPLOT $ 

97 PLOT PLTPAR,GPSETS,ELSETS,CASECC,BGPDT,EQDYN,,,,,/PL0TX1/NSIL1/ 

LUSET/S,N,JUMPPLOT/S,N,PLTFLG/S,N,PFILE $ 

98 PRTMSG PLOTXl//$ 

99 LABEL P2 $ 

100 PARAM //*ADD*/DESTRY/0/l $ 

101 AMG AER0,ACPT/AJJL,SKJ,D1JK,D2JK/NK/NJ/S,N,DESTRY $ 

102 PURGE D1JE.D2JE/N0DJE $ 

103 COND NODJE.NODJE $ 

104 INPUTT2 /D1JE,D2JE,,,/C,Y,P0SITI0N=-1/C,Y,UNITNUM=11/C,Y,USRLABEL= 

TAPE ID $ 

105 LABEL NODJE $ 

106 PARAM //*ADD*/XQHHL/l/0 $ 

107 AMP AJJL,SKJ,D1JK,D2JK,GTKA,PHIDH,D1JE,D2JE,USETD,AER0/QHHL,,/ 

N0UE/S,N,XQHHL $ 

108 PARAM //*MPY*/N0P/1/1 $ 

109 PARAM //*MPY*/NOH/0/l $ 

110 PARAM //*MPY*/FLOOP/V,Y,NODJE=-1/0 $ 

111 LABEL LOOPTOP $ 

112 FA1 KHH,BHH,MHH,QHHL,CASECC,FLIST/FSAVE,KXHH,BXHH,MXHH/S,N,FLOOP/ 

S,N,TSTART/S,N,NOCEAD $ 



4.1-5 (05/30/86) 



AERO RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

113 EQU I V KXHH , PH I H/NOCEAD/BXHH , CLAMA/NOCEAD/ 

KXHH,PHIHL/NOCEAD/BXHH,CLAMAL/NOCEAD/ 
CASECC.CASEYY/NOCEAD $ 

lilt COND VDR.NOCEAD $ 

115 CEAD KXHH,BXHH,MXHH,EED,CASECC/PHIH,CLAMA,OCEIGS,/S,N,EIGVS $ 

116 COND LBLZAP.EIGVS $ 

117 LABEL VDR $ 

118 VDR CASECC , EQDYN , USETD , PH I H , CLAMA , , /OPH I H ,/*CE I GEN*/*MODAL*/ 

123/S.N, NOH/S,N,NOP/FMODE $ 

119 COND LBL16.N0H $ 

120 OFP OPHIH,,,,,//S,N,CARDNO $ 

121 LABEL LBL16 $ 

122 FA2 PHIH,CLAMA,FSAVE/PH!HL,CLAMAL,CASEYY,OVG/S,N,TSTART/C,Y,VREF' 

1 .0/C,Y,PRINT=YESB $ 

123 COND CONTINUE.TSTART $ 

124 LABEL LBLZAP $ 

125 COND CONTINUE, FLOOP $ 

126 REPT L00PT0P.1OO $ 

127 JUMP ERR0R3 $ 

128 LABEL CONTINUE $ 

129 PARAML XYCDB//*PRES*////NOXYCDB $ 

130 COND NOXYOUT.NOXYCDB $ 

131 XYTRAN XYCDB,0VG,,,,/XYPLTCE/*VG*/*PSETVS,N,PF1LE/S,N,CARDN0 $ 

132 XYPLOT XYPLTCE//$ 

133 LABEL NOXYOUT $ 

134 PARAM //*AND*/PJUMP/NOP— 1/JUMPPLOT $ 

135 COND FINIS.PJUMP $ 

136 MODACC CASEYY,CLAMAL,PHIHL, CASECC,, /CLAMAL1 , CPHI HI .CASEZZ, ,/ 

ACEIGN* $ 



4.1-6 (05/30/86) 



BLADE CYCLIC MODAL FLUTTER ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER 



SOURCE LISTING 



137 DDR1 CPHIH1.PHIDH/CPHID $ 

138 EQUIV CPHID,CP.HIP/N0A $ 

139 COND LBL14,N0A $ 

140 SDR1 USETD,,CPHID,,,G0D,GMD,,KFS,,/CPHIP,,QPC/1/*DYNAMICS* $ 
HI LABEL LBL14 $ 

142 EQUIV CPHID.CPHIA/NOUE $ 

143 COND LBLNOE.NOUE $ 

144 VEC USETD/RP/*D*/*A*/*E* $ 

145 PARTN CPHID,,RP/CPHIA,,,/l/3 $ 

146 LABEL LBLNOE $ 

147 SDR2 CASEZZ,CSTM,MPT,DIT,EQDYN,S!LD, t ,BGPDT,CLAMALl,QPC,CPHIP,EST,,/ 

,0QPCl,0CPHIP,OESCl,0EFCl,PCPHIP/*CEIGN* $ 

148 OFP OCPHIP,OQPC1,OESC1,OEFC1,,//S,N,CARDNO $ 

149 COND P3.JUMPPL0T $ 

150 PLOT PLTPAR,GPSETS,ELSETS,CASEZZ,BGPDT,EQDYN,SILD >f PCPHlP,,/PL0TX3/ 

NSIL1/LUSET/JUMPPL0T/PLTFLG/PFILE $ 

151 PRTMSG PL0TX3//$ 

152 LABEL P3 $ 

153 JUMP FINIS $ 

154 LABEL ERR0R1 $ 

155 PRTPARM //-1/*BLADEMDS* $ 

156 LABEL ERR0R2 $ 

157 PRTPARM //-2/*BLADEMDS* $ 

158 LABEL ERR0R3 $ 

159 PRTPARM //-3/*BLADEMDS* $ 

160 LABEL ERR0R4 $ 

161 PRTPARM //-4/*BLADEMDS* $ 



4.1-7 (05/30/86) 



AERO RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 9 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

162 LABEL ERRORS $ 

163 PRTPARM //-5/*BLADEMDS* $ 
l6fc LABEL ERR0R6 $ 

165 PRTPARM //-6/*BLADEMDS* $ 

166 LABEL ERR0R7 $ 

167 PRTPARM //-7/*BLADEMDS* $ 

168 LABEL FINIS $ 

169 PURGE DUMMY/MINUS1 $ 

170 END $ 



4.1-8 (05/30/86) 



BLADE CYCLIC MODAL FLUTTER ANALYSIS 

4.1.2 Description of Important DMAP Operations for Blade Cyclic Modal Flutter Analysis 

5. GP1 generates coordinate system transformation matrices, tables of grid point locations, an*d 
tables relating the internal and external grid point numbers. 

6. Go to DMAP No. 162 and print Error Message No. 5 if no grid points are defined. 

7. GP2 generates Element Connection Table with internal indices. 

8. GP3 generates Static Loads Table and Grid Point Temperature Table. 

9. TA1 generates element tables for use in matrix assembly and stress recovery. 

10. Go to DMAP No. 162 and print Error Message No. 5 if no structural elements have been 
defined. 

15. Go to DMAP No. 19 if no stiffness matrix is supplied by the user on an external file. 

16. Set parameter N0KGGX = -1 so that the stiffness matrix will not be generated in DMAP No. 20. 

17. INPUTT1 reads the user-supplied stiffness matrix [KT0TAL] from an external file (GIN0 file 
INPT). 

x 

18. Equivalence [K ] to [KT0TAL]. 

20. EMG generates structural element stiffness and mass matrix tables and dictionaries for later 
assembly by the EMA module. 

21. Go to DMAP No. 23 if no stiffness matrix is to be assembled. 

22. EMA assembles stiffness matrix [K* ] and Grid Point Singularity Table. 

yy 

24. Go to DMAP No. 154 and print Error Message No. 1 if no mass matrix is to be assembled. 

25. EMA assembles mass matrix [M ]. 

26. Go to DMAP No. 29 if no weight and balance information is requested. 

27. GPWG generates weight and balance information. 

28. 0FP formats the weight and balance information prepared by GPWG and places it on the system 
output file for printing. 

30. Equivalence [K x ] to [K ] if there are no general elements. 

gg gg 

31. Go to DMAP No. 33 if there are no general elements. 

32. SMA3 adds general elements to [K* ] to obtain stiffness matrix [K ]. 

34. GP4 generates flags defining members of various displacement sets (USET) and forms 

multipoint constraint equations [R ] {u } = 0. 

y y 

36. Go to DMAP No. 164 and print Error Message No. 6 if free-body supports are present. 

38. GPCYC prepares segment boundary table. 

39. Go to DMAP No. 166 and print Error Message No. 7 if the CYO0IN data is inconsistent. 

40. Go to DMAP No. 45 if general elements are present. 

42. Go to DMAP No. 45 if no potential grid point singularities exist. 

43. GPSP generates a table of potential grid point singularities. 

4.1-9 (05/30/86) 



AERO RIGID FORMATS 



44. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 

» 

46. Equivalence [K ] to [K ] and |M ] to [Ml if no multipoint constraints exist. 

«3 y \\\\ y y 

47. Go to DMAP No. 50 if no multipoint constraints exist. 

48. MCE1 partitions multipoint constraint equations [R ] = [R m ! R p ] and solves for 
multipoint constraint transformation matrix [G m ] = -[Rj,,] [ R n ]- 

49. MCE2 partitions stiffness and mass matrices 



CI W - 



K K 

nn nm 

K I l\„ m 
mn mm 



and 



C V 



M M 
nn nm 

M |M 
mn mm 



and performs matrix reductions 

[kj - fK nn ] + [sx„i + ci,icv + c G I ]C ^ ]CG m ] and 

[M„ J - [Ml + [Gl][M m J + [mL][G J + . [Gh[M m J[Gj . 



m-"- mm-"- m- 



nn- 1 "-"nn J - nr" mn J *¦ mn J m- 

51. Equivalence [K nn ] to [K ff ] and [M np ] to [M ff J if no single-point constraints exist. 

52. Go to DMAP No. 54 if no single-point constraints exist. 

53. SCE1 partitions out single-point constraints 

r 

and 



£V = 



K f f K f s 



K - I K 
sf ss 



PW ¦ 



M f f I M f s 



sf| M ss 



55. Equivalence [K ff ] to [K, ] and [M ff ] to LM.^] if no omitted coordinates exist. 

56. Go to DMAP No. 59 if no omitted coordinates exist. 

57. SMP1 partitions constrained stiffness matrix 



[K ff ] - 



aa ao 

K ( K 
oa oo 



i-lr 



solves for transformation matrix [6 ] - -C K 00 ] tK Qa ] 

and performs matrix reduction [K ] ~ [K ga ] + [K oa ][G Q ] 
58. SMP2 partitions constrained mass matrix 



[M ff ] - 



M M 
aa ao 

M |M 
oa oo 



4.1-10 (05/30/86) 



BLADE CYCLIC MODAL FLUTTER ANALYSIS 

and performs matrix reduction 

[M aa ] - [M aa ] + [Mj a ][G ] + [Gj][M 00 ][G ] ? [Gj][M oa ] . 

60. DPD generates flags defining members of various displacement sets used in dynamic analysis 
(USETD), tables relating the internal and external grid point numbers (GPLD), including 
extra points introduced for dynamic analysis (SILD), and prepares Transfer Function Pool 
(TFP00L), and Eigenvalue Extraction Data (EED). 

61. Go to DMAP No. 156 and print Error Message No. 2 if there is no Eigenvalue Extraction Data. 

62. Equivalence [G ] to [G^] and [6 ] to [GjJ] if there are no extra points introduced 
for dynamic analysis. 

63. CYCT2 transforms matrices from symmetric components to solution set. 

64. Go to DMAP No. 166 and print Error Message No. 7 if a CYCT2 error was found. 

65. READ extracts real eigenvalues and eigenvectors from the equation 

c K kk- x W = ° • 

and normalizes eigenvectors according to one of the following user requests: 

1) Unit value of a selected component 

2) Unit value of the largest component 

3) Unit value of the generalized mass. 

66. 0FP formats the summary of eigenvalue extraction information (0EIGS) and the eigenvalues 
(LAMK) prepared by READ and places them on the system output file for printing. 

67. Go to DMAP No. 160 and print Error Message No. 4 if no eigenvalues were found. 

68. CYCT2 finds symmetric components of engenvectors from solution set eigenvectors. 

69. Go to DMAP No. 166 and print Error Message No. 7 if a CYCT2 error was found. 

70. SDR1 recovers dependent components of the eigenvectors 

U > = [G Q ] U a } , \—-{ = {((, f } 

U m } = [G m ]« n } . 



71. SDR2 prepares eigenvectors (0PHIG) for output and PPHIG for deformed plotting. 

72. 0FP formats the table prepared by SDR2 and places it on the system output file for printing, 
75. Go to DMAP No. 81 if there are no structure plot requests. 

4.1-11 (05/30/86) 




AERO RIGID FORMATS 

76. PLTSET transforms user input into a form used to drive the structure plotter. 

77. PRTMSG prints error messages associated with the structure plotter. 

78. Go to DMAP No. 81 if no deformed (modal) structure plots are requested. 

79. PL0T generates all requested deformed (modal) structure plots. 

80. PRTMSG prints plotter data and engineering data for each deformed (modal) structure plot 
generated. 

82. APDB processes the aerodynamic data cards from EDT. AER0 and ACPT reflect the aerodynamic 
parameters. PVECT is a partitioning vector and GTKA is a transformation matrix between 
aerodynamic (K) and structural (a) degrees of freedom. 

83. PARTN partitions the eigenvector into all sine or all cosine components. 

84. SMPYAD calculates the modal mass matrix 

x T x 
[M] = U a ] [M aa ] U a ] . 



85. MXTRIN selects the direct input matrices [K ], [Ml and [B ]. 

rr rr rr 

87. Equivalence [M 2 ] to [MJj.], [Bj; ] to [BjL] and [K|L] to [K^] if no constraints 
are applied. pp pp pp 

2 2 2 

88. GKAD applies constraints to direct input matrices [K ], [M ] and [B ], forming 

r r r r rr 

[K dd ] ' [M dd ] and [B dd ] and forms C6 md ] and [G od ] - 

89. GKAM selects eigenvectors to form [<(>..] and assembles stiffness, mass and damping matrices 
in modal coordinates: 



[Khh] "|tit] + C ** 1[IC *' ][ ** ] * 
[Mhh] '\v\v\ + c ** ][ ^«i ][ ** ] • 

[Bhh] '\j\t\ + [ ** ]CB 5d 1[ ** ] ¦ 



where 

KDAMP = -1 (default) KDAMP = 1 

m. - modal masses m. = modal masses 

b. = m. 2ir f. g(f.) b i = 

k. = m. 4tt 2 f . k. = (l+igff^) ^ Z f?m. 

91. Go to DMAP No. 99 if no plot output is requested. 

4.1-12 (05/30/86) 



BLADE CYCLIC MODAL FLUTTER ANALYSIS 

92. PLTSET transforms user input into a form used to drive the structure plotter. 

93. PRTMSG prints error messages associated with the structure plotter. 

96. Go to DMAP No. 99 if no undeformed aerodynamic or structural element plots are requested. 

97. PL0T generates all requested undeformed aerodynamic and structural element plots. 

98. PRTMSG prints plotter data and engineering data for each undeformed aerodynamic and 
structural element plot generated. 

101. AMG forms the aerodynamic matrix list [A..], the area matrix [S. .], and the downwash 



coefficients [.oLj and [D? k L 



103. Go to DMAP No. 105 if there are no user-supplied downwash coefficients. 

1 2 

104. INPUTT2 provides the user-supplied downwash factors due to extra points ([D. ], [D. ]). 

je je 

PARAM N0DJE must be set to enter these matrices. The downwash w. on box j due to the 

J 

motion of an extra point, u , is given by 

twj} ¦ [DJ e ? ikD^]{u e ) . 
107, AMP computes the aerodynamic matrix list related to the modal coordinates as follows: 

[? dh ] =[-f-l • ^ - <?W • 



riiii*«i 

L *e i I ^ee J 



["jhK-t^JD^] and [D^ - [D^,]. 



For each (m,k) pair: 



[D Jh ] - [ Dj J] +1k[Dj*] 



For each group: 



ro 1 = TA T "I" 1 TD 1 

jh J L jj group L jh J group 

£<W " ts kj ][Q jh ] . 

[Q 1h ] - [G k1 ] T [Q kh ] 



and [Q hh ] « 






hh- 

"eh 

110. PARAM initializes the flutter loop counter (FL00P) to zero. 

111. Beginning of loop for flutter. 

4.1-13 (05/30/86) 



AERO RIGID FORMATS 

112. FA1 computes the total aerodynamic mass matrix [MJJ h L the total aerodynamic stiffness 
matrix [Kuu] and the total aerodynamic damping matrix [B^] as well as a looping table 
FSAVE. For the K-method 

M hh = < k2/b2 > M hh + ^Kh - 

K hh = K hh 
and B* h = . 

113. Set up equivalences for the KE- and PK-methods, 

114. Go to DMAP No. 117 for the KE- and PK-methods. 

115. CEAD extracts complex eigenvalues and eigenvectors from the equation 

c^ + B i> + ^v - ° 

and normalizes eigenvectors to unit magnitude of the largest component. 

116. Go to DMAP No. 124 if no complex eigenvalues were found. 

118. VDR prepares eigenvectors (0PHIH) for output, using only the extra points introduced for 
dynamic analysis and modal coordinates. 

119. Go to DMAP No. 121 if there is no output request for the extra points introduced for dynamic 
analysis or modal coordinates. 

120. 0FP formats the table of eigenvectors for extra points introduced for dynamic analysis and 
modal coordinates prepared by VDR and places it on the system output file for printing. 

122. FA2 appends eigenvectors to PHIHL, eigenvalues to CLAMAL, Case Control to CASEYY, and V-g 
plot data to 0VG. 

123. Go to DMAP No. 128 if there is insufficient time for another flutter loop. 

125. Go to DMAP No. 128 if the flutter loop is complete. 

126. Go to DMAP No. Ill for additional aerodynamic configuration triplet values. 

127. Go to DMAP No. 158 and print Error Message No. 3 if the number of flutter loops exceeds 100. 

130. Go to DMAP No. 133 if there are no X-Y plot requests. 

131. XYTRAN prepares the input for requested X-Y plots. 

132. XYPL0T prepares the requested X-Y plots of displacements, velocities, accelerations, forces, 
stresses, loads and single-point forces of constraint versus time. 

135. Go to DMAP No. 168 and make normal exit if there are no output requests involving dependent 
degrees of freedom or forces and stresses. 

136. M0DACC selects a list of eigenvalues and eigenvectors whose imaginary parts (velocity in 
input units) are close to a user input list. 



4.1-14 (05/30/86) 




BLADE CYCLIC MODAL FLUTTER ANALYSIS 

137. DDR1 transforms the complex eigenvectors from modal to physical coordinates 

138. Equivalence {*Jj} to {/} if no constraints are applied. 

139. Go to DMAP No. 141 if no constraints are applied. 

140. SDR1 recovers dependent components of eigenvectors 

,di r .c, ( ^d 



U C > - [G^]^} . 



= U C f + *e> 



?f + +e J 


= U„ + 4> C J 


v s ' 


n e 



{ V " C* % + *e> 



>f + *e ; c 




and recovers single-point forces of constraint {q } = [kI ]{*-}, _°_ = {Q c }. 

s a P 

H s 

142. Equivalence {^1 to {* } if there are no extra points introduced for dynamic analysis. 

143. Go to DMAP No. 146 if there are no extra points. 

144. VEC generates a d-size partitioning vector (RP) for the a- and e-sets 

(u d > + {u a > + {u e > . 

145. PARTN performs partition of {£} using RP 



US} 




147. SDR2 calculates element forces (0EFC1) and stresses (0ESC1) and prepares eigenvectors 
(0CPHIP) and single-point forces of constraint (0QPC1) for output and PCPHIP for deformed 
plotting. 

148. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

149. Go to DMAP No. 152 if no deformed aerodynamic or structural element plots are requested. 

150. PL0T prepares all deformed aerodynamic and structural element plots. 

151. PRTMSG prints plotter data and engineering data for each deformed plot generated. 
153. Go to DMAP No. 168 and make normal exit. 



4.1-15 (05/30/86) 



AERO RIGID FORMATS 

155. Print Error Message No. 1 and terminate execution. 

157. Print Error Message No. 2 and terminate execution. 

159. Print Error Message No, 3 and terminate execution. 

161. Print Error Message No. 4 and terminate execution. 

163. Print Error Message No. 5 and terminate execution. 

165. Print Error Message No. 6 and terminate execution. 

167. Print Error Message No. 7 and terminate execution. 






4.1-16 (05/30/86) 






BLADE CYCLIC MODAL FLUTTER ANALYSIS 

4.1.3 Output for Blade Cyclic Modal Flutter Analysis 

The real Eigenvalue Summary Table and the real Eigenvalue Analysis Summary, as described 
under Normal Modes Analysis (see Section 2.3.3), are automatically printed. All real eigenvalues^, 
are included even though all may not be used in the modal formulation. 

The complex eigenvalues are included in the Flutter Summary and are printed for each 
aerodynamic loop. 

The grid point singularities from the structural model are also output. 

A Flutter Summary for each value of the configuration parameters is printed out unless 
PRINT=N0. This shows Mach number, density, reduced frequency, velocity, damping, and frequency for 
each complex eigenvalue. 

V-g and V-f plots may be requested by the XY0UT control cards by specifying the curve type 
as VG. The "points" are loop numbers and the "components" are G or F. 

Printed output of the following types, sorted by complex eigenvalue root number (S0RT1) and 
(m, k, p), may be requested for all complex eigenvalues kept, either as real and imaginary parts or 
as magnitude and phase angle (0° - 360° lead). (Eigenvectors are not available for the KE-method.) 

1. The eigenvector for a list of PHYSICAL and AER0DYNAMIC points (grid points, extra 
points, and aerodynamic points) or S0LUTI0N points (modal coordinates and extra points). 

2. Nonzero components of the single-point forces of constraint for a list of PHYSICAL 
points. 

3. Complex stresses and forces in selected elements. 

The 0FREQUENCY Case Control card can select a subset of the complex eigenvectors for data recovery. 
In addition, undeformed and deformed shapes may be requested. Undeformed shapes may include only 
structural or structural and aerodynamic elements. 

4.1.4 Case Control Deck for Blade Cyclic Modal Flutter Analysis 

The following items relate to subcase definition and data selection for Blade Cyclic Modal 
Flutter Analysis: 

1. Only one subcase is allowed. 

2. Desired direct input matrices for stiffness [K ], mass [M 2 ], and damping [B 2 ] 
must be selected via the keywords K2PP, M2PP, or B2PP. 

3. CMETH0D must be used to select an EIGC card from the Bulk Data Deck. (K method only.) 

4. FMETH0D must be used to select a FLUTTER card from the Bulk Data Deck. 

4.1-17 (05/30/86) 



AERO RIGID FORMATS 

5. METH0D must be used to select an EIGR card that exists in the Bulk Data Deck. 

6. SDAMPING must be used to select a TABDMP1 table if structural damping is desired. 

7. An SPC set must be selected unless the model is a free body or all constraints are t 
specified on GRID cards, Scalar Connection Cards or with General Elements. 

8. Each NASTRAN run calculates modes for only one symmetry index, K. 

4.1.5 Parameters for Blade Cyclic Modal Flutter Analysis 

The following parameters are used in Blade Cyclic Modal Flutter Analysis: 

1. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2. AUT0SPC - reserved for future optional use. The default value is -1. 

3. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTRIA2, CPTUBE, CPQDPLT, CPTRPLT, 
CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

4. CTYPE - required. The BCD value of this parameter defines the type of cyclic symmetry 
as follows: 

(1) R0T - rotational symmetry 

(2) DRL - dihedral symmetry, using right and left halves 

(3) DSA - dihedral symmetry, using symmetric and antisymmetric components 

5. CYCSEQ - optional. The integer value of this parameter specifies the procedure for 
sequencing the equations in the solution set. A value of +1 specifies that all cosine 
terms should be sequenced before all sine terms, and a value of -1 specifies alternating 
cosine and sine terms. The default value is -1. 

6. GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. All fluid related masses are ignored. 

7. IREF - optional. A positive integer value of this parameter defines the reference 
streamline number. IREF must be equal to an SLN on a STREAML2 bulk data card. The 
default value of -1 represents the streamsurface at the blade tip. If IREF does not 
correspond to an SLN, then the default will be taken. 

4.1-18 (05/30/86) 






BLADE CYCLIC MODAL FLUTTER ANALYSIS 

8. KDAMP - optional. An integer value of +1 causes modal damping terms to be put into the 
complex stiffness matrix for structural damping (+1 recommended for K and KE methods). 
The default value is -1. » 

9 - KGGIN - optional. A positive integer of this parameter indicates that the user-supplied 
stiffness matrix is to be read from an external file (GIN0 file INPT) via the INPUTT1 
module in the rigid format. The default value is -1 when not needed. 

10. KINDEX - required. The integer value of this parameter specifies a single value of the 
harmonic index. 

11. LFREQ and HFREQ - required unless parameter LM0DES is used. The real values of these 
parameters give the cyclic frequency range (LFREQ is the lower limit and HFREQ is the 
upper limit) of the modes to be used in the modal formulation. To use this option, 
parameter LM0DES must be set to 0. 

12 > LM0DES - used unless set to 0. The integer value of this parameter is the number of 
lowest modes to be used in the modal formulation. The default value of 999999 will 
result in all modes being used. 

13. L0CATI0N and INPTUNIT - required when using the KGGIN parameter. See Section 5.5 for a 
description of these parameters which are required by the INPUTT1 module. The default 
values for L0CATI0N and INPTUNIT are -1 and 0, respectively. 

14. MAXMACH - optional. The real value of this parameter is the maximum Mach number below 
which the subsonic unsteady cascade theory is valid. The default value is 0.80. 

15. MINMACH - optional. The real value of this parameter is the minimum Mach number above 
which the supersonic unsteady cascade theory is valid. The default value is 1.01. 

16. MTYPE - optional. The BCD value of this parameter controls which components of the 
cyclic modes are to be used in the modal formulation. MTYPE = SINE uses only sine 
components and MTYPE = C0SINE uses only cosine components. The default value is C0SINE. 

17. N0DJE - optional. A positive integer of this parameter indicates that user-supplied 
downwash matrices due to extra points are to be read in from an external file via the 
INPUTT2 module in the rigid format. The default value is -1 when not needed. 

18. NSEGS - required. The integer value of this parameter is the number of identical 
segments in the structural model. 

19. P0SITI0N, UNITNUM an d USRLABEL - required when using the N0DJE parameter. See Section 
5.5 for a description of these parameters which are required by the INPUTT2 module. The 
defaults for P0SITI0N, UNITNUM and USRLABEL are -1, 11 and TAPEID, respectively. 

4.1-19 (05/30/86) 



AERO RIGID FORMATS 

20. PRINT - optional. The BCD value, N0, of this parameter suppresses the automatic 
printing of the flutter summary for the K method. The default value is YESB. 

21. SURFACE - optional. The computations of the external surface areas for the 
two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

22 - V0LUME - optional. The volume computations for the two-dimensional and 

three-dimensional elements are activated by this parameter when they are generated in 
the EMG module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details. 

23. VREF - optional. Velocities are divided by the real value of this parameter to convert 
units or to compute flutter indices. The default value is 1.0. 

24. WTMASS - optional. The terms of the structural mass matrix are multiplied by the real 
value of this parameter when they are generated in the EMA module. Mot recommended for 
use in hydroelastic problems. 

4.1.6 Optional Diagnostic Output for FEER 

Special detailed information obtained by requesting DIAG 16 in the Executive Control Deck is 
the same as that described under Normal Modes Analysis (see Section 2.3.6). 

4.1.7 The APPEND Feature 

The APPEND feature can be used for real eigenvalue extraction in Blade Cyclic Modal Flutter 
Analysis. See Section 2.3.7 for details. 

4.1.8 Rigid Format Error Messages from Blade Cyclic Modal Flutter Analysis 

The following fatal errors are detected by the DMAP statements in the Blade Cyclic Modal 
Flutter Analysis rigid format. The text for each error message is given below in capital letters 
and is followed by additional explanatory material, including suggestions for remedial action. 

BLADE FLUTTER ANALYSIS ERR0R N0. 1 - MASS MATRIX REQUIRED F0R M0DAL F0RMULATION. 

The mass matrix is null because either no structural elements were defined with Connection cards, 
nonstructural mass was not defined on a Property card or the density was not defined on a Material 
card. 

4.1-20 (05/30/86) 



BLADE CYCLIC MODAL FLUTTER ANALYSIS 

BLADE FLUTTER ANALYSIS ERR0R N0. 2 - EIGENVALUE EXTRACTI0N DATA REQUIRED F0R REAL EIGENVALUE 
ANALYSIS. 

Eigenvalue extraction data must be supplied on an EIGR card in the Bulk Data Deck and METH0D in the 
Case Control Deck must select an EIGR set. 

BLADE FLUTTER ANALYSIS ERR0R N0. 3 - ATTEMPT T0 EXECUTE M0RE THAN 100 L00PS. 

An attempt has been made to use more than 100 flutter loops. This number can be increased by 
ALTERing the REPT instruction following the FA2 module. 

BLADE FLUTTER ANALYSIS ERR0R N0. 4 - REAL EIGENVALUES REQUIRED F0R M0DAL F0RMULATI0N. 
No real eigenvalues were found in the frequency range specified by the user. 

BLADE FLUTTER ANALYSIS ERR0R N0. 5 - N0 GRID P0INT DATA IS SPECIFIED 0R N0 STRUCTURAL ELEMENTS HAVE 
BEEN DEFINED. 

No points have been defined with GRID or SP0INT cards or no structural elements have been defined 
with Connection cards. 

BLADE FLUTTER ANALYSIS ERR0R N0. 6 - FREE B0DY SUPP0RTS N0T ALL0WED. 

Free bodies are not allowed in Blade Cyclic Modal Flutter Analysis. The SUP0RT cards must be 
removed from the Bulk Data Deck and other constraints applied if required for stability. 

BLADE FLUTTER ANALYSIS ERR0R N0. 7 - CYCLIC TRANSF0RMATI0N DATA ERR0R. 

See Section 1.12 for proper modeling techniques and corresponding PARAM card requirements. 



4.1-21 (05/30/86) 



AERO RIGID FORMATS 



4.1-22 (05/30/86) 




AERO RIGID FORMATS 



4.2 MODAL FLUTTER ANALYSIS 

4.2.1 DMAP Sequence for Modal Flutter Analysis 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 10 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



OPTIONS IN EFFECT GO 



ERR=2 LIST 



NODECK NOREF NOOSCAR 





1 BEGIN AERO 10 - MODAL FLUTTER ANALYSIS - APR. I986 $ 

2 PRECHK ALL $ 

3 FILE PHIHL=APPEND/AJJL=APPEND/FSAVE=APPEND/CASEYY=APPEND/ 

CLAMAL=APPEND/OVG=APPEND/QHHL=APPEND/SKJ=APPEND/QHJL=APPEND/ 
QKHL=APPEND/ $ 

It PARAM //*MPYVCARDN0/O/O $ 

5 GP1 GE0Ml,GE0M2,/GPL,EQEXlN,GPDT,CSTM t BGPDT,SIL/S,N,LUSET/ 

$,N,N0GPDT/MINUS1=-1 $ 

6 COND ERRORS, NOGPDT $ 

7 GP2 GE0M2 f EQEXIN/ECT $ 

8 PARAML PCOB//*PRES*////JUMPPLOT $ 

9 GP3 GEOM3,EQEXIN,GEOM2/,GPTT/NOGRAV $ 

10 TA1 ECT,EPT,BGPDT,SIL,GPTT,CSTM/EST,GEt,GPECT,,/ 

LUSET/S , N ,N0S I MP/1 /S , N , NOGENL/S ,N , GENEL $ 

11 COND ERR0R1.N0SIMP $ 

12 PARAM //*ADD*/NOKGGX/l/0 $ 

13 PARAM //*ADD*/NOMGG /I/O $ 

lit EMG EST,CSTM,MPT,DIT,GE0M2,/KELM,KDICT,MELM,MDICT,,,/S,N,N0KGGX/ 
S,N t NOMGG////C,Y,COUPMASS/C f Y,CPBAR/C,Y,CPROD/ 
C,Y,CPQUAD1/C,Y,CPQUAD2/C,Y,CPTRIA1/C,Y,CPTRIA2/C,Y,CPTUBE/ 
C, Y , CPQDPLT/C , Y , CPTRPLT/C , Y , CPTRBSC/ 
V,Y,VOLUME/V,Y,SURFACE $ 

15 PURGE KGGX.GPST/NOKGGX $ 

16 COND JMPKGGX.NOKGGX $ 

17 EMA GPECT.KDICT.KELM/KGGX.GPST $ 

18 LABEL JMPKGGX $ 

19 COND ERR0R1.N0MGG $ 

4.2-1 (05/30/86) 



AERO RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 10 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

20 EMA GPECT,MDICT,MELM/MGG,/-1/C,Y,WTMASS=1.0 $ 

21 COND LGPWG.GRDPNT $ 

22 GPWG BGPDT,CSTM,EQEXIN,MGG/0GPWG/V,Y,GRDPNT=-1/C,Y,WTMASS $ 

23 OFP OGPWG,,,,,//S,N,CARDNO $ 
2k LABEL LGPWG $ 

25 EQUIV KGGX,KGG/NOGENL $ 

26 COND LBL11.N0GENL $ 

27 SMA3 GEI./KGGY/LUSET/N0GENL/-1 $ 

28 ADD KGGX,KGGY/KGG $ 

29 LABEL LBLU $ 

30 GPif CASECC,GE0M1*,EQEXIN,GPDT,BGPDT,CSTM,GPST/RG,,USET,ASET/LUSET/ 

S,N,MPCF1/S,N,MPCF2/S,N,S I NGLE/S,N,OMIT/S,N, REACT/0/ 
REPEAT/S,N,N0SET/S,N,NOL/S,N,NOA/C,Y,ASETOUT/S,Y,AUT0SPC $ 

31 PARAM //*EQ*/GPSPFLG/AUTOSPC/0 $ 

32 COND LBHt.GPSPFLG $ 

33 GPSP GPL,GPST,USET,S1L/0GPST/S,N,N0GPST $ 
31+ OFP OGPST,,,,,//S,N,CARDNO $ 

35 LABEL LBL4 $ 

36 EQUIV KGG,KNN/MPCF1/MGG,MNN/MPCF1 $ 

37 PURGE GM/MPCF1/DM, MR/REACT $ 

38 COND LBL2.MPCF1 $ 

39 MCE1 USET.RG/GM $ 

kO MCE2 USET,GM,KGG,MGG,,/KNN,MNN,, $ 

1*1 LABEL LBL2 $ 

i+2 EQUIV KNN.KFF/SINGLE/MNN.MFF/SINGLE $ 

43 COND LBL3, SINGLE $ 

Mt SCE1 USET,KNN,MNN,,/KFF,KFS,,MFF,, $ 



4.2-2 (05/30/86) 



MODAL FLUTTER ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 10 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



45 LABEL 

46 EQUIV 

47 PURGE 

48 COND 

49 PARAM 

50 SMP1 

51 SMP2 

52 LABEL 

53 COND 

54 RBMG1 

55 RBMG2 

56 RBMG3 

57 RBMG4 

58 LABEL 

59 DPD 

60 COND 

61 EQUIV 

62 READ 

63 OFP 

64 COND 

65 OFP 

66 MTRX I N 



LBL3 $ 

KFF.KAA/OMIT/ MFF.MAA/OMIT $ 

GO/OMIT $ 

LBL5.0MIT $ 

//ftPREC*/PREC $ 

USET,KFF,,,/GO,KAA,KOO,LO0,,,,, $ 

USET,GO,MFF/MAA $ 

LBL5 $ 

LBL6, REACT $ 

USET,KAA,MAA/KLL,KLR,KRR,MLL,MLR,MRR $ 

KLL/LLL/ $ 

LLL.KLR.KRR/DM $ 

DM,MLL,MLR,MRR/MR $ 

LBL6 $ 

DYNAMICS, GPL, S I L,USET/GPLD,S I LD.USETD.TFPOOL, , , , , ,EED,EQDYN/ 

LUSET/S.N.LUSETD/NOTFL/NODLT/NOPSDL/NOFRL/ 

NONLFT/NOTRL/S ,N , NOE ED/1 23/S , N , NOUE $ 

ERR0R2,N0EED $ 

GO,GOD/N0UE/GM,GMD/N0UE $ 

KAA,MAA,MR,DM,EED,USET,CASECC/LAMA,PHIA,MI,OEIGS/*MODES*/S,N, 
NEIGV $ 

OEIGS,,,,,//S,N,CARDN0 $ 

ERR0R4, NEIGV $ 

LAMA,,,,,//S,N,CARDN0 $ 

CASECC,MATP00L,EQDYN,,TFP00L/K2PP,M2PP,B2PP/LUSETD/S,N, 
N0K2PP/S,N,N0M2PP/S,N,N0B2PP $ 



67 EQUIV M2PP,M2DD/N0A/B2PP,B2DD/N0A/K2PP,K2DD/N0A $ 



4.2-3 (05/30/86) 



AERO RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 10 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

68 GKAD USETD,GM,G0,,,,,K2PP,M2PP,B2PP/,,,GMD,G0D,K2DD,M2DD,B2DD/ 

ftCMPLEV*/*D 1 SP*/*M0DAL*/0 .0/0 .0/0 .0/N0K2PP/ 
N0M2PP/N0B2PP/MPCF1/SINGLE/0MIT/N0UE/ 

-1/-1/ -1/-1 $ 

69 GKAM USETD,PHIA,,LAMA,DIT,M2DD,B2DD,K2DD,CASECC/MHH,BHH,KHH, 

PHlDH/NOUE/C.Y,LMODES=0/C,Y,LFREQ-0./C,Y,HFREQ— 1.0/ 
N0M2PP/N0B2PP/N0K2PP/S,N,N0NCUP/S,N,FM0DE/C,Y,KDAMP $ 

70 APD EDT,EQDYN,ECT,BGPDT,SILD,USETD,CSTM,GPLD/EQAERO,ECTA,BGPA,SILA, 

USETA,SPLINE,AERO,ACPT,FLIST,CSTMA,GPLA,SILGA/S,N,NK/S,N,NJ/ 
S,N,LUSETA/S,N,BOV $ 

71 PARAM //*MPY*/PFILE/0/1 $ 

72 PURGE PLTSETA.PLTPARA.GPSETSA.ELSETSA/JUMPPLOT $ 

73 COND SKPPLT.JUMPPLOT $ 

7*t PARAM //*MPY*/PLTFLG/0/l $ 

75 PLTSET PCDB,EQAER0,ECTA/PLTSETA,PLTPARA,GPSETSA,ELSETSA/S,N,NSIL1/S, 

N.JUMPPLOT $ 

76 PRTMSG PLTSETA // $ 

77 COND SKPPLT.JUMPPLOT $ 

78 PLOT PLTPARA,GPSETSA,ELSETSA,CASECC,BGPA,EQAERO, , ,,,/PL0TX2/ 

NSIL1/LUSETA/S,N,JUMPPL0T/S,N,PLTFLG/S,N,PFILE $ 

79 PRTMSG PL0TX2 // $ 

80 LABEL SKPPLT $ 

81 COND ERR0R2,N0EED $ 

82 Gl SPLINE, USET ,CSTMA,BGPA,S1 L , ,GM,GO/GTKA/NK/LUSET $ 

83 PARAM //*ADD*/DESTRY/0/l/ $ 

84 AMG AER0,ACPT/AJJL,SKJ,D1JK,D2JK/NK/NJ/S,N,DESTRY $ 

85 COND NODJE, NODJE $ 

86 1NPUTT2 /DUE,D2JE,,,/C,Y,Pl=0/C,Y,P2=n/C,Y,P3=XXXXXXXX $ 

87 LABEL NODJE $ 

88 PARAM //*ADDft/XQHHL/l/0 $ 



4.2-4 (05/30/86) 



MODAL FLUTTER ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 10 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

89 AMP AJJL,SKJ,D1JK,D2JK,GTKA,PHIDH,D1JE,D2JE,USETD,AER0/QHHL,QKHL, 

QHJL/N0UE/S,N,XQHHL/V,Y,GUSTAER0=-1 $ 

90 PARAM //*MPY*/FLOOP/V,Y,NODJE=-1/0 $ 

91 LABEL LOOPTOP $ 

92 FA1 KHH,BHH,MHH,QHHL,CASECC,FLIST/FSAVE,KXHH,BXHH,MXHH/ 

S,N,FLOOP/S,N,TSTART/S,N,NOCEAD $ 

93 EQU I V KXHH , PH I H/NOCEAD/BXHH , CLAMA/NOCEAD/KXHH , PH I HL/NOCEAD/BXHH , 

CLAMAL/NOCEAD/CASECC.CASEYY/NOCEAD $ 

$k COND VDR.NOCEAD $ 

95 CEAD KXHH,BXHH,MXHH,EED,CASECC/PHIH, CLAMA, OCEIGS./S.N.EIGVS $ 

96 COND LBLZAP,EIGVS $ 

97 LABEL VDR $ 

98 VDR CASECC.EQDYN , USETD.PHI H, CLAMA, ,/OPH I H,/*CE IGEN*/*M0DAL»V 

123/S,N,N0H/S,N,N0P/FM0DE $ 

99 COND LBL16.N0H $ 

100 OFP 0PHIH,,,,,//S,N,CARDNO $ 

101 LABEL LBL16 $ 

102 FA2 PHIH, CLAMA, FSAVE/ PHIHL,CLAMAL,CASEYY,OVG/S,N,TSTART/ 

C,Y,VREF=1.0/C,Y,PRINT=YES $ 

103 COND CONTINUE.TSTART $ 
\0k LABEL LBLZAP $ 

105 COND CONTINUE, FLOOP $ 

106 REPT LOOPTOP, 100 $ 

107 JUMP ERR0R3 $ 

108 LABEL CONTINUE $ 

109 PARAML XYCDB//*PRES*////NOXYCDB $ 

110 COND NOXYOUT.NOXYCDB $ 

1 1 1 XYTRAN XYCDB.OVG, , , ,/XYPLTCE/*VG*/*PSET*/S,N,PF I LE/S.N.CARDNO/ 

S.N.NOXYPL $ 



4.2-5 (05/30/86) 



AERO RIGID FORMAIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 10 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

112 COND NOXYOUT.NOXYPL $ 

113 XYPLOT XYPLTCE// $ 
1U LABEL NOXYOUT $ 

115 PARAM //*ANDVPJUMP/N0P=-1/JUMPPL0T $ 

116 COND FINIS.PJUMP $ 

117 MODACC CASEYY,CLAMAL,PHIHL,,,/CLAMAL1,CPHIH1,CASEZZ,,/*CEIGN* $ 

118 ADR CPHIHI.CASEZZ.QKHL.CLAMALl, SPLINE, S I LA.USETA/PKF/BOV/ 

C.Y.MACH = 0,0/*FLUTTERft $ 

119 DDR1 CPH I H 1 , PH I DH/CPH I D $ 

120 EQUIV CPH ID .CPHIP/NOA $ 

121 PURGE QPC/NOA $ 

122 COND LBLUt.NOA $ 

123 SDR1 USETD..CPHID , , .GOD.GMD , ,KFS, ,/CPHI P, , QPC/1 /ADYNAMICS* $ 

124 LABEL LBL14 $ 

125 EQUIV CPHID .CPHIA/NOUE $ 

126 COND LBLNOE.NOUE $ 

127 VEC USETA/RP/*D*/*A*/*E* $ 

128 PARTN CPHID ,,RP/CPHIA,,,/l/3 $ 

129 LABEL LBLNOE $ 

130 MPYAD GTKA,CPHIA,/CPHIK/l/l/0/PREC $ 

131 UMERGE USETA,CPHIP,/CPHIPS/*PS*/*P*/*SA* $ 

132 UMERGE USETA,CPHIPS,CPHIK/CPHIPA/*PA*/*PS*/*K* $ 

133 UMERGE USETA,QPC,/QPAC/*PA*/*P*/*K* $ 

13 1 * SDR2 CASEZZ,CSTMA,MPT,DIT,EQAER0,SILA,,,BGPA,CLAMAL1,QPAC,CPH!PA, 
EST,,/,OQPAC1,OCPHIPA,OESC1,OEFC1,PCPHIPA/*CEIGN* $ 

135 OFP 0CPHIPA,0QPAC1,0ESC1,0EFC1,,//S,N,CARDN0 $ 

136 COND . FINIS.JUMPPLOT $ 



4.2-6 (05/30/86) 



MODAL FLUTTER ANALYSIS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 10 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

137 PLOT PLTPARA,GPSETSA,ELSETSA,CASEZZ,BGPA,EQAERO,S!LGA,,PCPHIPA,, 

/PL0TX3/NSIL1/LUSETA/JUMPPL0T/PLTFLG/S.N, 
PFILE $ 

138 PRTMSG PL0TX3// $ 

139 JUMP FINIS $ 
lltO LABEL ERR0R3 $ 

141 PRTPARM //-3/*FLUTTERft $ 

142 LABEL ERR0R2 $ 

143 PRTPARM //-2/*FLUTTERA $ 

144 LABEL ERR0R1 $ 

11*5 PRTPARM //-l /^FLUTTER* $ 

146 LABEL ERR0R4 $ 

147 PRTPARM //-4/*FLUTTER* $ 

148 LABEL ERRORS $ 

149 PRTPARM //-5/*FLUTTER* $ 

150 LABEL FINIS $ 

151 PURGE ' DUMMY/MINUS1 $ 

152 END $ 



4.2-7 (05/30/86) 



AERO RIGID FORMATS 

4,2.2 Description of Important DMAP Operations for Modal Flutter Analysis 

5. GP1 generates coordinate system transformation matrices, tables of grid point locations, and 
tables relating the internal and external grid point numbers. 

6. Go to DMAP No. 148 and print Error Message No. 5 if no grid points are defined. 

7. GP2 generates Element Connection Table with internal indices. 

9. GP3 generates Static Loads Table and Grid Point Temperature Table. 

10. TA1 generates element tables for use in matrix assembly and stress recovery. 

11. Go to DMAP No. 148 and print Error Message No. 5 if no structural elements have been 
defined. 

14. EMG generates structural element stiffness and mass matrix tables and dictionaries for later 
assembly by the EMA module. 

16. Go to DMAP No. 18 if no stiffness matrix is to be assembled. 

17. EMA assembles stiffness matrix [K* ] and Grid Point Singularity Table. 

yy 

19. Go to DMAP No. 144 and print Error Message No. 1 if no mass matrix is to be assembled. 

20. EMA assembles mass matrix [M ]• 

21. Go to DMAP No. 24 if no weight and balance information is requested. 

22. GP'WG generates weight and balance information. 

23. 0FP formats the weight and balance information prepared by GPWG and places it on the system 
output file for printing. 

25. Equivalence [K* ] to [K ] if there are no general elements. 

26. Go to DMAP No. 29 if there are no general elements. 

27. SMA3 forms the general element stiffness matrix [Kq q L 

28. ADD combines the structural stiffness matrix [K* ] with the general element stiffness 
matrix [KJ| ] to obtain the stiffness matrix [K J. 

30. GP4 generates flags defining members of various displacement sets (USET) and forms 

multipoint constraint equations [R ] {u } = 0. 

y y 

32. Go to DMAP No. 35 if no potential grid point singularities exist. 

33. GPSP generates a table of potential grid point singularities. 

34. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 

36. Equivalence [K ] to [K ] and [M ] to |.M nn 3 if no multipoint constraints exist. 

38. Go to DMAP No. 41 if no multipoint constraints exist. 

39. MCE1 partitions multipoint constraint equations [R ] = [R m ] R R ] and solves for 
multipoint constraint transformation matrix [G m ] = -[R m ]~ C R n 3- 



4.2-8 (05/30/86) 



MODAL FLUTTER ANALYSIS 



40. MCE2 partitions stiffness and mass matrices 



[K ] = 

gg 



K | K 
n n nm 

K I K 

mn mm 



and 



[M ] = 

L gg J 



M 1 M 
n n . nm 

M I M 
mn mm 



and performs matrix reductions 

[K 1 = [K 1 + [G T ][K 1 + [K T ][G 1 + [G T ][K ][G ] and 
L nn J L nn J L m JL mn J L mn JL m J L m JL mm JL m J 

[M 1 = [M ] + [G T ][M 1 + [M T ][G ] + [G T ][M ][G j . 
L nn J L -nn J L m JL mn J L mn JL m J L m JL mm JL m J 

42. Equivalence [K ] to [K„] and [M ] to [M«] if no single-point constraints exist. 

^ nn ff nn ff J r 

43. Go to DMAP No. 45 if no single-point constraints exist. 

44. SCE1 partitions out single-point constraints 



L"SJ = 



^ff_|_ K fs_ 

K.IK 
sf ss 



and 



CM nn ] = 



nn 






46. Equivalence [K^] to |_K ] and [M f4? ] to [M 3= J if no omitted coordinates exist. 
tt aa tt aa 

48. Go to DMAP No. 52 if no omitted coordinates exist. 
50. SMP1 partitions constrained stiffness matrix 



[K ff ] - 



K | K 
aa ao 

K oa ' K oo 



,-1, 



solves for transformation matrix [G rt ] = -[K 1~ [K ] 

O 00 Oa 



and performs matrix reduction [K 1 = [K J + [K 1[G,J . 

aa aa Uq u 

51. SMP2 partitions constrained mass matrix 



[M ff ] = 



M I M 
a a ao 

oa oo 



and performs matrix reduction 

[*,,] . [M aa ] + [Hj a ][G ] + [Gj][M 00 ][G ] + [Gj][M oa J 
53. Go to DMAP No. 58 if there are no free-body supports. 



4.2-9 (05/30/86) 



AERO RIGID FORMATS 



54. RBMG1 partitions out free-body supports 

and 



^ - 



K ll ! hr 



K „ I K 
rJl rr 



**J ¦ 



&_ & . gr 

M I M 
ri ' rr 



55. RBMG2 decomposes constrained stiffness matrix [K ] = [L ][U ] 



u- 



"M JL i%- 



56. RBMG3 forms rigid body transformation matrix 



[D] = -tyX^ 
calculates rigid body check matrix 



[X] = [K rr ] + [K; r ][D] 
and calculates rigid body error ratio 



K 



rr 
57. RBMG4 forms rigid body mass matrix 

Dry] = [M rr ] + [Mj r J[D] + [D T ][M £r l + [D T ][M U ][D]. 

59. DPD generates flags defining members of various displacement sets used in dynamic analysis 
(USETD), tables relating the internal and external grid point numbers (GPLD), including 
extra points introduced for dynamic analysis (SILD), and prepares Transfer Function Pool 
(TFP00L), and Eigenvalue Extraction Data (EED). 

60. Go to DMAP No. 142 and print Error Message No. 2 if there is no Eigenvalue Extraction Data. 

61. Equivalence [G 1 to [G 1 and [Gl to [G 1 if there are no extra points introduced 

^ o o m m r 

for dynamic analysis. 

62. READ extracts real eigenvalues and eigenvectors from the equation 

[K - AM ]{<D } = , 

do do a 

calculates rigid body modes by finding a matrix [* ] such that 

[%] ¦ [* T ro ][ mr ][* ro ] 
is diagonal and normalized, computes rigid body eigenvectors 

D4> 



[* 1 = 
L ao J 



ro 
'ro 



calculates modal mass matrix 



[m] = C^][M aa ][t a ] 
and normalizes eigenvectors according to one of the following user requests 



4.2-10 (05/30/86) 



MODAL FLUTTER ANALYSIS 



1) Unit value of a selected component 

2) Unit value of the largest component 

3) Unit value of the generalized mass. 

63. 0FP formats the summary of eigenvalue extraction information (0EIGS) prepared by READ and 
places it on the system output file for printing. 

64. Go to DMAP No. 146 and print Error Message No. 4 if no eigenvalues were found. 

65. 0FP formats the eigenvalues (LAMA) prepared by READ and places them on the system output 
file for printing. 

2 2 2 

66. MXTRIN selects the direct input matrices [K 1, [Ml and [B 1. 

r u pp pp pp 



67. Equivalence [M 2 ] to [M 2 ], [B 2 J to [B 2 ] and [K 2 ] to [K 2 ] if no constraints 
n • j PP dd pp dd pp dd 
are applied. yv KK KK 



2 2 2 
68. GKAD applies constraints to direct input matrices [K ], [M ] and [B ], forming 

rr rr rr 



69. 



[K 2 d ], [M 2 d ] and [B 2 d ] and forms [G mH ] and LG n J. 



md- 

W 



J od- 



GKAM selects eigenvectors to form [<f> Hh ] and assembles stiffness, mass and damping matrices 
in modal coordinates: 



rw - 



»W - 



CB hh J - 



Jlij_o. 

I 



l 



"ijO 



i 






where 



+ [?dh]»5 d ]c* dh ] . 



KDAMP = -1 (default) 

m. = modal masses 
i 

b. = m i 2tt f. g(f.) 



KDAMP 


= 1 




m. = 
l 


modal 


masses 


b i = 








k. = m. 4tt f . 



k i = (l+ig(f i )) 4tt 2 f 2 mi 



70. APD processes the aerodynamic data cards from EDT. It adds the k points and the SA points 
to USETD making USETA. EQAER0, ECTA, BGPA, CSTMA, GPLA and SILA are updated to reflect the 
new elements. AER0 and ACPT reflect the aerodynamic parameters. SILGA is a special SIL for 
plotting. 

73. Go to DMAP No. 80 if no plot output is requested. 

75. PLTSET transforms user input into a form used to drive the structure plotter. 

76. PRTMSG prints error messages associated with the structure plotter. 

77. Go to DMAP No. 80 if no undeformed aerodynamic or structural element plots are requested. 



4.2-11 (05/30/86) 



AERO RIGID FORMATS 



78. PL0T generates all requested undeformed aerodynamic and structural element plots. 

79. PRTMS6 prints plotter data and engineering data for each undeformed aerodynamic and 
structural element plot generated. 

81. Go to DMAP No. 142 and print Error Message No. 2 if there is no Eigenvalue Extraction Data. 

82. GI forms a transformation matrix [G. ] which interpolates between aerodynamic (k) and 
structural (a) degrees of freedom. 

84. AMG forms the aerodynamic matrix list [A..], the area matrix [S. .], and the downwash 
coefficients [D*] and [D? k ]. 

85. Go to DMAP No. 87 if there are no user-supplied downwash coefficients. 

1 o 

86. INPUTT2 provides the user-supplied downwash factors due to extra points ([D. ], [D. ]). 

PARAM N0DJE must be set to enter these matrices. The downwash w. on box j due to the 

motion of an extra point, u » is given by 

e 

f "j> ¦ C°je + ^"jeH 1 • 

89. AMP computes the aerodynamic matrix list related to the modal coordinates as follows: 



tW ¦ 



A}. 
>ei 



r ae 






c G ki3 ¦ r G k/[* s1 ] 



[Dj 1 ,] - [D] k f[G k1 ] , 
[Dj 2 ,] - [D. 2 k ] T CG ki ]. 



For each (m,k) pair: 



[D jh ] ¦ [OjJ] - 1k[Dj2] 



For each group: 



and 



fn 1 = TA T l" 1 fD 1 
jh j L jj J group L jh J group 

[<W - [V [ V ¦ 

[Q ih ] ¦ [G k1 ] T [Q kh ] ¦ 

0*0. 
"eh 



CW 



90. PARAM initializes the flutter loop counter (FL00P) to zero. 

91. Beginning of loop for flutter. 

92. FA1 computes the total aerodynamic mass matrix C M u n L the total aerodynamic stiffness 
matrix [Kuu] and the total aerodynamic damping matrix [B? h ] as well as a looping table 



4.2-12 (05/30/86) 



MODAL FLUTTER ANALYSIS 



FSAVE. For the K-method 



M hh = ^Xh + <P /2 > ^hh • 

K hh = K hh 

and B* h = . 

93. Set up equivalences for the KE- and PK-methods. 

94. Go to DMAP No. 97 for the KE- and PK-methods. 

95. CEAD extracts complex eigenvalues and eigenvectors from the equation 

Kh» 2 + B hhP + ^v ¦ ° 

and normalizes eigenvectors to unit magnitude of the largest component. 

96. Go to DMAP No. 104 if no complex eigenvalues were found. 

98, VDR prepares eigenvectors (0PHIH) for output, using only the extra points introduced for 
dynamic analysis and modal coordinates. 

99. Go to DMAP No. 101 if there is no output request for the extra points introduced for dynamic 
analysis or modal coordinates. 

100. 0FP formats the table of eigenvectors for extra points introduced for dynamic analysis and 
modal coordinates prepared by VDR and places it on the system output file for printing. 

102. FA2 appends eigenvectors to PHIHL, eigenvalues to CLAMAL, Case Control to CASEYY, and V-g 
plot data to 0VG. 

103. Go to DMAP No. 108 if there is insufficient time for another flutter loop. 

105. Go to DMAP No. 108 if the flutter loop is complete. 

106. Go to DMAP No. 91 for additional aerodynamic configuration triplet values. 

107. Go to DMAP No. 140 and print Error Message No. 3 if the number of flutter loops exceeds 100. 

110. Go to DMAP No. 114 if there are no X-Y plot requests. 

111. XYTRAN prepares the input for requested V-g plotting. 

112. Go to DMAP No. 114 if no plots are possible as requested. 

113. XYPL0T prepares the requested V-g plots. 

116. Go to DMAP No. 150 and make normal exit if there are no output requests involving dependent 
degrees of freedom or forces and stresses. 

117. M0DACC selects a list of eigenvalues and eigenvectors whose imaginary parts (velocity in 
input units) are close to a user input list. 

118. ADR builds a matrix of aerodynamic forces for each aerodynamic point and prints requested 
aerodynamic forces for selected elements. 



4.2-13 (05/30/86) 



AERO RIGID FORMATS 

119. DDR1 transforms the complex eigenvectors from modal to physical coordinates 

120. Equivalence U^} to {<(>£} if no constraints are applied. 

122. Go to DMAP No. 124 if no constraints are applied. 

123. SDR1 recovers dependent components of eigenvectors 



«5> - v$ <*Si 



= (?= + *i ) , 



#f + 


*e 


*s 





¦ {* c n **l} , 



t*S» = C V { *n + *e> 



- tf> 



and recovers single-point forces of constraint {q 1 = [K f ]{<J> f }, ) 



<«?• 



125. Equivalence {&} to {<f> c } if there are no extra points introduced for dynamic analysis, 

u a 

126. Go to DMAP No. 129 if there are no extra points. 

127. VEC generates a d-size partitioning vector (RP) for the a- and e-sets 

(u ,) ¦* (u > + iuj . 
d a e 



128. PARTN performs partition of {<f>£j} using 



RP 



(6 



d ^_-] 



130. MPYAD recovers the displacements at the aerodynamic points (k) 

< + k> ¦ [ G ka] T( *a } • 



131. UMERGE is used to expand {<r> to the ps-set. 



4.2-14 (05/30/86) 



MODAL FLUTTER ANALYSIS 

132. UMERGE places [$?} in its proper place in the displacement vector 

I ^ 
pa 



^k 



133. UMERGE is used to expand {QJJJ to the pa-set. 

134. SDR2 calculates element forces (0EFC1) and stresses (0ESC1) and prepares eigenvectors 
(0CPHIPA) and single-point forces of constraint (0QPAC1) for output and PCPHIPA for deformed 
plotting. 

135. 0FP formats the tables prepared by SDR2 and places them on the system output file for 
printing. 

136. Go to DMAP No. 150 and make normal exit if no deformed aerodynamic or structural element 
plots are requested. 

137. PL0T prepares all deformed aerodynamic and structural element plots. 

138. PRTMSG prints plotter data and engineering data for each deformed plot generated. 

139. Go to DMAP No. 150 and make normal exit. 

141. Print Error Message No. 3 and terminate execution. 

143. Print Error Message No. 2 and terminate execution. 

145. Print Error Message No. 1 and terminate execution. 

147. Print Error Message No. 4 and terminate execution. 

149. Print Error Message No. 5 and terminate execution. 



4.2-15 (05/30/86) 



AERO RIGID FORMATS 

4.2.3 Output for Modal Flutter Analysis 

The real Eigenvalue Summary Table and the real Eigenvalue Analysis Summary, as described ' 
under Normal Modes Analysis (see Section 2.3.3), are automatically printed. All real eigenvalues 
are included even though all may not be used in the modal formulation. 

The complex eigenvalues are included in the Flutter Summary and are printed for each 
aerodynamic loop. 

The grid point singularities from the structural model are also output. 

A Flutter Summary for each value of the configuration parameters is printed out unless 
PRINT=N0. This shows Mach number, density, reduced frequency, velocity, damping, and frequency for 
each complex eigenvalue. 

V-g and V-f plots may be requested by the XY0UT control cards by specifying the curve type 
as VG. The "points" are loop numbers and the "components" are G or F. 

Printed output of the following types, sorted by complex eigenvalue root number (S0RT1) and 
(m, k, p), may be requested for all complex eigenvalues kept, either as real and imaginary parts or 
as magnitude and phase angle (0° - 360° lead). (Eigenvectors are not available for the KE-method.) 

1. The eigenvector for a list of PHYSICAL and AER0DYNAMIC points (grid points, extra 
points, and aerodynamic points) or S0LUTI0N points (modal coordinates and extra points). 

2. Nonzero components of the single-point forces of constraint for a list of PHYSICAL 
points. 

3. Complex stresses and forces in selected elements. 

The 0FREQUENCY Case Control card can select a subset of the complex eigenvectors for data recovery. 
In addition, undeformed and deformed shapes may be requested. Undeformed shapes may include only 
structural or structural and aerodynamic elements. 

The eigenvectors used in the modal formulation may be obtained for the analysis points by 
using the ALTER feature to print the matrix of eigenvectors following the execution of READ. The 
eigenvectors for all points in the model may be obtained by running the problem initially on the 
Normal Modes Analysis Rigid Format or by making a modified restart using the Normal Modes Analysis 
Rigid Format. 



4.2-16 (05/30/86) 



MODAL FLUTTER ANALYSIS 

4.2.4 Case Control Deck for Modal Flutter Analysis 

The following items relate to subcase definition and data selection for Modal Flutter* 
Analysis: 

1. Only one subcase is allowed. 

2. Desired direct input matrices for stiffness [K pp 3» mass ^ M P p^» and dam P in 9 [B pp ] 
must be selected via the keywords K2PP, M2PP, or B2PP. 

3. CMETH0D must be used to select an EIGC card from the Bulk Data Deck. (K method only.) 

4. FMETH0D must be used to select a FLUTTER card from the Bulk Data Deck. 

5. METH0D must be used to select an EIGR card that exists in the Bulk Data Deck. 

6. SDAMPING must be used to select a TABDMP1 table if structural damping is desired. 

4.2.5 Parameters for Modal Flutter Analysis 

The following parameters are used in Modal Flutter Analysis: 

1. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2. AUT0SPC - reserved for future optional use. The default value is -1. 

3. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTRIA2, CPTUBE, CPQDPLT, CPTRPLT, 
CPTRBSC - optional. These parameters cause the generation of coupled mass matrices 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

4 - GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. All fluid related masses are ignored. 

5. GUSTAER0 - optional. An integer value of +1 causes gust loads to be computed. The 
default value is -1 for no gust loads. 

6. KDAMP - optional. An integer value of +1 causes modal damping terms to be put into the 
complex stiffness matrix for structural damping (+1 recommended for K and KE methods). 
The default value is -1. 

7. LFREQ and HFREQ - required, unless LM0DES is used. The real values of these parameters 
give the cyclic frequency range (LFREQ is the lower limit and HFREQ is the upper limit) 
of the modes to be used in the modal formulation. To use this option, parameter LM0DES 

must be set to 0. 

4.2-17 (05/30/86) 



AERO RIGID FORMATS 

8. LM0DES - required, unless LFREQ and HFREQ are used. The integer value of this parameter 
is the number of lowest modes to be used in the modal formulation. 

9. MACH - optional. The real value of this parameter selects the closest Mach numbers to 
be used to compute aerodynamic matrices. The default value is 0.0. 

10. N0DJE - optional. A positive integer of this parameter indicates that user-supplied 
downwash matrices due to extra points are to be read from an external file via the 
INPUTT2 module in the rigid format. The default value is -1 when not needed. 

11. PI, P2 and P3 - required when using the N0DJE parameter. See Section 5.5 for a 
description of these parameters which are required by the INPUTT2 module. The default 
values for PI, P2 and P3 are 0, 11 and XXXXXXXX, respectively. 

12 « PRINT - optional. The BCD value, N0, of this parameter suppresses the automatic 
printing of the flutter summary for the K method. The default value is YES. 

13. VREF - optional. Velocities are divided by the real value of this parameter to convert 
units or to compute flutter indices. The default value is 1.0. 

14. WTMASS - optional. The terms of the structural mass matrix are multiplied by the real 
value of this parameter when they are generated in the EMA module. Not recommended for 
use in hydroelastic problems. 

4.2.6 Optional Diagnostic Output for PEER 

Special detailed information obtained by requesting DIAG 16 in the Executive Control Deck is 
the same as that described under Normal Modes Analysis (see Section 2.3.6). 

4.2.7 The APPEND Feature 

The APPEND feature can be used for real eigenvalue extraction in Modal Flutter Analysis. See 

Section 2.3.7 for details. 

4.2.8 Rigid Format Error Messages from Modal Flutter Analysis 

The following fatal errors are detected by the DMAP statements in the Modal Flutter Analysis 
rigid format. The text for each error message is given below in capital letters and is followed by 
additional explanatory material, including suggestions for remedial action. 



4.2-18 (05/30/86) 



AERO RIGID FORMATS 






4.2-20 (05/30/86) 



AERO RIGID FORMATS 



4.2-20 (05/30/86) 



AERO RIGID FORMATS 



4.3 MODAL AEROELASTIC RESPONSE 

4.3.1 DMAP Sequence for Modal Aeroelastic Response 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERC APPROACH, RIGID FORMAT 11 

LEVEL 2.0 NASTRAN DMAP COMPILER 



SOURCE LISTING 



OPTIONS IN EFFECT GO 



ERR=2 LIST 



NODECK NOREF NOOSCAR 



1 BEGIN AERO 11 - MODAL AEROELASTIC RESPONSE - APR. 1986 $ 

2 PRECHK ALL $ 

3 FILE AJJL=APPEND/QHHL=APPEND/QKHL=APPEND/QHJL=APPEND/SKJ=APPEND $ 

4 PARAM //*MPY*/CARDNO/0/0 $ 

5 GP1 GE0M1,GE0M2,/GPL,EQEXIN,GPDT,CSTM,BGPDT,SIL/S,N,LUSET/ 

S,N,N0GPDT/MINU$1=-1 $ 

6 COND ERR0R1.N0GPDT $ 

7 GP2 GE0M2.EQEXIN/ECT $ 

8 PARAML PCDB//*PRES*/V,Y,N0DJE=-1///JUMPPL0T $ 

9 PARAML XYCDB//*PRES*////NOXYCDB $ 

10 GP3 GEOM3,EQEXIN,GE0M2/,GPTT/N0GRAV $ 

11 TA1 ECT,EPT,BGPDT,SIL,GPTT,CSTM/EST,GEI , GPECT,,/ 

LUSET/S,N,N0SIMP/1/S,N,N0GENL/S,N,GENEL $ 

12 COND ERR0R3.N0SIMP $ 

13 PARAM //*ADD*/NOKGGX/1/0 $ 

14 PARAM //*ADD*/N0MGG /I/O $ 

15 EMG EST,CSTM,MPT,DIT,GE0M2,/KELM,KDICT,MELM,MDICT,,,/S,N,N0KGGX/ 

S , N , NOMGG////C , Y , COUPMASS/C , Y , CPBAR/C , Y , CPROD/ 
C,Y,CPQUAD1/C,Y,CPQUAD2/C,Y,CPTRIA1/C,Y,CPTRIA2/C,Y,CPTUBE/ 
C , Y , CPQDPLT/C , Y , CPTRPLT/C , Y , CPTRBSC/ 
V,Y,VOLUME/V,Y, SURFACE $ 

16 PURGE KGGX.GPST/NOKGGX $ 

17 COND JMPKGGX.NOKGGX $ 

18 EMA GPECT, KDICT.KELM/KGGX.GPST $ 

19 LABEL JMPKGGX $ 

20 COND ERR0R1.N0MGG $ 

4.3-1 (05/30/86) 



AERO RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 11 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

21 EMA GPECT,MDICT,MELM/MGG,/-1/C,Y,WTMASS=1.0 $ 

22 COND LGPWG.GRDPNT $ 

23 GPWG BGPDT,CSTM,EQEXIN,MGG/0GPWG/V,Y,GRDPNT=-1/C,Y,WTMASS $ 
2k OFP OGPWG, t ,,,//S,N,CARDNO $ 

25 LABEL LGPWG $ 

26 EQUIV KGGX.KGG/NOGENL $ 

27 COND LBL11.N0GENL $ 

28 SMA3 GEI./KGGY/LUSET/N0GENL/-1 $ 

29 ADD KGGX,KGGY/KGG $ 

30 LABEL LBL11 $ 

31 GPit CASECC,GEOMA,EQEXIN,GPDT,BGPDT,CSTM,GPST/RG,,USET,ASET/LUSET/ 

S,N,MPCFl/S,N,MPCF2/S,N,SINGLE/S,N,0MIT/S,N,REACT/0/S,N, 
REPEAT/S , N , NOSET/S , N , NOL/S , N , NOA/C , Y , ASETOUT/S , Y , AUTOSPC $ 

32 PARAM //ftEQft/GPSPFLG/AUTOSPC/0 $ 

33 PURGE GM/MPCF1/DM, MR/REACT $ 
Ik COND LBL4,GPSPFLG $ 

35 GPSP GPL,GPST,USET,SIL/0GPST/S,N,NOGPST $ 

36 OFP OGPST, ,,,,//$, N.CARDNO $ 

37 LABEL LBL4 $ 

38 EQUIV KGG,KNN/MPCF1/MGG,MNN/MPCF1 $ 

39 COND LBL2.MPCF1 $ 
itO MCE1 USET.RG/GM $ 

41 MCE2 USET,GM,KGG,MGG,,/KNN,MNN,, $ 

kl LABEL LBL2 $ 

kl EQUIV KNN.KFF/SINGLE/MNN.MFF/SINGLE $ 

kk COND LBL3. SINGLE $ 

kS SCE1 USET,KNN,MNN,,/KFF,KFS,,MFF,, $ 



4.3-2 (05/30/86) 




MODAL AEROELASTIC RESPONSt 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 11 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 




i*6 LABEL 

kl EQUIV 

48 PURGE 

kS COND 

50 PARAM 

51 SMP1 

52 SMP2 

53 LABEL 

54 COND 

55 RBMG1 

56 RBMG2 

57 RBMG3 

58 RBMG4 

59 LABEL 

60 DPD 

61 COND 

62 EQUIV 

63 READ 

64 OFP 

65 COND 

66 OFP 

67 MTRXIN 



LBL3 $ 

KFF,KAA/0MIT/ MFF.MAA/OMIT $ 

GO/OMIT $ 

LBL5.0MIT $ 

//*PREC*/PREC $ 

USET,KFF,,,/GO,KAA,KO0,LO0,,,,, $ 

USET.GO.MFF/MAA $ 

LBL5 $ 

LBL6, REACT $ 

USET,KAA,MAA/KLL,KLR,KRR,MLL,MLR,MRR $ 

KLL/LLL/ $ 

LLL.KLR.KRR/DM $ 

DM,MLL,MLR,MRR/MR $ 

LBL6 $ 

DYNAMICS, GPL, S I L, USET/GPLD.S I LD,USETD,TFP00L,DLT,P$DL, FRL, ,TRL, 
EED,EQDYN/LUSET/S,N,LUSETD/N0TFL/NODLT/S,N,NOPSDL/ 
N0FRL/NONLFT/N0TRL/S,N,NOEED/123/S,N,NOUE $ 

ERR0R2.N0EED $ 

GO.GOD/NOUE/GM.GMD/NOUE $ 

KAA,MAA,MR,DM,EED,USET,CASECC/LAMA,PHIA,MI,0EIGS/*MODES>VS,N, 
NE1GV $ 

OEIGS,,,,,//S,N,CARDNO $ 

ERR0R4,NEIGV $ 

LAMA,,,,,//S,N,CARDNO $ 

CASECC , MATPOOL , EQDYN , ,TFP00L/K2PP , M2PP , B2PP/LUSETD/S , N , 
N0K2PP/S,N,N0M2PP/S,N,N0B2PP $ 



68 EQUIV M2PP.M2DD/N0A/B2PP.B2DD/N0A/K2PP.K2DD/N0A $ 




4.3-3 (05/30/86] 



AERO RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 11 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 



69 GKAD USETD.GM.GO, , , , ,K2PP,M2PP,B2PP/, , ,GMD,GOD, K2DD,M2DD,B2DD/ 

*CMPLEV*/*D I SPV*M0DAL*/0 .0/0 . 0/0 .0/N0K2PP/ 
N0M2PP/NOB2PP/MPCF1/SINGLE/OMIT/N0UE/ 
-1/-1/-1/-1 $ 

70 GKAM USETD,PHIA,,LAMA,DIT,M2DD,B2DD,K2DD,CASECC/MHH,BHH,KHH, 

PHIDH/N0UE/C,Y,LM0DES=0/C,Y,LFREQ=0./C,Y,HFREQ=-1.0/ 
N0M2PP/NOB2PP/N0K2PP/S,N,NONCUP/S,N,FMODE/C,Y,KDAMP $ 

71 APD EDT,EQDYN,ECT,BGPDT,SILD,USETD,CSTM,GPLD/EQAERO,ECTA,BGPA,SILA, 

USETA,SPL1NE,AER0,ACPT,FLIST,CSTMA,GPLA,SILGA/S,N,NK/S,N,NJ/ 
S,N,LUSETA/S,N,BOV $ 

72 PARAM //*MPY*/PFILE/0/l $ 

73 PURGE PLTSETA.PLTPARA.GPSETSA.ELSETSA/JUMPPLOT $ 

74 COND SKPPLT.JUMPPLOT $ 

75 PARAM //*MPY*/PLTFLG/0/l $ 

76 PLTSET PCDB,EQAER0,ECTA/PLTSETA,PLTPARA,GPSETSA,ELSETSA/S,N,NSIL1/S,N, 

JUMPPLOT $ 

77 PRTMSG PLTSETA // $ 

78 COND SKPPLT.JUMPPLOT $ 

79 PLOT PLTPARA,GPSETSA,ELSETSA,CASECC,BGPA,EQAERO /PL0TX2/ 

NSIL1/LUSETA/S,N,JUMPPL0T/S,N,PLTFLG/S,N,PFILE $ 

80 PRTMSG PL0TX2 // $ 

81 LABEL SKPPLT $ 

82 Gl SPLINE, USET , CSTMA.BGPA.S I L , ,GM,GO/GTKA/NK/ 

LUSET $ 

83 PARAM //*ADD*/DESTRY/0/l/ $ 

8A AMG AER0,ACPT/AJJL,SKJ,D1JK,D2JK/NK/NJ/S,N,DESTRY $ 

85 COND NODJE.NODJE $ 

86 INPUTT2 /DUE,D2JE,, f /C,Y,P1=0/C,Y,P2=ll/C,Y,P3=XXXXXXXX $ 

87 LABEL NODJE $ 

88 PARAM //ftADD*/XQHHL/l/0 $ 

89 AMP AJJL,SKJ,D1JK,D2JK,GTKA,PHIDH,D1JE,D2JE,USETD,AER0/QHHL,QKHL, 

QHJ L/NOUE/S , N , XQHHL/V, Y , GUSTAERO=- 1 $ 



4.3-4 (05/30/86) 



MODAL AEROELASTIC RESPONSE 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 11 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

90 FRLG CASECC,USETD,DLT,FRL,GMD,G0D,DIT,PHIDH/PPF,PSF,PDF,F0L,PHF1/ 

ftMODAL*/S,N,FREQY/S,N,APP $ 

91 PARAM //*NOT*/NOFRY/FREQY $ 

92 PURGE PPF/NOFRY $ 

93 GUST CASECC,DLT,FRL,DIT,QHJL,,,ACPT,CSTMA,PHF1/PHF/ 

S,N,NOGUST/BOV/C,Y,MACH/C,Y,Q $ 

9** EQUIV PHF1.PHF/N0GUST $ 

95 FRRD2 KHH,BHH,MHH,QHHL,PHF,FOL/UHVF/BOV/C,Y,Q/C,Y,MACH $ 

96 EQUIV UHVF,UHVT/FREQY/FOL,TOL/FREQY $ 

97 COND IFTSKP.FREQY $ 

98 IFT UHVF,CASECC,TRL,FOL/UHVT,TOL/C,Y, I FTM=0 $ 

99 LABEL IFTSKP $ 

100 MODACC CASECC,TOL,UHVT,,,/TOLT,UHVT1,,,/APP $ 

101 ADR UHVT1,CASECC,QKHL,T0L1, SPLINE, SI LA,USETA/PKF/BOV/ 

C,Y,MACH/APP $ 

102 VDR CASECC.EQDYN.USETD.UHVTl ,T0L1 ,XYCDB,/0UHV1 ,/APP/*MODAL*/ 

0/S,N,NOH/S,N,NOP/FMODE $ 

103 COND NOH, NOH $ 

10it SDR3 0UHV1,,,,,/0UHV2,,,,, $ 

105 OFP 0UHV2,,, , ,//S,N,CARDNO $ 

106 COND NOH.NOXYCDB $ 

107 XYTRAN XYCDB,0UHV2,,,,/XYPTTA/APP/*HSET*/S,N,PF1LE/S,N,CARDN0/ 

S.N.NOXYPL $ 

108 COND NOH.NOXYPL $ 

109 XYPLOT XYPTTA $ 

110 LABEL NOH $ 

111 PARAM //*ANDVPJUMP/NOP/JUMPPLOT $ 

112 COND FINIS, PJUMP $ 

113 SDR1 USETD,,PHIDH,,,G0D,GMD,,KFS,,/PH!P,,QP/1/*DYNAMICS* $ 



4.3-5 (05/30/86) 



AERO RIGID FORMATS 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 11 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

lit EQUIV PHIDH.PHIAH/NOUE $ 

115 COND N0UE1.N0UE $ 

116 VEC USETD/EVEC/*D*/*A*/*E* $ 

117 PARTN PHIDH,,EVEC/PHIAH,,,/1 $ 

118 LABEL N0UE1 $ 

119 MPYAD GTKA,PHIAH,/PHIK/l/l/0/PREC $ 

120 UMERGE USETA.PHI P,/PH I PS/ftPS*/*P*/*SA* $ 

121 UMERGE USETA,PHIPS,PHIK/PHIPA/ftPAft/*PS*/*K* $ 

122 UMERGE USETA,QP,/QPA/*PAft/*P*/*PS* $ 

123 SDR2 CASECC , CSTMA , MPT , D I T, EQAERO , S I LA , , , BGPA, LAMA , QPA, PH I PA , 

EST,XYCDB,/,MQP1,MPHIPA1,MES1,MEF1,/*MMREIG* $ 

124 COND NOPF.NOFRY $ 

125 SDR2 CASECC, , ,,EQDYN, ,, ,,PPF, f , ,XYCDB,/0PP1,, ,,,/*FREQ* $ 

126 SDR3 0PP1,,,,,/QPP2,,,,,/ $ 

127 LABEL NOPF $ 

128 SDR3 MPHIPA1,MES1,MEF1,MQP1,,/MPHIPA2,MES2,MEF2,MQP2,, $ 

129 DDRMM CASECC,UHVT1,T0L1,MPHIPA2,MQP2,MES2,MEF2,XYCDB,EST,MPT,DIT/ 

0UPV2,0QP2,0ES2,0EF2, $ 

130 OFP OUPV2,,0ES2,0EF2,0QP2,//S,N,CARDN0 $ 

131 SCAN CASECC, 0ES2,0EF2/0ESF2/C,N,*RF* $ 

132 OFP 0ESF2,,,,,//S,N,CARDN0 $ 

133 COND P2.JUMPPL0T $ 

134 MPYAD PHIPA,UHVTl,/UVTl/0 $ 

135 SDR2 CASECC, CSTMA,,, EQAERO,,,, BGPA, TOL, ,UVT1 ,,,/,,,, .PUVPAT/APP $ 

136 PLOT PLTPARA,GPSETSA,ELSETSA, CASECC, BGPA, EQAERO, S I LGA, .PUVPAT, ,/ 

PL0TX3/NSIL1/LUSETA/JUMPPL0T/PLTFLG/PFILE $ 

137 PRTMSG PL0TX3// $ 



4.3-6 (05/30/86) 



MODAL AEROELASTIC RESPONSE 



RIGID FORMAT DMAP LISTING 
APRIL 1986 RELEASE 

AERO APPROACH, RIGID FORMAT 11 

LEVEL 2.0 NASTRAN DMAP COMPILER - SOURCE LISTING 

138 LABEL P2 $ 

139 COND FINIS, NOXYCDB $ 

HO XYTRAN XYCDB,,0QP2,0UPV2,0ES2,0EF2/XYPLTT/APP/*PSET*/ 
S , N , PF I LE/S , N , CARDNO/S , N , NOXYPL $ 

Hi COND NOXYPLTT, NOXYPL $ 

H2 XYPLOT XYPLTT $ 

H3 LABEL NOXYPLTT $ 

H4 COND FINIS, NOFRY $ 

U5 COND FINIS, NOPSDL $ 

H6 RANDOM XYCDB,DIT,PSDL,0UPV2,,0QP2,0ES2,0EF2,CASECC/PSDF,AUT0/ 
S.N.NORN $ 

H7 COND FINIS.NORN $ 

U8 XYTRAN XYCDB,PSDF,AUTO,,,/XYPLTR/*RAND*/*PSET*/S,N,PFILE/ 
S.N, CARDNO/S, N, NOXYPL $ 

H9 COND FINIS.NOXYPL $ 

150 XYPLOT XYPLTR $ 

151 JUMP FINIS $ 

152 LABEL ERR0R2 $ 

153 PRTPARM //-2/*AER0RESP* $ 
15^ LABEL ERR0R1 $ 

155 PRTPARM //-1/*AER0RESP* $ 

156 LABEL ERR0R4 $ 

157 PRTPARM //-4/*AER0RESP* $ 

158 LABEL ERR0R3 $ 

159 PRTPARM //-3/*AER0RESP* $ 

160 LABEL FINIS $ 

161 PURGE DUMMY/MINUS1 $ 

162 END $ 

4.3-7 (05/30/86) 



AERO RIGID FORMATS 

4.3.2 Description of Important DMAP Operations for Modal Aeroelastic Response 

5. GP1 generates coordinate system transformation matrices, tables of grid point locations, and 
tables relating the internal and external grid point numbers. 

6. Go to DMAP No. 158 and print Error Message No. 3 if no grid points are defined. 

7. GP2 generates Element Connection Table with internal indices. 

10. GP3 generates Grid Point Temperature Table (element temperature). 

11. TA1 generates element tables for use in matrix assembly and stress recovery. 

12. Go to DMAP No. 158 and print Error Message No. 3 if no structural elements have been 
defined, 

15. EMG generates structural element stiffness and mass matrix tables and dictionaries for later 
assembly by the EMA module. 

17, Go to DMAP No. 19 if no stiffness matrix is to be assembled. 

18. EMA assembles stiffness matrix [K ] and Grid Point Singularity Table. 

yy 

20. Go to DMAP No. 154 and print Error Message No. 1 if no mass matrix is to be assembled. 

21. EMA assembles mass matrix [M ]. 

gg 

22. Go to DMAP No. 25 if no weight and balance information is requested. 

23. GPWG generates weight and balance information. 

24. 0FP formats the weight and balance information prepared by GPWG and places it on the system 
output file for printing. 

26. Equivalence [K ] to [K ] if there are no general elements. 

y y y y 

27. Go to DMAP No. 30 if there are no general elements. 

28. SMA3 forms the general element stiffness matrix [K^ ]. 

29. ADD combines the structural stiffness matrix [K ] with the general element stiffness 

y y 

matrix [K^„] to obtain the stiffness matrix [K 1. 

gg gg 

31. GP4 generates flags defining members of various displacement sets (USET) and forms 
multipoint constraint equations [R ] {u } = 0, 

34. Go to DMAP No. 37 if no potential grid point singularities exist. 

35. GPSP generates a table of potential grid point singularities. 

36. 0FP formats the table of potential grid point singularities prepared by GPSP and places it 
on the system output file for printing. 

38. Equivalence [K ] to [K ] and [Ml to [M ] if no multipoint constraints exist. 

y y I'M yy "" 

39. Go to DMAP No. 42 if no multipoint constraints exist. 

40. MCE1 partitions multipoint constraint equations [R ] = [R J R ] and solves for 

multipoint constraint transformation matrix [G 1 = -[R 1 [R„]. 
r L nr u m n 



4.3-8 (05/30/86) 



MODAL AEROELASTIC RESPONSE 



41. MCE2 partitions stiffness and mass matrices 



C V ¦ 



K I K 
nn nm 



K I K 
mn mm 



and 





M 1 M 


£ M nJ = 


nn | nm 


gg 


M 1 M 




mn mm 



and performs matrix reductions 

[K ] = [K ] + [G T ][K ] + [K T ][G ] + [G T ][K ][G ] and 

L nn J L nn J L m JL mn J L mn JL m J L m JL mm JL m J 

CM ] = [M ] + [G T ][M 1 + [M T ][G ] + [G T ][M ][G ] . 

L nn J L nn J L m JL mn J L mn JL m J L m JL mm-"- m J 

43. Equivalence [K 1 to [K rj: ] and [M ] to [M^^l if no single-point constraints exist. 

nn ft nn ft 

44. Go to DMAP No. 46 if no single-point constraints exist. 

45. SCE1 partitions out single-point constraints 



[K ] = 
L nn J 



^ff|_ K fs_ 
K sf ! K ss 



and 



[»W 



M ff! M fs 

1_ — 

M sf ' M ss 



47. Equivalence [K„] to [K ] and [M^] to [M„] if no omitted coordinates exist. 
tt aa tt aa 

49. Go to DMAP No. 53 if no omitted coordinates exist. 
51. SMP1 partitions constrained stiffness matrix 



[K ff ] - 



K | K 
aa ao 

K I K 
oa oo 



solves for transformation matrix [G 1 = -[K 1 [K ] 

00 Oa 

and performs matrix reduction [K 1 = [K ] + [K 1[G 1 . 

aa aa ud u 

52. SMP2 partitions constrained mass matrix 



CM ff ] - 



M I M 
aa ao 

M I M 
oa oo 



and performs matrix reduction 



[M aa ] - [M aa ] ? [Mj a ][G ] + [Gj][M 00 ][G ] t [Gj][M oa ] 



54. Go to DMAP No. 59 if no free-body supports exist. 



4.3-9 (05/30/86) 



AERO RIGID FORMATS 



55. RBMG1 partitions out free-body supports 





K f K 






M i M 


[K ] = 
L aa J 


X 36 | J6 1 

K r£ ' K rr 


and 


£ M aa3 " 


M i M 



56. RBMG2 decomposes constrained stiffness matrix [K^] = [L £A ][U U ]. 

57. RBMG3 forms rigid body transformation matrix 

[d] - -u u r\ r i, 

calculates rigid body check matrix 



[X] = [K rr ] + [K; r ][D] 



and calculates rigid body error ratio 

IX 



K 



rr 



58. RBMG4 forms rigid body mass matrix 

[ml = [M l'+ [m!j[D] + [D T ][M 1 + [D T ][M 1[D], 



rr- 



SLY- 



ir- 



ll- 



60 



. DPD generates flags defining members of various displacement sets used in dynamic analysis 
(USETD), tables relating the internal and external grid point numbers (GPLD), including 
extra points introduced for dynamic analysis (SILD), and prepares Transfer Function Pool 
(TFP00L), and Eigenvalue Extraction Data (EED). 

61. Go to DMAP No. 152 and print Error Message No. 2 if there is no Eigenvalue Extraction Data. 

62. Equivalence [G ] to [GJJ] and [G ] to [g[J] if there are no extra points introduced 
for dynamic analysis. 

63. READ extracts real eigenvalues and eigenvectors from the equation 

t K aa " XM aa^a> = ° • 
calculates rigid body modes by finding a matrix [<f> rQ ] such that 

c-v,] ¦ [* T ro ][^][* ro ] 

is diagonal and normalized, computes rigid body eigenvectors 

D (J) 



Ly ao J 



_ 12. 
Vo 



calculates modal mass matrix 



Cm] = [J^MIE* ] 



a- 1 " aa-"- T a- 
and normalizes eigenvectors according to one of the following user requests 



4.3-10 (05/30/86) 



MODAL AEROELASTIC RESPONSE 



1) Unit value of a selected component 

2) Unit value of the largest component 

3) Unit value of the generalized mass. 

64. 0FP formats the summary of eigenvalue extraction information (0EIGS) prepared by READ and 
places it on the system output file for printing. 

65. Go to DMAP No. 156 and print Error Message No. 4 if no eigenvalues were found. 

66. 0FP formats the eigenvalues (LAMA) prepared by READ and places them on the system output 
file for printing. 

2 2 2 

67. MXTRIN selects the direct input matrices [K 3, [M pp ] and [B pp ]. 



68. Equivalence [MjL] to [M^], [Bj; ] to [B^] and [KJ; ] to [Kjjjj] if no constraints 
are applied. ^ 



2 2 2 

69. GKAD applies constraints to direct input matrices [K L [M pp ] and [B pp ]» forming 

L" K ddl> ^ and [B dd ] and forms [G md ] and [G od ] * 

70. GKAM selects eigenvectors to form [<fr dh ] and assembles stiffness, mass and damping matrices 
in modal coordinates: 



t"W = 



*W ¦ 



^W = 



I 



I 



I 



where 



KDAMP = -1 (default) 
m. = modal masses 
b. = m i 2tt f . g(f.) 



k i = m i 4tt f ^ 



+ [^dd^dh] • 

KDAMP = 1 



m. = modal masses 
b.=0 



k i = (1+igtf^) 4tt 2 fjm 1 



71. APD processes the aerodynamic data cards from EDT. It adds the k points and the SA points 
to USETD making USETA. EQAER0, ECTA, BGPA, CSTMA, GPLA and SILA are updated to reflect the 
new elements. AER0 and ACPT reflect the aerodynamic parameters. SILGA is a special ml Tor 
plotting. 

74. Go to DMAP No. 81 if no plot output is requested. 

76. PLTSET transforms user input into a form used to drive the structure plotter. 

77. PRTMSG prints error messages associated with the structure plotter. 



4.3-11 (05/30/86) 



AERO RIGID FORMATS 

78. Go to DMAP No. 81 if no undeformed aerodynamic or structural element plots are requested. 

79. PL0T generates all requested undeformed aerodynamic and structural element plots. 

80. PRTMSG prints plotter data and engineering data for each undeformed aerodynamic and 
structural element plot generated. 

82. GI forms a transformation matrix [G. ] which interpolates between aerodynamic (k) and 
structural (a) degrees of freedom. 

84. AMG forms the aerodynamic matrix list [A..], the area matrix [S. ¦], and the downwash 

JJ K J 

1 2 
coefficients [D ik ] and [D- k l. 

85. Go to DMAP No. 87 if there are no user-supplied downwash coefficients. 

1 2 

86. INPUTT2 provides the user-supplied downwash factors due to extra points ([Dj e L E D j e ])- 

PARAM N0DJE must be set to enter these matrices. The downwash w. on box j due to the 
motion of an extra point, u , is given by 

Cw j} - [DJ e ? ikD^KV . 
89. AMP computes the aerodynamic matrix list related to the modal coordinates as follows: 



[W = 



an T ae 
ei T ee 






For each (m,k) pair: 



[D jh ] = [DJ h ] + ik[ D 2 h ] 



^ - ^ a f[* a1 3 



[DjV = [D] k f[G ki ] . 



[D*,] - [D^ k ] T [G„]. 



J ki 



For each group: 



and 



rn "I = [pJ l -1 rn "1 
jh J L jj J group L jh J group 

[Q ih ] - [G k1 ] T [Q kh ] 



[<W 



1* 



90. FRLG forms the dynamic load vector {P,} from the frequency response data or transient data 
using a Fourier Transform. 

93. GUST forms the loading due to gusts and adds to the direct loads. 

94. Equivalence {PHF1} to {PHF} if there are no gust loads. 



4.3-12 (05/30/86) 





MODAL AEROELASTIC RESPONSE 

95. FRRD2 solves for the modal displacements using 

[-M h( / + «„„,. + K + qq hh (k)]U h - P h W . 

96. Equivalence {UHVF} to {UHVT} and F0L to T0L if it is a frequency response formulation. 

97. Go to DMAP No. 99 if it is a frequency response formulation. 

98. IFT performs Inverse Fourier Transform of the displacements for transient formulation. 

100. M0DACC uses data from 0FREQ or 0TIME data cards to select solutions for data recovery. 

101. ADR produces aerodynamic load output (PKF) for selected points in frequency response only. 

102. VDR prepares solution set displacements (0UHV1), sorted by frequency or time, for output. 
The solution set includes mode amplitudes and extra points. 

103. Go to DMAP No. 110 if the request is for output sorted by frequency or time step. 

104. SDR3 prepares requested output sorted by solution set points. 

105. 0FP formats the table prepared by SDR3 for output sorted by solution set point and places it 
on the system output file for printing. 

106. Go to DMAP No. 110 if no X-Y plots are requested; 

107. XYTRAN prepares the input for X-Y plotting of solution set points versus time or frequency. 

108. Go to DMAP No. 110 if no plots are possible as requested. 

109. XYPL0T prepares the requested X-Y plots of solution set points versus time or frequency. 

112. Go to DMAP No. 160 if no output for physical points is requested. 

113. SDR1 recovers physical displacements (PHIP) and forces of constraint (QP) for the real 
eigenvectors associated with the modes. 

114. Equivalence {<J> dh ) to {<(> ,} if there are no extra points introduced for dynamic analysis. 

115. Go to DMAP No. 118 if no extra points are present. 

116. VEC generates a d-size partitioning vector (EVEC) for the a- and e-sets 

{u d } + {u a } + {u e } . 

117. PARTN performs partition of {<j> d u) using EVEC 

119. MPYAD recovers the displacements at the aerodynamic points (k) 

<*k> ¦ ^ka^W • 

120. UMERGE is used to expand {Q } to the ps-set. 




4.3-13 (05/30/86) 



AERO RIGID FORMATS 

121. UMERGE places U k } in its proper place in the displacement vector 

^pa < I 

( *k ) 

122. UMERGE is used to expand {Q } to the pa-set. 

123. SDR2 calculates element forces (MEF1) and stresses (MES1) and prepares eigenvectors 
(MPHIPA1) and single-point forces of constraint (MQP1) for output sorted by frequency or 
time. 

124. Go to DMAP No. 127 if it is not a frequency response formulation. 

125. SDR2 prepares load vectors for output (0PP1) sorted by frequency. 

126. SDR3 prepares requested load output sorted by point number. 

128. SDR3 prepares requested modal quantities output sorted by point number. 

129. DDRMM prepares a subset of the element forces (0EF2) and stresses (0ES2), displacement 
vectors (0UPV2), and single-point forces of constraint (0QP2) for output sorted by point 
number or element number. 

130. 0FP formats the requested physical output prepared by DDRMM and places it on the system 
output file for printing. 

131. SCAN examines the element stresses and forces calculated by DDRMM and generates scanned 
output that meets the specifications set by the user. 

132. 0FP formats the scanned output table prepared by SCAN and places it on the system output 
file for printing. 

133. Go to DMAP No. 138 if no deformed aerodynamic or structural element plots are requested. 

134. MPYAD generates vectors for use by the SDR2 module. 

135. SDR2 prepares vectors for deformed plotting. 

136. PL0T prepares all requested deformed aerodynamic and structural element plots. 

137. PRTMSG prints plotter data and engineering data for each deformed plot generated. 

139. Go to DMAP No. 160 and make normal exit if no X-Y plots are requested. 

140. XYTRAN prepares the input for physical point X-Y plots. 

141. Go to DMAP No. 143 if no plots are possible as requested. 

142. XYPL0T prepares the requested X-Y plots of displacements, forces, stresses, loads and 
single-point forces of the constraint versus frequency or time. 

144. Go to DMAP No. 160 and make normal exit if it is a transient response formulation. 

145. Go to DMAP No. 160 and make normal exit if no power spectral density functions or 
autocorrelation functions are requested. 

146. RAND0M calculates power spectral density functions (PSDF) and autocorrelation functions 
(AUT0) using the previously calculated frequency response. 

147. Go to DMAP No. 160 and make normal exit if no X-Y plots of RAND0M calculations are 
requested. 

148. XYTRAN prepares the input for requested X-Y plots of the RAND0M output. 

4.3-14 (05/30/86) 



MODAL AEROELASTIC RESPONSE 

149. Go to DMAP No. 160 and make normal exit if no plots are possible as requested. 

150. XYPL0T prepares the requested X-Y plots of autocorrelation functions and power spectral* 
density functions. 

151. Go to DMAP No. 160 and make normal exit. 

153. Print Error Message No. 2 and terminate execution. 

155. Print Error Message No. 1 and terminate execution. 

157. Print Error Message No. 4 and terminate execution. 

159. Print Error Message No. 3 and terminate execution. 



4.3-15 (05/30/86) 



AERO RIGID FORMATS 

4.3.3 Output for Modal Aeroelastic Response 

The real Eigenvalue Summary Table and real Eigenvalue Analysis Summary, as described under g 
Normal Modes Analysis (see Section 2.3.3), are automatically printed. 

The following printed output, sorted by point number or element number (S0RT2), is 
available, either as real and imaginary parts or as magnitude and phase angle (0° - 360° lead), for 
the list of frequencies or times specified by ^FREQUENCY or 0TIME (in transient formulations, these 

are real ): 

1. Displacements, velocities and accelerations for a list of PHYSICAL points (grid points 
and extra scalar points introduced for dynamic analysis) or S0LUTI0N points (points used 
in the formulation of the dynamic equation). Velocities and accelerations are not 
available for transient analysis. 

2. Nonzero components of the applied load vector and single-point forces of constraint for 
a list of PHYSICAL points. Aerodynamic forces. on selected aerodynamic elements. 

3. Stresses and forces in selected elements (ALL available only for S0RT1). 
The following printed output is available for Random Response calculations: 

1. Power spectral density function and mean deviation for the response of selected 
components for points or elements. The expected frequency of zero crossings. 

2. Autocorrelation function for the response of selected components for points or elements. 
The following plotter output is available: 

1. Undeformed plot of the structural model. 

2. Deformed shapes of the aerodynamic and structural model for selected intervals. 

3. X-Y plot of any component of displacement, velocity or acceleration of a PHYSICAL point 

or a S0LUTI0N point. 

4. X-Y plot of any component of the applied load vector or single-point force of 

constraint. 

5. X-Y plot of any stress or force component for an element. 

The following plotter output is available for Random Response calculations: 

1. X-Y plot of the power spectral density versus frequency for the response of selected 
components for points or elements. 

2. X-Y plot of the autocorrelation versus time lag for the response of selected components 

for points or elements. 



4.3-16 (05/30/86) 



MODAL AEROELASTIC RESPONSE 

The data used for preparing the X-Y plots may be punched or printed in tabuar form (see 
Volume I, Section 4.3). Also, a printed summary is prepared for each X-Y plot which includes the 
maximum and minimum values of the plotted function. 

4.3.4 Case Control Deck for Modal Aeroelastic Response 

The following items relate to subcase definition and data selection for Modal Aeroelastic 
Response: 

1. METH0D must appear above the subcase level to select an eigenvalue extraction method. 

2. At least one subcase must be defined for each unique set of direct input matrices (K2PP, 
M2PP, B2PP) or frequencies. 

3. Consecutive subcases for each set of direct input matrices or frequencies are used to 
define the loading condition - one subcase for each dynamic loading condition. 

4. Constraints must be defined above the subcase level. 

5. DL0AD must be used to define a frequency-dependent loading condition for each subcase. 
If transient loads are selected, a Fourier Transform is used to compute 
frequency-dependent loads. All loads in one run must be of the same type. 

6. FREQUENCY must be used to select one, and only one, FREQ, FREQ1, or FREQ2 card form the 
Bulk Data Deck. If TL0ADs are selected, a TSTEP must be selected. 

7. ^FREQUENCY (0TIME) may be used above the subcase level or within each subcase to select 
a subset of the solution frequencies (times) for output requests. The default is to use 
all solution frequencies (times). 

8. If Random Response calculations are desired, RAND0M must be used to select RANDPS and 
RANDTi cards from the Bulk Data Deck. Only one 0FREQUENCY and FREQUENCY card can be 
used for each set of direct input matrices. 

4.3.5 Parameters for Modal Aeroelastic Response 

The following parameters are used in Modal Aeroelastic Response: 

1. ASET0UT - optional. A positive integer value of this parameter causes the ASET output 
data block to be generated by the GP4 module. A negative integer value or suppresses 
the generation of this output data block. The default value is 0. 

2. AUT0SPC - reserved for future optional use. The default value is -1. 



4.3-17 (05/30/86) 



AERO RIGID FORMATS 

3. C0UPMASS - CPBAR, CPR0D, CPQUAD1, CPQUAD2, CPTRIA1, CPTRIA2, CPTUBE, CPQDPLT, CPTRPLT, 
CPTRB5C - optional. These parameters cause the generation of coupled mass matrices ' 
rather than lumped mass matrices for all bar elements, rod elements, and plate elements 
that include bending stiffness. 

4. GRDPNT - optional. A positive integer value of this parameter causes the Grid Point 
Weight Generator to be executed and the resulting weight and balance information to be 
printed. All fluid related masses are ignored. 

5. GUSTAER0 - optional. An integer value of +1 causes gust loads to be computed. The 
default value is -1 for no gust loads. 

6. IFTM - optional. The integer value of this parameter selects the method for the 
integration of the Inverse Fourier Transform. An integer value of specifies a 
rectangular fit; 1 specifies a trapezoidal fit; and 2 specifies a cubic spline fit to 
obtain solutions versus time for which aerodynamic forces are functions of frequency. 
The default value is 0. 

7. KDAMP - optional. An integer value of +1 causes modal damping terms to be put into the 
complex stiffness matrix for structural damping (+1 recommended for K and KE methods). 
The default value is -1. 

8. LFREQ and HFREQ - required, unless parameter LM0DES is used. The real values of these 
parameters give the cyclic frequency range (LFREQ is the lower limit and HFREQ is the 
upper limit) of the modes to be used in the modal formulation. To use this option, 
parameter LM0DES must be set to 0. 

9. LM0DES - required, unless parameters LFREQ and HFREQ are used. The integer value of 
this parameter is the number of lowest modes to be used in the modal formulation. 

10. MACH - optional. The real value of this parameter selects the closest Mach numbers to 
be used to compute aerodynamic matrices. The default value is 0.0. 

11. N0DJE - optional. A positive integer for this parameter indicates that user-supplied 
downwash matrices due to extra points are to be read from an external file via the 
INPUTT2 module in the rigid format. The default value is -1 when not needed. 

12. PI, P2, and P3 - required when using the N0DJE parameter. See Section 5.5 for a 
description of these parameters which are required by the INPUTT2 module. The default 
values for PI, P2 and P3 are 0, 11 and XXXXXXXX, respectively. 

13. Q_ - required. The real value of this parameter defines the dynamic pressure. 

4.3-18 (05/30/86) 



MODAL AEROELASTIC RESPONSE 

14- SURFACE - optional. The computations of the external surface areas for the 

two-dimensional and three-dimensional elements are activated by this parameter when they 
are generated in the EMG module. The results are multiplied by the real value of this 
parameter. See the description under the PARAM bulk data card for details. 

15. V0LUME - optional. The volume computations for the two-dimensional and 
three-dimensional elements are activated by this parameter when they are generated in 
the EMG module. The results are multiplied by the real value of this parameter. See 
the description under the PARAM bulk data card for details. 

16. MTMASS - optional. The terms of the structural mass matrix are multiplied by the real 
value of this parameter when they are generated in the EMA module. Not recommended for 
use in hydroelastic problems. 

4.3.6 Optional Diagnostic Output for FEER 

Special detailed information obtained by requesting DIAG 16 in the Executive Control Deck is 
the same as that described under Normal Modes Analysis {see Section 2.3.6). 

4.3.7 The APPEND Feature 

The APPEND feature can be used for real eigenvalue extraction in Modal Aeroelastic Response. 
See Section 2.3.7 for details. 

4.3.8 Rigid Form at Er ror Messages from Modal Aeroelastic Response 

The following fatal errors are detected by the DMAP statements in the Modal Aeroelastic 
Response rigid format. The text for each error message is given below in capital letters and is 
followed by additional explanatory material, including suggestions for remedial action. 

M0DAL AER0ELASTIC RESP0NSE ERR0R N0. 1 - MASS MATRIX REQUIRED F0R M0DAL FORMULATION. 

The mass matrix is null because either no structural elements were defined with Connection cards, 
nonstructural mass was not defined on a Property card or the density was not defined on a Material 
card. 

M0DAL AER0ELASTIC RESP0NSE ERR0R N0. 2 - EIGENVALUE EXTRACTI0N DATA REQUIRED F0R REAL EIGENVALUE 
ANALYSIS. 

Eigenvalue extraction data must be supplied on an EIGR card in the Bulk Data Deck and METH0D in the 
Case Control Deck must select an EIGR set. 

4.3-19 (05/30/86) 



AERO RIGID FORMATS 

M0DAL AER0ELASTIC RESP0NSE ERR0R N0. 3 - N0 GRID P0INT DATA IS SPECIFIED 0R N0 STRUCTURAL ELEMENTS 
HAVE BEEN DEFINED. 

No points have been defined with GRID or SP0INT cards or no structural elements have been defined 
with Connection cards. 

M0DAL AER0ELASTIC RESP0NSE ERR0R N0. 4 - REAL EIGENVALUES REQUIRED F0R M0DAL F0RMULATI0N. 
No real eigenvalues were found in the frequency range specified by the user. 



4.3-20 (05/30/86) 

-&U.S. GOVERNMENT PRINTING OFFICE: MS - S2S-849/MMO 



i L AN < flWTiY„( 1 £&!^ RCH center 



3 1176 01356 4688 





